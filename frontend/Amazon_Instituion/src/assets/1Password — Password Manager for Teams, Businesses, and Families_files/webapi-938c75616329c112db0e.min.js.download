!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="30decab3-23d4-42e6-a38e-6b33fd4d904b",e._sentryDebugIdIdentifier="sentry-dbid-30decab3-23d4-42e6-a38e-6b33fd4d904b")}catch(e){}}(),(self.webpackChunk_1password_web_ui=self.webpackChunk_1password_web_ui||[]).push([[662],{66348:function(e,t,n){n.d(t,{$2:function(){return K},FS:function(){return N},Ie:function(){return k},K1:function(){return O},KE:function(){return T},KJ:function(){return S},M3:function(){return A},NE:function(){return C},UG:function(){return H},Yo:function(){return V},Z6:function(){return B},_y:function(){return L},ge:function(){return I},iS:function(){return R},mh:function(){return _},sG:function(){return U},tm:function(){return D},wG:function(){return w},xR:function(){return F},xx:function(){return E},xz:function(){return M}});var r=n(48583),i=n(14521),s=n(79686),o=n(92706),a=n(98798),u=n(23428),c=n(89515),l=n(44715),d=n(51896),y=n(20622),p=n(20915),m=n(48426),f=n(13932),g=n(97668),h=n(80464);const v=(0,u.$y)("action/account");var C=i.AccountAttrs;const A=async(e,t)=>v("getAccountWithAttrs",(async()=>{const n=!!e.account;return((0,r.Z)(t,C.Me)?(0,y.qp)(e):Promise.resolve()).then((async()=>i.getAccountWithAttrs(e.session,t))).then((async t=>o.parseAccount(e,t))).then((async({account:t,activeUser:r})=>(r&&(0,g.nl)(e,r),e.user?P(e,t,e.user,n).then((()=>((0,l.fq)(e),t))):Promise.reject(new Error("Missing user")))))})),w=async(e,t)=>v("getEntireAccount",(async()=>A(e,[C.AccountFlags,C.Billing,C.Counts,C.Invite,C.Me,C.MeMemberships,C.Meta,C.Promotions,C.Settings,C.Tier,C.UserFlags,C.GatedFeatureTrials,...t]).then((t=>(e.nc.emit(a.notification.UniverseReloaded),t))))),S=async e=>v("loadUniverse",(async()=>w(e,[C.Groups,C.Users]))),T=S,P=async(e,t,n,o)=>v("performGetAccountChecks",(async()=>t.state===s.Account.StateActive&&(0,r.Z)([s.User.State.Active,s.User.State.PendingActivation],n.state)?(0,f.Ou)(e).then((()=>{b()})).catch((e=>{console.error("Failed to process incoming packages",e)})):n.state===s.User.State.RecoveryStarted&&o?i.signOut(e.session).catch((()=>{})).then((()=>{e.nc.emit(a.notification.RecoveryStarted)})):void 0)),b=()=>{globalThis.document&&document.dispatchEvent(new CustomEvent("B5ProcessIncomingPackagesCompleted",{bubbles:!1,cancelable:!1}))},R=async(e,t,n,i,o)=>v("performSignInAccountChecks",(async()=>{if(t.state===s.Account.StateRegistered)return G(e,i,o);if(n.state===s.User.State.VerifiedIncomplete)return Z(e,o);if(n.state===s.User.State.Registered)throw new a.errors.ClientError(a.errors.ClientErrorCode.mustVerifyEmail,"Account not verified");if(n.state===s.User.State.RecoveryStarted&&(await(0,g.PE)(e,[n]),await A(e,[C.Me])),t.state===s.Account.StateActive&&(0,r.Z)([s.User.State.Active,s.User.State.PendingActivation],n.state))return Promise.resolve();throw new Error("Unsupported account state")})),E=async(e,t,n)=>v("checkDomainAvailability",(async()=>t&&n?i.checkDomainAvailability(e.session,t,n).then((e=>e.result)).catch((async e=>a.errors.isServerError(e,a.errors.ServerErrorCode.badRequest,a.errors.HTTPStatusCode.badRequest)?Promise.resolve(!1):Promise.reject(e))):Promise.resolve(!1))),I=async(e,t)=>v("getDomain",(async()=>t?(await i.getSuggestedDomain(e.session,t)).domain:s.MY_DOMAIN)),U=async e=>v("updateAccount",(async()=>{const t=e.account;if(!t)throw new Error("Missing account");await i.updateAccount(e.session,o.accountToAPI(t)),t.attrVersion++,(0,l.e5)(e),(0,l.fq)(e)})),O=async e=>v("updateBillingSettings",(async()=>{const t=e.account;if(!t)throw new Error("Missing account");await i.updateBillingSettings(e.session,o.accountToAPI(t)),t.attrVersion++,(0,l.e5)(e),(0,l.fq)(e)})),k=async(e,t)=>v("changeDomain",(async()=>{const n=e.account;if(!n)throw new Error("Missing account");await i.changeDomain(e.session,t),n.attrVersion++,(0,l.e5)(e),(0,l.fq)(e)})),D=async e=>v("deleteAccount",(async()=>e.account?i.deleteAccount(e.session):Promise.reject(new Error("Missing account")))),M=async(e,t,n)=>{await i.verifyLockedOutAccountDeletion(e.session,t,n)},F=async(e,t,n)=>{await i.lockedOutDeleteAccount(e.session,t,n)},_=async(e,t)=>i.postImage(e.session,t),K=(e,t)=>new s.Vault({type:s.Vault.TypePersonal,name:N(e),desc:s.Vault.DefaultDescMarker,avatar:t}),N=e=>e===s.Account.Type.Individual?"Personal":"Private",V=()=>new s.Vault({type:s.Vault.TypeEveryone,name:"Shared",desc:s.Vault.DefaultDescMarker}),B=async e=>{const t=await s.crypto2.Keyset.generate(),n={objectUuid:t.uuid,data:{ePriKey:t.encryptionKeyPair.priKey,sPriKey:t.signingKeyPair.priKey},acl:[]};await(0,m.E6)(e,i.ObjectType.AdminWatchtowerKeyset,i.DataType.AdminWatchtowerKeysetPrivateKey,i.ObjectDataAccessScope.Manage,n),await(0,c.rw)(e,t.uuid,t.encryptionKeyPair.pubKey)},L=async(e,t)=>{t.pubKey||(t=await(0,d.ex)(e,t,{attrs:s.Group.Attr.PubKey,mustReload:!0}));const n=await i.getObjectDataAccessPreflight(e.session,i.ObjectType.AdminWatchtowerKeyset,i.ObjectDataAccessScope.Manage);await(0,m.eR)(e,i.ObjectType.AdminWatchtowerKeyset,i.ObjectDataAccessScope.Manage,t,[],n)},x={[s.Group.TypeRecovery]:!0,[s.Group.TypeOwners]:!0,[s.Group.TypeAdmins]:!0,[s.Group.TypeExternalAccountManagers]:!0},G=async(e,t,n=!0)=>v("setupAccount",(async()=>{const r=e.account;if(!r)return Promise.reject(new Error("Missing account"));const o=e.user;if(!o)return Promise.reject(new Error("Missing user"));const a="setupAccount";console.time(a);const u=new s.Group({name:"Recovery",type:s.Group.TypeRecovery,desc:"Can reset user passwords if account recovery is enabled."}),c=new s.Group({name:"Owners",type:s.Group.TypeOwners,desc:"Access to billing and account administration."}),l=new s.Group({name:"Administrators",type:s.Group.TypeAdmins,desc:"Administration of users, groups, and vaults."}),y=new s.Group({name:"Team Members",type:s.Group.TypeTeamMembers,desc:"All team members."}),m="Access to security reports and account activity.",f=new s.Group({name:"Security",type:s.Group.TypeSecurity,desc:t?t[m]():m}),g=new s.Group({name:"MSP Technicians",type:s.Group.TypeMSPTechnicians,desc:"Access to add, view, administer, and unlink managed companies as an external account manager."}),h=new s.Group({name:"External Account Managers",type:s.Group.TypeExternalAccountManagers,desc:"Administration of users, groups, and vaults as external account managers."}),v=[u,c,l];r.hasFeature.members&&v.push(y),r.hasFeature.members&&e.config.internalFeaturesAreEnabled&&v.push(f),r.hasFeature.managedServiceProvider&&v.push(g),r.isAccountManaged&&v.push(h),"backoffice"===r.domain&&v.push(new s.Group({name:"Backoffice Users",type:s.Group.TypeBackofficeUsers,desc:""}),new s.Group({name:"Backoffice Billing",type:s.Group.TypeBackofficeBilling,desc:""}),new s.Group({name:"Backoffice Security",type:s.Group.TypeBackofficeSecurity,desc:""}),new s.Group({name:"Backoffice Developers",type:s.Group.TypeBackofficeDevelopers,desc:""}),new s.Group({name:"Backoffice Finance",type:s.Group.TypeBackofficeFinance,desc:""}),new s.Group({name:"Backoffice Content",type:s.Group.TypeBackofficeContent,desc:""}),new s.Group({name:"Backoffice Owners",type:s.Group.TypeBackofficeOwners,desc:""}),new s.Group({name:"Backoffice Advanced",type:s.Group.TypeBackofficeAdvanced,desc:""}));const A=async(e,t,n)=>{const a=[];return e.type===s.Group.TypeRecovery||e.type===s.Group.TypeMSPTechnicians||r.isAccountManaged&&e.type!==s.Group.TypeExternalAccountManagers||a.push(e.addMembership(t,o,{role:i.GroupMembership.Role.Manager})),x[e.type]&&a.push(e.enableRecoverCapability(n)),Promise.all(a)},S=(0,d.hE)(e,u,u).then((async t=>{const n=v.slice(1);return Promise.all([A(u,t,t),...n.map((async n=>(0,d.hE)(e,n,u).then((async e=>A(n,e,t)))))])})),T=K(r.type),P=V(),b=new s.Vault({desc:s.Vault.DefaultDescMarker,name:"Generated Passwords",type:s.Vault.TypeGeneratedPasswords}),R=new s.Vault({desc:s.Vault.DefaultDescMarker,name:"System",type:s.Vault.TypeSystem}),E=!r.isAccountManaged,I=[];E&&(I.push(T),n&&I.push(b,R)),r.hasFeature.members&&I.push(P);const U=[S];for(const e of I)U.push(e.generateNewKey());return Promise.all(U).then((async()=>{const e=[];E&&(e.push(s.VaultAccess.generate(T,o,{acl:s.vaultACL.RWE|s.vaultACL.Manage}),s.VaultAccess.generate(T,u,{acl:s.vaultACL.Recover})),n&&e.push(s.VaultAccess.generate(R,o,{acl:s.vaultACL.DEFAULT_VAULT_CREATION_ACL}),s.VaultAccess.generate(R,u,{acl:s.vaultACL.Recover}),s.VaultAccess.generate(b,o,{acl:s.vaultACL.DEFAULT_VAULT_CREATION_ACL}),s.VaultAccess.generate(b,u,{acl:s.vaultACL.Recover})));const t=[];return r.hasFeature.members&&(t.push(s.VaultAccess.generate(P,c,{acl:s.vaultACL.Manage}),s.VaultAccess.generate(P,l,{acl:s.vaultACL.Manage}),s.VaultAccess.generate(P,u,{acl:s.vaultACL.Recover}),s.VaultAccess.generate(P,y,{acl:s.vaultACL.ALL_READ|s.vaultACL.ALL_WRITE|s.vaultACL.ALL_EXPORT})),r.isAccountManaged&&t.push(s.VaultAccess.generate(P,h,{acl:s.vaultACL.Manage}))),Promise.all([...e,...t])})).then((async t=>j(e,I,t,v))).then((async()=>{if(e.account?.hasFeature.managedServiceProvider)return(0,p.Z2)(e)})).then((async()=>{if(e.config.internalFeaturesAreEnabled){if(!c.activeKeysetUuid)throw new Error("Missing owners group");return B(e)}})).then((async()=>(console.timeEnd(a),w(e,[C.Groups])))).then((async()=>Promise.resolve(void 0)))})),Z=async(e,t=!0)=>v("setupUser",(async()=>{const n=e.user;if(!n)return Promise.reject(new Error("Missing user"));const r=e.account;if(!r)return Promise.reject(new Error("Missing account"));const i=K(r.type),o=(0,d.Aj)(e,{attrs:s.Group.Attr.PubKey}),a=i.generateNewKey();return Promise.all([o,a]).then((async e=>{const t=e[0],r=[s.VaultAccess.generate(i,n,{acl:s.vaultACL.RWE|s.vaultACL.Manage}),s.VaultAccess.generate(i,t,{acl:s.vaultACL.Recover})];return Promise.all(r)})).then((async t=>Y(e,i,t))).then((async()=>{if(t)return Promise.all([(0,h.AM)(e),(0,h.j)(e)])})).then((async()=>r.hasFeature.accountTransfer?A(e,[C.UserFlags]):void 0)).then((()=>{n.state=s.User.State.PendingActivation}))})),j=async(e,t,n,r)=>v("activateAccount",(async()=>i.activateAccount(e.session,o.vaultsToAPI(t,n),r.map((e=>o.groupToAPI(e,s.Group.Attr.PubKey|s.Group.Attr.Memberships)))))),Y=async(e,t,n)=>{await i.joinAccount(e.session,o.vaultToAPI(t,n))},H=async e=>i.getAccountUserCounts(e.session).then((e=>({activeMembers:e.activeMembers,activeGuests:e.activeGuests,billedGuests:e.billedGuests,billedMembers:e.billedMembers})))},18292:function(e,t,n){n.d(t,{X:function(){return i}});var r=n(14521);const i=async e=>await r.getAccountOverview(e.session)},89515:function(e,t,n){n.d(t,{E0:function(){return C},MO:function(){return h},TO:function(){return w},Tb:function(){return v},lN:function(){return f},rw:function(){return g},u6:function(){return m},vp:function(){return A}});var r=n(87347),i=n(14521),s=n(79686),o=n(85943),a=n(45823),u=n(98798),c=n(16586),l=n(18292),d=n(48426),y=n(31385),p=n(43972);const m=e=>{let t=0,n=0,i=0,o=0,a=0,c=0,l=0,d=0,y=0;return(0,r.Z)(e).forEach((e=>{e&&(i=e.reusedPassword?i+1:i,t=e.compromisedDomain?t+1:t,n=e.vulnerablePassword?n+1:n,e.passwordStrength&&(o=(0,u.inBetween)(e.passwordStrength,0,s.PASSWORD_STRENGTH.WEAK)?o+1:o),a=e.unsecuredWebsite?a+1:a,c=e.inactiveTwoFactor?c+1:c,l=e.expiringSoon?l+1:l,l=e.expired?l+1:l,d=e.itemsInWrongAccount?d+1:d,y+=1)})),{cw:t,vp:n,rp:i,wp:o,uw:a,i2fa:c,exp:l,tot:y,wa:d}},f=async(e,t,n,r,a)=>{if(!e.account?.hasFeature.keepAdminWatchtowerReports)return;const d=await(0,l.X)(e),f=d.watchtowerReportVersion&&d.watchtowerReportVersion===s.WatchtowerStructureVersion&&d.vaults?d.vaults.filter((e=>e.watchtowerReportNeedsUpdating)):[];if(0===f.length)return void a?.(f.length);let g;try{g=await i.getWatchtowerPubkey(e.session)}catch(e){if((0,c.isServerError)(e,c.ServerErrorCode.resourceNotFound,c.HTTPStatusCode.notFound))return;throw e}const h=e.account.hasFeature.itemsInWrongAccountPolicy,v=s.Account.getAllowedWatchtowerDomains(e.account);await(0,y.jD)();const C=async a=>{const c=await n(e,a);if(!c)return void console.warn("Unable to find vault with uuid:",a);const l=["U","E"];if((0,u.shouldReportForPrivateVaults)(e.account)&&l.push("P"),l.includes(c.type)){const n=await r(e,c);if(0===n.length)return;const a=await(0,p.ys)(n,!0,h,v),l=m(a),d=await(0,o.encrypt)(g.pubKey,(0,u.json2ab)(l)),y={version:s.WatchtowerStructureVersion,vaultContentVersion:c.contentVersion,encData:d};await i.uploadWatchtowerReport(e.session,c.uuid,y),t&&await(0,u.wait)(1e3)}};for(const e of f)await C(e.uuid),a?.(f.length);(0,y.$f)()},g=async(e,t,n)=>i.createWatchtowerPubkey(e.session,t,n),h=async e=>i.getWatchtowerPubkey(e.session),v=async(e,t,n,r)=>{const o=await C(e,t);if(n?.(o.reports.length),0===o.reports.length)return{reports:[]};const u=await(0,d.$0)(e,i.ObjectType.AdminWatchtowerKeyset),c=u.data.find((e=>e.objectType===i.ObjectType.AdminWatchtowerKeyset));if(!c?.data)throw new Error("Admin watchtower keyset oda does not exist.");const l=await(0,d.XE)(e,u,c.objectUuid,s.AdminWatchtowerKeysetObjectDataValue);return{reports:await(0,a.T)(e,o.reports,l,r)}},C=async(e,t)=>{const n=[];let r;do{const s=await i.getWatchtowerReport(e.session,t,r);n.push(...s.reports),r=s.nextStartUuid}while(r);return{reports:n}},A=async(e,t)=>i.getWatchtowerStats(e.session,t),w=(e,t)=>{if(t<=0||e<=0)return 0;const n=Math.floor(e/t*100);return Math.min(Math.max(n,1),100)}},76936:function(e,t,n){n.d(t,{Bh:function(){return L},CH:function(){return _},CV:function(){return O},GL:function(){return x},MA:function(){return N},Mg:function(){return f},Mr:function(){return V},OV:function(){return S},PP:function(){return B},Q2:function(){return p},Rw:function(){return K},T3:function(){return C},U:function(){return I},U8:function(){return R},UD:function(){return U},Z0:function(){return w},ZK:function(){return g},ZQ:function(){return F},aw:function(){return M},b4:function(){return v},dM:function(){return h},e0:function(){return D},f1:function(){return T},fE:function(){return E},j4:function(){return m},nO:function(){return b},pI:function(){return d},rw:function(){return P},sA:function(){return y},s_:function(){return k}});var r=n(53516),i=n(14521),s=n(92706),o=n(98798),a=n(23428),u=n(66348),c=n(44715);const l=(0,a.$y)("action/billing"),d=async e=>l("getSubscription",(async()=>{const t=e.account;return t?i.billing.getSubscription(e.session).then((e=>{const n=s.billing.subscriptionDetailAttrsFromAPI(e);return t.subscription={...t.subscription,...n},t.subscription})):Promise.reject(new Error("Missing account"))})),y=async(e,t=0,n=20)=>i.billing.getInvoices(e.session,t,n),p=async(e,t)=>i.billing.getInvoiceDetails(e.session,t),m=async(e,t)=>i.billing.getInvoicePdf(e.session,t),f=async(e,t,n,r,s)=>l("updateSubscription",(async()=>{const o=e.account;if(!o)return Promise.reject(new Error("Missing account"));const a=t||o.subscription.tier,l=n||o.subscription.plan;if(!a)return Promise.reject(new Error("Missing tier"));if(!l)return Promise.reject(new Error("Missing plan"));const y={frequency:l.frequency,tierName:a.name,taxNumber:"",isTaxExempt:!1,country:"",provinceOrState:"",zip:""};return r&&(y.taxNumber=r.taxNumber,y.isTaxExempt=r.isTaxExempt),s&&(y.country=s.country,y.provinceOrState=s.provinceOrState,y.zip=s.zip),i.billing.updateStripeSubscription(e.session,y).then((async()=>(o.subscription={...o.subscription,tier:a,plan:l},(0,u.M3)(e,[])))).then((async()=>d(e))).then((t=>((0,c.fq)(e),t)))})),g=async(e,t,n)=>l("getValidPromotionFromCode",(async()=>o.isValidPromoCodeFormat(t)?i.billing.getValidPromotionFromCode(e.session,t,n):Promise.reject(new Error("Promo code format is invalid.")))),h=async(e,t)=>l("getIsValidPurchaseOrderToken",(async()=>o.isValidPurchaseOrderTokenFormat(t)?i.billing.getIsValidPurchaseOrderToken(e.session,t):Promise.reject(new Error("Purchase order token format is invalid.")))),v=async(e,t)=>l("getIsValidStripePurchaseOrderToken",(async()=>o.isValidPurchaseOrderTokenFormat(t)?i.billing.getIsValidStripePurchaseOrderToken(e.session,t):Promise.reject(new Error("Stripe purchase order token format is invalid.")))),C=async(e,t)=>i.billing.requestInvoiceEmail(e.session,t),A=e=>(0,r.Z)(e.cards,(e=>e.isDefault)),w=async(e,t)=>{await i.billing.addCard(e.session,t);const n=await d(e),r=n.cards[0];return void 0===r||A(n)?n:R(e,r)},S=async(e,t,n)=>i.billing.updateCard(e.session,t,n).then((async()=>d(e))),T=async(e,t)=>{let n=i.billing.deleteCard;o.isPaymentMethod(t.stripeCardUid)&&(n=i.billing.deletePaymentMethod),await n(e.session,t.stripeCardUid);const r=await d(e),s=r.cards[0];return void 0===s||A(r)?r:R(e,s)},P=async(e,t)=>(await i.billing.deletePendingPaymentMethod(e.session,t.setupIntentUid),await d(e)),b=async(e,t)=>o.isPaymentMethod(t)?i.billing.getPaymentMethod(e.session,t):i.billing.getCard(e.session,t),R=async(e,t)=>o.isPaymentMethod(t.stripeCardUid)?E(e,t.stripeCardUid):i.billing.changeDefaultCard(e.session,t).then((async()=>d(e))),E=async(e,t)=>i.billing.changeDefaultPaymentMethod(e.session,t).then((async()=>d(e))),I=async e=>l("getAvailableTiers",(async()=>{const t=e.account;return t?i.billing.getAvailableTiers(e.session).then((e=>{const n=s.billing.parseAvailableTiersFromAPI(e,t.subscription);return t.subscription={...t.subscription,availableTiers:n},t.subscription})):Promise.reject(new Error("Missing account"))})),U=async e=>i.billing.getUpgradeTiers(e.session).then((e=>s.billing.parseTiersFromAPI(e))).catch((e=>{throw console.error("getUpgradeTiers failed:",e),e})),O=async e=>i.billing.getDefaultTiers(e.session).then((e=>s.billing.parseTiersFromAPI(e))).catch((e=>{throw console.error("getDefaultTiers failed:",e),e})),k=async(e,t)=>l("subscribeWithStripe",(async()=>{const n=e.account;return n?i.billing.subscribeWithStripe(e.session,{setupIntentUiD:t.token,tierName:t.tier?t.tier.name:"",frequency:t.plan?t.plan.frequency:"",country:t.country,province:t.province,postalCode:t.postalCode,taxNumber:t.taxNumber,isTaxExempt:t.isTaxExempt,giftCardCode:t.giftCardCode}).then((async()=>(n.subscription={...n.subscription,tier:t.tier},(0,u.M3)(e,[u.NE.Billing])))).then((async()=>d(e))).then((t=>((0,c.fq)(e),t))):Promise.reject(new Error("Missing account"))})),D=async e=>i.billing.cancelStripeSubscription(e.session).then((async()=>(0,u.M3)(e,[u.NE.Billing]))).then((async()=>d(e))).then((t=>((0,c.fq)(e),t))),M=async e=>i.billing.endTrialPeriod(e.session),F=async(e,t,n,r,s)=>i.billing.getTaxAdvice(e.session,{country:n,province:r,postalCode:s,price:t}).then((e=>({countryCode:e.countryCode.toLowerCase(),provinceOrStateCode:e.provinceCode?e.provinceCode.toLowerCase():"",postalCode:e.postalCode,taxRate:e.taxRate,taxRateString:e.taxRateString,effectiveTaxRate:e.effectiveTaxRate,effectiveTaxRateString:e.effectiveTaxRateString,taxName:e.taxName,isTaxed:0===e.originalPrice&&e.taxRate>0||e.totalTax>0,totalPrice:e.totalPrice,originalPrice:e.originalPrice,useTaxData:e.useTaxData}))),_=async(e,t)=>i.billing.createPlayStoreSubscription(e.session,t),K=async({session:e},t)=>i.billing.createAppleSubscription(e,t),N=async(e,t)=>(await i.billing.addOrUpdateAddress(e.session,t),d(e)),V=async(e,t)=>{await i.billing.activateStripeBilling(e.session,t)},B=async e=>i.billing.getBillingStats(e.session).then((e=>({activeMembers:e.activeMembers,activeGuests:e.activeGuests,billedGuests:e.billedGuests,billedMembers:e.billedMembers}))),L=async(e,t)=>{await i.billing.linkAccountToPartner(e.session,t)},x=async e=>i.billing.getRemainingAmount(e.session).then((e=>({remainingAmount:e.remainingAmount})))},69258:function(e,t,n){n.r(t),n.d(t,{createOrUpdateBrexAccess:function(){return l},deleteBrexItemByUuid:function(){return d},findBrexCredentials:function(){return a},findBrexItemByRefreshToken:function(){return u},findBrexItemByUuid:function(){return c},getBrexRedirectUri:function(){return y},getOrCreateSystemVault:function(){return o}});var r=n(79686),i=n(80464),s=n(24683);const o=async e=>await(0,i.ro)(e)||await(0,i.j)(e),a=e=>{const t=e.details.sections?.find((e=>"brex"===e.name)),n=t?.fields?.find((e=>"refreshToken"===e.n))?.v,r=t?.fields?.find((e=>"accountId"===e.n))?.v;if(!n||"string"!=typeof n)throw new Error("Brex Integration Item is malformed: missing refreshToken");if(!r||"string"!=typeof r)throw new Error("Brex Integration Item is malformed: missing accountId");return{refreshToken:n,accountId:r}},u=(e,t)=>e.find((e=>"800"===e.templateUuid&&e.state===r.VaultItem.ItemState.Active&&"brex"===e.overview.integration&&e.details.sections?.find((e=>"brex"===e.name&&e.fields?.some((e=>"refreshToken"===e.n&&e.v===t)))))),c=(e,t)=>e.find((e=>"brex"===e.overview.integration&&e.uuid===t)),l=async(e,t,n,i)=>{const a=await o(e),c=await(0,s.L)(e,a),l=i||u(c,n);let d;return d=l?((e,t)=>{const n=e.details.sections?.find((e=>"brex"===e.name)),r=n?.fields?.find((e=>"refreshToken"===e.n));if(!r)throw new Error("Expected refresh token in existing Brex item");return r.v=t,e.updatedAt=new Date,e})(l,n):((e,t,n)=>{const i=new r.VaultItem(e);return i.overview.integration="brex",i.details.sections=[{name:"brex",title:"brex",fields:[{k:"string",n:"accountId",t:"accountId",v:t},{k:"string",n:"refreshToken",t:"refreshToken",v:n}]}],i.templateUuid="800",i})(a,t,n),await(0,s.u7)(e,[d],a)},d=async(e,t)=>{const n=await(0,i.ro)(e);if(!n)throw new Error("The system vault was expected but missing during Brex deletion");const o=await(0,s.L)(e,n),a=c(o,t);if(!a)throw new Error("The Brex record was expected but missing during Brex deletion");a.state=r.VaultItem.ItemState.Deleted;const u=await(0,s.u7)(e,[a],n);if(u.failedItems[t])throw new Error("The Brex record was unable to be deleted");return u},y=e=>`https://${r.MY_DOMAIN}.${e.server}/api/v1/brex/redirect`},44715:function(e,t,n){n.d(t,{_y:function(){return Z},fq:function(){return W},e5:function(){return H},WF:function(){return $}});var r=n(19559),i=n(64489),s=n(48987),o=n(31609),a=n(93640),u=n(14521),c=n(76515),l=n(79686),d=n(98798),y=n(61670),p=n(35914),m=n(20622),f=n(69243),g=n(79795);const h=f.readonly(f.type({account:f.string,user:f.string,device:f.string,session:f.string}),"ServerNotification");class v{constructor(e,t){this.connect=e=>{e?(console.log("Connecting to "+e),this.websocket=new WebSocket(e),this._closing=!1,this.websocket.addEventListener("open",(()=>{console.log("Connected to "+e),void 0===this._disconnected||this._disconnected&&Date.now()-this._disconnected>this._notifierReconnectJitter?this.connectHandler():console.log("Reconnection succeeded within range. Skipping sync."),this._disconnected=void 0})),this.websocket.addEventListener("close",(()=>{if(console.log("Notifier connection '"+e+"' closed"),this.websocket=void 0,!this._closing){this._notifierReconnectDelay*=1.3;let t=this._notifierReconnectDelay;this._disconnected||(this._disconnected=Date.now(),t+=(0,g.v_)(0,this._notifierReconnectJitter)),console.log(`Reconnecting to notifier in ${t}ms`),setTimeout((()=>this.connect(e)),t)}})),this.websocket.addEventListener("message",(e=>{this._notifierReconnectDelay=1e3,this.eventHandler(e)}))):console.warn("Notifier not available")},this.disconnect=()=>{this._closing=!0,this.websocket?.close(),this.websocket=void 0},this.eventHandler=e,this.connectHandler=t,this._notifierReconnectDelay=1e3,this._notifierReconnectJitter=15e3,this._closing=!1}}var C,A=n(20806),w=n(55525),S=n(39722),T=n(9662),P=n(98095),b=n(74150);const R=(0,n(23428).$y)("action/Session"),E="v1",I=(e,t,n)=>{const r=[`✅ ${e.method} ${e.url}`,`Session: ${e.sessionUuid}`,`Request: ${e.requestId instanceof p.LoggableString?e.requestId.str:e.requestId}`,`Time: ${Math.round(t-e.start)} ms`,"number"==typeof n&&`Bytes: ${n}`];console.log(r.filter((e=>"string"==typeof e)).join("\n"))},U=(e,t,n)=>{const r=[`❌ (${n}) ${e.method} ${e.url}`,`Session: ${e.sessionUuid}`,`Request: ${e.requestId instanceof p.LoggableString?e.requestId.str:e.requestId}`,`Time: ${Math.round(t-e.start)} ms`];console.log(r.join("\n"))};class O{constructor(e,t,n,i={}){this.setOpUserAgent=async e=>{await(0,b.getBrowserInfo)(navigator.userAgent).then((t=>this._opuaStr=d.getOpUserAgentString(e,t)))},this.clearSessionKey=()=>{this._sessionKey=void 0},this.refreshSession=()=>{if(!this.isSignedIn)return;const e=Date.now()-this._lastSessionExtension;e>21e5?this.nc.emit(d.notification.SessionExpired):e>6e5&&(u.extendSession(this).catch((e=>{})),this._lastSessionExtension=Date.now())},this.setSessionUuid=e=>{this._sessionUuid=e},this.setLanguage=e=>{(0,r.Z)(this._options,{headers:{"Accept-Language":e}})},this.importSessionKey=async e=>R("importSessionKey",(async()=>{const t=l.createSymmetricKey(this._sessionUuid);return t.importRawKey(l.JWK_ALG_A256GCM,e).then((async()=>(this._sessionKey=t,t.jwk?(this._sessionHmac=C.createSessionHmac(t.jwk.k),Promise.resolve(void 0)):Promise.reject(new Error("Missing JWK")))))})),this.importAdditionalRestoreContext=e=>{this._additionalRestoreContext=e},this.importAuth=e=>{this._auth=e},this.getAdditionalRestoreContext=()=>{const e=this._additionalRestoreContext;if(this._additionalRestoreContext=void 0,void 0===e)throw new Error("Missing context restore key");return e},this.createMacHeaderValueForRequest=async(e,t)=>{if(!this._sessionHmac)throw new Error("Missing session HMAC");if(!this._sessionUuid)throw new Error("Missing session ID");if(!this.requestId)throw new Error("Missing request ID");const n=this.requestId++,r=C.getMacMessage(this._sessionUuid,e,t,n);return[await C.createMacHeaderValue(r,n,this._sessionHmac),n]},this.request=async e=>{const{encrypted:t,method:n,url:i,body:s,options:o,name:a}=e,u="/"===i[0]?`https://${this._host}${i}`:i,c=new URL(u).host,l=`accounts.${d.getServerDomainFromAccountDomain(this._host)}`,y=c===this._host||c===l;let m,f=(0,r.Z)({},this._options,o);const g=f.headers||{};if(y){if(g["OP-User-Agent"]=this._opuaStr||d.getOpUserAgentString(this._opua,await(0,b.getBrowserInfo)(navigator.userAgent)),this._sessionUuid&&(g["X-AgileBits-Session-ID"]=this._sessionUuid,this._sessionKey)){const[e,t]=await this.createMacHeaderValueForRequest(n,u);m=t,g["X-AgileBits-MAC"]=e,this.nc.emit(d.notification.SessionRequestIdChanged)}f={...f,headers:g}}let h=s;if(t&&s){if(!this._sessionKey)throw new Error("Missing session key");const e=(0,P.U)(s,f.dataType);e&&(h=await this._sessionKey.encrypt(e),f.dataType="json")}m||(m=(0,p.assertLogSafe)(d.generateRandomID(8)));const v=f.responseType??"json",C=e.decryptResponse??("json"===v&&t?"mustDecrypt":"dontDecrypt"),A={name:a,method:n,url:i,sessionUuid:this._sessionUuid||"[none]",requestId:m,start:performance.now(),responseType:v,decryptResponse:C};return(e=>{const t=[`⬆️ ${e.method} ${e.url}`,`Session: ${e.sessionUuid}`,`Request: ${e.requestId instanceof p.LoggableString?e.requestId.str:e.requestId}`];console.log(t.join("\n"))})(A),(0,P.W)(n,u,h,f).then(M(A,this._sessionKey,(()=>{this.isSignedIn&&this.nc.emit(d.notification.SessionExpired)})),V(A))},this.encrypt=async e=>R("encrypt",(async()=>this._sessionKey?this._sessionKey.encrypt(d.json2ab(e)):Promise.reject(new Error("Missing session key")))),this._startAuth=async(e,t)=>{if(!d.config.device)throw new Error("Missing device identifier");if(!e.secretKey)throw new Error("Missing Secret Key");this._sessionKey&&console.warn("SessionKey already exist, will reset sessionKey and sessionUuid");const n=e.secretKey,r=d.config.device;this.requestId=0,this._sessionHmac=void 0,this.setSessionUuid(void 0),this._sessionKey=void 0;const i={email:e.email,skFormat:n.format.toString(),skid:n.id,deviceUuid:r.uuid,userUuid:e.uuid},s=await u.startAuth(this,i);if(s.newHost)return{type:"domain_changed",newHost:s.newHost};if(s.newEmail)return{type:"email_changed",newEmail:s.newEmail};if("device-not-registered"===s.status){this.setSessionUuid(s.sessionID),await u.addDevice(this,r);const t={email:e.email,skFormat:n.format.toString(),skid:n.id,deviceUuid:r.uuid,userUuid:e.uuid},i=await u.startAuth(this,t);return this._handleStartAuthResponse(i,e)}if("device-deleted"===s.status){if(t){this.setSessionUuid(s.sessionID),await u.reauthorizeDevice(this,r.uuid);const t={email:e.email,skFormat:n.format.toString(),skid:n.id,deviceUuid:r.uuid,userUuid:e.uuid},i=await u.startAuth(this,t);return this._handleStartAuthResponse(i,e)}throw new d.errors.ClientError(d.errors.ClientErrorCode.deviceDeleted,"This device has been deauthorized. Sign in again to reauthorize it.")}return this._handleStartAuthResponse(s,e)},this._handleStartAuthResponse=async(e,t)=>{if(!e.accountKeyFormat)throw new Error("Invalid response, missing accountKeyFormat");if(!e.accountKeyUuid)throw new Error("Invalid response, missing accountKeyUuid");if(!e.sessionID)throw new Error("Invalid response, missing sessionID");if(!e.userAuth)throw new Error("Invalid response, missing userAuth");if(!t.secretKey)throw new d.errors.SecretKeyMissingError(e.accountKeyUuid);if(t.secretKey.id!==e.accountKeyUuid||t.secretKey.format!==e.accountKeyFormat)throw new d.errors.SecretKeyIdOrFormatMismatchedError(e.accountKeyUuid,t.secretKey.id,e.accountKeyFormat,t.secretKey.format.toString());return{type:"auth_success",secretKey:t.secretKey,sessionUuid:e.sessionID,authParams:e.userAuth}},this._performSrpExchange=async(e,t,n)=>{try{if(!this._sessionUuid)throw new Error("Missing session ID");const r=L(t,n),i=await(await c.SrpX.fromHex(e.srpX)).beginAuth(c.SrpMethod.fromString(e.params.method).group,(0,d.base64urlToBytes)(e.params.salt),r),s=await u.postAuth(this,i.bigAhex),o=await i.recieveBigBhex(s.userB),a=await u.confirmKeyAuth(this,o.clientHash);return(await o.recieveServerHash(a.serverVerifyHash)).rawKey}catch(e){if(d.errors.isServerError(e,d.errors.ServerErrorCode.authenticationRequired,d.errors.HTTPStatusCode.unauthorized))throw new d.errors.ClientError(d.errors.ClientErrorCode.invalidEmailOrPassword,"Invalid email or password");throw e}},this.initialize=async e=>{this._isVerified=!0,this.setSessionUuid(e.sessionUuid),this._serverConfig=e.serverConfig,this.requestId=e.requestId,this._auth=e.auth,await this.importSessionKey(e.rawSessionKey)},this.signin=async(e,t,n)=>{this._isVerified=!1;const r=await this._startAuth(e,t);if("auth_success"!==r.type)return r;if(this.setSessionUuid(r.sessionUuid),e.secretKey=r.secretKey,n)this._auth={srpX:n,params:r.authParams};else{if(!e.password)throw new Error("Missing password or srpX");this._auth=await l.Auth.generateWithParams({email:e.email,password:e.password,secretKey:e.secretKey},r.authParams)}this.requestId=1;const i=await this._performSrpExchange(this._auth,e.secretKey.id,e.email);return await this.importSessionKey(i),this.complete(e)},this.signInWithCredentialBundle=async(e,t,n,r,i)=>{this._isVerified=!1,this._auth={srpX:t.exportHex(),params:e},this.requestId=1;const s=await this._performSrpExchange(this._auth,r,i);return await this.importSessionKey(s),this.complete(void 0,n)},this.complete=async(e,t)=>{if(!this._sessionUuid)return Promise.reject(new Error("Missing session ID"));const n={client:d.config.clientDescriptor,signInToken:t};d.config.device.name&&(n.device=d.config.device);try{const t=await u.completeAuth(this,n);return this._serverConfig=t,this._ssoMigrationGracePeriod=t.ssoMigrationGracePeriod,e&&t.userUuid&&(e.uuid=t.userUuid),t.mfa?{type:"mfa_required",details:t.mfa}:(this._isVerified=!0,{type:"verified_session",session:this})}catch(e){throw this._isVerified=!1,e}},this.verifyOidc=async(e,t,n)=>{const r=await u.verifyOidc(this,e,t,n,void 0);return this.setSessionUuid(r.user.sessionUuid),r},this.verifyPasskey=async(e,t,n,r)=>{const i=await u.verifyPasskey(this,e,t,n,r);return this.setSessionUuid(i.user.sessionUuid),i},this.registerWebauthnCredential=async()=>u.registerWebauthnCredential(this),this.verifyWebauthnCredentialAttestation=async(e,t)=>u.verifyWebauthnCredentialAttestation(this,e,t),this.verifyMfa=async e=>R("verifyMfa",(async()=>{if(!this._sessionUuid)return Promise.reject(new Error("Missing session ID"));const t={sessionId:this._sessionUuid,client:d.config.clientDescriptor};switch(e.type){case"dSecret":t.dsecret={dshmac:e.dshmac};break;case"dSecretProxy":t.dsecretProxy={deviceUuid:e.deviceUuid,dshmac:e.dshmac};break;case"totp":t.totp={code:e.code};break;case"email":t.code={code:e.code};break;case"webAuthn":t.webAuthn=e.data;break;case"duo":t.duo={sigResponse:e.sigResponse};break;case"duov4":t.duov4={code:e.code}}return u.verifyMfa(this,t).then((async e=>(this._isVerified=!0,this._ssoMigrationGracePeriod=e.ssoMigrationGracePeriod,Promise.resolve(e)))).catch((async e=>(this._isVerified=!1,d.errors.isServerError(e,d.errors.ServerErrorCode.authenticationRequired,d.errors.HTTPStatusCode.unauthorized)?Promise.reject(new d.errors.ClientError(d.errors.ClientErrorCode.invalidMFA,"MFA authentication failed")):Promise.reject(e))))})),this.enableMfaWithAuth=async e=>R("enableMfaWithAuth",(async()=>{if(!this._sessionUuid)throw new Error("Missing session ID");const t={sessionId:this._sessionUuid,client:d.config.clientDescriptor,mfa:e};try{const e=await u.enableMfaWithAuth(this,t);return this._isVerified=!0,e}catch(e){if(this._isVerified=!1,d.errors.isServerError(e,d.errors.ServerErrorCode.badRequest,d.errors.HTTPStatusCode.badRequest))throw new d.errors.ClientError(d.errors.ClientErrorCode.invalidMFA,"MFA authentication failed");throw e}})),this._host=e,this.nc=new d.events.EventEmitter,this._onRequestIdChange=i.onRequestIdChange,this._options={dataType:"json",responseType:"json",cache:!1,attempts:1,timeout:3e4},this._isVerified=!1,this._requestId=0,this._sessionHmac=void 0,this.setSessionUuid(void 0),this._sessionKey=void 0,this._lastSessionExtension=Date.now(),this.setLanguage(t),this._opuaStr=void 0,this._opua=n,this.setOpUserAgent(n)}get auth(){return this._auth}get requestId(){return this._requestId}set requestId(e){this._requestId=e,this._sessionUuid&&this._onRequestIdChange?.(e,this._sessionUuid)}get sessionUuid(){return this._sessionUuid||""}get sessionKey(){return this._sessionKey}get serverConfig(){return this._serverConfig}get ssoMigrationGracePeriod(){return this._ssoMigrationGracePeriod}get isSignedIn(){return!!this._sessionKey&&this._isVerified}}C=O,O.createSessionHmac=e=>d.deriveHmacSha256(e,"He never wears a Mac, in the pouring rain. Very strange."),O.getMacMessage=(e,t,n,r)=>{const i=new URL(n);return[e,t.toUpperCase(),`${i.hostname}/${(0,w.Z)(i.pathname,"/")}?${(0,w.Z)(i.search,"?")}`,E,r].join("|")},O.createMacHeaderValue=async(e,t,n)=>{const r=new Uint8Array(S.codec.bytes.fromBits(n.encrypt(e))),i=d.bytesToBase64url(r.subarray(0,12));return[E,t,i].join("|")};const k=f.type({reason:f.string}),D=f.type({errorCode:f.number,errorMessage:f.string}),M=(e,t,n)=>async r=>{const i=F(r.headers.get("Proxy-Status"));return i?i.error?K(e,n,r):_(e,t,r):r.status>=200&&r.status<300?_(e,t,r):K(e,n,r)},F=e=>{if(!e)return;const t=(0,T.parseList)(e).map((([e,t])=>({svc:e.toString(),params:t}))).find((({svc:e})=>"B5"===e));return t?{error:t.params.get("error")?.toString()}:void 0},_=async(e,t,n)=>{if("json"!==e.responseType)return I(e,performance.now()),n;const r=n.clone(),i=await N(e,n),s=performance.now();if("mustDecrypt"!==e.decryptResponse&&"mustDecryptExceptUndefined"!==e.decryptResponse||(t?("mustDecryptExceptUndefined"===e.decryptResponse&&!d.withDefaultUndefined(d.crypto.JweB).is(i)||"mustDecrypt"===e.decryptResponse&&!d.crypto.JweB.is(i))&&B(p.L`handleRequestSuccess`,p.L`Response should be decrypted, but the response body is not a JweB token`,e):B(p.L`handleRequestSuccess`,p.L`Response should be decrypted but session is missing`,e)),t&&d.crypto.JweB.is(i)){const r=await t.decrypt(i).catch((t=>{throw console.error("Failed to decrypt response",t),B(p.L`handleRequestSuccess`,p.L`Failed to decrypt response`,e),t}));return"dontDecrypt"===e.decryptResponse&&B(p.L`handleRequestSuccess`,p.L`Response was decrypted implicitly`,e),I(e,s,r.byteLength),new Response(r,n)}return I(e,s),r},K=async(e,t,n)=>{let r;U(e,performance.now(),n.status);const i=n.headers.get("Content-Type");if("text/plain; charset=utf-8"!==i){const t=p.L`Unexpected content type for ${(0,p.assertLogSafeNum)(n.status)} response: ${i?(0,p.assertLogSafe)(i):p.L``}`;throw console.error(t),B(p.L`handleRequestError`,t,e),new d.errors.ServerError(n.status)}try{const e=await n.text();try{r=JSON.parse(e)}catch{r=e}}catch(t){const r=p.L`Failed to read ${(0,p.assertLogSafeNum)(n.status)} response body as text`;throw console.error(r,t),B(p.L`handleRequestError`,r,e),new d.errors.ServerError(n.status)}const s=((e,t,r)=>{if(e===d.errors.HTTPStatusCode.tooManyRequests){const e=(i="X-Rate-Limit-Retry-In",n.headers.get(i)),t=e?Number.parseInt(e,10):void 0,r=new d.errors.ServerError(d.errors.HTTPStatusCode.tooManyRequests);return r.waitLength=t,r}var i;return e===d.errors.HTTPStatusCode.deprecatedClient?new d.errors.ServerError(e,d.errors.ServerErrorReason.deprecated):D.is(t)?new d.errors.LegacyServerError(t.errorCode,t.errorMessage):k.is(t)?new d.errors.ServerError(e,t.reason):"string"==typeof t&&t.length>0?new d.errors.ServerError(e,t):new d.errors.ServerError(e)})(n.status,r);throw d.errors.isServerError(s,d.errors.ServerErrorCode.authenticationRequired,d.errors.HTTPStatusCode.unauthorized)&&t(),s},N=async(e,t)=>{try{const e=await t.text();if(""===e)return;return JSON.parse(e)}catch(t){const n=p.L`Failed to read response as "${(0,p.assertLogSafe)(e.responseType)}"`;throw console.error(n,t),B(p.L`readResponseBody`,n,e),new d.errors.ClientError(d.errors.ClientErrorCode.unknownError,n.str)}},V=e=>t=>{if(d.errors.isClientError(t,d.errors.ClientErrorCode.serverRequestTimedOut))throw U(e,performance.now(),"timeout"),t;U(e,performance.now(),"no status"),console.error("Unexpected fetch error:",t);const n=p.L`[redacted error message]`;throw B(p.L`handleFetchError`,p.L`Unexpected fetch error: ${n}`,e),new d.errors.ClientError(d.errors.ClientErrorCode.unexpectedFetchError,"The request failed unexpectedly. Check your Internet connection and try again.")},B=async(e,t,{name:n=p.L`unknown`,sessionUuid:r,requestId:i})=>d.reportError(new d.LoggableError({errorClass:d.ExceptionType.RequestError,message:p.L`${t}: func: ${e} req: ${n}`,metaData:{request:{name:n,sessionUuid:(0,p.assertLogSafe)(r),requestId:"number"==typeof i?(0,p.assertLogSafeNum)(i):i}}})),L=(e,t)=>{const n=S.hash.sha256.hash((0,d.bytesToBits)((0,d.str2ab)(e))),r=t.trim().normalize("NFKD").toLowerCase(),i=S.hash.sha256.hash((0,d.bytesToBits)((0,d.str2ab)(r))),s=new S.hash.sha256;return s.update(n),s.update(i),(0,d.bytesToBase64url)(new Uint8Array(S.codec.bytes.fromBits(s.finalize())))},x=p.L`web-api/action/context.ts"`;let G=0;class Z{constructor(e){this.updateOpuaConfig=async e=>{this.config.opua=(0,r.Z)({},this.config.opua,e),await this.session.setOpUserAgent(this.config.opua)},this.onNotifierConnected=()=>{console.log("Notifier connected."),H(this),this.sendServerEvent(d.notification.ServerConnected)},this.onNotificationReceived=e=>{const t=(0,y.Jx)(e.data,y.AV.pipe(h),{file:x,func:p.L`onNotificationReceived`});"ok"===t.type?t.value.session===this.session.sessionUuid?(console.log("Notification received from self."),this.nc.emit(d.notification.ServerChangedFromSelf)):(H(this),this.sendServerEvent(d.notification.ServerChanged)):console.error(new Error("Invalid server notification"))},this.sendServerEvent=(0,i.Z)((async e=>{let t;try{t=await(0,m.qp)(this)}catch(e){console.error("Failed to refresh keysets",e)}this.nc.emit(e),t&&this.nc.emit(d.notification.ServerChangedWithData,{keysets:t})}),5e3,{leading:!0,trailing:!0}),this.config=(0,s.Z)({demoGeneratorIsEnabled:!1,host:"start.1password.com",env:"prd",internalFeaturesAreEnabled:!1,inWebView:!1,server:"1password.com",shouldResetWhenSessionExpires:!0,siblingDomains:[],txtBase:"/txt",opua:{client:{shortCode:d.ClientShortCode.OnePasswordForWeb,buildNum:0},deviceUuid:""}},e,((e,t)=>(0,o.Z)(t)||"string"==typeof t&&0===t.length?e:t)),this.nc=new d.events.EventEmitter,this.id=++G,A.s(this.id);const{notifier:t,session:n}=this.reset();this.notifier=t,this.session=n}reset(){const e=this.config.lang||navigator.language||"en";return this.session=new O(this.config.host,e,this.config.opua,{onRequestIdChange:this.config.onRequestIdChange}),this.notifier&&this.notifier.disconnect(),this.notifier=new v(this.onNotificationReceived,this.onNotifierConnected),this.session.nc.on(d.notification.SessionExpired,(()=>{this.nc.emit(d.notification.SessionExpired),this.config.shouldResetWhenSessionExpires&&this.reset()})),this.nc.on(d.notification.SignedOut,(()=>{this.reset()})),this.account=void 0,this.user=void 0,this.userAuth=void 0,this.accountOverview=void 0,{notifier:this.notifier,session:this.session}}get user(){return this._user}set user(e){this._user=e}setUserUUID(e){if(!this._user)throw new Error("User is not set yet");this._user.uuid=e}get account(){return this._account}set account(e){this._account=e}get domain(){if(this.account)return this.account.domain;const e=this.config.host.split(".").shift();if(!e)throw new Error("No domain found, invalid host provided.");return e}resetWithHost(e){if(!j(e))throw new Error("Invalid host");const t=Y(e);if(!t)throw new Error("Invalid host");this.config.host=e,this.config.server=t,this.reset()}isSignedIn(){return this.session.isSignedIn}loadVaultReportingPubKey(){void 0===this.dvrPubKey&&(this.dvrPubKey=(async()=>{try{const e=await u.getDetailedVaultReportingPubkey(this.session);return c.VaultReportingPublicKey.fromJwk(e.pubKey)}catch(e){throw console.error("Failed to retrieve Detailed Vault Reporting public key",e),e}})())}loadVaultReportingPriKey(){void 0===this.dvrPriKey&&(this.user?.hasPermission(l.Permission.BelongsToSecurityGroup)||this.user?.hasPermission(l.Permission.BelongsToOwnersGroup))&&(this.dvrPriKey=(async()=>{try{const e=await a.getUserCombinedObjectDataAccess(this,l.ObjectType.DetailedVaultReportingKeyset),t=e.data.find((e=>e.objectType===l.ObjectType.DetailedVaultReportingKeyset));if(!t)throw new Error("No access");const n=await a.getObjectData(this,e,t.objectUuid,l.DetailedVaultReportingObjectDataValue);if(!n.data?.ePriKey)throw new Error("Failed to retrieve vault reporting private key from OD.");return c.VaultReportingPrivateKey.fromJwk(n.data.ePriKey)}catch(e){throw console.error("Failed to retrieve Detailed Vault Reporting private key"),e}})())}}const j=e=>{try{return e===new URL(`https://${e}`).host}catch{return!1}},Y=e=>"string"==typeof e&&e?e.slice(e.indexOf(".")+1):"",H=e=>{A.s(e.id)},W=e=>{e.nc.emit(d.notification.ClientStateChanged)},$=e=>e.session.isSignedIn&&e.user&&e.user.uuid&&e.user.keysetVersion>0&&e.user.attrVersion>0},30126:function(e,t,n){n.d(t,{I4:function(){return p},u_:function(){return s},zm:function(){return i}});var r=n(17673);const i=(e,t)=>({getEntry:l(e.id,t),getEntries:c(e.id,t),saveEntry:d(e.id,t),saveEntries:y(e.id,t)}),s=e=>{const t=a();return o={...o,[e]:t},t};let o={};const a=()=>({keysets:{}}),u=(e,t)=>(o[e]||s(e))[t],c=(e,t)=>()=>u(e,t),l=(e,t)=>n=>u(e,t)[n],d=(e,t)=>(n,r)=>{y(e,t)({[n]:r})},y=(e,t)=>n=>{const i=u(e,t);o={...o,[e]:{...o[e],[t]:(0,r.Z)({},i,n)}}},p=()=>{o={}}},51896:function(e,t,n){n.d(t,{Aj:function(){return w},B5:function(){return M},B6:function(){return I},Bs:function(){return b},FI:function(){return _},Jl:function(){return V},L7:function(){return D},Sn:function(){return h},Xv:function(){return T},ex:function(){return A},hE:function(){return R},iE:function(){return U},jA:function(){return g},ji:function(){return S},ls:function(){return v},mD:function(){return k},rZ:function(){return F},sS:function(){return E},sU:function(){return N},u0:function(){return K},w9:function(){return P},zC:function(){return O}});var r=n(14521),i=n(79686),s=n(92706),o=n(98798),a=n(38002),u=n(23428),c=n(21328),l=n(44715),d=n(20622);const y="action/group",p=(0,a.P)(y),m=(0,u.$y)(y),f={attrs:i.Group.Attr.None},g=async(e,t)=>m("getGroups",(async()=>{const{attrs:n,limit:i,offset:o,search:a,sort:u,sortDir:l,membershipsOnly:d}={...f,...t};return(0,c.E)(t?.search)?[]:r.getGroups(e.session,n,{limit:i,offset:o,search:a,sort:u,sortDir:l,membershipsOnly:d||!1}).then((async t=>s.parseGroups(e,t)))})),h=async(e,t)=>m("searchGroupsCount",(async()=>{const{attrs:n,search:i}={...f,...t};return(0,c.E)(t?.search)?0:r.searchGroupsCount(e.session,n,{search:i}).then((async e=>e))})),v=async(e,t,n)=>m("getManagableGroups",(async()=>{const{attrs:o}={...f,...t};return r.getGroups(e.session,o).then((async t=>s.parseGroups(e,t.filter((e=>n?e.type!==i.Group.TypeRecovery:e.type!==i.Group.TypeRecovery&&e.type!==i.Group.TypeExternalAccountManagers)))))})),C={attrs:i.Group.Attr.None,mustReload:!1},A=async(e,t,n)=>m("getGroup",(async()=>{const i=o.getValidGroupUuid(t);if(!i)throw new Error("Invalid group reference");const{attrs:a,mustReload:u}={...C,...n},c=e.account&&e.account.findGroup(i);return c&&!u&&c.hasAttrMask(a)?c:r.getGroup(e.session,i,a).then((async t=>s.parseGroup(e,t,a,c)))})),w=async(e,t)=>Promise.resolve().then((async()=>{const n=e.account&&e.account.recoveryGroup;if(!n)throw new Error("Missing recovery group");return A(e,n,t)})).catch(p("getRecoveryGroup")),S=async(e,t)=>Promise.resolve().then((async()=>{const n=e.account&&e.account.administratorsGroup;if(!n)throw new Error("Missing administrators group");return A(e,n,t)})).catch(p("getAdministratorsGroup")),T=async(e,t)=>Promise.resolve().then((async()=>{const n=e.account&&e.account.ownersGroup;if(!n)throw new Error("Missing owners group");return A(e,n,t)})).catch(p("getOwnersGroup")),P=async(e,t)=>Promise.resolve().then((async()=>{const n=e.account&&e.account.teamMembersGroup;if(!n)throw new Error("Missing members group");return A(e,n,t)})).catch(p("getTeamMembersGroup")),b=async(e,t)=>Promise.resolve().then((async()=>{const n=e.account&&e.account.securityGroup;if(!n)throw new Error("Missing security group");return A(e,n,t)})).catch(p("getSecurityGroup")),R=async(e,t,n)=>m("generateNewKeysetForGroup",(async()=>i.Keyset.generateWithoutSigningKeys().then((async r=>((0,d.DK)(e,[r]),Promise.resolve().then((async()=>{if(t.activeKeysetUuid){const n=(0,d.Jt)(e,t.activeKeysetUuid);return n?(r.sn=n.sn+1,n.encryptWithKey(r.symKey).then((e=>{t.archivedKeysets=[e,...t.archivedKeysets]}))):Promise.reject(new Error("Missing current active keyset."))}return r.sn=1,Promise.resolve()})).then((async()=>r.ekeyPair.pubKey?(t.pubKey=r.ekeyPair.pubKey,t.activeKeysetUuid=r.uuid,t.enableKeysetRecovery(r,n)):Promise.reject(new Error("Missing public key.")))).then((()=>r))))))),E=async(e,t)=>{const n=new i.Group(t),s=await w(e,{attrs:i.Group.Attr.PubKey}),o=await R(e,n,s);return e.user?(e.user.isExternalAccountManagement||await n.addMembership(o,e.user,{role:r.GroupMembership.Role.Manager}),await I(e,n)):Promise.reject(new Error("Missing user"))},I=async(e,t)=>{const n=s.groupToAPI(t,i.Group.Attr.All);if(await r.createGroup(e.session,n),e.account&&e.account.pushGroup(t),e.user){const n=t.getMembership(e.user.uuid);n&&e.user.pushGroupMembership(n)}return t},U=async(e,t)=>{await r.deleteGroup(e.session,t.uuid),(0,l.e5)(e),e.account&&e.account.removeGroup(t)},O=async(e,t)=>{await r.markGroupReadyForPurging(e.session,t.uuid),(0,l.e5)(e),e.account&&e.account.removeGroup(t)},k=async(e,t)=>{const n=await A(e,t);n!==t&&e.account&&(e.account.removeGroup(n),e.account.pushGroup(t),console.warn(new Error("Stale group reference."))),await r.updateGroup(e.session,s.groupToAPI(t,i.Group.Attr.None)),t.attrVersion++,(0,l.fq)(e)},D=async e=>{const t=await w(e);if(!t.activeKeysetUuid)throw new Error("Missing group's active keyset UUID.");return(0,d.Jt)(e,t.activeKeysetUuid)},M=async(e,t,n)=>{if(t=await A(e,t),i.BitSet.includesAny(n,i.RecoveryKeysetPermissions)&&!t.recoveryKeyset){const n=await D(e);if(!n)throw new Error("Failed to find Recovery keyset");await F(e,t,n)}return t.permissions=n,await r.updateGroupPermissions(e.session,t.uuid,n),t},F=async(e,t,n)=>{if(!(t=await A(e,t,{attrs:i.Group.Attr.PubKey})).pubKey)throw new Error("Missing group's public key");const o=await n.encryptWithKey(t.pubKey);t.recoveryKeyset=o;const a=s.groupToAPI(t,i.Group.Attr.None);return await r.addRecoveryKeysetToGroup(e.session,a),t},_=async(e,t)=>(0,u.HF)([y,"getGroupMemberCSV",e.id],(async()=>r.getGroupMembersCsv(e.session,t.uuid))),K=async(e,t)=>m("getActiveKeysetForGroup",(async()=>{const n=t.activeKeysetUuid;if(!n)return Promise.reject(new Error("Missing group's active keyset UUID."));const r=(0,d.Jt)(e,n);return r?Promise.resolve(r):(0,d.AT)(e).then((async()=>{const r=(0,d.Jt)(e,n);return r?Promise.resolve(r):A(e,t,{attrs:i.Group.Attr.RecoverableKeyset}).then((async t=>{if(t.recoverableKeyset){const n=(0,d.Jt)(e,t.recoverableKeyset.encryptedBy);if(n)return t.decryptRecoverableKeyset(n).then((t=>((0,d.DK)(e,[t]),t)))}return Promise.reject(new Error("Missing group's active keyset."))}))}))})),N=async(e,t)=>r.postUniqueUserCountForGroups(e.session,{groupUuids:t}),V=async(e,t,n)=>r.putGroupApplicationAssignment(e.session,t,{applicationUuids:n})},49308:function(e,t,n){n.d(t,{F7:function(){return g},SJ:function(){return v},TU:function(){return h},U2:function(){return m},eX:function(){return f}});var r=n(52384),i=n(35169),s=n(55130),o=n(14521),a=n(79686),u=n(98798),c=n(23428),l=n(44715),d=n(51896),y=n(69490);const p=(0,c.$y)("action/group_membership"),m=100,f=async(e,t,n,r)=>p("createGroupMembership",(async()=>(0,d.u0)(e,n).then((async e=>n.createMembership(e,t,r))))),g=async(e,t)=>p("updateGroupMembershipRole",(async()=>o.updateGroupMembershipRole(e.session,t.memberUuid,t.groupUuid,t.role).then((()=>(0,l.e5)(e))))),h=async(e,t)=>p("updateGroupMemberships",(async()=>{const{add:n,remove:c,group:p}=t;if(n.length+c.length===0)return{currentUserMustResetPassword:!1};const f=await(0,d.ex)(e,p),g=await(0,d.u0)(e,f),h=async t=>{const i=await(0,y.F3)(e,n.map((e=>e.uuid))),s=(0,r.Z)(i,"uuid");return Promise.all(t.map((async e=>{const t=s[e.uuid];if(void 0===t)throw new Error("updateGroupMemberships: userPubKey undefined");return{memberUuid:e.uuid,keyset:await C(g,t),role:e.role||o.GroupMembership.Role.Member}})))},v=(0,i.Z)((0,s.Z)(n,m),(0,s.Z)(c,m),((e,t)=>({add:e&&h(e)||[],remove:t&&t.map(u.getValidUserUuid)||[]})));let A=[];for(const t of v){const n={add:await t.add,remove:t.remove},r=await o.patchGroupMemberships(e.session,f.uuid,n);A=[...A,r]}return f.hasPermission(a.Permission.Recover)&&e.account&&(e.account.hasRecoveryMembers=!0),(0,l.e5)(e),{currentUserMustResetPassword:A.some((e=>!!e.currentUserMustResetPassword))}})),v=async(e,t)=>p("updateUserMemberships",(async()=>{const{add:n,remove:r,user:a}=t;if(n.length+r.length===0)return{currentUserMustResetPassword:!1};const c=u.getValidUserUuid(a),[p]=await(0,y.F3)(e,[c]);if(!p||p.uuid!==c)throw new Error("Missing user's public key.");const g=async t=>{const n=await(0,d.ex)(e,t.uuid);return f(e,p,n,{role:t.role||o.GroupMembership.Role.Member})},h=(0,i.Z)((0,s.Z)(n,m),(0,s.Z)(r,m),((e,t)=>({add:e&&e.map(g)||[],remove:t&&t.map(u.getValidGroupUuid)||[]})));let v=[];for(const t of h){const n={add:await Promise.all(t.add),remove:t.remove},r=await o.patchUserMemberships(e.session,c,n);v=[...v,r]}return(0,l.e5)(e),{currentUserMustResetPassword:v.some((e=>!!e.currentUserMustResetPassword))}})),C=async(e,t)=>{const n=await a.getImportedPubKey(t.pubKey);return e.encryptWithKey(n)}},57119:function(e,t,n){n.d(t,{Fk:function(){return g},RD:function(){return r},ZO:function(){return o.ZO},iM:function(){return m},o3:function(){return y},os:function(){return f},vU:function(){return p}});var r,i=n(52384),s=n(14521),o=n(58617),a=n(70794),u=n(23428);!function(e){e.Passwords="Passwords"}(r||(r={}));const c="action/hibp",l=(0,u.$y)(c);let d;const y=async(e,t)=>s.postHibpDomainReportNotify(e.session,t),p=async(e,t)=>{const n=await s.getHibpDomainReport(e.session,t);return{...n,users:n.users,breaches:n.breaches.map((e=>({...e,addedDate:(0,a.y)(e.addedDate),notifiedDate:(0,a.y)(e.notifiedDate)}))),lastRunAt:(0,a.y)(n.lastRunAt),isTruncated:n.isTruncated,numActive:n.numActive,numInactive:n.numInactive}},m=async(e,t,n)=>(0,u.HF)([c,"getHibpDomainReportCSV",e.id],(async()=>s.getHibpDomainReportCsv(e.session,t,n))),f=()=>d,g=async e=>l("getHibpReport",(async()=>s.getHibpReport(e.session).then((e=>{const t=e.map((e=>({...e,addedDate:(0,a.y)(e.addedDate),notifiedDate:(0,a.y)(e.notifiedDate)})));d=(0,i.Z)(t,(e=>e.domain))}))))},93640:function(e,t,n){n.r(t),n.d(t,{AccountAttrs:function(){return o.NE},BeginDomainVerificationResponse:function(){return $c.O$},BoundCellType:function(){return yo},CCHeader:function(){return uo},CanOnlyPerformOidcAuth:function(){return ic},CanOnlyPerformPasswordAuth:function(){return oc},CanPerformOidcAuth:function(){return rc},CanPerformPasswordAuth:function(){return sc},CellAttr:function(){return po},CodeResponse:function(){return v.O8},Context:function(){return $._y},ContextInitialization:function(){return ot},DateFilterDirection:function(){return Y.u5},DefaultByCreationParams:function(){return Y.uf},DsecretProxyResponse:function(){return v.wG},DsecretResponse:function(){return v.PJ},DuoResponse:function(){return v.rR},EMAIL_KEY_HANDLE:function(){return ce.nu},EMAIL_VERIFICATION_LENGTH:function(){return sd},EmailVerificationError:function(){return j.NP},FirewallRule:function(){return Xn.ey},FirewallRuleAction:function(){return y.FirewallRuleAction},FirewallRuleAnonymousType:function(){return y.FirewallRuleAnonymousType},FirewallRuleScopeType:function(){return y.FirewallRuleScopeType},FirewallRuleType:function(){return y.FirewallRuleType},FirewallRules:function(){return Xn.SJ},GetAccountReportCsvResponse:function(){return Au.IU},GetVaultItemSnapshotsFilters:function(){return Ll},GetVerifiedDomainsResponse:function(){return $c.FG},HIBPDataClass:function(){return hl.RD},HeaderType:function(){return lo},HibpUser:function(){return hl.ZO},ImportFormat:function(){return go},ItemKind:function(){return oo},ItemShareAvailableTo:function(){return Bo.FR},ItemShareLinkExpiration:function(){return Ko},ItemShareRejectedRecipientsError:function(){return Xo},LoginHeader:function(){return ao},MAX_CODE_ATTEMPTS_ALLOWED:function(){return wl},MEMBERSHIPS_BATCH_SIZE:function(){return tn.U2},MfaResponse:function(){return v.wR},MfaType:function(){return ce.Lo},MigratingUserEmails:function(){return pl},MigratingUserState:function(){return c.MigratingUserState},ModernAppVersion:function(){return zt.X},MustEnableResponse:function(){return v.bV},PendingVerifiedDomain:function(){return $c.yH},RecoveryAttemptPostCompletion:function(){return cd},RecoveryCodeAttemptIdentityVerified:function(){return ud},RecoveryCodeAuthenticationError:function(){return dd},RecoveryCodeEmailResendError:function(){return pd},RecoveryCodeEmailVerification:function(){return ad},RecoveryCodeEmailVerificationError:function(){return yd},RecoveryCodeSelectVerification:function(){return od},SecureNoteHeader:function(){return co},SignupSource:function(){return vu.W},TOTP_KEY_HANDLE:function(){return ce.bC},TotpResponse:function(){return v.rb},UserSignupType:function(){return ec.r},UsoTelemetryActions:function(){return Cl},VaultsReportAttributes:function(){return Au.Z3},VaultsReportTypes:function(){return Au.zq},VerifiedDomain:function(){return $c.S6},VerifiedDomainType:function(){return $c.K2},WebAuthnResponse:function(){return v.$i},_checkPwnedPasswords:function(){return jc.Y2},acceptBanner:function(){return Ut},acceptProvisionWithSSOIdentity:function(){return ec.CA},acknowledgeNotification:function(){return ka.tu},activateStripeBilling:function(){return kt.Mr},addAccessorToVaults:function(){return un},addAccessorsToVault:function(){return an},addAclsToObjectData:function(){return _a.Oh},addAdminToProvisioningGroup:function(){return ju},addCard:function(){return kt.Z0},addCredentialBundle:function(){return mc},addMigratingUsers:function(){return yl},addObjectDataToGroup:function(){return _a.Ey},addOrUpdateAddress:function(){return kt.MA},addRecoveryKeysetToGroup:function(){return z.rZ},aggregateVaultSnapshots:function(){return xl},assignGroupsToApplication:function(){return se},attachAsChildAccount:function(){return qt},batchGetWatchtowerReports:function(){return a.E0},beginAccountRegistration:function(){return ec.vn},beginChangeEmail:function(){return At},beginDomainVerification:function(){return Jc},beginPasskeyAccountRegistration:function(){return ec.$S},beginUserRecovery:function(){return j.nS},beginUserSignup:function(){return ec.sD},bootstrapObjectDataAccess:function(){return _a.fP},brex:function(){return Bt},browserSupportsWebAuthn:function(){return ce.TD},calculatePercentageCompleted:function(){return a.TO},canOnlyPerformWebauthnAuth:function(){return uc},canPerformTrustedDeviceBasedAuth:function(){return nc},canPerformWebauthnAuth:function(){return ac},cancelChangeEmail:function(){return St},cancelDeviceEnrollment:function(){return Fc},cancelStripeSubscription:function(){return kt.e0},cancelUserRecovery:function(){return j.PE},changeDefaultCard:function(){return kt.U8},changeDefaultPaymentMethod:function(){return kt.fE},changeDomain:function(){return o.Ie},changeMasterPassword:function(){return gt},changeServiceAccountAvatar:function(){return Z.ln},changeServiceAccountName:function(){return Z.vp},changeTemplatesState:function(){return ur.sp},changeUserAvatar:function(){return j.j_},changeUserName:function(){return j.I_},changed:function(){return $.fq},checkChildAccountCode:function(){return $t},checkDomainAvailability:function(){return o.xx},checkGiftCard:function(){return or},checkProvisioningEmailVerification:function(){return du},checkPwnedPasswords:function(){return jc.GQ},clearAllCaches:function(){return H},clearAllCachesForContext:function(){return W},clearContextCache:function(){return U.I4},clearPartialUserCache:function(){return x},clearPartialUserCacheForContext:function(){return G},clearServiceAccountCache:function(){return Z.nf},clearServiceAccountCacheForContext:function(){return Z.Db},clearUserCache:function(){return j.UL},clearUserCacheForContext:function(){return j.Pz},clearVaultCache:function(){return Y.Fc},clearVaultCacheForContext:function(){return Y.LU},clearVaultWithPreviewsCache:function(){return Y.Vb},clearVaultWithPreviewsCacheForContext:function(){return Y.rt},completeAccountRegistration:function(){return ec.EJ},completeActivationHubTask:function(){return d},completeChangeEmailForPasswordUser:function(){return Tt},completeChangeEmailForSsoUser:function(){return Pt},completeDomainVerification:function(){return qc},completeMFASignInWithDSecret:function(){return He},completeMFASignInWithDSecretProxy:function(){return je},completeMFASignInWithDuo:function(){return We},completeMFASignInWithEnable:function(){return $e},completeMFASignInWithTOTP:function(){return Ze},completeMFASignInWithWebAuthn:function(){return Ye},completePasskeyAccountRegistration:function(){return ec.dy},completeReplyToConfirmation:function(){return No.pw},completeUserProvision:function(){return pu},completeUserRecovery:function(){return j.mz},completeUserSignup:function(){return ec.Tg},confirmUsers:function(){return j.Eg},convertToBusiness:function(){return gn},convertToFamily:function(){return fn},convertToIndividual:function(){return mn},createAccountGatedFeatureTrial:function(){return gd},createAccountTransferVaultPreflight:function(){return Y.tJ},createAdminWatchtowerKeyset:function(){return o.Z6},createAppleSubscription:function(){return kt.Rw},createChildAccountRelationship:function(){return Ht},createConnectToken:function(){return Qu.$p},createDataStreamingToken:function(){return Qu.Zm},createDetailedVaultReportingKeyset:function(){return _l},createDetailedVaultReportingPubkey:function(){return Fl},createGeneratedPasswordsVault:function(){return Y.AM},createGroup:function(){return z.sS},createGroupMembership:function(){return tn.eX},createHealthMonitoringCheck:function(){return Hu},createItemShare:function(){return ea},createManagedAccount:function(){return Oa.Ei},createManagedVault:function(){return Y.Eu},createMonitoringCheck:function(){return Ia},createNewContext:function(){return pt},createObjectData:function(){return _a.E6},createObjectDataAccess:function(){return _a.eR},createPersonalVault:function(){return o.$2},createPlayStoreSubscription:function(){return kt.CH},createProvisionManager:function(){return xu},createProvisionManagerSA:function(){return Lu},createProvisionManagersGroup:function(){return Bu},createProvisionUser:function(){return au},createProvisioningProgressStep:function(){return ll},createRecoveryCodeAndPolicy:function(){return zl},createServiceAccountPreflight:function(){return Z.oV},createServiceAccountV3:function(){return Z.G8},createSetupIntent:function(){return Da},createSharedVault:function(){return o.Yo},createSignedSupportRequest:function(){return zu},createSsoApplication:function(){return ee},createSsoSettings:function(){return vc},createSystemVault:function(){return Y.j},createUserManagedServiceAccountObjectData:function(){return _a.pQ},createVault:function(){return Y.Id},createVaultForAccountTransfer:function(){return Y.Oh},createVaultItems:function(){return ho},createWatchtowerPubkey:function(){return a.rw},createWebauthnCredentials:function(){return sl},credentialBundleFromAuthResponse:function(){return hc},csvToVaultItems:function(){return Ws},decryptItemShare:function(){return ia},decryptKeysets:function(){return ga.SX},decryptObjectData:function(){return _a.oB},delegateSession:function(){return yt},deleteAccessorFromVault:function(){return dn},deleteAccount:function(){return o.tm},deleteAccountCookie:function(){return fe},deleteCard:function(){return kt.f1},deleteDevice:function(){return bt},deleteGroup:function(){return z.iE},deleteInactiveDevices:function(){return Rt},deleteInviteVault:function(){return No.Os},deleteItemShare:function(){return pa},deleteObjectData:function(){return _a.D7},deleteObjectDataAccess:function(){return _a._g},deletePendingPaymentMethod:function(){return kt.rw},deletePerson:function(){return j.jt},deleteRecoveryKey:function(){return Xl},deleteSsoApplication:function(){return te},deleteUserCookie:function(){return ge},deleteUsers:function(){return j.Vt},deleteVault:function(){return Y.aV},deleteVaultItemHistory:function(){return kn.fb},deleteVaultPreflight:function(){return Y.sh},deleteVerifiedDomain:function(){return Qc},deleteWebauthnCredentialForUser:function(){return ul},derivePartsFromShareSecret:function(){return sa},detachChildAccount:function(){return Jt},detailsToUser:function(){return at},disableMFA:function(){return ce.FV},disableServiceAccountAccess:function(){return Y.Uh},disableTravelSafe:function(){return Y.hg},dismissBanner:function(){return Ot},enableMFA:function(){return ce.Hz},enableServiceAccountAccess:function(){return Y.uq},enableTravelSafe:function(){return Y.pT},encryptVaultForAPI:function(){return Y.HM},endTrialPeriod:function(){return kt.aw},fetchAccountHandoffCertificate:function(){return ue},fetchCommonTemplates:function(){return ur.lY},fetchIdentityAccessToken:function(){return X},fetchUserApplications:function(){return Q},findCachedUser:function(){return j.E7},findDecryptedKeyset:function(){return ga.Jt},findLongestRowLength:function(){return hr},findSsoSettings:function(){return wc},generateCredentialsFileAndBearerToken:function(){return Qt},generateDSecretHmac:function(){return ce.jl},generateDemoVaultItems:function(){return Kn},generateNewKeysetForGroup:function(){return z.hE},generateReplyToConfirmation:function(){return No.B6},generateSessionFile:function(){return Wu},generateSessionFileWithServiceAccount:function(){return $u},generateShareSecret:function(){return aa},generateWatchtowerReportForItem:function(){return Hc.ae},generateWatchtowerReportForItems:function(){return Hc.ys},getAccountFeatures:function(){return qe},getAccountOverview:function(){return u.X},getAccountReport:function(){return Ou},getAccountReportCSV:function(){return Mu},getAccountShareSettings:function(){return fa},getAccountSsoApplications:function(){return re},getAccountTransfersDetails:function(){return dl},getAccountUserCounts:function(){return o.UG},getAccountWithAttrs:function(){return o.M3},getActivationHubTasks:function(){return l},getActiveKeysetForGroup:function(){return z.u0},getActivityFeed:function(){return g},getAdministratorsGroup:function(){return z.ji},getAllCreditCardItems:function(){return kn.e1},getAllIntegrations:function(){return _o},getAllObjectDataRecordsWithDataSpec1:function(){return _a.qE},getAllTemplates:function(){return ur.Tk},getAllowAccountCreationPolicy:function(){return ja},getAndSubmitAccessToken:function(){return rt},getApplicationDetails:function(){return ie},getApplicationsCatalog:function(){return fd},getAutoDeleteSuspendedUsersPolicies:function(){return za},getAutoLockPolicy:function(){return Ga},getAutomatedQuest:function(){return Jl},getAvailableTiers:function(){return kt.U},getB5xSupportsSharingSrpx:function(){return Ee},getBanners:function(){return It},getBillingStats:function(){return kt.PP},getBrexClientInfo:function(){return Gt},getCard:function(){return kt.nO},getChildAccountRelationship:function(){return Wt},getCombinedObjectAccessors:function(){return _a.aU},getContextCache:function(){return U.zm},getCreateVaultPreflight:function(){return Y.yX},getCustomIconForItem:function(){return kn.J4},getDashboardReport:function(){return Tu},getDateForVaultsFilter:function(){return Y.FA},getDefaultIdentityTemplate:function(){return ur.mP},getDefaultTemplate:function(){return ur.NJ},getDefaultTiers:function(){return kt.CV},getDefaultVaultPermissions:function(){return Dl},getDeletedItemsForVault:function(){return kn.WC},getDetailedVaultReportingStats:function(){return $l},getDeveloperReport:function(){return Bn},getDeveloperServiceAccountsReport:function(){return jn},getDeveloperServiceAccountsReportCsv:function(){return Yn},getDeveloperSharedVaultsReport:function(){return Gn},getDeveloperSharedVaultsReportCsv:function(){return Zn},getDeveloperUsersReport:function(){return Ln},getDeveloperUsersReportCsv:function(){return xn},getDeviceEnrollmentStatus:function(){return Oc},getDocument:function(){return kn.Me},getDocumentBlob:function(){return kn.Xt},getDomain:function(){return o.ge},getEmailSubscriptions:function(){return Hn},getEmailTemplateByUuid:function(){return Jn},getEmailTemplates:function(){return $n},getEncryptedCredentialBundle:function(){return fc},getEnrollment:function(){return Mc},getEntireAccount:function(){return o.wG},getEveryoneVault:function(){return Y.Fv},getFeatures:function(){return J},getFile:function(){return kn.hn},getFilteredActivityLogReports:function(){return p},getFilteredActivityLogTotalReports:function(){return f},getFirewallRules:function(){return er},getGeneratedPasswordsVault:function(){return Y.HN},getGiftCards:function(){return ir},getGridSlackChannels:function(){return Do._5},getGridSlackGroups:function(){return Do.wU},getGridSlackTeams:function(){return Do.xb},getGridSlackUsers:function(){return Do.oH},getGroup:function(){return z.ex},getGroupDeadline:function(){return Pc},getGroupMembersCsv:function(){return z.FI},getGroupPubKeys:function(){return rn.qc},getGroupUsersWithPermissions:function(){return L},getGroups:function(){return z.jA},getHibpDomainReport:function(){return hl.vU},getHibpDomainReportCSV:function(){return hl.iM},getHibpReport:function(){return hl.os},getIcons:function(){return wo},getIncomingPackages:function(){return La.$D},getInitializationExport:function(){return lt},getInitializationExportFromNewContext:function(){return ct},getInsightsTeamReport:function(){return To},getInsightsTeamReportCsv:function(){return Po},getInsightsTeamReportOverview:function(){return So},getIntegrations:function(){return Z.Zh},getInviteVaults:function(){return No.hj},getInvoiceDetails:function(){return kt.Q2},getInvoicePdf:function(){return kt.j4},getInvoices:function(){return kt.sA},getIsValidPurchaseOrderToken:function(){return kt.dM},getIsValidStripePurchaseOrderToken:function(){return kt.b4},getItemShareSettings:function(){return $o},getLastViewedReports:function(){return Vu},getLaunchSessionData:function(){return Oa.Pl},getMFA:function(){return ce.PP},getMFAConfig:function(){return ce.B7},getManagableGroups:function(){return z.ls},getManagedAccountBaseUri:function(){return Oa.ag},getManagedAccountUri:function(){return Oa.XS},getManagedAccounts:function(){return Aa},getModernAppVersions:function(){return Xt},getMonitoringStatus:function(){return Ua},getMoreIncomingPackages:function(){return La.jY},getMukSrpXCredentials:function(){return mt},getNotifications:function(){return ka.TH},getObjectData:function(){return _a.XE},getObjectDataAccessPreflight:function(){return _a.ud},getObjectDataAccessorsForObjectType:function(){return _a.AM},getOidcAuthMethod:function(){return yc},getOidcProviderName:function(){return pc},getOidcWellKnownConfig:function(){return bc},getOldDevicesReport:function(){return Du},getOpxSupportsDelegatedSessionSignInEvent:function(){return Oe},getOpxSupportsSignInEvent:function(){return we},getOpxSupportsSingleSignInEvent:function(){return Pe},getOverviewReport:function(){return ku},getOwnersGroup:function(){return z.Xv},getPackagesForVaultItem:function(){return La.i0},getPartialUsers:function(){return B},getPartialUsersV2:function(){return N},getPasskeySitesList:function(){return jc.eH},getPaymentMethod:function(){return Fa},getPendingDeviceEnrollments:function(){return Dc},getPendingInvitation:function(){return xa},getPendingInvitations:function(){return No.F$},getPerson:function(){return j.Ay},getPersonalVault:function(){return Y.XG},getPersonalVaultOnlyIfCached:function(){return Y.mm},getPreAuthFeatures:function(){return q},getPreRegistrationFeature:function(){return tu},getPreRegistrationFeatures:function(){return eu},getPreviousVersionOfItem:function(){return kn.ys},getProvisionDetails:function(){return lu},getProvisionManager:function(){return Zu},getProvisionManagersGroup:function(){return hu},getProvisionManagersV2:function(){return Gu},getReceivingVault:function(){return La.iB},getRecoveryAttempts:function(){return rd},getRecoveryDetails:function(){return j.wE},getRecoveryGroup:function(){return z.Aj},getRecoveryKeyDetails:function(){return nd},getRecoveryKeyset:function(){return z.L7},getRecoveryPolicy:function(){return ed},getRecoveryPolicyAndKeyDetails:function(){return td},getRecoveryPolicyUuids:function(){return Ql},getRegisterURL:function(){return ec.RQ},getRemainingAmount:function(){return kt.GL},getResendDetails:function(){return gu},getRestrictFailedLoginAttemptsPolicy:function(){return $a},getSecurityGroup:function(){return z.Bs},getServiceAccount:function(){return Z.ZT},getServiceAccountGroupMemberships:function(){return Z.Tx},getServiceAccountTypeSlug:function(){return bo},getServiceAccountVaultAccesses:function(){return Z.wL},getServiceAccounts:function(){return Z.Sx},getShareAuditDetails:function(){return ua},getShareHistoryForItem:function(){return Ho},getShareSeviceAuthToken:function(){return ya},getSidebarNavPolicies:function(){return Ha},getSignInMethods:function(){return tc},getSignupDetails:function(){return ec.PG},getSlackApp:function(){return Do.Sc},getSlackChannels:function(){return Do.as},getSlackGroups:function(){return Do.Od},getSlackUsers:function(){return Do.Vz},getSpecialVault:function(){return Y.Ei},getSsoSettings:function(){return Ac},getSubscription:function(){return kt.pI},getSupportAccountsList:function(){return Lc},getSystemVault:function(){return Y.ro},getTaxAdvice:function(){return kt.ZQ},getTeamMembersGroup:function(){return z.w9},getTemplates:function(){return ur.uR},getTrustpilotReviewData:function(){return Yc},getTwoFactorSitesList:function(){return jc.IF},getUpgradeTiers:function(){return kt.UD},getUsageReportsWithCursors:function(){return Ru},getUsageReportsWithFilters:function(){return bu},getUserCombinedObjectDataAccess:function(){return _a.$0},getUserCombinedObjectDataAccesses:function(){return _a.sK},getUserCombinedObjectDataAccessesForObjectTypes:function(){return _a.qc},getUserCookies:function(){return pe},getUserMspPermissions:function(){return Oa.qq},getUserPubKeys:function(){return rn.F3},getUserReport:function(){return Pu},getUserUsageReportOverview:function(){return Eu},getValidPromotionFromCode:function(){return kt.ZK},getVault:function(){return Y.R1},getVaultAccessUuids:function(){return Hl},getVaultItemHistory:function(){return kn.zQ},getVaultItemSnapshotsByUuids:function(){return Gl},getVaultItemWithUuid:function(){return kn.b1},getVaultItems:function(){return kn.L},getVaultItemsOverviews:function(){return kn.Ng},getVaultManagers:function(){return Wc},getVaultReport:function(){return Iu},getVaultReportingGroupMemberships:function(){return Wl},getVaultReportingSync:function(){return Bl},getVaultReportingVaultOverviews:function(){return Nl},getVaultReportingVaultOverviewsPage:function(){return Vl},getVaults:function(){return Y._w},getVaultsByCreation:function(){return Y.mz},getVaultsForAccountTransfer:function(){return Y.Tt},getVaultsReport:function(){return Uu},getVaultsV2:function(){return Y.ud},getVerifiedDomains:function(){return zc},getWatchtowerData:function(){return jc.Tq},getWatchtowerPubkey:function(){return a.MO},getWatchtowerReportCounts:function(){return a.u6},getWatchtowerReports:function(){return a.Tb},getWatchtowerStats:function(){return a.vp},getWebAuthnAssertion:function(){return ce.Ak},getWebauthnAuthMethod:function(){return dc},getWebauthnCredentialsForUser:function(){return al},grantGroupAccessToVaultReportingKeyset:function(){return Kl},grantGroupAccessToWatchtowerKeyset:function(){return o._y},handleDelegatedSessionRequest:function(){return nt},handleDelegatedSessionSignInSuccess:function(){return tt},handleLegacySignInSuccess:function(){return et},handleObjectDataMigration:function(){return _a.AH},handleSignInSuccess:function(){return ze},handleTrustedDeviceUpgradeRequest:function(){return md},hasAutoDeleteSuspendedUsersUnleashFlag:function(){return qa},importPasskeySitesList:function(){return jc.MA},importTwoFactorSitesList:function(){return jc.XI},importVaultItems:function(){return vo},importWatchtowerData:function(){return jc.v3},importer:function(){return i},initialize:function(){return ut},insightsTelemetry:function(){return vl},invalidateCache:function(){return $.e5},inviteUsersViaEmail:function(){return No.Nr},inviteViaSlack:function(){return No.nP},isEncryptedOd:function(){return _a.Mc},isItemShareRejectedRecipientsError:function(){return Qo},isSignedInAccountLoaded:function(){return $.WF},kickoffDeviceEnrollment:function(){return Uc},legacySignUpAccount:function(){return ec.xH},linkAccountToPartner:function(){return kt.Bh},loadAllWatchtowerDataLists:function(){return jc.jD},loadCommonPasswordsList:function(){return jc.Qn},loadHibpReport:function(){return hl.Fk},loadPasskeySitesList:function(){return jc.FB},loadPassphraseWordList:function(){return jc.DQ},loadTwoFactorSitesList:function(){return jc.Ie},loadUniverse:function(){return o.KJ},loadWatchtowerData:function(){return jc.GL},lockedOutDeleteAccount:function(){return o.xR},lookUpInvitation:function(){return No.H7},lookUpTeamInvitation:function(){return No.I_},makeWebAuthnCredential:function(){return ce.q},markAwayForTravel:function(){return j.yC},markBackFromTravel:function(){return j.bU},markGroupReadyForPurging:function(){return z.zC},markPackageAsRead:function(){return La.eD},markSignatureInvalid:function(){return Kc},mergeInPubKeys:function(){return rn.BY},migrateVaults:function(){return Sa},oAuthRefreshToken:function(){return Zt},parse:function(){return yr},parseMigratingUsersCsv:function(){return ml},patchSsoApplication:function(){return ne},patchVaultItems:function(){return kn.u7},performSignInAccountChecks:function(){return o.iS},personalVaultName:function(){return o.FS},postBrexRefreshToken:function(){return xt},postBrexVerifier:function(){return Lt},postFastmailRefreshToken:function(){return zn},postFastmailVerifier:function(){return qn},postFirewallRules:function(){return Qn},postHibpDomainReportNotify:function(){return hl.o3},postImage:function(){return o.mh},postSlackAccessToken:function(){return Do.A9},postSlackNonce:function(){return Do.ts},postTemplate:function(){return ur.rZ},postUniqueUserCountForGroups:function(){return z.sU},postUpdatedCredentials:function(){return ht},prepProvisionUser:function(){return j.Dz},prepServiceAccount:function(){return Z.EG},privacycom:function(){return su},processIncomingPackages:function(){return La.Ou},promptConfirmChangeEmail:function(){return wt},purgeDeletedVaultItemForVault:function(){return kn.Er},putGroupApplicationAssignment:function(){return z.Jl},putVaultReportingSnapshots:function(){return Zl},reEncryptRequiredData:function(){return _a.FF},reactivateUsers:function(){return j.Od},receiveMsgA:function(){return Tl},receiveMsgB:function(){return bl},receiveSharedCredentials:function(){return Ol},receiveTagA:function(){return El},receiveTagB:function(){return Ul},recoverUserWithSSOIdentity:function(){return ec.kI},recoveryVerifyEmailAuth:function(){return j.Zo},recoveryVerifyEmailResend:function(){return j.DF},recoveryVerifyEmailStart:function(){return j.c0},recreateProvisionManager:function(){return Ju},redeemGiftCard:function(){return sr},refreshKeysets:function(){return ga.AT},refreshKeysetsIfNecessary:function(){return ga.qp},regenerateSignUpLink:function(){return No.V7},registerAccount:function(){return ec.UD},registerPasskeyAccount:function(){return ec.B8},registerPasskeyForUser:function(){return ol},registerServiceAccountTokenRequest:function(){return Qu.fL},registerUserWithSSOIdentity:function(){return ec.cQ},registerWebauthnCredential:function(){return rl},reloadUniverse:function(){return o.KE},removeEmptyColumns:function(){return gr},removePackage:function(){return La.qv},removePackages:function(){return La.Bu},removeSCIMSetupAdministrator:function(){return Yu},renameServiceAccountToken:function(){return Qu.Fy},reportAuditEvent:function(){return m},reportOutdatedBrowser:function(){return Ba},reportUsoAction:function(){return Al},requestAccountDeletion:function(){return xc},requestBrexAccessToken:function(){return jt},requestInvoiceEmail:function(){return kt.T3},requestSupportEmail:function(){return Bc},require2FAOnNextSignIn:function(){return Et},resendAllUserProvision:function(){return fu},resendInvitations:function(){return No.Zs},resendProvisioningEmailVerification:function(){return yu},resendUserProvision:function(){return mu},resendVerificationEmail:function(){return ec.A8},resetContext:function(){return U.u_},revokeAllServiceAccountTokensForAccount:function(){return Qu.ub},revokeInvitations:function(){return No.wk},revokeServiceAccountToken:function(){return Qu.ME},revokeVaultAccess:function(){return yn},runBackgroundMigrations:function(){return Pd},runBlockingMigrations:function(){return Td},saveDecryptedKeysets:function(){return ga.DK},saveNotificationSettings:function(){return ka.v},scrubClientSecret:function(){return Rc},searchGroupsCount:function(){return z.Sn},sendFeedback:function(){return tr},sendGroup:function(){return z.B6},sendItemSnapshotToServer:function(){return Yl},sendMFACode:function(){return ce.aT},sendMsgA:function(){return Sl},sendMsgB:function(){return Pl},sendNoSigninPastMonthEmail:function(){return Nu},sendPackage:function(){return La.pj},sendPackages:function(){return La.kg},sendTagA:function(){return Rl},sendTagB:function(){return Il},sendUnredeemedFamilyAccountEmail:function(){return Ku},sendUnusedPrivateVaultEmail:function(){return _u},sendVault:function(){return Y.Ox},setActiveUser:function(){return j.nl},setB5xSupportsSharingSrpx:function(){return Ie},setCachedUsers:function(){return j.Ve},setOpxSupportsDelegatedSessionSignInEvent:function(){return ke},setOpxSupportsSignInEvent:function(){return Se},setOpxSupportsSingleSignInEvent:function(){return be},setUserCookie:function(){return me},setupCredentialBundle:function(){return gc},setupMsp:function(){return Oa.Z2},shareCredentials:function(){return kl},signIn:function(){return Fe},signInWithCredentialBundle:function(){return Ne},signInWithEmailAndPasswordGetUniverse:function(){return Ke},signInWithFederatedSession:function(){return Me},signInWithPasskeyAuth:function(){return _e},signInWithRecoveryCodePasskeys:function(){return Ve},signInWithRecoveryCodePwSk:function(){return Be},signOut:function(){return st},signUpAccount:function(){return ec.VQ},signUpAndGetInfo:function(){return ec.pr},ssoValidateEnd:function(){return Tc},ssoValidateStart:function(){return Sc},startOidcAuth:function(){return Ka},startRecoveryWithRecoveryCode:function(){return ld},startUserProvision:function(){return uu},submitDepartureSurvey:function(){return Zc},subscribeWithStripe:function(){return kt.s_},suspendMigratedUser:function(){return gl},suspendUserProvision:function(){return cu},suspendUsers:function(){return j.f1},teamInvitePerson:function(){return No.z5},toWatchtowerReportForApi:function(){return Hc.T4},trimItemForSharing:function(){return ta},unlinkManagedAccount:function(){return wa},unloadAllWatchtowerDataLists:function(){return jc.$f},unloadCommonPasswordsList:function(){return jc.d2},unloadPasskeySitesList:function(){return jc.qy},unloadPassphraseWordList:function(){return jc.ZE},unloadTwoFactorSitesList:function(){return jc.uP},unloadWatchtowerData:function(){return jc.D1},unsafeCancelDeviceEnrollment:function(){return _c},unsafeGetDeviceEnrollmentStatus:function(){return kc},updateAccount:function(){return o.sG},updateAccountGatedFeatureTrial:function(){return hd},updateAccountShareSettings:function(){return ma},updateAllowAccountCreationPolicy:function(){return Ya},updateApplicationDeviceCheckStatus:function(){return oe},updateApplicationDeviceCheckStatuses:function(){return ae},updateAutoDeleteSuspendedUsersPolicies:function(){return Xa},updateAutoLockPolicy:function(){return Za},updateBillingSettings:function(){return o.K1},updateBulkGroupVaultAccessPermissions:function(){return ln},updateCard:function(){return kt.OV},updateDefaultVaultPermissions:function(){return Ml},updateEmailSubscriptions:function(){return Wn},updateGroup:function(){return z.mD},updateGroupMembershipRole:function(){return tn.F7},updateGroupMemberships:function(){return tn.TU},updateGroupPermissions:function(){return z.B5},updateInviteVault:function(){return No.sY},updateLocalCredentials:function(){return ft},updateMigratingUserState:function(){return fl},updatePaymentMethod:function(){return Ma},updateRestrictFailedLoginAttemptsPolicy:function(){return Ja},updateServerSignup:function(){return ec.Hz},updateServerSignupAccountType:function(){return ec.Ty},updateServiceAccount:function(){return Z.TL},updateSidebarNavPolicies:function(){return Wa},updateSlackApp:function(){return Do.Sw},updateSsoSettings:function(){return Cc},updateSubscription:function(){return kt.Mg},updateUser:function(){return j.Nq},updateUserMemberships:function(){return tn.SJ},updateVault:function(){return Y.Lf},updateVaultAccessPermissions:function(){return cn},updateVaultClientAccess:function(){return Y.zr},updateVerifiedDomain:function(){return Xc},updateWebauthnCredentialForUser:function(){return cl},upgradeGuestToMember:function(){return j.z6},uploadDocument:function(){return kn.iG},uploadFile:function(){return kn.cT},uploadVaultItemSnapshots:function(){return jl},uploadWatchtowerReports:function(){return a.lN},verifyLockedOutAccountDeletion:function(){return o.xz},verifyMasterPassword:function(){return Ct},verifyOidc:function(){return Na},verifyPasskey:function(){return nl},verifyTotp:function(){return ce.cl},verifyWebauthnCredentialAttestation:function(){return il}});var r={};n.r(r),n.d(r,{deobfuscate:function(){return Kt},obfuscate:function(){return Nt}});var i={};n.r(i),n.d(i,{BoundCellType:function(){return yo},CCHeader:function(){return uo},CellAttr:function(){return po},HeaderType:function(){return lo},ImportFormat:function(){return go},ItemKind:function(){return oo},LoginHeader:function(){return ao},SecureNoteHeader:function(){return co},createVaultItems:function(){return ho},csvToVaultItems:function(){return Ws},findLongestRowLength:function(){return hr},importVaultItems:function(){return vo},parse:function(){return yr},removeEmptyColumns:function(){return gr}});var s={};n.r(s),n.d(s,{deletePrivacyComItemByUuid:function(){return iu},findPrivacyComItemByUuid:function(){return ru},getOrCreateSystemVault:function(){return nu}});var o=n(66348),a=n(89515),u=n(18292),c=n(14521);const l=async(e,t)=>c.getActivationHubTasks(e.session,t),d=async(e,t)=>c.completeActivationHubTask(e.session,t);var y=n(79686);const p=async(e,t,n,r,i,s,o,a,u,l)=>{const d=r||c.getActivityLogDefaultStartTime().toISOString();return r=t?void 0:d,i=t?void 0:i||(new Date).toISOString(),n=t?void 0:n,c.getFilteredActivityLogReports(e.session,t,n,r,i,l,s,o,a,u).then((e=>({auditEvents:e?e.auditEvents.map(y.Activity.fromApi):[],cursor:e.cursor,hasMore:e.hasMore,totalCount:e.totalCount})),(e=>{throw console.error("getFilteredActivityLogReports failed:",e),e}))},m=async(e,t,n,r,i)=>{const s={objectType:t,objectUUID:r,action:n,reportType:i};try{await c.reportAuditEvent(e.session,s)}catch(e){throw console.error("reportAuditEvent failed:",e),e}},f=async(e,t,n,r,i,s,o)=>c.getFilteredActivityLogTotalReports(e.session,t||c.getActivityLogDefaultStartTime().toISOString(),n||(new Date).toISOString(),r,i,s,o).then((e=>({count:e.count,hasMore:e.hasMore})),(e=>{throw console.error("getFilteredActivityLogTotalReports failed:",e),e})),g=async(e,t,n)=>c.getActivityFeed(e.session,t,n).then((e=>e?e.map(y.Activity.fromApi):[]),(e=>{throw console.error("getActivityFeed failed:",e),e}));var h=n(69243),v=n(92057),C=n(76515),A=n(73820),w=n(95743);const S=(0,A.F)("web-api/internal/user.ts")((e=>({name:"migrateKeyset",method:"POST",url:"/internal/v1/user/keyset",body:{keyset:e},responseType:w.ID})));var T=n(59165),P=n(98798),b=n(5119),R=n(16586),E=n(35914),I=n(23428),U=n(30126),O=n(29955),k=n(87347),D=n(1166),M=n(52384),F=n(20806);const _="action/partial_user",K=(0,I.$y)(_),N=async(e,{scopes:t={},attrs:n=[],...r})=>{const i={...r,vault:t?.vaultUuid,group:t?.groupUuid,attrs:n};return(0,I.HF)([_,"getPartialUsersV2",e.id,JSON.stringify(i)],(async()=>{const{serviceAccounts:t=[],...n}=await c.getPartialUsers(e.session,i);return{...n,serviceAccounts:t}}))};let V=F.U();const B=async(e,t={},n={})=>K("getPartialUsers",(async()=>{const{mustReload:r,limit:i,offset:s}={mustReload:!1,...n},o=!i&&(0,O.Z)(t);if(!r&&o){const t=V.getAllEntries(e.id);if(t)return(0,k.Z)(t)}const a={attrs:[],emails:t.emails,states:(0,D.Z)([t.state]),types:(0,D.Z)([t.type]),limit:i,offset:s,search:t.search,sort:t.sort,sortDir:t.sortDir};return(0,I.HF)([_,"getPartialUsers",e.id,JSON.stringify(a)],(async()=>c.getPartialUsers(e.session,a).then((({users:t})=>{if(!t)throw new Error("Missing users from getPartialUsers");return o&&(V=V.withOnlyEntries(e.id,(0,M.Z)(t,"uuid"),{timestamp:Date.now()})),t}))))})),L=async(e,t)=>(0,I.HF)([_,"getGroupUsersWithPermissions",e.id,t],(async()=>c.getPartialUsers(e.session,{group:t,attrs:["combinedPermissions"]}).then((({users:e,serviceAccounts:t=[]})=>{if(!e&&!t)throw new Error("Missing users.");return{users:e,serviceAccounts:t}})))),x=()=>{V=F.U()},G=e=>{V=V.withoutContext(e.id)};var Z=n(74327),j=n(97668),Y=n(80464);const H=()=>{(0,U.I4)(),(0,j.UL)(),(0,Y.Fc)(),(0,Y.Vb)(),(0,Z.nf)(),x()},W=e=>{(0,U.u_)(e.id),(0,j.Pz)(e),(0,Y.LU)(e),(0,Y.rt)(e),(0,Z.Db)(e),G(e)};var $=n(44715);const J=async(e,t)=>c.getFeatures(e.session,t),q=async(e,t)=>c.getPreAuthFeatures(e.session,t);var z=n(51896);const X=e=>(0,c.getIdentityAccessToken)(e.session),Q=e=>(0,c.getUserApplications)(e.session),ee=(e,t)=>(0,c.createSsoApp)(e.session,t),te=(e,t)=>(0,c.deleteSsoApp)(e.session,t),ne=(e,t)=>(0,c.patchSsoApp)(e.session,t),re=e=>(0,c.getAccountApplications)(e.session),ie=(e,t)=>(0,c.getAppDetails)(e.session,t),se=(e,t,n)=>(0,c.putApplicationGroupAssignments)(e.session,t,n),oe=(e,t,n)=>ae(e,{[t]:n}),ae=(e,t)=>(0,c.patchApplicationDeviceCheckStatus)(e.session,t),ue=async e=>(await(0,c.getAccountHandoffCertificate)(e.session)).certificate;var ce=n(18346),le=n(79593),de=n(94605),ye=n(92706);const pe=async e=>{if(!navigator.cookieEnabled)return[];const t=(0,le.Z)(e.config.siblingDomains);t.push(e.config.server);const n=t.map((async t=>{try{return await c.getUserCookies(e.session,t)}catch{return[]}})),r=await Promise.all(n),i=(0,de.Z)(r);return ye.userCookiesFromAPI(i)},me=async e=>{navigator.cookieEnabled&&await c.setUserCookie(e.session,e.config.server)},fe=async(e,t)=>{navigator.cookieEnabled&&await c.deleteAccountCookie(e.session,e.config.server,t)},ge=async(e,t)=>{navigator.cookieEnabled&&await c.deleteUserCookie(e.session,e.config.server,t)},he=(0,I.$y)("action/auth");var ve;!function(e){e.Password="PASSWORD",e.TrustedDevice="TRUSTED_DEVICE"}(ve||(ve={}));const Ce=h.type({accountKey:h.string,masterPassword:h.string},"PasswordAccountCredentials");h.type({type:h.literal(ve.Password),data:Ce},"AccountCredentials");let Ae=!1;const we=()=>Ae,Se=e=>{Ae=e};let Te=!1;const Pe=()=>Te,be=e=>{Te=e};let Re=!1;const Ee=()=>Re,Ie=e=>{Re=e};let Ue=!1;const Oe=()=>Ue,ke=e=>{Ue=e},De=(e,t,n)=>{P.reportError(new P.LoggableError({errorClass:P.ExceptionType.RequestError,userUuid:n?(0,E.assertLogSafe)(n):void 0,message:E.L`${e}: func: ${t}`}))},Me=async(e,t)=>{await e.session.initialize({rawSessionKey:P.base64urlToBytes(t.sessionKey.k),requestId:1,serverConfig:{notifier:t.notifier},sessionUuid:t.sessionUuid}),e.config.initializedWithExistingSession=!0,e.user=new y.OldUser({}),e.user.masterKey=await C.ManagedAccountKey.fromJwk(t.managedAccountKey),await ze(e,{shouldLoadUniverse:!0,isDesignatedAsPublic:!0,shouldAddAccountToExtension:!1}),await(0,z.w9)(e).then((t=>{(0,z.u0)(e,t)}))},Fe=async(e,t,n)=>{e.account=void 0,e.userAuth=void 0,e.user=void 0,e.accountOverview=void 0;const r="muk"in t?await xe(e,t,n):await Le(e,t,n);if("verified_session"===r.type)return await ze(e,n),{type:"verified_context",context:e};if("email_changed"===r.type){const i=r.newEmail;return Fe(e,{...t,email:i},n)}return r},_e=async(e,t,n,r)=>{e.userAuth||(e.userAuth=y.Auth.createFromPreComputedX(t.credentialBundle.srpx.exportBytes()));let i=e.user?.secretKey;i||(i=await C.SecretKey.forTrustedDevice(t.secretKeyUuid)),e.user=new y.OldUser({email:t.email,uuid:t.userUuid,secretKey:i});const s=await c.startAuth(e.session,{email:e.user.email,skFormat:t.secretKeyFormat,skid:t.secretKeyUuid,signInToken:n,deviceUuid:P.config.device.uuid,userUuid:t.userUuid});if(!s.userAuth)throw new Error("Did not receive userAuth params from startAuth");e.session.setSessionUuid(s.sessionID),e.user.masterKey=t.credentialBundle.auk;const o=await e.session.signInWithCredentialBundle(s.userAuth,t.credentialBundle.srpx,n,t.secretKeyUuid,t.email);return"verified_session"===o.type?(await ze(e,r),{type:"verified_context",context:e}):o},Ke=async(e,t,n)=>Fe(e,t,{...n,shouldLoadUniverse:!0}),Ne=async(e,t,n,r)=>{e.account=void 0,e.userAuth=void 0,e.user=void 0,e.accountOverview=void 0;let{userAuth:i}=t;if(!i){const r=await c.startAuth(e.session,{signInToken:n,deviceUuid:P.config.device.uuid,userUuid:t.userUuid});if(!r.userAuth)throw new Error("Did not receive userAuth params from startAuth");i=r.userAuth}const s=await C.SecretKey.forTrustedDevice(t.secretKeyUuid),o=t.credentialBundle.srpx;e.user=new y.OldUser({email:t.email,uuid:t.userUuid,secretKey:s}),e.user.masterKey=t.credentialBundle.auk;const a=await e.session.signInWithCredentialBundle(i,o,n,t.secretKeyUuid,t.email);return"verified_session"===a.type?(await ze(e,r),{type:"verified_context",context:e}):a},Ve=async(e,t,n)=>{if(!e.config.lang)throw new Error("Missing language");const[r,i,s]=await Promise.all([C.CredentialBundle.generateForTrustedDevice(),C.DeviceKey.generate(),C.SecretKey.generateForTrustedDevice()]),o=y.Auth.createFromPreComputedX(r.srpx.exportBytes());let a;try{a=await t.completeRecovery(P.config.device,r,s,o.params,e.config.lang,i),await n(a.details.accountUuid,a.details.userUuid,i)}catch(e){throw console.error("signInWithRecoveryCodePasskeys Failed to save device key:",e),new Error(`There was an issue saving the device key: ${(0,R.getErrorString)(e)}`)}try{return a.signIn(e,{shouldLoadUniverse:!0,isDesignatedAsPublic:!1})}catch(e){throw console.error("signInWithRecoveryCodePasskeys Failed to sign in:",e),new Error(`There was an issue while signing in to your account: ${(0,R.getErrorString)(e)}`)}},Be=async(e,t,n,r)=>{const i=await C.SecretKey.generate();e.user=new y.OldUser({email:n.aux.email,language:r,name:n.aux.name,secretKey:i}),e.userAuth=await y.Auth.generate({email:n.aux.email,password:t,secretKey:i}),e.user.masterKey=await C.Auk.deriveDefaultKdf({email:n.aux.email,password:t,secretKey:i});const s=await C.SrpX.fromHex(e.userAuth.srpX),o=await C.CredentialBundle.new({srpx:s,auk:e.user.masterKey});return(await n.completeRecovery(P.config.device,o,i,e.userAuth.params,r,void 0)).signIn(e,{shouldLoadUniverse:!0,isDesignatedAsPublic:!1})},Le=async(e,t,n)=>{const r=new y.OldUser({email:t.email,password:t.password,secretKey:t.secretKey,uuid:t.uuid});return e.user=r,e.session.signin(r,n.allowReauthorization)},xe=async(e,t,n)=>{const{email:r,secretKey:i,muk:s,srpX:o,uuid:a}=t;if(!s.alg)throw new Error("Missing MUK alg.");if(!o)throw new Error("Missing SRP-x.");const u=i?C.SecretKey.fromInput(i):void 0;if(i&&!u)throw new Error("Secret Key is invalid");const c=new y.OldUser({email:r,secretKey:u,uuid:a});return e.user=c,e.user.masterKey=await C.Auk.fromJwk(s),e.session.signin(c,n.allowReauthorization,o)},Ge=async(e,t,n)=>{try{const n=await e.session.verifyMfa(t);n.dsecret&&e.user&&(e.user.dSecret=n.dsecret)}catch(t){if(P.errors.isClientError(t,P.errors.ClientErrorCode.invalidMFA))return Je(e,t);throw t}return ze(e,n)},Ze=async(e,t,n,r)=>Ge(e,{type:n,code:t},r),je=async(e,t,n,r)=>Ge(e,{type:"dSecretProxy",dshmac:t,deviceUuid:n},r),Ye=async(e,t,n)=>Ge(e,{type:"webAuthn",data:t},n),He=async(e,t,n)=>{try{e.user&&(e.user.dSecret=t);const n=(0,ce.jl)(t,e.session.sessionUuid);await e.session.verifyMfa({type:"dSecret",dshmac:n})}catch(t){if(P.errors.isClientError(t,P.errors.ClientErrorCode.invalidMFA)&&e.user)return e.user.dSecret=void 0,Je(e,t);throw t}return ze(e,n)},We=async(e,t,n)=>Ge(e,t,n),$e=async(e,t,n)=>{try{const n=await e.session.enableMfaWithAuth(t);n.dsecret&&e.user&&(e.user.dSecret=n.dsecret)}catch(t){if(P.errors.isClientError(t,P.errors.ClientErrorCode.invalidMFA)||P.errors.isServerError(t,P.errors.ServerErrorCode.authenticationRequired,P.errors.HTTPStatusCode.unauthorized))return Je(e,t);throw t}return ze(e,n)},Je=async(e,t)=>{if(!e.session||!e.session.auth||!e.user)throw new Error("Missing auth or user data.");const n=e.session.auth.srpX,r=await e.session.signin(e.user,!1,n);throw"mfa_required"===r.type?t:new Error(`Unexpected sign-in response ${r.type}`)},qe=async e=>{const t=Object.keys(T.U);try{return(await Promise.race([J(e,t),new Promise(((e,t)=>{setTimeout((()=>t("Timeout")),3e3)}))])).features.reduce(((e,t)=>(e[t.name]=!0,e)),{})}catch(e){return console.error("Failed to retrieve feature flags:",e),{}}},ze=async(e,t)=>he("handleSignInSuccess",(async()=>{const n=e.user;if(!n)return Promise.reject(new Error("Missing user"));const r=(async()=>t.shouldLoadUniverse?(0,o.wG)(e,[o.NE.Groups]):(0,o.M3)(e,[o.NE.Me,o.NE.MeMemberships,o.NE.UserFlags,o.NE.AccountFlags,o.NE.Billing,o.NE.Tier,o.NE.Promotions,o.NE.GatedFeatureTrials]))().then((async r=>(0,o.iS)(e,r,n,t.translators,t.setupWithSystemVaults))).then((async()=>t.shouldLoadUniverse?it(e):Promise.resolve())).then((()=>{if(!e.session.serverConfig)throw new Error("Missing server config");e.notifier.connect(e.session.serverConfig.notifier)})).then((async()=>{e.nc.emit(P.notification.SignedIn),Ae&&e.account&&e.user&&!t.suppressClientNotifications&&(Ue?await tt(e,t):await et(e,t)),n.password=void 0})),i=qe(e);return Promise.all([i,r]).then((([t,n])=>{void 0!==e.account&&(e.account.features=t)}))})),Xe=(e,t)=>{if(e.account&&e.user)return{accountUuid:e.account.uuid,domain:e.account.urlHost(e.config.server),email:e.user.email,userUuid:e.user.uuid,deviceIsPublic:t.isDesignatedAsPublic?"true":"false"}},Qe=(e,t,n)=>{n?me(t).catch((e=>{console.error("Setting account cookie failed.",e)})).then((()=>{e()})).catch((()=>{})):e()},et=async(e,t)=>{if(!e.account||!e.user)return;const n=Xe(e,t);if(!n)return;const r=e.user.secretKey&&e.user.secretKey.exportSensitiveReadableString();P.config.device&&P.config.device.fromDeviceInit&&e.user.dSecret&&(n.dSecret=e.user.dSecret),t.authOnly&&(n.authOnly=!0);const i=r&&e.user.password,s=e.user?.secretKey&&e.user.secretKey.isTrustedDeviceFormat();if(i){if(!e.user.password)return;const i={...n,accountKey:r,masterPassword:e.user.password,shouldAddAccountToExtension:t.shouldAddAccountToExtension};Qe((()=>{document.dispatchEvent(new CustomEvent("B5SignInSucceeded",{bubbles:!1,cancelable:!1,detail:i}))}),e,t.authOnly)}else if(s)return tt(e,t)},tt=async(e,t)=>{const n=Xe(e,t);if(!n||!e.user||!e.user.masterKey)return;if(t.authOnly&&(n.authOnly=!0),!(e.user.masterKey instanceof C.Auk))throw De(E.L`Master key is not a valid Auk`,E.L`handleDelegatedSessionSignInSuccess`,e.user.uuid),new TypeError("Master key is not a valid Auk");const r={...n,shouldAddAccountToExtension:t.shouldAddAccountToExtension,masterKey:await e.user.masterKey.exportJwkJSON()};if(!Te||t.authOnly)try{const t=await c.delegateSession(e.session,dt((0,b.getb5xDevice)()),!1);r.session=t}catch(e){return void console.error("Could not create delegated session:",e)}Qe((()=>{document.dispatchEvent(new CustomEvent("B5DelegatedSignInSucceeded",{bubbles:!1,cancelable:!1,detail:r}))}),e,t.authOnly)},nt=async(e,t)=>{if(t.account&&t.user?.masterKey&&e.accountUuid===t.account?.uuid){const n=await c.delegateSession(t.session,dt((0,b.getb5xDevice)()),!1),r=Xe(t,{});if(!r)return;if(!(t.user.masterKey instanceof C.Auk))throw De(E.L`Master key is not a valid Auk`,E.L`handleDelegatedSessionRequest`,t.user.uuid),new TypeError("Master key is not a valid Auk");const i={...r,accountUuid:t.account.uuid,requestId:e.requestId,sessionDetail:{masterKey:await t.user.masterKey.exportJwkJSON(),session:n}};Qe((()=>{document.dispatchEvent(new CustomEvent("B5RequestDelegatedSessionResponse",{bubbles:!1,cancelable:!1,detail:i}))}),t,!1)}},rt=async(e,t,n,r)=>{if(!n&&r){const e=P.getIdentityStateAndRedirect(r);if(e&&(({state:n,redirectUri:t}=e),t&&!P.IDENTITY_REDIRECT.includes(t)))return}const i=(await X(e)).identityAccessToken;if(i&&n&&t){const e=new URL(window.location.origin+t);e.searchParams.set("state",n),e.searchParams.set("token",i),window.location.replace(e)}},it=async e=>he("addSigningKeysIfNeeded",(async()=>{const t=e.user;if(!t)throw new Error("Missing user.");const n=t.activeKeyset;if(!n)throw new Error("Missing user's active keyset.");if(!n.hasSigningKeys())return console.log("Generating signing keys"),n.generateSigningKeys().then((async()=>t.encryptActiveKeysetWithMasterKey())).then((async t=>S(e.session,t))).then((()=>{console.log("Successfully added signing keys")}))})),st=async e=>he("signOut",(async()=>(W(e),c.signOut(e.session).catch((e=>{console.error("signout failed:",e)})).then((()=>{e.nc.emit(P.notification.SignedOut)}))))),ot=h.intersection([h.type({accountKey:P.withDefaultUndefined(h.string),email:h.string,requestID:h.number,serverConfig:c.CompleteAuthResponse,sessionKey:P.crypto.JwkSymKey}),h.partial({masterKey:P.crypto.JwkSymKey,derivationInfo:C.KeyDerivationInfo,dSecret:h.string,password:h.string,auth:y.AuthCodec,ssoNonce:h.string})],"ContextInitialization"),at=async(e,t=!1)=>{if(!(e&&e.email&&e.serverConfig&&e.serverConfig.notifier&&e.sessionKey&&e.sessionKey.k&&e.sessionKey.kid))throw new Error("Invalid details object");if(!(t||e.masterKey&&e.masterKey.alg&&e.masterKey.k))throw new Error("Invalid details object");const n=e.accountKey?C.SecretKey.fromInput(e.accountKey):void 0;if(e.accountKey&&!n)throw new Error("Invalid Secret Key");const r=new y.OldUser({email:e.email,secretKey:n});return e.masterKey&&("mp"===e.masterKey.kid?r.masterKey=await C.Auk.fromJwk(e.masterKey,e.derivationInfo):r.masterKey=await C.ManagedAccountKey.fromJwk(e.masterKey)),e.dSecret&&(r.dSecret=e.dSecret),e.password&&(r.password=e.password),r},ut=async(e,t,n,{includeFeatureFlags:r=!1}={})=>{if(1!==t)throw new Error("Invalid API version");if(!(n&&n.email&&n.masterKey&&n.masterKey.alg&&n.masterKey.k&&n.serverConfig&&n.serverConfig.notifier&&n.sessionKey&&n.sessionKey.k&&n.sessionKey.kid))throw new Error("Invalid details object");e.user=await at(n);try{if(await e.session.initialize({rawSessionKey:P.base64urlToBytes(n.sessionKey.k),requestId:n.requestID,serverConfig:n.serverConfig,sessionUuid:n.sessionKey.kid,auth:n.auth}),await(0,o.wG)(e,[o.NE.Groups]),r){const t=await qe(e);void 0!==e.account&&(e.account.features=t)}if(!e.session.serverConfig)throw new Error("Missing server config");return e.notifier.connect(e.session.serverConfig.notifier),e.config.initializedWithExistingSession=!0,n.ssoNonce||e.nc.emit(P.notification.SessionInitialized),e}catch(t){throw e.nc.emit(P.notification.SessionInitError,t),t}},ct=async e=>he("getInitializationExportFromNewContext",(async()=>pt(e).then((async e=>lt(e))))),lt=async(e,{allowMissingAuk:t=!1,includeAuth:n=!1}={})=>{const{user:r,session:i}=e;if(!r)throw new Error("Missing user");const s=r.secretKey&&r.secretKey.exportSensitiveReadableString();if(!r.masterKey&&!t)throw new Error("Missing master key");if(!i.sessionKey||!i.sessionKey.jwk)throw new Error("Missing session key");if(!i.serverConfig)throw new Error("Missing server config");const o={accountKey:s,email:r.email,masterKey:void 0,derivationInfo:void 0,requestID:i.requestId,serverConfig:{notifier:i.serverConfig.notifier},sessionKey:i.sessionKey.jwk,dSecret:r.dSecret,password:r.password};return n&&(o.auth=i.auth),r.masterKey&&(o.masterKey=await r.masterKey.exportJwk(),r.masterKey instanceof C.Auk&&(o.derivationInfo=r.masterKey.derivationInfo)),o},dt=e=>{const t=Number.parseInt(e.clientVersion,10).toString();return{...e,clientVersion:t}},yt=async(e,t,n)=>{const r=e.user;if(!r)throw new Error("Missing user");const i=r.secretKey&&r.secretKey.exportSensitiveReadableString();if(r.secretKey&&!i)throw new Error("Invalid Secret Key");if(!r.masterKey)throw new Error("Missing master key");const s=await c.delegateSession(e.session,dt(t),n);if(!(r.masterKey instanceof C.Auk))throw De(E.L`Master key is not a valid Auk`,E.L`delegateSession`,r.uuid),new TypeError("Master key is not a valid Auk");return{accountKey:i,email:r.email,masterKey:await r.masterKey.exportJwk(),derivationInfo:r.masterKey.derivationInfo,requestID:1,serverConfig:{notifier:s.notifier},sessionKey:s.sessionKey,dSecret:void 0}},pt=async e=>{const t=new $._y(e.config),n=e.user;if(!n)throw new Error("Missing current user");if(t.user=new y.OldUser({email:n.email,secretKey:n.secretKey,uuid:n.uuid}),t.user.dSecret=n.dSecret,t.user.masterKey=n.masterKey,!e.session||!e.session.auth)throw new Error("Auth info not available.");const r=e.session.auth.srpX,i=await t.session.signin(t.user,!1,r);if("mfa_required"===i.type){if(!i.details.dsecret?.enabled)throw new Error("Unable to complete MFA, dSecret option not available.");{const e=t.user?.dSecret;if(!e)throw new Error("No dSecret available.");await t.session.verifyMfa({type:"dSecret",dshmac:(0,ce.jl)(e,t.session.sessionUuid)})}}return t},mt=async e=>{if(e.isSignedIn()&&void 0!==e.user&&void 0!==e.user.masterKey&&e.session.auth)return{email:e.user.email,muk:await e.user.masterKey.exportJwk(),secretKey:e.user.secretKey?e.user.secretKey.exportSensitiveReadableString():void 0,srpX:e.session.auth.srpX}},ft=async(e,{currentPassword:t,newPassword:n,generateNewSecretKey:r=!1,generateNewKeyset:i=!1,checkCurrentPassword:s=!0})=>{if(!e.user)throw new Error("Active user is missing");const o=e.user;if(!e.user.secretKey)throw new Error("Active user is missing secretKey");if(!n&&!r&&!i)throw new Error("Nothing to do");const a={oldSecretKey:e.user.secretKey,oldMasterKey:e.user.masterKey,oldActiveKeyset:e.user.activeKeyset,oldUserAuth:e.userAuth};try{s&&await Ct(e,t);const u=r?await C.SecretKey.generate():a.oldSecretKey;o.secretKey=u,o.password=n,e.userAuth=await y.Auth.generate({email:o.email,password:n,secretKey:u}),o.masterKey=await C.Auk.deriveDefaultKdf({email:o.email,password:n,secretKey:u}),i&&await o.generateNewKeyset();const c=await o.encryptActiveKeysetWithMasterKey();return o.password=void 0,[c,a]}catch(t){throw vt(e,o,a),t}},gt=async(e,t)=>{const[n,r]=await ft(e,t);await ht(e,n,r)},ht=async(e,t,n)=>{if(!e.user)throw new Error("Active user is missing");const r=e.user;try{const i=e.userAuth;if(!i)throw new Error("User's auth info is missing");const s={email:r.email,auth:y.Auth.getForUpload(i),activeKeyset:t},o=r.secretKey;if(!o)throw new Error("Missing user's Secret Key");return o.id!==n.oldSecretKey.id&&(s.accountKeyFormat=o.format.toString(),s.accountKeyUuid=o.id),r.archivedKeysets.length>0&&(s.archivedKeyset=r.archivedKeysets[0]),c.submitNewUserAuth(e.session,s)}catch(t){throw vt(e,r,n),t}},vt=(e,t,n)=>{t.password=void 0,t.masterKey=n.oldMasterKey,t.activeKeyset=n.oldActiveKeyset,t.secretKey=n.oldSecretKey,e.userAuth=n.oldUserAuth},Ct=async(e,t)=>{const n=e.user;if(!n)throw new Error("User is missing");const r=n.masterKey;if(!r)throw new Error("Missing current master key");if(!(r instanceof C.Auk))throw De(E.L`Master key is not a valid Auk`,E.L`verifyMasterPassword`,n.uuid),new TypeError("Master key is not a valid Auk");const i=await r.exportJwk(),s=r.derivationInfo;if(void 0===s)throw new Error("Missing current derivation info");if(void 0===n.secretKey)throw new Error("Missing secret key");const o=await C.Auk.derive(s,{email:n.email,secretKey:n.secretKey,password:t});if((await o.exportJwk()).k!==i.k)throw new P.errors.ClientError(P.errors.ClientErrorCode.incorrectMasterPassword,"Your email address, Secret Key, or password is incorrect.")},At=async(e,t)=>{await c.beginChangeEmail(e.session,t)},wt=async e=>{try{await c.promptConfirmChangeEmail(e.session)}catch(e){throw console.error("[promptConfirmChangeEmail] Failed to send email change token:",e),e}},St=async(e,t)=>{await c.cancelChangeEmail(e.session,t)},Tt=async(e,t,n,r)=>he("completeChangeEmailForPasswordUser",(async()=>{if(!e.user)throw new Error("User is missing");const i=e.user,s=i.email,o=e.userAuth,a=i.masterKey,u=i.activeKeyset;return Ct(e,n).then((async()=>(i.email=t,i.password=n,i.secretKey?(e.userAuth=await y.Auth.generate({email:t,password:n,secretKey:i.secretKey}),i.masterKey=await C.Auk.deriveDefaultKdf({email:t,password:n,secretKey:i.secretKey}),Promise.resolve()):Promise.reject(new Error("Missing Secret Key"))))).then((async()=>i.encryptActiveKeysetWithMasterKey())).then((async n=>{if(!e.userAuth)throw new Error("User's auth info is missing");const i={email:t,auth:y.Auth.getForUpload(e.userAuth),activeKeyset:n};return c.completeChangeEmail(e.session,i,r)})).then((()=>{i.password=void 0})).catch((t=>{throw i.email=s,i.masterKey=a,i.activeKeyset=u,i.password=void 0,e.userAuth=o,t}))})),Pt=async(e,t,n)=>{if(!e.user)throw new Error("User is missing");const r=e.user;if(!e.session?.auth)throw new Error("User's auth info is missing");const i=e.session.auth;if(!r.secretKey)throw new Error("Missing Secret Key");const s=r.email;try{r.email=t;const s=await r.encryptActiveKeysetWithMasterKey(),o={email:t,auth:y.Auth.getForUpload(i),activeKeyset:s};await c.completeChangeEmail(e.session,o,n)}catch(e){throw r.email=s,e}},bt=async(e,t,n)=>c.deleteDevice(e.session,t.uuid,n),Rt=async e=>c.deleteInactiveDevices(e.session),Et=async(e,t)=>c.require2FAOnNextSignIn(e.session,t.uuid),It=async(e,t)=>c.getBannersForSession(e.session,t),Ut=async(e,t,n)=>{const r=(await c.performBannerAction(e.session,t,c.BannerClosedStatus.Accept)).snooze.find((e=>e.group===n));if(r)return(0,P.dateFromGolang)(r.until)},Ot=async(e,t,n)=>{const r=(await c.performBannerAction(e.session,t,c.BannerClosedStatus.Dismiss)).snooze.find((e=>e.group===n));if(r)return(0,P.dateFromGolang)(r.until)};var kt=n(76936),Dt=n(41767),Mt=n(46559);const Ft="klp4y2ywpkpczwhhutf2fqy5ri",_t=async()=>C.unsafePrimitives.rawHkdf(C.unsafePrimitives.Sha2Mode.Sha256,P.str2ab("This value works around an OAuth implementation limitation. It has no other value or permissions."),new Uint8Array,P.str2ab("brex-oauth-obfuscation"),32),Kt=async e=>{if(!e)return"";const t=(0,Mt.TF)(Ft);await t.importRawKey(Dt.kz,await _t());const n=await t.decrypt(e);return P.ab2str(n)},Nt=async e=>{const t=(0,Mt.TF)(Ft);return await t.importRawKey(Dt.kz,await _t()),t.encrypt(P.str2ab(e))};var Vt=n(69258);const Bt={...Vt,...r},Lt=async e=>c.postBrexVerifier(e.session),xt=async(e,t)=>c.postBrexRefreshToken(e.session,t),Gt=async e=>c.getBrexClientInfo(e.session),Zt=async(e,t,n)=>{const r=n.get("code")||"",i=n.get("state")||"";if(!r)throw new Error("OAuth code is missing");if(!i)throw new Error("OAuth state is missing");return xt(e,{code:r,redirect:(0,Vt.getBrexRedirectUri)(t),nonce:i})},jt=async(e,t)=>c.requestBrexAccessToken(e.session,t),Yt=(0,I.$y)("action/child_account"),Ht=async e=>Yt("createChildAccountRelationship",(async()=>c.billing.createChildAccountRelationship(e.session).then(y.ChildAccountRelationship.create))),Wt=async e=>Yt("getChildAccountRelationship",(async()=>{try{const t=await c.billing.getChildAccountRelationship(e.session);return y.ChildAccountRelationship.create(t)}catch(e){const t=(0,R.getError)(e);if((0,R.isServerError)(t,R.ServerErrorCode.resourceNotFound))return y.ChildAccountRelationship.create({});throw t}})),$t=async(e,t)=>c.billing.checkChildAccountCode(e.session,t),Jt=async e=>c.billing.detachChildAccount(e.session),qt=async(e,t)=>Yt("attachAsChildAccount",(async()=>c.billing.attachAsChildAccount(e.session,t).then((async()=>(0,o.M3)(e,[o.NE.Billing]))).then((async()=>(0,kt.pI)(e))).then((t=>((0,$.fq)(e),t)))));var zt=n(20793);const Xt=async e=>c.getModernAppVersions(e.session),Qt=async(e,t)=>{if(!e.account)throw new Error("Account is missing.");if(!t.userAuth)throw new Error("Missing credential auth information.");const[n,r]=await Promise.all([y.LocalAuth.generate(t),(0,y.createSymmetricKey)().generate(y.JWK_ALG_A256GCM)]),i={...n.localAuth,version:"2",deviceUuid:P.generateUUID(),uniqueKey:r};return{bearerToken:n.bearerToken,fileContents:JSON.stringify(i)}};var en=n(1453),tn=n(49308),nn=n(52408),rn=n(69490);const sn=(0,I.$y)("action/vault_access"),on=async(e,t)=>sn("getAccessorsWithPubKeys",(async()=>{const[n,r]=(0,nn.Z)(t,(e=>"group"===e.accessorType)),i=await(0,rn.qc)(e,n),s=await(0,rn.F3)(e,r);return[...(0,rn.BY)(n,i),...(0,rn.BY)(r,s)]})),an=async(e,t,n,r)=>sn("addAccessorsToVault",(async()=>{const i=(await on(e,t)).map((async e=>y.VaultAccess.generate(n,e,r.byUuid&&r.byUuid[e.uuid]||r.default))),s=(await Promise.all(i)).map(ye.vaultAccessToAPI);await(0,P.batchChain)((async t=>(await c.addVaultAccess(e.session,n.uuid,t),[])),100,s)})),un=async(e,t,n,r)=>sn("addAccessorToVaults",(async()=>{const[i]=await on(e,[t]);if(!i)throw new Error("Missing accessor with public key.");const s=n.map((async t=>(void 0!==t.defaultAcl&&(r.acl=t.defaultAcl),y.VaultAccess.generate(t,i,r).then((async n=>{const r=ye.vaultAccessToAPI(n);return c.addVaultAccess(e.session,t.uuid,[r])})))));return Promise.all(s).then((()=>{}))})),cn=async(e,t)=>sn("updateVaultAccessPermissions",(async()=>{if(!y.vaultACL.isEffectivelyZero(t.acl))return"group"===t.accessorType?c.updateGroupVaultAccessPermissions(e.session,t.vaultUuid,t.accessorUuid,t.acl):c.updatePersonVaultAccessPermissions(e.session,t.vaultUuid,t.accessorUuid,t.acl);await yn(e,t)})),ln=async(e,t)=>{if(t.some((e=>"group"!==e.accessorType)))throw new Error("Some of the vaultAccess objects in updateBulkGroupVaultAccessPermissions were not groups");return sn("updateBulkGroupVaultAccessPermissions",(async()=>(await Promise.all(t.filter((e=>y.vaultACL.isEffectivelyZero(e.acl))).map((async t=>yn(e,t)))),c.updateBulkGroupVaultAccessPermissions(e.session,t.map((e=>({vaultUuid:e.vaultUuid,groupUuid:e.accessorUuid,permission:e.acl})))))))},dn=async(e,t,n,r)=>sn("deleteAccessorFromVault",(async()=>{const i="group"===r,s=i?P.getValidGroupUuid(t):P.getValidUserUuid(t);if(!s)return Promise.reject(new Error("Invalid accessor reference"));const o=P.getValidVaultUuid(n);return o?c.deleteAccessorFromVault(e.session,o,s,i).then((async()=>{const t=i?(0,z.ex)(e,s,{attrs:y.Group.Attr.VaultAccess,mustReload:!0}):(0,j.Ay)(e,s,{attrs:y.Person.Attr.VaultAccess,mustReload:!0});return Promise.all([(0,Y.R1)(e,o,{attrs:y.Vault.Attr.Accessors,mustReload:!0}),t])})):Promise.reject(new Error("Invalid vault reference"))})),yn=async(e,t)=>sn("revokeVaultAccess",(async()=>dn(e,t.accessorUuid,t.vaultUuid,t.accessorType))),pn=(0,I.$y)("action/convert_account"),mn=async e=>{if(!e.user)throw new Error("Missing user");const{user:t}=e;await hn(e,y.Account.Type.Individual,(async()=>c.changeAccountType(e.session,{type:y.Account.Type.Individual,accountName:t.name})))},fn=async(e,t,n)=>{await hn(e,y.Account.Type.Family,(async()=>c.changeAccountType(e.session,{type:y.Account.Type.Family,accountName:t,childAccountCode:n})))},gn=async(e,t)=>{const n=await(0,o.ge)(e,t);await hn(e,y.Account.Type.Business,(async()=>c.changeAccountType(e.session,{type:y.Account.Type.Business,accountName:t,domain:n})))},hn=async(e,t,n)=>{vn(e),await wn(e),await Sn(e,t),await n(),await Cn(e,t),await An(e)},vn=e=>{const{account:t,user:n}=e;if(!t)throw new Error("Missing account");if(!n)throw new Error("Missing user")},Cn=async(e,t)=>{const{account:n}=e;n&&(n.type=t,await wn(e))},An=async e=>{const{account:t}=e;if(!t)return;const{subscription:{availableTiers:n}}=t;n&&n.length>0&&await(0,kt.U)(e),(0,$.fq)(e)},wn=async e=>pn("reload",(async()=>{const t=(0,o.M3)(e,[o.NE.Billing,o.NE.Invite,o.NE.Settings,o.NE.Tier,o.NE.UserFlags,o.NE.Groups]),n=(0,Y._w)(e);return Promise.all([t,n])})),Sn=async(e,t)=>{switch(t){case y.Account.Type.Business:return Tn(e);case y.Account.Type.Family:return Pn(e);case y.Account.Type.Individual:return;default:throw new Error("Unknown account type")}},Tn=async e=>pn("convertToBusiness",(async()=>{const t=e.user;if(!t)return Promise.reject(new Error("Missing user"));const n={attrs:y.Group.Attr.Memberships|y.Group.Attr.PubKey};return Promise.all([(0,z.ji)(e,n),(0,z.Xv)(e,n),(0,z.Aj)(e,n)]).then((async n=>{const[r,i,s]=n;return bn(e,t,s).then((async t=>Rn(e,i,r,s,t)))})).then((()=>{}))})),Pn=async e=>pn("convertToFamily",(async()=>{const t=e.user;if(!t)return Promise.reject(new Error("Missing user"));let n,r,i;const s={attrs:y.Group.Attr.Memberships|y.Group.Attr.PubKey};return Promise.all([(0,z.ji)(e,s),(0,z.Xv)(e,s),(0,z.Aj)(e,s)]).then((async t=>([n,r,i]=t,c.getPartialUsers(e.session,{attrs:["combinedPermissions"]})))).then((async({users:t})=>{const i=t.filter((e=>y.User.isOwner(e)&&!y.User.isAdmin(e))).map((e=>({uuid:e.uuid,role:c.GroupMembership.Role.Manager}))),s=t.filter((e=>y.User.isAdmin(e)&&!y.User.isOwner(e))).map((e=>({uuid:e.uuid,role:c.GroupMembership.Role.Manager})));return Promise.all([(0,tn.TU)(e,{group:n,add:i,remove:[]}),(0,tn.TU)(e,{group:r,add:s,remove:[]})])})).then((async()=>(0,Y._w)(e))).then((async t=>{const i=[],s=t.filter((e=>e.type!==y.Vault.TypePersonal&&y.Vault.activeUserHasAcl(e,y.vaultACL.Manage))),o=(0,en.Z)(s,(t=>{let s=!1,o=!1;const a=t.accessList.filter((e=>"group"===e.accessorType)).map((t=>{const n=e.account&&e.account.findGroup(t.accessorUuid);if(!n)throw new Error("Missing group "+t.accessorUuid);switch(n.type){case y.Group.TypeOwners:return s=!0,t.acl=y.vaultACL.Manage,t;case y.Group.TypeAdmins:return o=!0,t.acl=y.vaultACL.Manage,t;default:{const e=(t.acl&y.vaultACL.RWE)>(t.acl&y.vaultACL.ALL_READ);return t.acl=e?y.vaultACL.RWE:y.vaultACL.ALL_READ,t}}})),u=[];if(s||u.push(r),o||u.push(n),u.length>0){const n=u.map((e=>({accessorType:e.accessorType,uuid:e.uuid})));i.push(an(e,n,t,{default:{acl:y.vaultACL.Manage}}))}return a}));let a=1;return await(0,P.batchChain)((async t=>{const n=Math.min(o.length,100*a++);return console.log(`Updating GVAs (${n}) of ${o.length})...`),await ln(e,t),[]}),100,o),Promise.all(i)})).then((async()=>bn(e,t,i))).then((async t=>Rn(e,r,n,i,t))).then((()=>{}))})),bn=async(e,t,n)=>pn("createTeamMembersGroupIfNeeded",(async()=>{if(e.account&&e.account.teamMembersGroup)return(0,z.w9)(e,{attrs:y.Group.Attr.PubKey});const r=new y.Group({desc:"All team members.",name:"Team Members",type:y.Group.TypeTeamMembers});return(0,z.hE)(e,r,n).then((async e=>r.addMembership(e,t,{role:c.GroupMembership.Role.Member}))).then((async()=>(0,z.B6)(e,r)))})),Rn=async(e,t,n,r,i)=>pn("createTeamVaultIfNeeded",(async()=>(0,Y.Fv)(e).then((async s=>{if(s)return s;const a=(0,o.Yo)();return a.generateNewKey().then((async()=>Promise.all([y.VaultAccess.generate(a,t,{acl:y.vaultACL.Manage}),y.VaultAccess.generate(a,n,{acl:y.vaultACL.Manage}),y.VaultAccess.generate(a,r,{acl:y.vaultACL.Recover}),y.VaultAccess.generate(a,i,{acl:y.vaultACL.ALL_READ|y.vaultACL.ALL_WRITE|y.vaultACL.ALL_EXPORT})]))).then((async t=>(0,Y.Ox)(e,a,t)))}))));var En=n(92757),In=n(5774),Un=n(61320),On=n.n(Un),kn=n(24683);const Dn=(0,A.F)("web-api/action/demo_vault_items.ts"),Mn=["wendy","wendyappleseed","wendy@appleseed.com"],Fn=["has_credit_card","has_address"],_n=h.record(h.string,h.string),Kn=async(e,t,n,r)=>{const i=await Vn(e.session);let s=(0,le.Z)(i);const o=(0,En.Z)(r,(e=>e.uuid===y.VaultItemTemplate.LoginUuid)),a=[];let u=1;for(let e=0;e<t;e++){const e=new y.VaultItem(n,o);let t=(0,In.Z)(s);0===t&&(s=(0,le.Z)(i),t=(0,In.Z)(s),u++);const r=P.getRandomValueFromRange(0,t-1),c=Object.keys(s)[r];if(void 0===c)continue;delete s[c];const l=u>1?` (${u.toString()})`:"";e.title=i[c]+l,e.overview.URLs=[{l:"website",u:"https://"+c}],e.overview.url="https://"+c;const d=Mn[P.getRandomValueFromRange(0,2)];void 0!==d&&e.setUsername(d);const[p,m]=Nn();e.setPassword(p,!0,m);const f=1===P.getRandomValueFromRange(1,40);e.faveIndex=f?1:0;const g=P.getRandomValueFromRange(On()().unix()-31536e3,On()().unix());if(e.createdAt=new Date(1e3*g),e.updatedAt=new Date(1e3*g),1===P.getRandomValueFromRange(1,10)){const t={time:g-P.getRandomValueFromRange(2e6,6e6),value:Nn()[0]};e.details.passwordHistory=[t]}const h=[];if(1===P.getRandomValueFromRange(1,15)){const e={k:y.VaultItem.FieldType.Concealed,n:y.VaultItem.TOTP_PREFIX+P.generateUUID(),v:P.generateUUID(),t:"one-time password"},t={name:P.generateUUID(),title:"",fields:[e]};h.push(t)}if(1===P.getRandomValueFromRange(1,15)){const e={k:y.VaultItem.FieldType.Concealed,n:P.generateUUID(),v:Nn()[0],t:"First pet's name?"},t={k:y.VaultItem.FieldType.Concealed,n:P.generateUUID(),v:Nn()[0],t:"Mother's maiden name?"},n={name:P.generateUUID(),title:"Security Questions",fields:[e,t]};h.push(n)}if(1===P.getRandomValueFromRange(1,15)){const e={k:y.VaultItem.FieldType.Email,n:P.generateUUID(),v:"support@"+c,t:"email"},t={k:y.VaultItem.FieldType.Phone,n:P.generateUUID(),v:"1-800-"+P.getRandomValueFromRange(100,999).toString()+"-"+P.getRandomValueFromRange(1e3,9999).toString(),t:"phone"},n={name:P.generateUUID(),title:"Contact Info",fields:[e,t]};h.push(n)}if(e.details.sections=h,1===P.getRandomValueFromRange(1,15)){const t=Fn[P.getRandomValueFromRange(0,1)];void 0!==t&&(e.tags=[t])}1===P.getRandomValueFromRange(1,15)&&(e.notes="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suam denique cuique naturam esse ad vivendum ducem."),a.push(e)}await(0,kn.u7)(e,a,n)},Nn=()=>{if(1===P.getRandomValueFromRange(0,1)){const[e,t]=P.generatePassphrase(P.getRandomValueFromRange(4,5));return[e.join(" "),t]}{const e=P.PASS_CHAR_SET.UPPERCASE+P.PASS_CHAR_SET.LOWERCASE+P.PASS_CHAR_SET.DIGITS;return P.generatePassword(e,P.getRandomValueFromRange(15,25))}},Vn=Dn((()=>({name:"getDemoWebsites",method:"GET",url:"/demo-data/websites.json",responseType:_n}))),Bn=async(e,t)=>c.getDeveloperReport(e.session,t),Ln=async(e,t,n,r,i,s)=>c.getDeveloperUsersReport(e.session,t,n,r,i,s),xn=async(e,t,n,r)=>c.getDeveloperUsersReportCsv(e.session,t,n,r),Gn=async(e,t,n,r,i,s)=>{const{numSharedVaults:o,sharedVaults:a}=await c.getDeveloperSharedVaultsReport(e.session,t,n,r,i,s),u=await Promise.all(a.map((async({developerItems:t,uuid:n,vault:r})=>r?{developerItems:t,vault:await ye.parseVault(e,r),uuid:n}:{developerItems:t,uuid:n})));return{numSharedVaults:o,sharedVaults:u}},Zn=async(e,t,n,r)=>c.getDeveloperSharedVaultsReportCsv(e.session,t,n,r),jn=async(e,t,n,r,i)=>c.getDeveloperServiceAccountsReport(e.session,t,n,r,i),Yn=async(e,t,n)=>c.getDeveloperServiceAccountsReportCsv(e.session,t,n),Hn=async e=>await c.getEmailSubscriptions(e.session),Wn=async(e,t)=>c.updateEmailSubscriptions(e.session,t),$n=async e=>c.getEmailTemplates(e.session),Jn=async(e,t)=>c.getEmailTemplateByUuid(e.session,t),qn=async e=>c.postFastmailVerifier(e.session),zn=async(e,t)=>c.postFastmailRefreshToken(e.session,t);var Xn=n(4280);const Qn=async(e,t)=>c.postFirewallRules(e.session,t),er=async e=>c.getFirewallRules(e.session).then((async e=>ye.parseFirewallRules(e))),tr=async(e,t)=>c.sendFeedback(e.session,t);var nr=n(70479);const rr=(0,I.$y)("action/gift_card"),ir=async e=>rr("getGiftCards",(async()=>c.billing.getGiftCards(e.session).then((e=>e.map(nr.GiftCard.create))))),sr=async(e,t)=>rr("redeemGiftCard",(async()=>c.billing.redeemGiftCard(e.session,t))),or=async(e,t)=>c.billing.checkGiftCard(e.session,t);var ar,ur=n(80129),cr=n(77615);!function(e){e.populateVaultItemSectionField=(n,r,i,s,o,a)=>{void 0!==s?t(n,i,s,o):e.addFieldToOtherFieldsSection(n,r,i,a)};const t=(t,n,r,i)=>{let s=(0,En.Z)(t.details.sections,(e=>e.name===r.section||e.title===r.section));s||(s={name:cr.D5.generateUUID(),title:r.section,fields:[]},t.details.sections.push(s));const o=s?.fields?.find((e=>e.n===r.field));if(o){r.v?o.v=r.v(o,n):o.v=n;const s=e.getItemOverview(i,o,t);""!==s&&(t.overview.ainfo=s)}else{s.fields||(s.fields=[]);const t=e.createSectionField({kind:r.kind||y.VaultItem.FieldType.String,title:r.field,value:n,attributes:r.attributes||void 0,inputTraits:r.inputTraits||void 0,menuItems:r.menuItems||void 0});r.v&&(t.v=r.v(t,n)),s.fields.push(t)}};e.addFieldToOtherFieldsSection=(t,n,r,i)=>{const s=(0,En.Z)(t.details.sections,(e=>e.title===i["Other Fields"]()));s?(s.fields||(s.fields=[]),s.fields.push(e.createSectionField({kind:y.VaultItem.FieldType.String,title:n,value:r}))):t.details.sections.push({name:cr.D5.generateUUID(),title:i["Other Fields"](),fields:[e.createSectionField({kind:y.VaultItem.FieldType.String,title:n,value:r})]})},e.createSectionField=e=>({k:e.kind,v:e.value,t:e.title,n:cr.D5.generateUUID(),a:e.attributes,inputTraits:e.inputTraits,m:e.menuItems}),e.getItemOverview=(e,t,n)=>{if(e&&e.attrs.subtitle===t.n)return y.VaultItem.getStringValue(t);if(n.templateUuid===cr.o4.VaultItemTemplate.CreditCardUuid&&t.n===y.VaultItem.FieldName.CreditCard.CreditCardNumber){const e=y.VaultItem.getStringValue(t);return y.VaultItem.getCreditCardSubtitle(e)}return""},e.getVaultItemTemplate=(e,t)=>{const n=t.find((t=>t.uuid===e));if(!n)throw new Error(`Could not find template with ID "${e}"`);return n},e.getValueFromRecord=(e,t)=>{const n=e[t];return void 0===n?"":n}}(ar||(ar={}));const lr=async(e,t,n)=>(0,ur.Tk)(e).then((e=>{const r=ar.getVaultItemTemplate(y.VaultItemTemplate.LoginUuid,e);return t.map((e=>{const t=new y.VaultItem(n),[i,s,o,a]=e;return t.templateUuid=y.VaultItemTemplate.LoginUuid,t.title=i||r.singularName,s&&(t.url=s),o&&t.setUsername(o),a&&t.setPassword(a),t}))})).catch((e=>{throw e}));var dr=n(16307);const yr=e=>{const t=mr(e,{skipEmptyLines:!0}),n=t.errors.length>0;return n&&console.error("Possible errors importing data:",t.errors),{parsedData:t.data,hasErrors:n}},pr=e=>mr(e,{skipEmptyLines:!0,header:!0}).data,mr=(e,t)=>(fr(),dr.parse(e,t)),fr=()=>{if(void 0===dr)throw new TypeError("Papa Parse must be loaded first.")},gr=e=>{const t=hr(e),n=[];for(let r=0;r<t;r++){const t=e.some((e=>e[r]));n.push(t)}return e.map((e=>e.filter(((e,t)=>n[t]))))},hr=e=>e.reduce(((e,t)=>t.length>e?t.length:e),0),vr=(e,t,n)=>{if(0===e.length)return;0===e.indexOf("apple-otpauth://")&&(e=e.slice(6));const r={k:cr.nc.FieldType.Concealed,n:cr.nc.TOTP_PREFIX+(0,P.generateUUID)(),v:e,t:n["one-time password"]()},i=((e,t)=>{if(e.details&&e.details.sections)return(0,En.Z)(e.details.sections,(e=>e.title.toLowerCase()===t.toLowerCase()))})(t,n.security());if(i)i.fields?i.fields.push(r):i.fields=[r];else{const e={name:"Section_"+(0,P.generateUUID)(),title:n.security(),fields:[r]};t.details&&t.details.sections?t.details.sections.push(e):t.details.sections=[e]}},Cr=(0,I.$y)("action/import/apple"),Ar=async(e,t,n)=>Cr("parseAppleExport",(async()=>{const r=yr(t).parsedData;return 0===r.length?[]:(r[0]&&"Title"===r[0][0]&&r.shift(),lr(e,r,n))}));var wr=n(61670),Sr=n(14502);const Tr=(0,I.$y)("action/import/bitwarden");var Pr;!function(e){e.BadEncType="bad encType attribute",e.BadData="the encrypted data has a different format than expected",e.BadMac="failed to verify mac"}(Pr||(Pr={}));const br=(e,t,n,r,i)=>Tr("parseBitwardenExport",(async()=>{let s;const o=(0,wr.Jx)((0,wr.J5)(t),wr.s_.pipe(Kr));switch(o.type){case"ok":s=o.value;break;case"err":throw new Error(r.unsupportedBitwardenExport())}if(!s.encrypted||!s.passwordProtected)throw new Error(r.unsupportedBitwardenExport());if(s.kdfType!==kr.Pbkdf2Sha256)throw new Error(r.unsupportedBitwardenKdfType(s.kdfType));const a=await Er(s,i.bitwardenExportPasssword);i.bitwardenExportPasssword="";try{await Ur(a,s.encKeyValidation_DO_NOT_EDIT)}catch{throw new Error(r.bitwardenBadPassword())}let u;try{u=await Ur(a,s.data)}catch{throw new Error(r.bitwardenFailedToDecrypt())}const c=(0,wr.Jx)(u,wr.AV.pipe(Yr));let l;switch(c.type){case"ok":l=c.value;break;case"err":throw(0,wr.AK)(c.value,E.L`action/import/bitwarden`,E.L`parseBitwardenExport`),new Error(r.unsupportedBitwardenExport())}return await Dr(e,n,r,l)})),Rr={name:"HMAC",hash:"SHA-256"},Er=async(e,t)=>{const n=await Sr.subtle.importKey("raw",(0,wr.J5)(t),"PBKDF2",!1,["deriveBits"]),r=await Sr.subtle.deriveBits({name:"PBKDF2",hash:"SHA-256",salt:(0,wr.J5)(e.salt),iterations:e.kdfIterations},n,256),i=await Sr.subtle.importKey("raw",r,Rr,!1,["sign"]),s=await Ir(i,(0,wr.J5)("enc"),32),o=await Ir(i,(0,wr.J5)("mac"),32);return{enc:await Sr.subtle.importKey("raw",s,"AES-CBC",!1,["decrypt"]),mac:await Sr.subtle.importKey("raw",o,Rr,!1,["verify"])}},Ir=async(e,t,n)=>{const r=Math.ceil(n/32);let i=new Uint8Array;const s=new Uint8Array(n);let o=0;for(let a=1;a<=r&&o<n;++a){const n=new Uint8Array(i.byteLength+t.byteLength+1);n.set(i),n.set(t,i.byteLength),n.set([a],i.byteLength+t.byteLength),i=new Uint8Array(await Sr.subtle.sign(Rr,e,n)),s.set(i,o),o+=i.byteLength}return s},Ur=async(e,t)=>{const n=t.split("."),r=n[0],i=n[1];let s=Or.AesCbc256WithHmacSha256;if(void 0===r)throw new Error(Pr.BadEncType);{const e=parseInt(r,10);if(!(e in Or))throw new Error(Pr.BadEncType);s=e}if(void 0===i)throw new Error(Pr.BadData);const o=i.split("|");if(void 0===o[0]||void 0===o[1])throw new Error(Pr.BadData);const a=(0,wr.jL)(o[0]),u=(0,wr.jL)(o[1]);if(s===Or.AesCbc256WithHmacSha256){if(void 0===o[2])throw new Error(Pr.BadData);const t=(0,wr.jL)(o[2]),n=new Uint8Array(a.byteLength+u.byteLength);if(n.set(a,0),n.set(u,a.byteLength),!await Sr.subtle.verify(Rr,e.mac,t,n))throw new Error(Pr.BadMac);return(0,wr._u)(await Sr.subtle.decrypt({name:"AES-CBC",iv:a},e.enc,u))}return""};var Or,kr;!function(e){e[e.AesCbc256WithHmacSha256=2]="AesCbc256WithHmacSha256"}(Or||(Or={})),function(e){e[e.Pbkdf2Sha256=0]="Pbkdf2Sha256"}(kr||(kr={}));const Dr=async(e,t,n,r)=>{const{loginTemplate:i,creditCardTemplate:s,secureNoteTemplate:o,identityTemplate:a}=await(0,ur.lY)(e),u={};r.folders&&r.folders.forEach((e=>u[e.id]=e.name));const c=[];return(r.items?r.items:[]).forEach((e=>{if(e.deletedDate||e.collectionId)return;const r=new y.VaultItem(t);if(r.isNewItem=!0,e.folderId){const t=u[e.folderId];t&&r.addTag(t)}r.title=e.name,e.notes&&(r.notes=e.notes),r.faveIndex=e.favorite?1:0,e.creationDate&&(r.createdAt=new Date(e.creationDate)),e.revisionDate&&(r.updatedAt=new Date(e.revisionDate));const l=[];if(e.fields)for(const t of e.fields){let e="T";t.type===Zr.Boolean&&(e="C"),l.push({value:t.value?t.value:"",type:e,name:t.name?t.name:""})}if(r.webFormFields=l,e.passwordHistory)for(const t of e.passwordHistory)r.details.passwordHistory||(r.details.passwordHistory=[]),r.details.passwordHistory.push({time:t.lastUsed?.getTime(),value:t.password});switch(e.type){case Br.Card:Mr(r,s,n,e);break;case void 0:case Br.Login:Fr(r,i,n,e);break;case Br.Identity:_r(r,a,n,e);break;default:r.parseTemplate(o)}c.push(r)})),c},Mr=(e,t,n,r)=>{e.parseTemplate(t);const i=r.card;if(i)for(const r of[{key:"cardholder",value:i.cardholderName},{key:"type",value:i.brand},{key:"ccnum",value:i.number},{key:"cvv",value:i.code},{key:"expiry",value:On()(`${i.expMonth}/${i.expYear}`,["MM/YYYY","M/YYYY"]).format("YYYYMM")}])r.value&&ar.populateVaultItemSectionField(e,r.key,r.value,{section:"",field:r.key},t,n)},Fr=(e,t,n,r)=>{e.parseTemplate(t);const i=r.login;if(i){if(i.username&&e.setUsername(i.username),i.password&&e.setPassword(i.password),i.uris)for(const t of i.uris)t.uri&&(e.url=t.uri);i.totp&&vr(i.totp,e,n)}},_r=(e,t,n,r)=>{e.parseTemplate(t);const i=r.identity;if(i)for(const r of[{section:"name",key:"title",value:i.title},{section:"name",key:"firstname",value:i.firstName},{section:"name",key:"middle name",value:i.middleName},{section:"name",key:"lastname",value:i.lastName},{section:"name",key:"company",value:i.company},{section:"name",key:"ssn",value:i.ssn,kind:y.VaultItem.FieldType.Concealed},{section:"name",key:"passportnumber",value:i.passportNumber,kind:y.VaultItem.FieldType.Concealed},{section:"name",key:"licensenumber",value:i.licenseNumber,kind:y.VaultItem.FieldType.Concealed},{section:"address",key:"address",v:{street:[i.address1,i.address2,i.address3].join("\n"),city:i.city,state:i.state,zip:i.postalCode,country:i.country}},{section:"address",key:"defphone",value:i.phone},{section:"internet",key:"email",value:i.email},{section:"internet",key:"username",value:i.username}])ar.populateVaultItemSectionField(e,r.key,r.value?r.value:"",{section:r.section,field:r.key,kind:r.kind,v:r.value?void 0:(e,t)=>r.v},t,n)},Kr=h.readonly(h.type({encrypted:h.boolean,passwordProtected:h.boolean,salt:h.string,kdfType:h.number,kdfIterations:h.number,encKeyValidation_DO_NOT_EDIT:h.string,data:h.string}),"EncryptedFileFormat"),Nr=h.readonly(h.type({id:h.string,name:h.string}),"Folder"),Vr=e=>(0,wr.Wc)(h.union([e,h.undefined,h.null]),void 0);var Br;!function(e){e[e.Login=1]="Login",e[e.SecureNote=2]="SecureNote",e[e.Card=3]="Card",e[e.Identity=4]="Identity"}(Br||(Br={}));const Lr=h.readonly(h.type({uris:Vr(h.readonlyArray(h.type({uri:Vr(h.string)}))),username:Vr(h.string),password:Vr(h.string),totp:Vr(h.string)}),"LoginItemType"),xr=h.readonly(h.type({cardholderName:Vr(h.string),brand:Vr(h.string),number:Vr(h.string),expMonth:Vr(h.string),expYear:Vr(h.string),code:Vr(h.string)}),"CardItemType"),Gr=h.readonly(h.type({title:Vr(h.string),firstName:Vr(h.string),middleName:Vr(h.string),lastName:Vr(h.string),address1:Vr(h.string),address2:Vr(h.string),address3:Vr(h.string),city:Vr(h.string),state:Vr(h.string),postalCode:Vr(h.string),country:Vr(h.string),company:Vr(h.string),email:Vr(h.string),phone:Vr(h.string),ssn:Vr(h.string),username:Vr(h.string),passportNumber:Vr(h.string),licenseNumber:Vr(h.string)}),"IdentityItemType");var Zr;!function(e){e[e.Text=0]="Text",e[e.Hidden=1]="Hidden",e[e.Boolean=2]="Boolean",e[e.Linked=3]="Linked"}(Zr||(Zr={}));const jr=h.readonly(h.type({id:h.string,organizationId:Vr(h.string),folderId:Vr(h.string),collectionId:Vr(h.string),type:Vr(h.number),name:h.string,notes:Vr(h.string),fields:Vr(h.readonlyArray(h.type({name:Vr(h.string),value:Vr(h.string),type:Vr(h.number),linkedId:Vr(h.number)}))),favorite:Vr(h.boolean),login:Vr(Lr),card:Vr(xr),identity:Vr(Gr),reprompt:Vr(h.number),passwordHistory:Vr(h.readonlyArray(h.type({password:h.string,lastUsed:Vr(wr.ze)}))),revisionDate:Vr(wr.ze),creationDate:Vr(wr.ze),deletedDate:Vr(wr.ze)}),"Item"),Yr=h.readonly(h.type({folders:Vr(h.readonlyArray(Nr)),items:Vr(h.readonlyArray(jr))}),"FileFormat"),Hr=(0,I.$y)("action/import/chrome"),Wr=async(e,t,n)=>Hr("parseChromeExport",(async()=>{const r=yr(t).parsedData;return 0===r.length?[]:(r[0]&&"name"===r[0][0]&&r.shift(),lr(e,r,n))})),$r=async(e,t,n,r)=>new Promise(((i,s)=>{(0,ur.Tk)(e).then((async e=>{const s=pr(t);let o=!1;if(s[0]){const e=Object.keys(s[0]);Object.values(ni).forEach((t=>{const n=ui[t];n?.[0]===e[0]&&n?.[1]===e[1]&&e[0]===si.UsernameOne&&(o=!0)}))}i(s.map((t=>o?Jr(t,n,ar.getVaultItemTemplate(y.VaultItemTemplate.LoginUuid,e),r):qr(t,n,e,r))))})).catch((e=>{s(e)}))})),Jr=(e,t,n,r)=>{const i=new y.VaultItem(t,n);i.title=ar.getValueFromRecord(e,si.Title)||n.singularName,i.url=ar.getValueFromRecord(e,si.Url),i.notes=ar.getValueFromRecord(e,si.Note);const s=ar.getValueFromRecord(e,si.Category);i.tags=s.length>0?[s]:[];const o=ar.getValueFromRecord(e,si.OtpSecret);o.length>0&&vr(o,i,r),i.setPassword(ar.getValueFromRecord(e,si.Password));const a=ar.getValueFromRecord(e,si.UsernameOne),u=ar.getValueFromRecord(e,si.UsernameTwo),c=ar.getValueFromRecord(e,si.UsernameThree),l=di[ci.Login];0===u.length&&0===c.length?i.setUsername(a):u.length>0&&0===c.length?(i.setUsername(u),ar.populateVaultItemSectionField(i,"email",a,l?.email,n,r)):c.length>0&&(i.setUsername(u),ar.populateVaultItemSectionField(i,"email",a,l?.email,n,r),ar.populateVaultItemSectionField(i,"secondary login",c,l?.secondaryLogin,n,r));const d=new Set(Object.values(si).map((e=>e.toString())));return Object.entries(e).filter((([e,t])=>!d.has(e))).forEach((([e,t])=>{ar.populateVaultItemSectionField(i,e,t,void 0,n,r)})),i},qr=(e,t,n,r)=>{const i=ar.getValueFromRecord(e,"type")||ci.SecureNote,s=ar.getVaultItemTemplate(li[i]??y.VaultItemTemplate.SecureNoteUuid,n),o=new y.VaultItem(t,s);o.title=zr(e,i,s);const a=ar.getValueFromRecord(e,Qr(i))||"";o.notes=a;const u=di[i];if(Object.entries(e).forEach((([e,t])=>{ei(i,e,t)&&ar.populateVaultItemSectionField(o,e,t,u?.[e],s,r)})),i===ci.CreditCard){const t=ar.getValueFromRecord(e,ri.ExpirationYear)+ar.getValueFromRecord(e,ri.ExpirationMonth);ar.populateVaultItemSectionField(o,"expirationDate",t,u?.expirationDate,s,r)}else if(i===ci.Address){const t=JSON.stringify({region:"",city:ar.getValueFromRecord(e,oi.City),country:ar.getValueFromRecord(e,oi.Country),street:ar.getValueFromRecord(e,oi.Address),zip:ar.getValueFromRecord(e,oi.Zip),state:ar.getValueFromRecord(e,oi.State)});ar.populateVaultItemSectionField(o,oi.Address,t,u?.[oi.Address],s,r)}return o},zr=(e,t,n)=>t===ci.TaxNumber?"Tax Number":t===ci.Name?ar.getValueFromRecord(e,oi.FirstName)+" "+ar.getValueFromRecord(e,oi.LastName):ar.getValueFromRecord(e,Xr(t))||n.singularName,Xr=e=>{switch(e){case ci.Bank:case ci.CreditCard:return ri.AccountName;case ci.IdCard:case ci.Passport:case ci.DriverLicense:case ci.SocialSecurityNumber:return ii.Name;case ci.SecureNote:return ai.Title;case ci.Address:case ci.Company:case ci.Email:case ci.Number:case ci.Website:return oi.ItemName}return""},Qr=e=>e===ci.SecureNote?ai.Notes:"",ei=(e,t,n)=>!(""===n||"type"===t||e===ci.CreditCard&&(t===ri.ExpirationMonth||t===ri.ExpirationYear)||e===ci.Bank&&t===ri.AccountName||e===ci.SecureNote&&(t===ai.Title||t===si.Note)||e===ci.Email&&t===oi.ItemName||e===ci.Number&&t===oi.ItemName||e===ci.Address&&(t===oi.ItemName||t===oi.Address||t===oi.Country||t===oi.State||t===oi.City||t===oi.Zip)||e===ci.Website&&t===oi.ItemName),ti=(e,t)=>{if(e.k===y.VaultItem.FieldType.Date){const e=On().utc(t.trim(),["YYYY-MM-DD","YYYY-M-DD","YYYY-MM-D","YYYY-M-D"],!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return cr.D5.isValidNumber(e)?e:t}return Number(On()(t,["YYYY-MM-DD","YYYY-M-DD","YYYY-MM-D","YYYY-M-D"],!0).format("YYYYMM"))||0};var ni,ri,ii,si,oi,ai;!function(e){e.Ids="ids.csv",e.Payments="payments.csv",e.Credentials="credentials.csv",e.PersonalInfo="personalInfo.csv",e.SecureNotes="securenotes.csv"}(ni||(ni={})),function(e){e.Type="type",e.AccountName="account_name",e.AccountHolder="account_holder",e.CreditCardNumber="cc_number",e.Code="code",e.ExpirationMonth="expiration_month",e.ExpirationYear="expiration_year",e.RoutingNumber="routing_number",e.AccountNumber="account_number",e.Country="country",e.IssuingBank="issuing_bank"}(ri||(ri={})),function(e){e.Type="type",e.Number="number",e.Name="name",e.IssueDate="issue_date",e.ExpirationDate="expiration_date",e.PlaceOfIssue="place_of_issue",e.State="state"}(ii||(ii={})),function(e){e.UsernameOne="username",e.UsernameTwo="username2",e.UsernameThree="username3",e.Title="title",e.Password="password",e.Note="note",e.Url="url",e.Category="category",e.OtpSecret="otpSecret"}(si||(si={})),function(e){e.Type="type",e.Title="title",e.FirstName="first_name",e.MiddleName="middle_name",e.LastName="last_name",e.Login="login",e.DateOfBirth="date_of_birth",e.PlaceOfBirth="place_of_birth",e.Email="email",e.EmailType="email_type",e.ItemName="item_name",e.PhoneNumber="phone_number",e.Address="address",e.Country="country",e.State="state",e.City="city",e.Zip="zip",e.AddressRecipient="address_recipient",e.AddressBuilding="address_building",e.AddressApartment="address_apartment",e.AddressFloor="address_floor",e.AddressDoorCode="address_door_code",e.JobTitle="job_title",e.Url="url"}(oi||(oi={})),function(e){e.Title="title",e.Notes="note"}(ai||(ai={}));const ui={[ni.Ids]:[ii.Type,ii.Number,ii.Name,ii.IssueDate,ii.ExpirationDate,ii.PlaceOfIssue,ii.State],[ni.Payments]:[ri.Type,ri.AccountName,ri.AccountHolder,ri.CreditCardNumber,ri.Code,ri.ExpirationMonth,ri.ExpirationYear,ri.RoutingNumber,ri.AccountNumber,ri.Country,ri.IssuingBank],[ni.Credentials]:[si.UsernameOne,si.UsernameTwo,si.UsernameThree,si.Title,si.Password,si.Note,si.Url,si.Category,si.OtpSecret],[ni.PersonalInfo]:[oi.Type,oi.Title,oi.FirstName,oi.MiddleName,oi.LastName,oi.Login,oi.DateOfBirth,oi.PlaceOfBirth,oi.Email,oi.EmailType,oi.ItemName,oi.PhoneNumber,oi.Address,oi.Country,oi.State,oi.City,oi.Zip,oi.AddressRecipient,oi.AddressBuilding,oi.AddressApartment,oi.AddressFloor,oi.AddressDoorCode,oi.JobTitle,oi.Url],[ni.SecureNotes]:[ai.Title,ai.Notes]};var ci;!function(e){e.Login="login",e.Bank="bank",e.CreditCard="credit_card",e.IdCard="card",e.Passport="passport",e.DriverLicense="license",e.SocialSecurityNumber="social_security",e.TaxNumber="tax_number",e.Name="name",e.Email="email",e.Number="number",e.Address="address",e.Company="company",e.Website="website",e.SecureNote="secure_note"}(ci||(ci={}));const li={[ci.Bank]:y.VaultItemTemplate.BankAccountUuid,[ci.CreditCard]:y.VaultItemTemplate.CreditCardUuid,[ci.IdCard]:y.VaultItemTemplate.IdentityUuid,[ci.Passport]:y.VaultItemTemplate.PassportUuid,[ci.DriverLicense]:y.VaultItemTemplate.DriverLicenseUuid,[ci.SocialSecurityNumber]:y.VaultItemTemplate.SocialSecurityNumberUuid,[ci.TaxNumber]:y.VaultItemTemplate.SecureNoteUuid,[ci.Name]:y.VaultItemTemplate.IdentityUuid,[ci.Email]:y.VaultItemTemplate.IdentityUuid,[ci.Number]:y.VaultItemTemplate.IdentityUuid,[ci.Address]:y.VaultItemTemplate.IdentityUuid,[ci.Company]:y.VaultItemTemplate.IdentityUuid,[ci.Website]:y.VaultItemTemplate.IdentityUuid,[ci.SecureNote]:y.VaultItemTemplate.SecureNoteUuid},di={[ci.Login]:{email:{field:"email",section:"additional logins"},secondaryLogin:{field:"secondary login",section:"additional logins"}},[ci.CreditCard]:{[ri.AccountName]:{field:"cardholder",section:""},[ri.CreditCardNumber]:{field:"ccnum",section:""},[ri.Code]:{field:"cvv",section:""},[ri.Country]:{field:"country",section:"details",inputTraits:{autocapitalization:"Words",keyboard:"Default"}},expirationDate:{field:"expiry",section:""}},[ci.Bank]:{[ri.IssuingBank]:{field:"bankName",section:""},[ri.AccountHolder]:{field:"owner",section:""},[ri.RoutingNumber]:{field:"swift",section:""},[ri.AccountNumber]:{field:"iban",section:""},[ri.Country]:{field:"country",section:"branchInfo",inputTraits:{autocapitalization:"Words",keyboard:"Default"}}},[ci.SecureNote]:{},[ci.Passport]:{[ii.Name]:{field:"fullname",section:""},[ii.Number]:{field:"number",section:""},[ii.IssueDate]:{field:"issue_date",section:"",v:ti},[ii.ExpirationDate]:{field:"expiry_date",section:"",v:ti},[ii.PlaceOfIssue]:{field:"issuing_country",section:""}},[ci.DriverLicense]:{[ii.Name]:{field:"fullname",section:""},[ii.Number]:{field:"number",section:""},[ii.IssueDate]:{field:"issue date",section:"",kind:y.VaultItem.FieldType.MonthYear,v:ti},[ii.ExpirationDate]:{field:"expiry_date",section:"",v:ti},[ii.State]:{field:"state",section:""}},[ci.SocialSecurityNumber]:{[ii.Name]:{field:"name",section:""},[ii.Number]:{field:"number",section:""}},[ci.TaxNumber]:{[ii.Number]:{field:"number",section:"",kind:y.VaultItem.FieldType.Concealed,inputTraits:{keyboard:"NamePhonePad"}}},[ci.IdCard]:{[ii.Name]:{field:"full name",section:"",inputTraits:{autocapitalization:"Words"}},[ii.Number]:{field:"number",section:"",inputTraits:{keyboard:"NamePhonePad"}},[ii.IssueDate]:{field:"issue date",section:"",kind:y.VaultItem.FieldType.Date,v:ti},[ii.ExpirationDate]:{field:"expiry date",section:"",kind:y.VaultItem.FieldType.Date,v:ti}},[ci.Name]:{[oi.Title]:{field:"title",section:"name",menuItems:["Mr","Mme","Mlle","Ms","Mx"],v:(e,t)=>{switch(t){case"MR":return"Mr.";case"MME":return"Mrs.";case"MLLE":return"Miss.";case"MS":return"Ms.";case"MX":return"Mx.";default:return}}},[oi.FirstName]:{field:"firstname",section:"name"},[oi.MiddleName]:{field:"middle name",section:"name",attributes:{guarded:"yes"},inputTraits:{autocapitalization:"Words"}},[oi.LastName]:{field:"lastname",section:"name"},[oi.Login]:{field:"username",section:"internet"},[oi.DateOfBirth]:{field:"birthdate",section:"name",v:ti},[oi.PlaceOfBirth]:{field:"place of birth",section:"name",attributes:{guarded:"yes"},inputTraits:{autocapitalization:"Words"}}},[ci.Email]:{[oi.Email]:{field:"email",section:"internet"},[oi.EmailType]:{field:"email type",section:"internet"}},[ci.Number]:{[oi.PhoneNumber]:{field:"defphone",section:"address"}},[ci.Address]:{[oi.Address]:{field:"address",section:"address",v:(e,t)=>JSON.parse(t)},[oi.AddressRecipient]:{field:"recipient",section:"address",inputTraits:{autocapitalization:"Words"}},[oi.AddressBuilding]:{field:"building",section:"address"},[oi.AddressApartment]:{field:"apartment",section:"address"},[oi.AddressFloor]:{field:"floor",section:"address"},[oi.AddressDoorCode]:{field:"door code",section:"address"}},[ci.Company]:{[oi.ItemName]:{field:"company",section:"name"},[oi.JobTitle]:{field:"jobtitle",section:"name"}},[ci.Website]:{[oi.Url]:{field:"website",section:"internet"}}};var yi=n(69359),pi=n(3140),mi=n.n(pi),fi=n(55525),gi=n(13853);const hi=e=>{const t=e.toLowerCase();return t.includes("electron")?"visaelectron":t.includes("visa")?"visa":t.includes("maestro")||t.includes("mæstro")?"maestro":t.includes("mastercard")||t.includes("master card")||t.includes("mc")?"mc":t.includes("amex")||t.includes("american express")?"amex":t.includes("discover")?"discover":t.includes("diner")?"diners":t.includes("unionpay")||["cup","upi"].includes(t)?"unionpay":t.includes("japan credit bureau")||"jcb"===t?"jcb":t.includes("interac")?"interac":t.includes("laser")?"laser":""},vi=e=>{const t=On()(e,["MMYY","MM/YY","MM-YY","MMYYYY","MM/YYYY","MM-YYYY","YYYY/MM","YYYY-MM"]);return t.isValid()?t.format("YYYYMM"):""},Ci=async(e,t,n,r)=>{const i=(0,wr.Jx)(yi.parse(t,Mi(),!0),Di).unwrap(),s=Ei(i),{loginTemplate:o,creditCardTemplate:a,secureNoteTemplate:u}=await(0,ur.lY)(e),c=[];return s.vaultItems.forEach((e=>{switch(e.templateName){case"Credit Card":c.push(Ai(e,a,n,r));break;case"Web Password":c.push(Pi(e,o,n,r));break;case"Password":c.push(bi(e,o,n,r));break;default:c.push(Ri(e,u,n,r))}})),await Promise.all(c)},Ai=async(e,t,n,r)=>{const i=new y.VaultItem(n);i.parseTemplate(t),i.templateUuid=t.uuid,i.title=e.name||t.singularName,i.tags=e.tags;const s={"full-name":{templateField:"cardholder",transform:e=>e},"card-number":{templateField:"ccnum",transform:e=>e},"card-type":{templateField:"type",transform:hi},"expiration-date":{templateField:"expiry",transform:vi}},o=[];return e.fields.forEach((e=>{let t=!1;const n=s[e.slug];if(n){const r=y.VaultItem.findFieldWithName(n.templateField,i);r&&(r.v=n.transform(e.value),t=!0)}else"notes"===e.slug&&(i.notes=e.value,t=!0);t||o.push(e)})),o.length>0&&i.details.sections.push(wi(r,o)),i},wi=(e,t)=>{const n=new Set(["client-secret","group-auth-password","passphrase","password","private-key-passphrase","secret-key",Si]),r=new Set([Si]),i=t.map((e=>({k:n.has(e.slug)?y.VaultItem.FieldType.Concealed:y.VaultItem.FieldType.String,n:P.generateUUID(),v:e.value||"",t:e.name,a:{multiline:r.has(e.slug)?"yes":"no"}})));return{name:P.generateUUID(),title:e["Other Fields"](),fields:(0,D.Z)(i)}},Si="totp-backup-codes",Ti="totp backup codes",Pi=async(e,t,n,r)=>{const i=new y.VaultItem(n);i.templateUuid=t.uuid,i.title=e.name||t.singularName,i.tags=e.tags;const s=[];return e.fields.forEach((e=>{switch(e.slug){case"username":i.setUsername(e.value);break;case"password":i.setPassword(e.value);break;case"url":i.url=e.value;break;case"notes":i.notes=e.value;break;default:s.push(e)}})),e.totpBackupCodes&&s.push({name:Ti,value:e.totpBackupCodes,slug:Si}),i.details.sections.push(wi(r,s)),e.totpKey&&e.totpKey.length>0&&vr(e.totpKey,i,r),i},bi=async(e,t,n,r)=>{const i=e.fields.filter((e=>"resource"===e.slug)),s=e.fields.filter((e=>"url"===e.slug));if(1===i.length&&0===s.length){const e=i[0];e&&(e.name="URL",e.slug="url")}return Pi(e,t,n,r)},Ri=async(e,t,n,r)=>{const i=new y.VaultItem(n);i.templateUuid=t.uuid,i.title=e.name||t.singularName,i.tags=e.tags;const s=[];return e.fields.forEach((e=>{"notes"===e.slug?i.notes=e.value:s.push(e)})),e.totpBackupCodes&&s.push({name:Ti,value:e.totpBackupCodes,slug:Si}),i.details.sections.push(wi(r,s)),e.totpKey&&e.totpKey.length>0&&vr(e.totpKey,i,r),i},Ei=e=>({vaultItems:e.ImportFile.Secrets.Secret.map((e=>{const t={fields:("string"==typeof e.SecretItems?[]:e.SecretItems.SecretItem).map((e=>({name:e.FieldName,slug:e.Slug,value:e.Value}))),folderPath:e.FolderPath,name:e.SecretName,tags:Ii(e.FolderPath),templateName:e.SecretTemplateName};return e.TotpKey&&(t.totpKey=e.TotpKey),e.TotpBackupCodes&&(t.totpBackupCodes=e.TotpBackupCodes),t}))}),Ii=e=>e?[(0,gi.Z)((0,fi.Z)(e,"\\")).replace(/\\/g,"/")]:[],Ui=h.type({FieldName:h.string,Slug:(0,wr.Wc)(h.string,""),Value:h.string},"SecretItem"),Oi=h.intersection([h.readonly(h.type({FolderPath:h.string,SecretItems:h.union([h.type({SecretItem:h.array(Ui)}),h.string]),SecretName:h.string,SecretTemplateName:h.string},"Secret"),"ReadonlySecret"),h.readonly(h.partial({TotpBackupCodes:h.string,TotpKey:h.string},"TotpSection"),"ReadonlyTotpSection")]),ki=h.readonly(h.type({Secrets:h.type({Secret:h.array(Oi)},"Secrets")},"ImportFile"),"ReadonlyImportFile"),Di=h.readonly(h.type({ImportFile:ki},"XmlImport"),"ReadonlyXmlImport"),Mi=()=>({attributeNamePrefix:"@_",attrNodeName:"attr",textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!0,cdataTagName:"__cdata",cdataPositionChar:"\\c",parseTrueNumberOnly:!1,numParseOptions:{hex:!0,leadingZeros:!0},arrayMode:(e,t)=>Fi.some((n=>e===n.tagName&&t===n.parentTagName)),stopNodes:["parse-me-as-string"],alwaysCreateTextNode:!1,attrValueProcessor:(e,t)=>mi().decode(e,{isAttributeValue:!0}),tagValueProcessor:(e,t)=>mi().decode(e)}),Fi=[{parentTagName:"Secrets",tagName:"Secret"},{parentTagName:"SecretItems",tagName:"SecretItem"}],_i=(0,I.$y)("action/import/firefox"),Ki=async(e,t,n)=>_i("parseFirefoxExport",(async()=>{const r=yr(t).parsedData;if(0===r.length)return[];r[0]&&"url"===r[0][0]&&r.shift();let i=0;for(const e of r)r[i]=[e[0]?Ni(e[0]):"Login",...e],i++;return lr(e,r,n)})),Ni=e=>{let t="Login";try{/^[A-Za-z]+:\/\//.test(e)||(e="https://"+e);let n=new URL(e).hostname;0!==n.length&&"."===n.at(-1)&&(n=n.slice(0,-1));const r=n.split(".").filter((e=>e.length>0)),i=r.at(-2);if(void 0!==i)t=Vi(i);else{const e=r.at(-1);void 0!==e&&(t=Vi(e))}}catch{}return t},Vi=e=>e&&e[0]?e[0].toUpperCase()+e.slice(1).toLowerCase():e,Bi=async(e,t,n,r)=>(0,ur.Tk)(e).then((async e=>{let i,s=!0;try{i=(0,wr.Jx)(yi.parse(t,es(!1),!0),Qi).unwrap()}catch{s=!1,i=(0,wr.Jx)(yi.parse(t,es(!0),!0),Qi).unwrap()}const o=ar.getVaultItemTemplate(y.VaultItemTemplate.LoginUuid,e);return(0,en.Z)(i.KeePassFile.Root.Group,(e=>{const t=e.Name;return Li(e,t,n,r,o,s)}))})),Li=(e,t,n,r,i,s)=>{const o=e.Entry,a=e.Group;let u=[];return u=u.concat(o.map((e=>xi(e,t,n,r,i,s)))),u.concat((0,en.Z)(a,(e=>Li(e,t+"/"+e.Name,n,r,i,s))))},xi=(e,t,n,r,i,s)=>{const o=new y.VaultItem(n,i);return o.title=Zi(e,$i.Title)||i.singularName,o.notes=Zi(e,$i.Notes),o.url=Zi(e,$i.Url),o.tags=e.Tags.length>0?e.Tags.split(";").concat([t]):[t],o.setUsername(Zi(e,$i.Username)),o.setPassword(Zi(e,$i.Password)),e.OverrideURL.length>0&&ar.populateVaultItemSectionField(o,r["override url"](),e.OverrideURL,void 0,i,r),ji(e).forEach((e=>{let t="",n=!0;"string"!=typeof e.Value?(t=Wi(e.Value)?e.Value.contents:"",n=Gi(e)):(n=!s,t=e.Value),t.length>0&&ar.populateVaultItemSectionField(o,e.Key,t,n?{section:r["Other Fields"](),field:e.Key,kind:y.VaultItem.FieldType.Concealed}:void 0,i,r)})),o},Gi=e=>!Wi(e.Value)||!!Yi.is(e.Value.attr)&&"true"===e.Value.attr.ProtectInMemory.toLowerCase(),Zi=(e,t)=>{const n=e.String;let r="";return n.forEach((e=>{t===e.Key&&(r="string"!=typeof e.Value?Wi(e.Value)?e.Value.contents:"":e.Value)})),r},ji=e=>{const t=e.String,n=new Set(Object.values($i).map((e=>e.toString())));return t.filter((e=>!n.has(e.Key)))},Yi=h.type({ProtectInMemory:h.string},"KnownAttributes"),Hi=h.type({contents:h.string,attr:h.unknown},"AttributeValue"),Wi=e=>Hi.is(e);var $i;!function(e){e.Title="Title",e.Username="UserName",e.Password="Password",e.Url="URL",e.Notes="Notes"}($i||($i={}));const Ji=h.type({Key:h.string,Value:h.union([(0,wr.Wc)(h.string,""),h.record(h.string,h.unknown)])},"EntryStringField"),qi=h.readonly(h.type({OverrideURL:h.string,Tags:h.string,String:(0,wr.Wc)(h.array(Ji),[])},"Entry"),"ReadonlyEntry"),zi=h.recursion("RecursiveGroup",(()=>h.type({Name:h.string,Entry:(0,wr.Wc)(h.array(qi),[]),Group:(0,wr.Wc)(h.array(zi),[])},"Group"))),Xi=h.readonly(h.type({Root:h.type({Group:(0,wr.Wc)(h.array(zi),[])},"Root")},"KeePassFile"),"ReadonlyKeePassFile"),Qi=h.readonly(h.type({KeePassFile:Xi},"XmlImport"),"ReadonlyXmlImport"),es=e=>({attributeNamePrefix:"",attrNodeName:"attr",textNodeName:"contents",ignoreAttributes:e,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!0,cdataTagName:"__cdata",cdataPositionChar:"\\c",parseTrueNumberOnly:!1,numParseOptions:{hex:!0,leadingZeros:!0},arrayMode:(e,t)=>ts.some((n=>e===n.tagName&&t===n.parentTagName)),stopNodes:["parse-me-as-string"],alwaysCreateTextNode:!1,attrValueProcessor:(e,t)=>mi().decode(e,{isAttributeValue:!0}),tagValueProcessor:(e,t)=>mi().decode(e)}),ts=[{parentTagName:"Root",tagName:"Group"},{parentTagName:"Group",tagName:"Group"},{parentTagName:"Group",tagName:"Entry"},{parentTagName:"Entry",tagName:"String"}];var ns=n(48583),rs=n(94778);const is={AFG:"93",ALB:"355",DZA:"213",ASM:"1-684",AND:"376",AGO:"244",AIA:"1-264",ATA:"672",ATG:"1-268",ARG:"54",ARM:"374",ABW:"297",AUS:"61",AUT:"43",AZE:"994",BHS:"1-242",BHR:"973",BGD:"880",BRB:"1-246",BLR:"375",BEL:"32",BLZ:"501",BEN:"229",BMU:"1-441",BTN:"975",BOL:"591",BIH:"387",BWA:"267",BRA:"55",IOT:"246",VGB:"1-284",BRN:"673",BGR:"359",BFA:"226",BDI:"257",KHM:"855",CMR:"237",CAN:"1",CPV:"238",CYM:"1-345",CAF:"236",TCD:"235",CHL:"56",CHN:"86",CXR:"61",CCK:"61",COL:"57",COM:"269",COK:"682",CRI:"506",HRV:"385",CUB:"53",CUW:"599",CYP:"357",CZE:"420",COD:"243",DNK:"45",DJI:"253",DMA:"1-767",DOM:"1",TLS:"670",ECU:"593",EGY:"20",SLV:"503",GNQ:"240",ERI:"291",EST:"372",ETH:"251",FLK:"500",FRO:"298",FJI:"679",FIN:"358",FRA:"33",PYF:"689",GAB:"241",GMB:"220",GEO:"995",DEU:"49",GHA:"233",GIB:"350",GRC:"30",GRL:"299",GRD:"1-473",GUM:"1-671",GTM:"502",GGY:"44-1481",GIN:"224",GNB:"245",GUY:"592",HTI:"509",HND:"504",HKG:"852",HUN:"36",ISL:"354",IND:"91",IDN:"62",IRN:"98",IRQ:"964",IRL:"353",IMN:"44-1624",ISR:"972",ITA:"39",CIV:"225",JAM:"1-876",JPN:"81",JEY:"44-1534",JOR:"962",KAZ:"7",KEN:"254",KIR:"686",XKX:"383",KWT:"965",KGZ:"996",LAO:"856",LVA:"371",LBN:"961",LSO:"266",LBR:"231",LBY:"218",LIE:"423",LTU:"370",LUX:"352",MAC:"853",MKD:"389",MDG:"261",MWI:"265",MYS:"60",MDV:"960",MLI:"223",MLT:"356",MHL:"692",MRT:"222",MUS:"230",MYT:"262",MEX:"52",FSM:"691",MDA:"373",MCO:"377",MNG:"976",MNE:"382",MSR:"1-664",MAR:"212",MOZ:"258",MMR:"95",NAM:"264",NRU:"674",NPL:"977",NLD:"31",ANT:"599",NCL:"687",NZL:"64",NIC:"505",NER:"227",NGA:"234",NIU:"683",PRK:"850",MNP:"1-670",NOR:"47",OMN:"968",PAK:"92",PLW:"680",PSE:"970",PAN:"507",PNG:"675",PRY:"595",PER:"51",PHL:"63",PCN:"64",POL:"48",PRT:"351",PRI:"1",QAT:"974",COG:"242",REU:"262",ROU:"40",RUS:"7",RWA:"250",BLM:"590",SHN:"290",KNA:"1-869",LCA:"1-758",MAF:"590",SPM:"508",VCT:"1-784",WSM:"685",SMR:"378",STP:"239",SAU:"966",SEN:"221",SRB:"381",SYC:"248",SLE:"232",SGP:"65",SXM:"1-721",SVK:"421",SVN:"386",SLB:"677",SOM:"252",ZAF:"27",KOR:"82",SSD:"211",ESP:"34",LKA:"94",SDN:"249",SUR:"597",SJM:"47",SWZ:"268",SWE:"46",CHE:"41",SYR:"963",TWN:"886",TJK:"992",TZA:"255",THA:"66",TGO:"228",TKL:"690",TON:"676",TTO:"1-868",TUN:"216",TUR:"90",TKM:"993",TCA:"1-649",TUV:"688",VIR:"1-340",UGA:"256",UKR:"380",ARE:"971",GBR:"44",USA:"1",URY:"598",UZB:"998",VUT:"678",VAT:"379",VEN:"58",VNM:"84",WLF:"681",ESH:"212",YEM:"967",ZMB:"260",ZWE:"263"},ss=E.L`action/import/lastpass`,os=(0,I.$y)(ss.str);var as;!function(e){e.url="url",e.username="username",e.password="password",e.otp="totp",e.notes="extra",e.title="name",e.tags="grouping",e.fav="fav"}(as||(as={}));const us=async(e,t,n,r,i)=>os("parseLastPassExportNew",(async()=>{let s=pr(t);if(s[0]&&void 0!==s[0].profilename)throw new Error(r["Form Fill importing is not supported. Use a normal LastPass export file."]());return(0,ur.Tk)(e).then((e=>{const t=ar.getVaultItemTemplate(y.VaultItemTemplate.LoginUuid,e);return i.lastPassIncludeSharedItems||(s=s.filter((e=>0!==e[as.tags]?.indexOf("Shared-")))),s.map((i=>"http://sn"===i[as.url]?cs(i,n,e,r):ms(i,n,t,r)))}))})),cs=(e,t,n,r)=>{const i=ar.getValueFromRecord(e,as.notes),s=ys(n,i),o=new y.VaultItem(t,s),{notes:a,fieldValues:u}=ps(s,i),c=ar.getValueFromRecord(e,as.title),l=ar.getValueFromRecord(e,as.tags),d="1"===ar.getValueFromRecord(e,as.fav)?1:0;o.title=c||s.singularName,o.notes=a,o.tags=ws(l),o.faveIndex=d;const p=ds(i),m=2===p.length&&p[1]||Es.SecureNote,f=Us[m]||Us[Es.SecureNote];if(void 0===f)return o;for(const e of(0,rs.Z)(u)){const t=u[e]||"",n=f[e];void 0!==n?"username"===n.field&&s.uuid===y.VaultItemTemplate.LoginUuid?o.setUsername(t):"password"===n.field&&s.uuid===y.VaultItemTemplate.LoginUuid?o.setPassword(t):ls(o,t,n,s,r):ar.addFieldToOtherFieldsSection(o,e,t,r)}return o},ls=(e,t,n,r,i)=>{let s=(0,En.Z)(e.details.sections,(e=>e.name===n.section||e.title===n.section));s||(s={name:P.generateUUID(),title:n.section,fields:[]},e.details.sections.push(s));const o=s?.fields?.find((e=>e.n===n.field));if(o){n.v?o.v=n.v(o,t):o.v=Rs(t,o.k),o.k===y.VaultItem.FieldType.Concealed&&bs(o,e,r,i);const s=ar.getItemOverview(r,o,e);""!==s&&(e.overview.ainfo=s)}else{s.fields||(s.fields=[]);const e=ar.createSectionField({kind:n.kind||y.VaultItem.FieldType.String,title:n.field,value:t});n.v?e.v=n.v(e,t):e.v=Rs(t,e.k),s.fields.push(e)}},ds=e=>{const t=/^NoteType:(.+)/.exec(e);return void 0!==t?.[0]&&void 0!==t?.[1]?[t[0],t[1]]:["",""]},ys=(e,t)=>{const n=ds(t),r=2===n.length&&Is[n[1]]||y.VaultItemTemplate.SecureNoteUuid;return ar.getVaultItemTemplate(r,e)},ps=(e,t)=>{const n=ds(t);if(e.uuid===y.VaultItemTemplate.SecureNoteUuid&&""===n[0])return{notes:t,fieldValues:{}};const[r,i]=t.slice(n[0].length).split("\nNotes:"),s={};if(void 0!==r){const e=/-{5}BEGIN(.+)PRIVATE KEY(.+)(\n.+)*END(.+)PRIVATE KEY-{5}/.exec(r),t=/-{5}BEGIN(.+)PUBLIC KEY(.+)(\n.+)*END(.+)PUBLIC KEY-{5}/.exec(r),n=r.trim().split("\n");for(const r of n){const[n,i]=r.split(/:(.+)?/,2);void 0!==n&&void 0!==i&&"Language"!==n&&(s[n]=i),"Private Key"===n&&e&&(s[n]=String(e[0])),"Public Key"===n&&t&&(s[n]=String(t[0]))}}return{notes:i?i.trim():"",fieldValues:s}},ms=(e,t,n,r)=>{const i=new y.VaultItem(t,n),s=ar.getValueFromRecord(e,as.url),o=ar.getValueFromRecord(e,as.username),a=ar.getValueFromRecord(e,as.password),u=ar.getValueFromRecord(e,as.otp),c=ar.getValueFromRecord(e,as.notes),l=ar.getValueFromRecord(e,as.title),d=ar.getValueFromRecord(e,as.tags),p="1"===ar.getValueFromRecord(e,as.fav)?1:0;i.templateUuid=y.VaultItemTemplate.LoginUuid,i.title=l||n.singularName,i.url=s,i.notes=c,i.tags=ws(d),i.faveIndex=p,u.length>0&&vr(u,i,r);const m=fs(o),f=fs(a),g=(0,D.Z)([m!==o&&Cs(n,o),f!==a&&As(n,a)]);return g.length>0&&(i.details.sections=[...i.details.sections,vs(g,r)]),i.setUsername(m),i.setPassword(f),i},fs=e=>{const t=gs(e)||e;return hs(t)||e},gs=e=>{if(!e)return;const t=e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return e!==t?t:void 0},hs=e=>e&&/^ [+=-]/.test(e)&&!/^ [+=-][\d.]+$/.test(e)?e.slice(1):e,vs=(e,t)=>({name:P.generateUUID(),title:t["Original Values"](),fields:[...e,ar.createSectionField({kind:y.VaultItem.FieldType.Url,title:t["what's this?"](),value:"https://support.1password.com/import-lastpass/#get-help"})]}),Cs=(e,t)=>ar.createSectionField({kind:y.VaultItem.FieldType.String,title:e.attrs.localizedStrings.username||"username",value:t}),As=(e,t)=>ar.createSectionField({kind:y.VaultItem.FieldType.Concealed,title:e.attrs.localizedStrings.password||"password",value:t}),ws=e=>e?[e.replace(/\\/g,"/")]:[],Ss=e=>(t,n)=>{const r=t.v;return h.record(h.string,h.string).is(r)&&(r[e]=n),r},Ts=(e,t)=>{const n=e.v;return h.record(h.string,h.string).is(n)&&(n.street=[n.street,t].join(" ")),n},Ps=(e,t)=>Rs(t,y.VaultItem.FieldType.Gender),bs=(e,t,n,r)=>{const i=fs(y.VaultItem.getStringValue(e));i!==e.v&&(t.details.sections=[...t.details.sections,vs([As(n,y.VaultItem.getStringValue(e))],r)]),e.v=i},Rs=(e,t)=>{const n=e.toLowerCase();switch(t){case y.VaultItem.FieldType.MonthYear:return Number(On()(e).format("YYYYMM"))||0;case y.VaultItem.FieldType.Date:{const t=On().utc(e.trim(),"MMMM,D,YYYY",!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return P.isValidNumber(t)?t:void 0}case y.VaultItem.FieldType.Gender:return"m"===n||"male"===n?"male":"f"===n||"female"===n?"female":n;case y.VaultItem.FieldType.CreditCardType:return(0,ns.Z)(n,"visa")?"visa":(0,ns.Z)(n,"mastercard")?"mc":(0,ns.Z)(n,"amex")||(0,ns.Z)(n,"american express")?"amex":(0,ns.Z)(n,"discover")?"discover":"";case y.VaultItem.FieldType.Menu:return n;case y.VaultItem.FieldType.Phone:return(e=>{if(void 0===e||""===e)return"";if("{"!==e[0])return e;const t=h.type({cc3l:(0,wr.Wc)(h.string,""),num:(0,wr.Wc)(h.string,""),ext:(0,wr.Wc)(h.string,"")});let n;try{n=(0,wr.Jx)(e,wr.AV.pipe(t),{file:ss,func:E.L`convertLastPassPhoneNumber`}).unwrap()}catch{return""}if(void 0===n)return"";const{cc3l:r,num:i,ext:s}=n,o=[];if("string"==typeof r&&""!==r){const e=is[r];"string"==typeof e&&o.push(`+${e}`)}return"string"==typeof i&&""!==i&&o.push(i),"string"==typeof s&&""!==s&&o.push(s),o.join(" ")})(e);default:return e}};var Es;!function(e){e.BankAccount="Bank Account",e.CreditCard="Credit Card",e.DriverLicense="Driver's License",e.SocialSecurity="Social Security",e.SoftwareLicense="Software License",e.WifiPassword="Wi-Fi Password",e.Passport="Passport",e.Database="Database",e.EmailAccount="Email Account",e.Membership="Membership",e.Server="Server",e.Address="Address",e.SshKey="SSH Key",e.Insurance="Insurance",e.HealthInsurance="Health Insurance",e.InstantMessagingAccount="Instant Messenger",e.SecureNote="secure_note"}(Es||(Es={}));const Is={[Es.BankAccount]:y.VaultItemTemplate.BankAccountUuid,[Es.CreditCard]:y.VaultItemTemplate.CreditCardUuid,[Es.DriverLicense]:y.VaultItemTemplate.DriverLicenseUuid,[Es.SocialSecurity]:y.VaultItemTemplate.SocialSecurityNumberUuid,[Es.SoftwareLicense]:y.VaultItemTemplate.SoftwareUuid,[Es.WifiPassword]:y.VaultItemTemplate.RouterUuid,[Es.Passport]:y.VaultItemTemplate.PassportUuid,[Es.Database]:y.VaultItemTemplate.DatabaseUuid,[Es.EmailAccount]:y.VaultItemTemplate.EmailUuid,[Es.Membership]:y.VaultItemTemplate.MembershipUuid,[Es.Server]:y.VaultItemTemplate.ServerUuid,[Es.Address]:y.VaultItemTemplate.IdentityUuid,[Es.SshKey]:y.VaultItemTemplate.SecureNoteUuid,[Es.Insurance]:y.VaultItemTemplate.SecureNoteUuid,[Es.HealthInsurance]:y.VaultItemTemplate.SecureNoteUuid,[Es.InstantMessagingAccount]:y.VaultItemTemplate.LoginUuid,[Es.SecureNote]:y.VaultItemTemplate.SecureNoteUuid},Us={[Es.SecureNote]:{},[Es.CreditCard]:{"Name on Card":{field:"cardholder",section:""},Type:{field:"type",section:""},Number:{field:"ccnum",section:""},"Security Code":{field:"cvv",section:""},"Start Date":{field:"validFrom",section:""},"Expiration Date":{field:"expiry",section:""}},[Es.BankAccount]:{"Bank Name":{field:"bankName",section:""},"Account Type":{field:"accountType",section:""},"Routing Number":{field:"routingNo",section:""},"Account Number":{field:"accountNo",section:""},"SWIFT Code":{field:"swift",section:""},"IBAN Number":{field:"iban",section:""},Pin:{field:"telephonePin",section:""},"Branch Address":{field:"branchAddress",section:"branchInfo"},"Branch Phone":{field:"branchPhone",section:"branchInfo"}},[Es.DriverLicense]:{Number:{field:"number",section:""},"Expiration Date":{field:"expiry_date",section:""},"License Class":{field:"class",section:""},Name:{field:"fullname",section:""},Address:{field:"address",section:""},"City / Town":{field:"city",section:""},State:{field:"state",section:""},"ZIP / Postal Code":{field:"zip / postal code",section:""},Country:{field:"country",section:""},"Date of Birth":{field:"birthdate",section:""},Sex:{field:"gender",section:"",v:Ps},Height:{field:"height",section:""}},[Es.SocialSecurity]:{Name:{field:"name",section:""},Number:{field:"number",section:""}},[Es.SoftwareLicense]:{"License Key":{field:"reg_code",section:""},Licensee:{field:"reg_name",section:"customer"},Version:{field:"product_version",section:""},Publisher:{field:"publisher_name",section:"publisher"},"Support Email":{field:"support_email",section:"publisher"},Website:{field:"publisher_website",section:"publisher"},Price:{field:"retail_price",section:"publisher"},"Purchase Date":{field:"purchase date",section:"order"},"Order Number":{field:"order_number",section:"order"},"Number of Licenses":{field:"number of licenses",section:"order"},"Order Total":{field:"order_total",section:"order"}},[Es.WifiPassword]:{SSID:{field:"network_name",section:""},Password:{field:"wireless_password",section:""},"Connection Type":{field:"connection type",section:""},"Connection Mode":{field:"connection mode",section:""},Authentication:{field:"authentication",section:""},Encryption:{field:"encryption",section:""},"Use 802.1X":{field:"use 802.1X",section:""},"FIPS Mode":{field:"FIPS mode",section:""},"Key Type":{field:"key type",section:""},Protected:{field:"protected",section:""},"Key Index":{field:"key index",section:""}},[Es.Passport]:{Type:{field:"type",section:""},Name:{field:"fullname",section:""},Country:{field:"issuing_country",section:""},Number:{field:"number",section:""},Sex:{field:"gender",section:"",v:Ps},Nationality:{field:"nationality",section:""},"Issuing Authority":{field:"issuing_authority",section:""},"Date of Birth":{field:"birthdate",section:""},"Issued Date":{field:"issue_date",section:""},"Expiration Date":{field:"expiry_date",section:""}},[Es.Database]:{Type:{field:"database_type",section:""},Hostname:{field:"hostname",section:""},Port:{field:"port",section:""},Database:{field:"database",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""},SID:{field:"sid",section:""},Alias:{field:"alias",section:""}},[Es.EmailAccount]:{Username:{field:"pop_username",section:""},Password:{field:"pop_password",section:""},Server:{field:"pop_server",section:""},Port:{field:"pop_port",section:""},Type:{field:"pop_type",section:""},"SMTP Server":{field:"smtp_server",section:"SMTP"},"SMTP Port":{field:"smtp_port",section:"SMTP"}},[Es.Membership]:{Organization:{field:"org_name",section:""},"Membership Number":{field:"membership_no",section:""},"Member Name":{field:"member_name",section:""},"Start Date":{field:"member_since",section:""},"Expiration Date":{field:"expiry_date",section:""},Website:{field:"website",section:""},Telephone:{field:"phone",section:""},Password:{field:"pin",section:""}},[Es.Server]:{Hostname:{field:"url",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""}},[Es.Address]:{Title:{field:"title",section:"name"},"First Name":{field:"firstname",section:"name"},"Middle Name":{field:"middle name",section:"name"},"Last Name":{field:"lastname",section:"name"},Username:{field:"username",section:"internet"},Gender:{field:"gender",section:"name",v:Ps},Birthday:{field:"birthdate",section:"name"},Company:{field:"company",section:"name"},"Address 1":{field:"address",section:"address",v:Ts},"Address 2":{field:"address",section:"address",v:Ts},"Address 3":{field:"address",section:"address",v:Ts},"City / Town":{field:"address",section:"address",v:Ss("city")},County:{field:"county",section:"address"},State:{field:"address",section:"address",v:Ss("state")},"Zip / Postal Code":{field:"address",section:"address",v:Ss("zip")},Country:{field:"address",section:"address",v:(e,t)=>{const n=e.v;return h.record(h.string,h.string).is(n)&&(n.country=t.toLowerCase()),n}},Timezone:{field:"timezone",section:"address"},"Email Address":{field:"email",section:"internet"},Phone:{field:"defphone",section:"address"},"Evening Phone":{field:"homephone",section:"address"},"Mobile Phone":{field:"cellphone",section:"address"},Fax:{field:"fax",section:"address"}},[Es.SshKey]:{Format:{field:"key type",section:""},"Private Key":{field:"private key",section:"",kind:y.VaultItem.FieldType.Concealed},"Public Key":{field:"public key",section:""},Passphrase:{field:"passphrase",section:"additional info",kind:y.VaultItem.FieldType.Concealed},"Bit Strength":{field:"bit strength",section:""},Hostname:{field:"hostname",section:"additional info"},Date:{field:"date",section:"additional info",kind:y.VaultItem.FieldType.Date}},[Es.Insurance]:{Company:{field:"company",section:"policy"},"Policy Type":{field:"policy type",section:"policy"},"Policy Number":{field:"policy number",section:"policy"},Expiration:{field:"expiration date",section:"policy",kind:y.VaultItem.FieldType.Date},URL:{field:"website",section:"policy"},"Agent Name":{field:"agent name",section:"agent"},"Agent Phone":{field:"agent phone",section:"agent"}},[Es.HealthInsurance]:{"Policy Type":{field:"policy type",section:"policy"},"Policy Number":{field:"policy number",section:"policy"},"Group ID":{field:"group id",section:"policy"},"Member Name":{field:"member name",section:"policy"},"Member ID":{field:"member id",section:"policy"},"Co-pay":{field:"co-pay",section:"policy"},Company:{field:"company",section:"company"},"Company Phone":{field:"company phone",section:"company"},"Physician Name":{field:"physician name",section:"physician"},"Physician Phone":{field:"physician phone",section:"physician"},"Physician Address":{field:"physician address",section:"physician"}},[Es.InstantMessagingAccount]:{Type:{field:"type",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""},Server:{field:"server",section:""},Port:{field:"port",section:""}}};var Os=n(46525),ks=n(98064);const Ds=(0,I.$y)("action/import/roboform");var Ms;!function(e){e[e.Title=0]="Title",e[e.Url=1]="Url",e[e.MatchUrl=2]="MatchUrl",e[e.Username=3]="Username",e[e.Password=4]="Password",e[e.Notes=5]="Notes",e[e.Tags=6]="Tags",e[e.RfExtraFields=7]="RfExtraFields"}(Ms||(Ms={}));const Fs={Name:"title",Url:"url",Login:"username",Pwd:"password",Note:"notes",Folder:"tags",RfFieldsV2:"rfExtraFields"},_s=async(e,t,n,r)=>Ds("parseRoboFormExport",(async()=>{const i=yr(t).parsedData;if(0===i.length)return[];let s;return i[0]&&i[0].includes("Name")&&i[0].includes("Url")?(s=Ks(i[0]),i.shift()):s=Ks(["Name","Url","MatchUrl","Login","Pwd","Note","Folder","RfFieldsV2"]),(0,ur.Tk)(e).then((e=>{const t=ar.getVaultItemTemplate(y.VaultItemTemplate.LoginUuid,e),o=ar.getVaultItemTemplate(y.VaultItemTemplate.SecureNoteUuid,e);return i.map((e=>Ns(e[Ms.MatchUrl],e[Ms.Username],e[Ms.Password])?Bs(o,e,n,s,r):Ls(t,e,n,s,r)))})).catch((e=>{throw e}))})),Ks=e=>{const t={};return e.forEach(((e,n)=>{const r=Fs[e];r&&(t[r]=n)})),t},Ns=(e,t,n)=>""===e&&""===t&&""===n,Vs=(e,t)=>Object.keys(t).reduce(((n,r)=>{const i=t[r];if(void 0===i)return n;if(r===Fs.RfFieldsV2)return{...n,rfExtraFields:e.slice(i)};if(r===Fs.Folder){const t=e[i];return{...n,[r]:t?[t.replace(/^(\/)/,"")]:[]}}return{...n,[r]:e[i]}}),{title:"",url:"",username:"",password:"",notes:"",tags:[],rfExtraFields:[]}),Bs=(e,t,n,r,i)=>{const s=new y.VaultItem(n,e),{title:o,url:a,notes:u,tags:c}=Vs(t,r);return s.title=o||e.singularName,s.notes=u,s.tags=c,s.url=a,""===s.notes&&s.url&&(s.notes=i.bookmark(),s.tags=[i.bookmark()],ar.populateVaultItemSectionField(s,i.website(),s.url,void 0,e,i)),s},Ls=(e,t,n,r,i)=>{const s=new y.VaultItem(n,e),{title:o,url:a,username:u,password:c,notes:l,tags:d,rfExtraFields:p}=Vs(t,r);if(s.title=o||e.singularName,s.notes=l,s.tags=d,s.url=a,!p||0===p.length)return s.setUsername(u),s.setPassword(c),s;const m=p.map((e=>e.split(",")));m.forEach((t=>{if("TOTP KEY$"===t[Zs.Identifier]&&t[Zs.Value]){const e=t[Zs.Value]??"";vr(e,s,i)}else if(t[Zs.Value]&&u!==t[Zs.Value]&&c!==t[Zs.Value]&&t[Zs.Format]!==Gs.Check&&t[Zs.Format]!==Gs.Radio){const n=t[Zs.Name]||"";ar.populateVaultItemSectionField(s,n,t[Zs.Value]??"",void 0,e,i)}}));const f=P.compact(m.map((e=>"TOTP KEY$"===e[Zs.Identifier]&&e[Zs.Value]?void 0:xs(u,c,e)))),{username:g=[],password:h=[],undefined:v=[]}=(0,Os.Z)(f,"designation");return s.webFormFields=P.compact([...s.webFormFields,(0,ks.Z)(g),(0,ks.Z)(h),...v]),s.setUsername(u),s.setPassword(c),s},xs=(e,t,n)=>{if(n.length<5)return;const[r,i,s,o,a]=n;if(!a)return;const u=o?js(o):"T";let c,l;return e===a&&o===Gs.Text?(c=Gs.Username,l=""===i?Gs.Username:void 0):t===a&&o===Gs.Password&&(c=Gs.Password,l=""===i?Gs.Password:void 0),{designation:c,name:l||i,type:u,value:a}};var Gs,Zs;!function(e){e.Username="username",e.Password="pwd",e.Check="chk",e.Radio="rad",e.Text="txt"}(Gs||(Gs={})),function(e){e[e.Identifier=0]="Identifier",e[e.Name=1]="Name",e[e.Unknown=2]="Unknown",e[e.Format=3]="Format",e[e.Value=4]="Value"}(Zs||(Zs={}));const js=e=>{switch(e){case Gs.Password:return"P";case Gs.Radio:return"R";case Gs.Check:return"C";case Gs.Text:default:return"T"}};var Ys=n(38002);const Hs=(0,Ys.P)("action/import/csv"),Ws=async(e,t)=>{const n=await(0,ur.Tk)(t.context);try{switch(e.kind){case oo.Login:return $s(e,t,ar.getVaultItemTemplate(y.VaultItemTemplate.LoginUuid,n));case oo.CreditCard:return zs(e,t,ar.getVaultItemTemplate(y.VaultItemTemplate.CreditCardUuid,n));case oo.SecureNote:return qs(e,t,ar.getVaultItemTemplate(y.VaultItemTemplate.SecureNoteUuid,n))}}catch(e){return Hs("csvToVaultItems",e)}},$s=(e,t,n)=>e.rows.map((e=>Js(t.vault,n,t.translators,e))),Js=(e,t,n,r)=>{const i=new y.VaultItem(e);i.templateUuid=t.uuid;const s=r.filter((e=>e.type===yo.Template)),o=eo(r);return s?.forEach((e=>{const{cellValue:r,headerValue:s}=e;switch(s){case ao.Title:i.title=r||t.singularName;break;case ao.Username:i.setUsername(r);break;case ao.Password:r.length>0&&i.setPassword(r);break;case ao.Website:r.length>0&&(i.url=r);break;case ao.Tags:r.length>0&&(i.tags=ro(e));break;case ao.Notes:r.length>0&&(i.notes=r);break;case ao.OneTimePassword:r.length>0&&vr(r,i,n)}})),o&&0!==o.length&&to(i,o,t,n),i},qs=(e,t,n)=>e.rows.map((e=>{const r=new y.VaultItem(t.vault,n),i=e.filter((e=>e.type===yo.Template)),s=eo(e);return Qs(r,co.Title,co.Tags,co.Notes,i,n),s&&0!==s.length&&to(r,s,n,t.translators),r})),zs=(e,t,n)=>e.rows.map((e=>Xs(e,t.vault,n,t.translators))),Xs=(e,t,n,r)=>{const i=new y.VaultItem(t,n),s=e.filter((e=>e.type===yo.Template)),o=eo(e),a=Qs(i,uo.Title,uo.Tags,uo.Notes,s,n);return a&&no(i,a,oo.CreditCard,n,r),o&&0!==o.length&&to(i,o,n,r),i},Qs=(e,t,n,r,i,s)=>{const o=i.find((e=>e.headerValue===t));e.title=o?.cellValue||s.singularName;const a=i.find((e=>e.headerValue===n));a&&(e.tags=ro(a));const u=i.find((e=>e.headerValue===r));return u&&(e.notes=u.cellValue),i.filter((e=>e.headerValue!==r&&e.headerValue!==n&&e.headerValue!==t))},eo=e=>e.filter((e=>e.type===yo.Custom)),to=(e,t,n,r)=>{t.forEach((t=>{ar.populateVaultItemSectionField(e,t.headerValue,t.cellValue||"",void 0,n,r)}))},no=(e,t,n,r,i)=>{const s=mo[n];t.forEach((t=>{ar.populateVaultItemSectionField(e,t.headerValue,t.cellValue||"",s[t.headerValue]?.v?s[t.headerValue]:so(s[t.headerValue],t.cellAttrs?.[po.Date]||""),r,i)}))},ro=e=>void 0===e.cellAttrs?.[po.Tag]?[e.cellValue]:e.cellValue.split(e.cellAttrs[po.Tag]).map((e=>e.trim())),io=e=>(t,n)=>{n||(n="");const r=n.toLowerCase();switch(t.k){case y.VaultItem.FieldType.MonthYear:{let t=Number(On()(n,e).format("YYYYMM"));return t||(t=0),t}case y.VaultItem.FieldType.Gender:return"m"===r||"male"===r?"male":"f"===r||"female"===r?"female":r;case y.VaultItem.FieldType.CreditCardType:return hi(r);case y.VaultItem.FieldType.Menu:return r;default:return n}},so=(e,t)=>{if(void 0!==e)return{...e,v:io(t)}};var oo,ao,uo,co,lo,yo,po;!function(e){e.Login="login",e.CreditCard="credit card",e.SecureNote="secure note"}(oo||(oo={})),function(e){e.Title="title",e.Username="username",e.Password="password",e.Website="website",e.Notes="notes",e.OneTimePassword="otp",e.Tags="tags"}(ao||(ao={})),function(e){e.Title="title",e.CardHolder="cardholder",e.CardType="type",e.CardNumber="ccnum",e.Cvv="cvv",e.Expiry="expiry",e.ValidFrom="validFrom",e.Notes="notes",e.BankName="bank",e.BankPhoneLocal="phoneLocal",e.BankPhoneTollfree="phoneTollFree",e.BankPhoneIntl="phoneIntl",e.Website="website",e.Pin="pin",e.CashWithdrawalLimit="cashLimit",e.InterestRate="interestRate",e.IssueNumber="issueNumber",e.CreditLimit="creditLimit",e.Tags="tags"}(uo||(uo={})),function(e){e.Title="title",e.Notes="notes",e.Tags="tags"}(co||(co={})),function(e){e[e.Template=0]="Template",e[e.Custom=1]="Custom",e[e.NotImported=2]="NotImported",e[e.NotDefined=3]="NotDefined"}(lo||(lo={})),function(e){e[e.Template=0]="Template",e[e.Custom=1]="Custom"}(yo||(yo={})),function(e){e.Date="Date",e.Tag="Tag"}(po||(po={}));const mo={[oo.Login]:{},[oo.SecureNote]:{},[oo.CreditCard]:{[uo.CardHolder]:{field:"cardholder",section:""},[uo.CardType]:{field:"type",section:""},[uo.CardNumber]:{field:"ccnum",section:""},[uo.Cvv]:{field:"cvv",section:""},[uo.Expiry]:{field:"expiry",section:""},[uo.ValidFrom]:{field:"validFrom",section:""},[uo.BankName]:{field:"bank",section:"contactInfo"},[uo.BankPhoneLocal]:{field:"phoneLocal",section:"contactInfo"},[uo.BankPhoneTollfree]:{field:"phoneTollFree",section:"contactInfo"},[uo.BankPhoneIntl]:{field:"phoneIntl",section:"contactInfo"},[uo.Website]:{field:"website",section:"contactInfo"},[uo.Pin]:{field:"pin",section:"details"},[uo.CreditLimit]:{field:"creditLimit",section:"details"},[uo.CashWithdrawalLimit]:{field:"cashLimit",section:"details"},[uo.InterestRate]:{field:"interest",section:"details"},[uo.IssueNumber]:{field:"issuenumber",section:"details"}}},fo=(0,I.$y)("action/import/index");var go;!function(e){e.OnePassword="1pif",e.LastPass="lastpass",e.Dashlane="dashlane",e.Bitwarden="bitwarden",e.SplashID="splashid",e.RoboForm="roboform",e.Chrome="chrome",e.Firefox="firefox",e.KeePassXC="keepassxc",e.KeePass="keepass",e.Apple="apple",e.CSV="csv",e.Delinea="delinea",e.Memorized="memorized",e.PenPaper="pen-paper",e.Safari="safari",e.Edge="edge",e.Brave="brave",e.Spreadsheet="spreadsheet"}(go||(go={}));const ho=async(e,t,n,r,i,s,o)=>fo("importData",(async()=>{const a=Co(t);return await a(e,n,r,i,s,o)})),vo=async(e,t,n)=>{const r=[];for(const e of n)Ao(e)&&r.push(e);if(0===r.length)throw new Error("No importable items were found in the selected file.");const i=await(0,kn.u7)(e,r,t);return(0,$.e5)(e),i.updatedItems},Co=e=>{switch(e){case go.LastPass:return us;case go.Dashlane:return $r;case go.RoboForm:return _s;case go.Chrome:return Wr;case go.Firefox:return Ki;case go.Apple:return Ar;case go.Delinea:return Ci;case go.KeePass:return Bi;case go.Bitwarden:return br;default:throw new Error("Invalid import format.")}},Ao=e=>{const t=JSON.stringify(e.overview);if(t&&t.length>y.VaultItem.MaxOverviewSize)return!1;const n=JSON.stringify(e.details);return!!n&&n.length<=y.VaultItem.MaxDetailSize},wo=async(e,t)=>c.getIcons(e.session,t),So=async e=>c.getInsightsTeamReportOverview(e.session),To=async(e,t,n,r,i,s)=>c.getInsightsTeamReport(e.session,t,n,r,i,s),Po=async(e,t,n,r)=>c.getInsightsTeamReportCsv(e.session,t,n,r?"asc":"desc"),bo=e=>{switch(e){case c.ServiceAccountType.Provisioning:return"provisioning";case c.ServiceAccountType.Connect:return"infrastructure-secrets/connect";case c.ServiceAccountType.DataStreaming:return"events_reporting";case c.ServiceAccountType.Cli:return"cli";case c.ServiceAccountType.Slack:return"slack";case c.ServiceAccountType.Duo:return"duo";case c.ServiceAccountType.MaskedEmails:return"fastmail";case c.ServiceAccountType.Brex:return"brex";case c.ServiceAccountType.PrivacyCom:return"privacycom";case c.ServiceAccountType.UserManaged:return"infrastructure-secrets/serviceaccount";default:return"na"}};var Ro=n(19669);const Eo=({clientName:e})=>"1passwordconnect"===e.replace(/\s+/g,"").toLowerCase(),Io=async({serviceAccount:e,devices:t,releases:n,slackApp:r,type:i,CTX:s,usersVaults:o,vaultItem:a})=>{let u,l="";switch(i){case c.ServiceAccountType.Connect:case c.ServiceAccountType.UserManaged:if(e)return await(async({CTX:e,sa:t,devices:n,usersVaults:r})=>{let i,s,o;try{s=await(0,Z.ZT)(e,t.uuid,{attrs:y.ServiceAccountUser.Attr.Tokens|y.ServiceAccountUser.Attr.VaultAccess}),i=(e=>{const t=new Date;return e.filter((e=>{const n=e.expiresAt&&new Date(e.expiresAt)<t;return"A"===e.state&&!n}))})(s.tokens).length,o=(e=>{const t=new Date;return e.filter((e=>{const n=e.expiresAt&&new Date(e.expiresAt)<t;return"A"===e.state&&n}))})(s.tokens).length}catch(e){console.error(`Could not get tokens and vault access for ${t.uuid}`,e)}const a=n&&n.filter(Eo).sort(Ro.Device.compareAuthDates).shift();return{title:t.name,icon:t.avatar,active:i,tokens:void 0,expiredTokens:o,groups:[],syncActivity:(0,P.dateFromGolang)(t.lastAuthAt),createdAt:(0,P.dateFromGolang)(t.createdAt),version:a?.clientVersion,vaults:{displayable:s.displayableVaultAccess&&r?s.displayableVaultAccess.map((e=>{const t=r.find((t=>t.uuid===e.vaultUuid));if(!t)throw new Error(`Could not find vault "${e.vaultUuid}"`);return{uuid:e.accessorUuid,avatar:t.avatar,type:t.type}})):[],total:s.totalAccessibleVaults}}})({CTX:s,sa:e,devices:t,usersVaults:o});break;case c.ServiceAccountType.Provisioning:if(e)return await(async({CTX:e,sa:t,releases:n})=>({title:t.name,icon:(()=>{switch(e.account?.settings.provisioning?.identityProvider){default:return"/entra-logo.svg";case"Okta":return"/okta-logo.svg";case"OneLogin":return"/onelogin-logo.svg";case"Rippling":return"/rippling-logo.svg";case"JumpCloud":return"/jumpcloud-logo.svg";case"Google Workspace":return"/google-workspace-logo.svg"}})(),groups:await(async()=>{if(!t.memberships)return[];const n=await(0,z.ls)(e);return t.memberships.filter((e=>e.role===c.GroupMembership.Role.Manager)).map((e=>{const t=n.find((t=>t.uuid===e.groupUuid));if(!t)throw new Error(`Could not find group "${e.groupUuid}"`);return{uuid:e.groupUuid,avatar:t.avatar,type:t.type}}))})(),active:void 0,expiredTokens:void 0,tokens:void 0,syncActivity:void 0,createdAt:(0,P.dateFromGolang)(t.createdAt),version:"",buildNumber:n?.SCIM?.release?.buildnum,vaults:{displayable:[],total:0}}))({CTX:s,sa:e,releases:n});break;case c.ServiceAccountType.DataStreaming:if(e)return await(async({CTX:e,sa:t})=>{let n,r,i;try{const s=await(0,Z.ZT)(e,t.uuid,{attrs:y.ServiceAccountUser.Attr.Tokens,mustReload:!0});n=(e=>{const t=new Date;return e.filter((e=>{const n=e.expiresAt&&new Date(e.expiresAt)<t;return"A"===e.state&&!n}))})(s.tokens),r=n.length,i=(e=>{const t=new Date;return e.filter((e=>{const n=e.expiresAt&&new Date(e.expiresAt)<t;return"A"===e.state&&n}))})(s.tokens).length}catch(e){console.error(`Could not get tokens for ${t.uuid}`,e)}return{title:t.name,icon:t.avatar,groups:[],active:r,expiredTokens:i,tokens:n,createdAt:(0,P.dateFromGolang)(t.createdAt),syncActivity:void 0,version:"",vaults:{displayable:[],total:0}}})({CTX:s,sa:e});break;case c.ServiceAccountType.Duo:u="icon-duo.svg";break;case c.ServiceAccountType.Slack:l=r?r.teamName:"",u="slack-icon-v2.svg";break;case c.ServiceAccountType.MaskedEmails:u="icon-fastmail-60.svg";break;case c.ServiceAccountType.Brex:u="icon-brex.svg";break;case c.ServiceAccountType.PrivacyCom:u="icon-privacycom.svg";case c.ServiceAccountType.Cli:case c.ServiceAccountType.Na:}return{title:l,active:void 0,expiredTokens:void 0,icon:u,groups:[],syncActivity:void 0,createdAt:void 0,tokens:void 0,version:"",vaults:{displayable:[],total:0},vaultItem:a}},Uo=async e=>{const t=e.account?.settings,n=e.user?.hasPermission(y.Permission.ChangeTeamSettings);if(t?.duo?.isEnabled&&n)return{type:"S",uuid:"",name:"Duo",createdAt:"",state:"",creatorUuid:"",serviceAccountType:c.ServiceAccountType.Duo,email:"",avatar:"",summary:await Io({type:c.ServiceAccountType.Duo,CTX:e})}},Oo=async e=>{const t=e.account?.hasFeature?.integrationHubEmailAlias;if(!t)return[];const n=await(0,Y.ro)(e);if(!n)return[];const r=(await(0,kn.L)(e,n)).filter((e=>"fastmail"===e.overview.integration));return await Promise.all(r.map((async t=>({type:"S",uuid:t.uuid,name:"Fastmail",createdAt:"",state:"",creatorUuid:"",serviceAccountType:c.ServiceAccountType.MaskedEmails,email:"",avatar:"",summary:await Io({type:c.ServiceAccountType.MaskedEmails,vaultItem:t,CTX:e})}))))},ko=async e=>{const{integrations:t,releases:n}=await(0,Z.Zh)(e),r=t.filter((({serviceAccount:e})=>e.serviceAccountType!==c.ServiceAccountType.Cli));if(0===r.length)return[];r.sort(P.compare.strings((({serviceAccount:e})=>e.serviceAccountType)));const i=await(0,Y._w)(e);return Promise.all(r.map((async({serviceAccount:t,devices:r})=>({...t,devices:r,type:"S",creatorUUID:"",serviceAccountSubtype:"na",serviceAccountType:t.serviceAccountType,summary:await Io({serviceAccount:t,devices:r,releases:n,usersVaults:i,type:t.serviceAccountType,CTX:e})}))))};var Do=n(85972);const Mo=async e=>{if(!e.account?.hasFeature.slack)return;const t=await(0,Do.Sc)(e),n=(0,y.createEmptySlackApp)(y.SlackAppState.Inactive);if("slack-app"!==t.type||t.slackApp.state===y.SlackAppState.Inactive)return;const r="slack-app"===t.type?t.slackApp:n;return{type:"S",uuid:"",name:"Slack",createdAt:"",state:r.state,creatorUuid:"",serviceAccountType:c.ServiceAccountType.Slack,email:"",avatar:"",summary:await Io({slackApp:r,type:c.ServiceAccountType.Slack,CTX:e})}},Fo=async e=>{const t=await(0,Y.ro)(e);if(!t)return[];const n=await(0,kn.L)(e,t),r=[...n.filter((e=>"privacy"===e.overview.integration)).map((async t=>({type:"S",uuid:t.uuid,name:"Privacy.com",createdAt:"",state:"",creatorUuid:"",serviceAccountType:c.ServiceAccountType.PrivacyCom,email:"",avatar:"",summary:await Io({type:c.ServiceAccountType.PrivacyCom,vaultItem:t,CTX:e})})))],i=e.account?.hasFeature?.integrationHubBrex;if(i){const t=n.filter((e=>"brex"===e.overview.integration)).map((async t=>({type:"S",uuid:t.uuid,name:"Brex",createdAt:"",state:"",creatorUuid:"",serviceAccountType:c.ServiceAccountType.Brex,email:"",avatar:"",summary:await Io({type:c.ServiceAccountType.Brex,vaultItem:t,CTX:e})})));r.push(...t)}return await Promise.all(r)},_o=async e=>{const[t,n,r,i,s]=await Promise.all([ko(e),Mo(e),Uo(e),Oo(e),Fo(e)]);return n&&t.push(n),r&&t.push(r),[...t,...i,...s]};var Ko,No=n(59473),Vo=n(27206),Bo=n(58022),Lo=n(47200),xo=n(24531),Go=n(81258),Zo=n(61279);!function(e){e[e.OneHour=3600]="OneHour",e[e.OneDay=86400]="OneDay",e[e.SevenDays=604800]="SevenDays",e[e.FourteenDays=1209600]="FourteenDays",e[e.ThirtyDays=2592e3]="ThirtyDays"}(Ko||(Ko={}));const jo=[Ko.OneHour,Ko.OneDay,Ko.SevenDays,Ko.FourteenDays,Ko.ThirtyDays],Yo=[Bo.FR.AnyoneWithTheLink,Bo.FR.OnlySomePeople],Ho=async(e,t)=>{const n=await Bo.Ki(e.session,t.vault.uuid,t.uuid);return{shares:await Promise.all(n.shares.map((async e=>Wo(e,t))))}},Wo=async(e,t)=>{const n=t.vault.activeKey;if(!n)throw new Error("Missing vault key");const r=e.encShareSecret?(0,P.ab2str)(await n.decrypt(e.encShareSecret)):"",i=r?`${e.url}#${r}`:void 0;return{uuid:e.uuid,state:e.state,itemVersion:e.itemVersion,createdAt:e.createdAt,expiresAt:e.expiresAt,sharedBy:e.sharedBy,shareLink:i,type:e.type,recipients:e.recipients,viewCount:e.viewCount,maxViews:e.maxViews,canDelete:e.canDelete}},$o=async(e,t,n)=>{try{const r=await Bo.w0(e.session,t.vault.uuid,t.uuid),i=r.files.allowed&&qo(t,r.files.maxSize,!!n).length>0,{allowedRecipientTypes:s,allowedTypes:o,maxExpiry:a,defaultExpiry:u,maxViews:c}=Jo(r,i),l=Yo.find((e=>o.includes(e)));if(!l)throw new Error("No allowed availability options found");return{type:"settings",allowedRecipientTypes:s,expirationMenu:{entries:jo.filter(zo(a)),default:jo.includes(u)?u:Ko.OneHour},availabilityMenu:{entries:Yo.filter((e=>o.includes(e))),default:l},maxExpiry:a,maxViews:c,includeFiles:i}}catch(e){if(P.errors.isNewServerError(e,P.errors.ServerErrorReason.unsupported,P.errors.HTTPStatusCode.forbidden))return{type:"unsupported"};if(P.errors.isNewServerError(e,P.errors.ServerErrorReason.accountPolicy,P.errors.HTTPStatusCode.forbidden))return{type:"accountPolicy"};throw e}},Jo=(e,t)=>{const n=t&&e.files.allowedRecipientTypes?e.files.allowedRecipientTypes:e.allowedRecipientTypes,r=t&&e.files.allowedTypes?e.files.allowedTypes:e.allowedTypes;return{allowedRecipientTypes:n,maxExpiry:t&&e.files.maxExpiry?e.files.maxExpiry:e.maxExpiry,allowedTypes:r,defaultExpiry:t&&e.files.defaultExpiry?e.files.defaultExpiry:e.defaultExpiry,maxViews:t&&"maxViews"in e.files?e.files.maxViews:e.maxViews}},qo=(e,t,n)=>{if(e.details.documentAttributes&&!e.details.documentAttributes.signingKey)throw new Error("Document doesn't have signing key.");const r=n?(0,en.Z)(e.details.sections??[],(e=>(0,D.Z)((e.fields??[]).map((e=>xo.nc.getDocumentAttributesFromField(e)))))):[];return(0,D.Z)([e.details.documentAttributes,...r]).filter((e=>e.signingKey)).map((e=>{if(t&&e.encryptedSize>t)throw new P.errors.ClientError(P.errors.ClientErrorCode.fileTooLarge,"File is too large to share.");return{fileUuid:(0,ye.fileId)(e)}}))},zo=e=>t=>t<=e;class Xo extends Error{constructor(e){super(),this.name="ItemShareRejectedRecipientsError",this.message="Item share contains rejected recipients.",this.recipients=e}}const Qo=e=>P.errors.isErrorLike(e)&&"ItemShareRejectedRecipientsError"===e.name,ea=async(e,t,n)=>{const{secret:r,uuid:i,token:s,rawKey:o}=await aa(),a=(0,y.createSymmetricKey)(i);await a.importRawKey(y.JWK_ALG_A256GCM,o);const u=new Lo.j({name:"Fake Vault",type:"",desc:""});u.activeKey=a;const c=ta(t.clone(),n.includeFiles);c.vault=u,await c.encrypt();const l=await(0,Go.$G)(c);if(!l.encDetails)throw new Error("Missing item details");const d=n.includeFiles?qo(t,void 0,!!n.includeAttachments):[],p=n.recipients.map((e=>{if((0,Zo.vV)(e))return{type:Bo.my.Email,email:e};if((0,Zo.hS)(e))return{type:Bo.my.Domain,domain:e};throw new Error("Invalid recipient")}));if(p.length>0){const{rejectedRecipients:t}=await Bo.DO(e.session,{recipients:p});if(t.length>0)throw new Xo(t)}if(!t.vault.activeKey)throw new Error("Missing vault key");const m=await t.vault.activeKey.encrypt((0,P.str2ab)(r)),f={uuid:i,token:s,vaultUuid:t.vault.uuid,itemUuid:t.uuid,itemVersion:t.itemVersion,encOverview:l.encOverview,encDetails:l.encDetails,encShareSecret:m,fileReferences:d,type:n.availability,recipients:p,expiry:n.expiration,maxViews:n.maxViews||void 0},{url:g}=await Bo.L9(e.session,f),h=[g,r].join("#");try{new URL(h)}catch(e){throw new Error(`Could not construct share link: ${(0,R.getErrorMessage)(e)}`)}return h},ta=(e,t)=>(e.details.passwordHistory=void 0,e.overview.icons=void 0,t&&e.details.documentAttributes?.signingKey?e.details.documentAttributes.signingKey=void 0:e.details.documentAttributes=void 0,e.details.sections=e.details.sections.map((e=>({...e,fields:(e.fields??[]).filter(ra(t)).map((e=>{const t=xo.nc.getDocumentAttributesFromField(e);return t?{...e,v:{...t,signingKey:void 0}}:e}))}))),e),na=(0,P.fromStringEnum)(xo.nc.FieldType,"VaultItem.FieldType"),ra=e=>t=>{if(!na.is(t.k))return!1;if(t.k===xo.nc.FieldType.File)return!!xo.nc.getDocumentAttributesFromField(t)?.signingKey&&e;switch(t.k){case xo.nc.FieldType.String:case xo.nc.FieldType.Concealed:case xo.nc.FieldType.Date:case xo.nc.FieldType.Phone:case xo.nc.FieldType.Address:case xo.nc.FieldType.Url:case xo.nc.FieldType.Email:case xo.nc.FieldType.MonthYear:case xo.nc.FieldType.Gender:case xo.nc.FieldType.CreditCardType:case xo.nc.FieldType.Menu:case xo.nc.FieldType.Country:case xo.nc.FieldType.Month:case xo.nc.FieldType.OneTimePassword:case xo.nc.FieldType.SshKey:return!0;case xo.nc.FieldType.Reference:case xo.nc.FieldType.SsoLogin:case xo.nc.FieldType.ManagedApplication:case xo.nc.FieldType.PasskeyType:return!1}},ia=async(e,t)=>{const n={...e,itemVersion:1,encryptedBy:e.encOverview.kid},r=(0,y.createSymmetricKey)(e.uuid);await r.importRawKey(y.JWK_ALG_A256GCM,t);const i=new Lo.j({name:"Fake Vault",type:"",desc:""});return i.activeKey=r,await(0,Go.CL)(n,i)},sa=async e=>{let t;try{t=(0,P.base64urlToBytes)(e)}catch{throw new Error("invalid base64")}return await oa(t)},oa=async e=>{if(32!==e.byteLength)throw new Error("Incorrect secret byte length: "+e.byteLength.toString(10));return{uuid:(0,P.bytesAsClientUuid)(await C.unsafePrimitives.rawHkdf(C.unsafePrimitives.Sha2Mode.Sha256,e,(0,P.str2ab)("share_item_uuid"),new Uint8Array,16)),token:(0,P.bytesAsClientUuid)(await C.unsafePrimitives.rawHkdf(C.unsafePrimitives.Sha2Mode.Sha256,e,(0,P.str2ab)("share_item_token"),new Uint8Array,16)),rawKey:await C.unsafePrimitives.rawHkdf(C.unsafePrimitives.Sha2Mode.Sha256,e,(0,P.str2ab)("share_item_encryption_key"),new Uint8Array,32)}},aa=async()=>{const e=(0,Sr.getRandomBytes)(32),{uuid:t,token:n,rawKey:r}=await oa(e);return{secret:(0,P.bytesToBase64url)(e),uuid:t,token:n,rawKey:r}},ua=async(e,t)=>{const n=await Bo.BX(e.session,t);return ca(n)},ca=e=>{const{events:t,accessType:n}=e;if(n===Bo.FR.OnlySomePeople){const r=la(e.recipients),i=e.recipients.map((e=>e.type===Bo.my.Email?{type:"email",value:e.email,events:t.filter((t=>t.accessorEmail===e.email))}:{type:"domain",value:e.domain,events:t.filter((t=>da(t.accessorEmail,e.domain)&&!r.includes(t.accessorEmail)))})).sort(P.compare.strings((e=>e.value)));return{...e,accessType:n,sortedEvents:i}}{const r=(0,Os.Z)(t,(e=>e.timestamp.toISOString().slice(0,10))),i=(0,Vo.Z)(r,((e,t)=>({dateString:t,events:e}))).sort(P.compare.desc.dates((e=>new Date(e.dateString))));return{...e,accessType:n,sortedEvents:i}}},la=e=>e.filter((e=>e.type===Bo.my.Email)).map((e=>e.email)),da=(e,t)=>e.slice(e.indexOf("@")+1)===t,ya=async e=>Bo.xd(e.session),pa=async(e,t,n,r)=>Bo.c$(e.session,t,n,r),ma=async(e,t)=>Bo.tb(e.session,t),fa=async e=>Bo.S0(e.session);var ga=n(20622);const ha="action/managed_account",va=(0,Ys.P)(ha),Ca=(0,I.$y)(ha),Aa=async e=>Ca("getManagedAccounts",(async()=>c.getManagedAccounts(e.session).catch(va("getManagedAccounts")))),wa=async(e,t)=>Ca("unlinkManagedAccount",(async()=>c.unlinkManagedAccount(e.session,t).catch(va("unlinkManagedAccount")))),Sa=async(e,t,n,r)=>{if(n.find((e=>e.type!==y.Vault.TypeUserCreated)))throw new Error("Unsupported vault type included in selected vaults.");const i=[await ba(e),await(0,Y.HN)(e),...n],s=n.length>0?await(0,Y.tJ)(t):void 0,a=await(0,P.batchPromiseAll)((async t=>({vaultItems:await(0,kn.L)(e,t),vault:t.type===y.Vault.TypeUserCreated?await(0,Y.R1)(e,t,{attrs:y.Vault.Attr.Accessors,mustReload:!0}):t})),10,i.filter((e=>!!e)));await(0,o.M3)(e,[o.NE.Groups]);const u={successfulVaults:[],failedVaults:[],failedItems:{}};return await(0,P.batchPromiseAll)((async n=>{try{const i=await Ta(t,s,e,n.vault,r),o=n.vaultItems.map((e=>y.VaultItem.importFromJson(i,e.exportToJson())));return(0,kn.u7)(t,o,i).then((e=>{u.successfulVaults.push(n.vault);const t=Object.keys(e.failedItems);t.length>0&&(console.error("Failed to patch some vault items",i.uuid,e.failedItems),u.failedItems[i.uuid]=t)})).catch((e=>{u.failedVaults.push(i.uuid),console.error("Failed to patch vault items",i.uuid,e)}))}catch(e){return console.error("Failed to migrate vault",n.vault.uuid,e),u.failedVaults.push(n.vault.uuid),Promise.resolve()}}),10,a),u},Ta=async(e,t,n,r,i)=>{const s=n.account?.administratorsGroup?.uuid;switch(r.type){case y.Vault.TypePersonal:return await ba(e);case y.Vault.TypeGeneratedPasswords:return await(0,Y.HN)(e)||await(0,Y.AM)(e);case y.Vault.TypeUserCreated:if(!t)throw new Error("Missing destination preflight.");return await(0,Y.Oh)(e,{name:r.name,desc:r.desc,type:y.Vault.TypeUserCreated,avatar:await Ra(n,e,r,i)},Pa(r,s,t));default:throw new Error("Can't get destination vault for unsupported type.")}},Pa=(e,t,n)=>{const r=[...n.mandatoryGroupUuids];if(!t)return r;for(const i of n.adminGroupUuids)i&&!n.mandatoryGroupUuids.includes(i)&&e.accessList.find((e=>"group"===e.accessorType&&e.accessorUuid===t))&&r.push(i);return[...r]},ba=async e=>{const t=await(0,Y.XG)(e);if(!t)throw new Error("Missing personal vault.");return t},Ra=async(e,t,n,r)=>{if(!n.avatar)return"";const i=r(n.avatar,e.account),s=await fetch(i,{cache:"no-store"}).then((async e=>e.arrayBuffer()));return await(0,o.mh)(t,s)},Ea=(0,I.$y)("action/monitoring"),Ia=async(e,t)=>Ea("createMonitoringCheck",(async()=>await c.createMonitoringCheck(e.session,t))),Ua=async e=>await c.getMonitoringStatus(e.session);var Oa=n(20915),ka=n(47157);const Da=async(e,t,n)=>e.isSignedIn()?c.billing.createSetupIntent(e.session):c.billing.createUnverifiedSetupIntent(e.session,t,n),Ma=async(e,t,n)=>c.billing.updatePaymentMethod(e.session,t,n).then((async()=>(0,kt.pI)(e))),Fa=async(e,t)=>c.billing.getPaymentMethod(e.session,t);var _a=n(48426);const Ka=async(e,t={})=>{let n;try{n=await(0,c.startOidcAuth)(e.session,t)}catch(e){throw P.reportError(new P.LoggableError({message:E.L`StartOIDC failed to get redirect URL`,errorClass:P.ExceptionType.RequestError,userUuid:t.userUuid?(0,E.assertLogSafe)(t.userUuid):void 0,stackOverrideError:e,severityLevel:"error",metaData:{request:{accountUuidPresent:t.accountUuid?E.L`true`:E.L`false`,keyIdPresent:t.keyId?E.L`true`:E.L`false`}},tags:Va(e)})),e}if(!n||!n.authRedirect)throw new Error("expected an IdP redirect URL");return n.authRedirect},Na=async(e,t,n,r)=>{try{return await e.session.verifyOidc(t,n,r)}catch(e){throw P.reportError(new P.LoggableError({message:E.L`VerifyOIDC failed to get user identity`,errorClass:P.ExceptionType.RequestError,stackOverrideError:e,severityLevel:"error",tags:Va(e)})),e}},Va=e=>{let t={};return P.errors.isNewServerError(e)&&e.reason&&Object.values(P.errors.ServerErrorReason).includes(e.reason)&&(t={...t,serverErrorReason:(0,E.assertLogSafe)(e.reason)}),t},Ba=async(e,t)=>c.reportOutdatedBrowser(e.session,t).catch((e=>{console.error("Failed to report outdated browser:",e)}));var La=n(13932);const xa=async(e,t)=>c.getPendingInvitation(e.session,t),Ga=async e=>c.getAutoLockPolicy(e.session),Za=async(e,t)=>(t=t||{enabled:!1,lockAfterIdleTimeMin:480},c.updateAutoLockPolicy(e.session,t)),ja=async e=>c.getAllowAcocuntCreationPolicy(e.session),Ya=async(e,t)=>(t=t||{enabled:!1},c.updateAllowAccountCreationPolicy(e.session,t)),Ha=async e=>c.getSidebarNavPolicies(e.session),Wa=async(e,t)=>(t=t||{hideDeveloperTools:!1,hideIntegrations:!1,updatedAt:new Date(Date.now())},c.updateSidebarNavPolicies(e.session,t)),$a=async e=>c.getRestrictFailedLoginAttemptsPolicy(e.session),Ja=async(e,t)=>(t=t||{enabled:!1,allowedAttempts:c.MIN_ALLOWED_FAILED_LOGIN_ATTEMPTS,lockoutPeriodMin:c.MIN_LOCKOUT_PERIOD},c.updateRestrictFailedLoginAttemptsPolicy(e.session,t)),qa=e=>!!e.account&&e.account.hasFeature["b5-policies-auto-delete-suspended-users"],za=async e=>c.getAutoDeleteSuspendedUsersPolicies(e.session),Xa=async(e,t)=>(t=t||{enabled:!1,daysUntilDelete:30},c.updateAutoDeleteSuspendedUsersPolicies(e.session,t)),Qa=async(e,t)=>{try{return(await Promise.race([q(t,e),new Promise(((e,t)=>{setTimeout((()=>t("Timeout")),3e3)}))])).features.reduce(((e,t)=>(Object.keys(T.z).includes(t.name)&&(e[t.name]=!0),e)),{})}catch(e){return console.error("Failed to retrieve pre-registration feature flags:",e),{}}},eu=async e=>{const t=Object.keys(T.z);return Qa(t,e)},tu=async(e,t)=>Qa([e],t),nu=async e=>await(0,Y.ro)(e)||await(0,Y.j)(e),ru=(e,t)=>e.find((e=>"privacy"===e.overview.integration&&e.uuid===t)),iu=async(e,t)=>{const n=await(0,Y.ro)(e);if(!n)throw new Error("The system vault was expected but missing during Privacy.com deletion");const r=await(0,kn.L)(e,n),i=ru(r,t);if(!i)throw new Error("The Privacy.com record was expected but missing during Privacy.com deletion");i.state=y.VaultItem.ItemState.Deleted;const s=await(0,kn.u7)(e,[i],n);if(s.failedItems[t])throw new Error("The Privacy.com record was unable to be deleted");return s},su={...s},ou=(0,I.$y)("action/provision"),au=async(e,t,n)=>ou("createProvisionUser",(async()=>{const r=e.user;if(!r)return Promise.reject(new Error("Missing user."));if(!r.activeKeyset)return Promise.reject(new Error("Missing active keyset."));const i=t.activeKeyset;if(!i)return Promise.reject(new Error("Missing provision user's active keyset"));const s=e.account;if(!s)return Promise.reject(new Error("Missing account."));const o=s.teamMembersGroup;if(!o)return Promise.reject(new Error("No Team Members group found."));t.uuid=y.Person.UUIDNewlyCreatedProvisionUser;const a=new y.Vault({name:"Private",type:y.Vault.TypeProvision,desc:y.Vault.DefaultDescMarker,avatar:t.avatar}),u=(0,z.Aj)(e,{attrs:y.Group.Attr.PubKey}),l=a.generateNewKey(),d=(0,Y.Fv)(e,{attrs:y.Vault.Attr.All}),p=hu(e,{attrs:y.Group.Attr.PubKey}),m=(0,tn.eX)(e,t,o,{role:c.GroupMembership.Role.Member});return Promise.all([u,l,d,p,m]).then((async([n,r,s,o,u])=>{if(void 0===o)return Promise.reject(new Error("Provision Managers group not found."));const c=o.activeKeysetUuid?(0,ga.Jt)(e,o.activeKeysetUuid):void 0;if(!c)return Promise.reject(new Error("Provision Managers group keyset not found."));const l=y.VaultAccess.generate(a,t,{acl:y.vaultACL.RWE|y.vaultACL.Manage}),d=y.VaultAccess.generate(a,o,{acl:y.vaultACL.RWE}),p=y.VaultAccess.generate(a,n,{acl:y.vaultACL.Recover}),m=i.encryptWithKey(c.symKey);return Promise.all([l,d,p,u,m])})).then((async([r,i,s,o,u])=>{const l={vaults:[ye.vaultAccessToAPI(r)],groups:[o]};if(!t.secretKey)return Promise.reject(new Error("Missing Secret Key."));const d={user:{email:t.email,language:t.language,name:t.name,newsletterPrefs:t.newsletterPrefs,externalGUID:t.externalGUID,accountKeyFormat:t.secretKey.format.toString(),accountKeyUuid:t.secretKey.id,avatar:t.avatar},keyset:u,userAuth:y.Auth.getForUpload(n),vault:ye.vaultToAPI(a,[i,s]),access:l};return c.createProvisionUser(e.session,d)})).then((async t=>{const n=y.Person.Attr.VaultAccess|y.Person.Attr.PubKey|y.Person.Attr.Keysets;return ye.parsePerson(e,t,n,(0,j.E7)(e,t.uuid))}))})),uu=async(e,t,n)=>ou("startUserProvision",(async()=>{const r=t.uuid;await c.startUserProvision(e.session,r,n||{}),(0,$.e5)(e),e.nc.emit(P.notification.UsersChanged)})),cu=async(e,t)=>ou("suspendUserProvision",(async()=>{const n=t.uuid;await c.suspendUserProvision(e.session,n),(0,$.e5)(e),e.nc.emit(P.notification.UsersChanged)})),lu=async(e,t,n)=>ou("getProvisionDetails",(async()=>c.getProvisionDetails(e.session,t,n))),du=async(e,t,n,r)=>c.checkProvisioningEmailVerification(e.session,t,n,r),yu=async(e,t,n)=>ou("resendProvisioningEmailVerification",(async()=>c.resendProvisioningEmailVerification(e.session,t,n))),pu=async(e,t)=>ou("completeUserProvision",(async()=>{const n=c.getProvisionedPersonalVault(e.session,t.uuid).then((async t=>ye.parseVault(e,t,y.Vault.Attr.None,void 0))).then((async t=>e.account?(t.name=(0,o.FS)(e.account.type),t.type=y.Vault.TypePersonal,t.encryptAttrs()):Promise.reject(new Error("Missing account.")))).then((e=>ye.vaultToAPI(e))),r=c.getUserProvisionedKeys(e.session,t.uuid).then((async t=>ye.parseProvisionedKeys(e,t))).then((async e=>e.encryptForPerson(t)));return Promise.all([n,r]).then((async([n,r])=>{const i={provisionedKeys:r,personalVault:n};return c.completeUserProvision(e.session,t.uuid,i)})).then((()=>{(0,$.e5)(e),e.nc.emit(P.notification.UsersChanged)}))})),mu=async(e,t,n)=>ou("resendUserProvision",(async()=>{const r={userUuids:t.map((e=>e.uuid)),useToken:n};await c.resendUserProvision(e.session,r),(0,$.e5)(e),e.nc.emit(P.notification.UsersChanged)})),fu=async e=>ou("resendAllUsersProvision",(async()=>{await c.resendAllUsersProvision(e.session),(0,$.e5)(e),e.nc.emit(P.notification.UsersChanged)})),gu=async e=>ou("getResendDetails",(async()=>{const t=await c.getResendDetails(e.session);return{lastResendAt:(0,P.dateFromGolang)(t.lastResendAt),resendAllCooldown:t.resendAllCooldown}})),hu=async(e,t)=>{const n=e.account;if(!n)throw new Error("Missing account.");const r=n.groups.find((e=>!e.isTypeOwners&&!e.isTypeAdmins&&e.hasPermission(y.Permission.ProvisionPeople)));if(r)return(0,z.ex)(e,r,t)};var vu=n(81959),Cu=n(55130),Au=n(68359);const wu="action/report",Su=(0,Ys.P)(wu),Tu=async e=>Promise.resolve().then((async()=>c.getDashboardReport(e.session))).catch(Su("getDashboardReport")),Pu=async(e,t,n)=>Promise.resolve().then((async()=>c.getUserReport(e.session,t,n))).then((async n=>ye.userReportFromAPI(e,n,(0,j.E7)(e,t)))).catch(Su("getUserReport")),bu=async(e,t,n)=>{if(!c.isValidReportParams(t))throw new Error("report params are invalid");try{const r=await c.getItemReportWithFilters(e.session,t,n);return{apiReportItem:r,itemUsages:await ye.reportSectionItemUsageFromApi(e,r)}}catch(e){return Su("getUsageReportsWithFilters",e)}},Ru=async(e,t,n)=>{if(!c.isValidReportParams(t))throw new Error("report params are invalid");try{const r=await c.getItemReportWithCursors(e.session,t,n);return{apiReportItem:r,itemUsages:await ye.reportSectionItemUsageFromApi(e,r)}}catch(e){return Su("getUsageReportsWithCursors",e)}},Eu=async(e,t,n)=>c.getUserItemUsageOverview(e.session,t,n),Iu=async(e,t,n)=>Promise.resolve().then((async()=>c.getVaultReport(e.session,t,n))).then((async t=>ye.vaultReportFromAPI(e,t))).catch(Su("getVaultReport")),Uu=async(e,t,n)=>{try{const r=await c.getVaultsReport(e.session,t,n);return ye.vaultsReportFromAPI(e,r)}catch(e){return Su("getVaultsReport",e)}},Ou=async(e,t)=>0===t.length?{}:c.getAccountReport(e.session,t),ku=async e=>c.getOverviewReport(e.session,[c.ReportSections.ExtendedOverview]).catch(Su("getOverviewReport")),Du=async e=>c.getOldDevicesReport(e.session),Mu=async e=>(0,I.HF)([wu,"getAccountReportCSV",e.id],(async()=>c.getAccountReportCsv(e.session))),Fu=e=>e.map((e=>({uuid:e}))),_u=async(e,t)=>{const n=Fu(t),r=(0,Cu.Z)(n,c.MAX_EMAIL_BATCH_SIZE);try{for(const t of r)await c.sendUnusedPrivateVaultEmail(e.session,t),await(0,P.wait)(1500)}catch(e){throw console.error("Failed to send unused private vault email.",e),e}},Ku=async(e,t)=>{const n=Fu(t),r=(0,Cu.Z)(n,c.MAX_EMAIL_BATCH_SIZE);try{for(const t of r)await c.sendUnredeemedFamilyAccountEmail(e.session,t),await(0,P.wait)(1500)}catch(e){throw console.error("Failed to send unredeemed family account email.",e),e}},Nu=async(e,t)=>{const n=Fu(t),r=(0,Cu.Z)(n,c.MAX_EMAIL_BATCH_SIZE);try{for(const t of r)await c.sendNoSigninPastMonthEmail(e.session,t),await(0,P.wait)(1500)}catch(e){throw console.error("Failed to send no signin past month email.",e),e}},Vu=async e=>c.getLastViewedReports(e.session),Bu=async e=>{const t={name:"Provision Managers",type:y.Group.TypeUserDefined,desc:"",avatar:void 0,permissions:y.BitSet.combine([y.Permission.ProvisionPeople,y.Permission.BeginRecovery])},n=await(0,z.sS)(e,t),r=await(0,z.ex)(e,n.uuid,{attrs:y.Group.Attr.PubKey|y.Group.Attr.Memberships}),i=y.BitSet.combine([r.permissions,y.Permission.ProvisionPeople,y.Permission.BeginRecovery]),s=await(0,z.B5)(e,r,i);return await(0,o.M3)(e,[o.NE.Me]),s},Lu=async(e,t,n)=>{const r=await(0,Z.oV)(e,c.ServiceAccountType.Provisioning),{user:i,encKeyset:s,creds:o}=await(0,Z.EG)(e,r.email,"Automated User Provisioning"),a={uuid:y.Person.UUIDNewlyCreatedServiceAccount,pubKey:s.pubKey},u=await(0,z.w9)(e),l=await(0,Z.Tx)(e,a,[t,u],n),d={srpX:o.srpX,params:o.userAuth};return{user:(await(0,Z.G8)(e,s,i,r,d,c.ServiceAccountType.Provisioning,y.BitSet.empty(),{groups:l})).person,creds:o}},xu=async(e,t,n)=>{const{user:r,userAuth:i}=await(0,j.Dz)(e,t,"Provision Manager");await r.encryptActiveKeysetWithMasterKey();const s=await au(e,r,i);return await(0,tn.SJ)(e,{user:s,add:[{uuid:n.uuid,role:c.GroupMembership.Role.Member}],remove:[]}),await uu(e,s,{token:!0}),{user:s,creds:r.getCredentials()}},Gu=async(e,t)=>{const n=(await L(e,t.uuid)).users.filter((e=>y.User.isProvisionManager(e)&&y.User.isActive(e)&&!y.User.isServiceAccount(e)));if(0!==n.length)return n},Zu=async(e,t)=>{const n=(await L(e,t.uuid)).users.find((e=>!y.User.isOwner(e)&&!y.User.isAdmin(e)));if(n)return(0,j.Ay)(e,n.uuid,{attrs:y.Person.Attr.PubKey,mustReload:!1})},ju=async(e,t)=>{if(!e.user)throw new Error("User is missing");(await L(e,t.uuid)).users.find((t=>t.uuid===e.user?.uuid))||await(0,tn.TU)(e,{group:t,add:[{uuid:e.user.uuid,role:c.GroupMembership.Role.Manager}],remove:[]})},Yu=e=>async()=>{const t=await hu(e,{attrs:y.Group.Attr.Memberships,mustReload:!0});if(!t)throw new Error("Provision Managers group is missing");if(!t.memberships)throw new Error("Provision Managers group is empty");const n=t.memberships.find((t=>t.memberUuid===e.user?.uuid));n&&await(0,tn.TU)(e,{group:t,add:[],remove:[n.memberUuid]})},Hu=async(e,t,n)=>{try{await c.createMonitoringCheck(e.session,{domain:t,bearerToken:n})}catch{throw new Error("Couldn’t turn on SCIM bridge health monitoring.")}},Wu=(e,t)=>async(n,r,i,s)=>{if(!e.account)throw new Error("Account is missing.");const o=new $._y(e.config),a={allowReauthorization:!0,suppressClientNotifications:!0,isDesignatedAsPublic:!1};let u;if(r.type===y.User.Type.ServiceAccount){if(!("userAuth"in n))throw new Error("srpCredentials are missing.");if(u=n,void 0===u.userAuth)throw new Error("Missing credential auth information")}else{await Fe(o,n,a).catch((e=>{throw new Error(`Failed to authenticate the Provision Manager: ${(0,R.getErrorMessage)(e)}`)}));const t=await mt(o);if(void 0===t)throw new Error("srpCredentials are missing.");const r=o.session.auth?.params;if(void 0===r)throw new Error("Missing session auth information");u={...t,signInAddress:e.account&&e.account.urlHost(e.config.server)||"",userAuth:r}}const c=await y.LocalAuth.generate(u),{bearerToken:l,...d}=await y.LocalAuth.generateVerifierAndToken();if(s){if(!i)throw new Error("Enter the address where the SCIM bridge will be available.");await Hu(e,i,l)}const p={version:"2",...c.localAuth,healthVerifier:d,deviceUuid:P.generateUUID(),domain:t};return{bearerToken:c.bearerToken,healthVerifierBearerToken:l,fileContents:JSON.stringify(p)}},$u=async(e,t,n)=>{if(!e.account)throw new Error("Account is missing.");if(!t.userAuth)throw new Error("Missing credential auth information.");const r=await y.LocalAuth.generate(t),{bearerToken:i,...s}=await y.LocalAuth.generateVerifierAndToken(),o={version:"2",...r.localAuth,healthVerifier:s,deviceUuid:P.generateUUID(),domain:n};return{bearerToken:r.bearerToken,healthVerifierBearerToken:i,fileContents:JSON.stringify(o)}},Ju=async(e,t,n)=>{const r=await(0,j.Ay)(e,t.uuid,{attrs:y.Person.Attr.Groups}),i=await(0,z.w9)(e),s=r.groupMemberships.filter((e=>e.groupUuid!==n.uuid&&e.groupUuid!==i.uuid)).map((e=>e.groupUuid)),{user:o,creds:a}=await Lu(e,n);if(s.length>0){const t=s.map((e=>({uuid:e,role:c.GroupMembership.Role.Manager}))),n={user:o.uuid,add:t,remove:[]};await(0,tn.SJ)(e,n)}return await(0,j.Vt)(e,[t]),{user:o,creds:a}};var qu=n(85943);const zu=async(e,t)=>{if(!e.user)throw new Error("Missing user.");if(!e.account)throw new Error("Missing account.");if(!e.config.env)throw new Error("Missing env.");const n={...t,userUuid:e.user.uuid,email:e.user.email,name:e.user.name,env:e.config.env,accountUuid:e.account.uuid,timestamp:(new Date).toISOString()};return Xu(e,n)},Xu=async(e,t)=>{if(!e.user)throw new Error("Missing user.");if(!e.user.activeKeyset)throw new Error("User does not have active keyset.");if(!e.user.activeKeyset.hasSigningKeys||!e.user.activeKeyset.skeyPair?.priKey?.jwk)throw new Error("User does not have signing keys.");return(0,qu.sign)(e.user.activeKeyset.skeyPair.priKey.jwk,(0,wr.FA)(t))};var Qu=n(11323),ec=n(27150);const tc=async(e,t,n)=>{try{const r=await(0,c.getAuthMethods)(e.session,t,n);return nc(r.authMethods)&&(0,b.setDeviceUsesCredentialBundle)(),r}catch{return{authMethods:[]}}},nc=e=>rc(e)||ac(e),rc=e=>void 0!==e&&0!==e.length&&e.some((e=>e.type===c.OidcAuth)),ic=e=>rc(e)&&1===e.length,sc=e=>void 0!==e&&0!==e.length&&e.some((e=>e.type===c.PasswordAuth)),oc=e=>sc(e)&&1===e.length,ac=e=>void 0!==e&&0!==e.length&&e.some((e=>e.type===c.WebauthnAuth)),uc=e=>ac(e)&&1===e.length,cc=e=>e.type===c.OidcAuth?e:void 0,lc=e=>e.type===c.WebauthnAuth?e:void 0,dc=e=>{if(e)return e.map(lc).find((e=>e))},yc=e=>{if(e)return e.map(cc).find((e=>e))},pc=e=>{const t=yc(e);if(t&&t.provider)return t.provider},mc=async(e,t,n,r)=>{const i=await n.encryptCredentialBundle(t);return(0,c.addCredentialBundle)(e.session,{encCredentials:i,v:2},n.kid,r)},fc=async(e,t)=>(0,c.getEncryptedCredentialBundle)(e.session,t),gc=async(e,t,n,r)=>(0,c.setupCredentialBundle)(e.session,t,n,r),hc=(h.intersection([c.EncryptedCredentialBundle,h.readonly(h.type({accountKeyFormat:h.string,accountKeyUuid:h.string,userAuth:c.AuthParams}),"extra")],"CredentialBundleAuthResponse"),async(e,t)=>{const n=await e.decryptCredentialBundle(t.encCredentials);return{type:"found",secretKeyFormat:t.accountKeyFormat,secretKeyUuid:t.accountKeyUuid,spec:t.v,credentialBundle:n,userAuth:t.userAuth}}),vc=async(e,t)=>{await(0,c.createSsoSettings)(e.session,t)},Cc=async(e,t)=>{await(0,c.updateSsoSettings)(e.session,t)},Ac=async e=>{const t=await(0,c.getSsoSettings)(e.session);return Rc(e,t)},wc=async e=>{try{const t=await(0,c.getSsoSettings)(e.session);return Rc(e,t)}catch(e){if(P.errors.isNewServerErrorWithStatus(e,P.errors.HTTPStatusCode.notFound)||P.errors.isNewServerErrorWithStatus(e,P.errors.HTTPStatusCode.forbidden))return;throw e}},Sc=async(e,t)=>(await(0,c.ssoValidateStart)(e.session,t)).authRedirect,Tc=async(e,t,n)=>(0,c.ssoValidateEnd)(e.session,{code:t,state:n}),Pc=async(e,t)=>(0,c.getGroupDeadline)(e.session,t),bc=async(e,t)=>(0,c.postOidcWellKnownUrl)(e.session,t),Rc=(e,t)=>(void 0!==t.federationSettings.oidcSettings.clientSecret&&(Ec({message:E.L`unexpected non-nil clientSecret returned`,userUuid:e.user?(0,E.assertLogSafe)(e.user?.uuid):void 0}),delete t.federationSettings.oidcSettings.clientSecret),Ic(t.federationSettings.oidcSettings.identityProvider)||t.federationSettings.oidcSettings.privateApp&&(Ec({message:E.L`unexpected truthy privateApp returned`,userUuid:e.user?(0,E.assertLogSafe)(e.user?.uuid):void 0}),t.federationSettings.oidcSettings.privateApp=!1),t),Ec=e=>{const{message:t,userUuid:n}=e;(0,P.reportError)(new P.LoggableError({errorClass:P.ExceptionType.ContextError,userUuid:n,message:t}))},Ic=e=>{switch(e){case c.IdentityProviders.Generic:case c.IdentityProviders.Unknown:case c.IdentityProviders.Ping:case c.IdentityProviders.JumpCloud:case c.IdentityProviders.OneLogin:case c.IdentityProviders.Okta:case c.IdentityProviders.Auth0:case c.IdentityProviders.Duo:return!1;case c.IdentityProviders.Azure:case c.IdentityProviders.Google:return!0;default:throw new Error("unexpected identity provider")}},Uc=async(e,t)=>(0,c.kickoffDeviceEnrollment)(e.session,t),Oc=async(e,t)=>(0,c.getDeviceEnrollmentStatus)(e.session,t),kc=async(e,t,n)=>(0,c.unsafeGetDeviceEnrollmentStatus)(e.session,t,n),Dc=async e=>(await(0,c.getPendingDeviceEnrollments)(e.session)).enrollments,Mc=async(e,t)=>(0,c.getEnrollment)(e.session,t),Fc=async(e,t)=>(0,c.cancelDeviceEnrollment)(e.session,t),_c=async(e,t,n)=>(0,c.unsafeCancelDeviceEnrollment)(e.session,t,n),Kc=async(e,t)=>(0,c.markSignatureInvalid)(e.session,t);var Nc=n(84641);const Vc=(0,I.$y)("action/support"),Bc=async(e,t)=>Vc("requestSupportEmail",(async()=>Nc.OR(e.session,t))),Lc=async(e,t,n)=>Vc("getSupportAccountsList",(async()=>{const{accounts:r}=await Nc.sD(e.session,t,n);return r})),xc=async(e,t,n,r)=>Vc("requestAccountDeletion",(async()=>Nc.Ak(e.session,t,n,r))),Gc=(0,I.$y)("action/survey"),Zc=async(e,t)=>Gc("submitDepartureSurvey",(async()=>c.submitDepartureSurvey(e.session,t)));var jc=n(31385);const Yc=async e=>c.getTrustpilotReviewData(e.session);var Hc=n(43972);const Wc=async(e,t)=>c.getVaultManagers(e.session,t);var $c=n(67741);const Jc=async(e,t,n,r)=>c.beginDomainVerification(e.session,t,n,r||""),qc=async(e,t,n,r)=>c.completeDomainVerification(e.session,t,n,r),zc=async e=>c.getVerifiedDomains(e.session),Xc=async(e,t)=>c.updateVerifiedDomain(e.session,t),Qc=async(e,t)=>c.deleteVerifiedDomain(e.session,t);var el=n(68592),tl=n(47250);const nl=async(e,t,n,r,i)=>e.session.verifyPasskey(t,r,n,i),rl=async e=>e.session.registerWebauthnCredential(),il=async(e,t,n)=>e.session.verifyWebauthnCredentialAttestation(t,n),sl=async e=>{if(!(await el.x.createCredentialAvailable()).isAvailable)throw new Error("Browser does not support WebAuthn.");if(!e?.publicKey)throw new Error("included credential options do not include the passkey challenge");const{publicKey:t}=e,n={publicKey:{...t,challenge:(0,P.base64urlToBytes)(t.challenge),user:{...t.user,id:(0,P.base64urlToBytes)(t.user.id)}}},r=await navigator.credentials.create(n);if(!r)throw new Error("Unable to create webauthn credentials. Credentials not present");if(!("response"in r))throw new Error("Missing response field in rawCredentialFromBrowser");const i=r.response;if(null===i||"object"!=typeof i)throw new TypeError("attestationResponse has no properties");if(!("clientDataJSON"in i&&i.clientDataJSON instanceof ArrayBuffer&&"attestationObject"in i&&i.attestationObject instanceof ArrayBuffer))throw new TypeError("Attestation response has incorrect format");if(!("rawId"in r&&r.rawId instanceof ArrayBuffer))throw new TypeError("Credential raw id has incorrect format");let s;return"getTransports"in i&&"function"==typeof i.getTransports&&(s=(0,P.decode)(i.getTransports(),h.array(h.string)).unwrap()),{id:r.id,rawId:(0,P.bytesToBase64url)(new Uint8Array(r.rawId)),type:r.type,response:{clientDataJSON:(0,P.bytesToBase64url)(new Uint8Array(i.clientDataJSON)),attestationObject:(0,P.bytesToBase64url)(new Uint8Array(i.attestationObject)),transports:s}}},ol=async(e,t)=>{const n=await rl(e),r=await sl(n.challenge);return il(e,t,r)},al=async(e,t)=>(0,tl.Ty)(e.session,t),ul=async(e,t,n)=>(0,tl.Jd)(e.session,t,n),cl=async(e,t,n)=>(0,tl.EC)(e.session,t,n),ll=async(e,t)=>await c.createProvisioningProgressStep(e.session,t),dl=async e=>c.getAccountTransfersDetails(e.session),yl=async(e,t)=>{await(0,P.batchChain)((async t=>(await c.postMigratingUsers(e.session,{emails:t}),[])),500,t)},pl=h.readonly(h.array(h.string)),ml=e=>{if(void 0===dr)throw new TypeError("Papa Parse must be loaded first.");try{const t=dr.parse(e,{skipEmptyLines:!0}),n=(0,de.Z)(t.data);if(t.data.length!==n.length)throw new Error("Unexpected columns in row.");const r=(0,P.decode)(n,pl).unwrap().filter((e=>(0,P.isValidEmail)(e)));if(0===r.length)throw new Error("No valid emails.");return r}catch(e){throw console.error("Failed to parse, CSV is not in expected format.",e),e}},fl=async(e,t)=>{await c.patchMigratingUserState(e.session,t),e.account&&(e.account.mustMigrate=!1)},gl=async e=>c.suspendMigratedUser(e.session);var hl=n(57119);const vl=async(e,t,n)=>c.insightsTelemetry(e.session,t,n);var Cl;!function(e){e.Filled="filled-login-with-provider",e.Linked="linked-item-to-provider",e.SavingPasskeySuccess="saving-passkey-success",e.UsingPasskeySuccess="using-passkey-success",e.SavingPasskeyFailureInternal="saving-passkey-failure-internal",e.SavingPasskeyFailureTimeout="saving-passkey-failure-timeout",e.SavingPasskeyFailureUnknown="saving-passkey-failure-unknown",e.SavingPasskeyFailureBadinput="saving-passkey-failure-badinput",e.UsingPasskeyFailureInternal="using-passkey-failure-internal",e.UsingPasskeyFailureMissingItem="using-passkey-failure-missing-item",e.UsingPasskeyFailureTimeout="using-passkey-failure-timeout",e.UsingPasskeyFailureUnknown="using-passkey-failure-unknown",e.UsingPasskeyFailureBadinput="using-passkey-failure-badinput",e.AutoSaveSaveItem="autosave-save-item",e.AutoSaveSaveItemSpg="autosave-save-item-spg",e.AutoSaveSaveItemCreditCard="autosave-save-item-credit-card",e.AutoSaveSaveItemIdentity="autosave-save-item-identity",e.AutoSaveUpdateItem="autosave-update-item",e.AutoSaveUpdateItemSpg="autosave-update-item-spg",e.AutoSaveUpdateItemCreditCard="autosave-update-item-credit-card",e.AutoSaveUpdateItemIdentity="autosave-update-item-identity",e.AutoSaveUpdateItem2fa="autosave-update-item-2fa",e.AutoSaveEditItem="autosave-edit-item",e.AutoSaveDismiss="autosave-dismiss",e.SaveDialogSaveItem="save-dialog-save-item",e.SaveDialogUpdateItem="save-dialog-update-item"}(Cl||(Cl={}));const Al=async(e,t)=>{const n=new Date("2025-01-01T00:00:00Z");if(!(new Date>n))return c.reportUsoAction(e.session,t)},wl=3,Sl=(e,t)=>async n=>cr.hi.sendMsgA(e.session,n,t),Tl=(e,t,n)=>{const r=async(i=0)=>{const s=await cr.hi.receiveMsgA(e.session,t,n);if(s?.msga)return s.msga;if(i>=10)throw new Error("receiveMsgA timed out");return await(0,P.wait)(1e3),r(i+1)};return r},Pl=(e,t,n)=>async r=>cr.hi.sendMsgB(e.session,r,t,n),bl=(e,t)=>{const n=async(r=0)=>{const i=await cr.hi.receiveMsgB(e.session,t);if(i?.msgb)return i.msgb;if(100===r)throw new Error("receiveMsgB timed out");return await(0,P.wait)(1e3),n(r+1)};return n},Rl=(e,t)=>async n=>cr.hi.sendTagA(e.session,n,t),El=(e,t,n)=>{const r=async(i=0)=>{const s=await cr.hi.receiveTagA(e.session,t,n);if(s?.taga)return s.taga;if(10===i)throw new Error("receiveTagA timed out");return await(0,P.wait)(1e3),r(i+1)};return r},Il=(e,t,n)=>async r=>cr.hi.sendTagB(e.session,r,t,n),Ul=(e,t)=>{const n=async(r=0)=>{const i=await cr.hi.receiveTagB(e.session,t);if(i?.tagb)return i.tagb;if(10===r)throw new Error("receiveTagB timed out");return await(0,P.wait)(1e3),n(r+1)};return n},Ol=(e,t,n)=>{const r=async(i=0)=>{const s=await cr.hi.receiveSharedCredentialBundle(e.session,n,t);if(s)return s;if(10===i)throw new Error("receiveSharedCredentials timed out");return await(0,P.wait)(1e3),r(i+1)};return r},kl=(e,t)=>async n=>cr.hi.shareCredentialBundle(e.session,t,n),Dl=async e=>(await c.getDefaultVaultPermissions(e.session)).acl,Ml=async(e,t)=>c.updateDefaultVaultPermissions(e.session,{acl:t}),Fl=async(e,t,n)=>c.createDetailedVaultReportingPubkey(e.session,t,n),_l=async e=>{const t=await C.VaultReportingPrivateKey.generate(),n={objectUuid:t.uuid,data:{ePriKey:await t.exportSensitiveJwk()},acl:[]};await(0,_a.E6)(e,c.ObjectType.DetailedVaultReportingKeyset,c.DataType.DetailedVaultReportingKeysetPrivateKey,c.ObjectDataAccessScope.Manage,n),await Fl(e,t.uuid,await t.publicKey().then((e=>e.exportJwk())))},Kl=async(e,t)=>{t.pubKey||(t=await cr.aD.getGroup(e,t,{attrs:y.Group.Attr.PubKey,mustReload:!0}));const n=await c.getObjectDataAccessPreflight(e.session,c.ObjectType.DetailedVaultReportingKeyset,c.ObjectDataAccessScope.Every);await cr.aD.createObjectDataAccess(e,c.ObjectType.DetailedVaultReportingKeyset,c.ObjectDataAccessScope.Every,t,[],n)},Nl=async e=>{let t,n=[],r=1;do{t=await cr.aD.getVaultReportingVaultOverviewsPage(e,r),n=n.concat(t.vaultOverviews),r++}while(t.vaultOverviews.length>=t.pageSize);return n},Vl=async(e,t)=>c.getVaultReportingVaultOverviews(e.session,t),Bl=async e=>c.getVaultReportingSync(e.session),Ll=h.readonly(h.partial({vaultUuids:h.array(h.string),onlyActiveVaults:h.boolean,templateUuids:h.array(h.string),hasUrl:h.boolean,trashedStates:h.array(h.string),isBusinessRelated:h.boolean}),"GetVaultItemSnapshotsFilters"),xl=async(e,t,n,r)=>{if(!e.account)throw new Error("Missing account");if(!e.dvrPriKey)throw new Error("Missing detailed vault reporting private key");const i=((e,t)=>{if(void 0!==e.onlyActiveVaults||void 0!==e.vaultUuids)return t.reduce(((t,n)=>{const r=void 0!==e.vaultUuids&&!e.vaultUuids.includes(n.uuid),i=!1!==e.onlyActiveVaults&&n.state!==y.Vault.StateActive;return r||i||t.push(n.uuid),t}),[])})(t,n);if(i&&i?.length>c.MAX_SNAPSHOTS_RETRIEVAL_VAULTS_COUNT)throw new Error("There are too many vaults to filter by");const s=await e.dvrPriKey;if(e.account.hasFeature["b5web-cc-app-insights-aggregation"]){const n=P.jsonAsBase64Url.pipe(Sr.JwkRsaPriKey).encode(await s.exportSensitiveJwk()),{apps:r}=await c.aggregateVaultSnapshots(e.session,e.config.host,{dvrPrivateKey:n,vaultUuids:i,hasUrl:t.hasUrl,templateUuids:t.templateUuids,trashedStates:t.trashedStates,isBusinessRelated:t.isBusinessRelated});return new Map(r.map((e=>[e.hostname,{hostname:e.hostname,vaults:new Set(e.vaults),snapshots:new Set(e.snapshots)}])))}return await(async(e,t,n,r,i)=>{i?.(.1);const s=await(async(e,t,n,r)=>{const i="snapshotsDownload";console.time(i);const s=[],o=(new Date).toISOString();let a,u=!0;for(;u;){const r=await c.getVaultItemSnapshots(e.session,{hasUrl:t.hasUrl,isBusinessRelated:t.isBusinessRelated,vaultUuids:n,templateUuids:t.templateUuids,trashedStates:t.trashedStates,...a?{cursor:a}:{limit:c.DEFAULT_SNAPSHOT_RETRIEVAL_PAGE_SIZE,endTime:o}});s.push(...r.snapshots),a=r.cursor,u=r.hasMore}return r&&r(1),console.timeEnd(i),s})(e,t,n,(e=>{i?.(.1+.4*e)}));return(async e=>{const t=new Map,n="snapshotsAggregate";return console.time(n),e.forEach((e=>{new Set(e.snapshot.domains).forEach((n=>{const r=(0,P.getHostnameFromUrl)(n);if(!r)return;let i=t.get(r);i||(i={hostname:r,vaults:new Set,snapshots:new Set},t.set(r,i));const{uuid:s,vaultUuid:o}=e;s&&i.snapshots.add(s),i.vaults.add(o)}))})),console.timeEnd(n),t})(await cr.D5.decryptSnapshots(s,r,(e=>{i?.(.5+.5*e)})))})(e,t,i,s,r)},Gl=async(e,t)=>{if(void 0===e.dvrPriKey)throw new Error("Detailed vault reporting private key has not been initialized");const n=await e.dvrPriKey,r=[];for(let i=0;i<t.length;i+=c.DEFAULT_SNAPSHOT_RETRIEVAL_PAGE_SIZE){const s=t.slice(i,i+c.DEFAULT_SNAPSHOT_RETRIEVAL_PAGE_SIZE),o=await c.getVaultItemSnapshotsByUuids(e.session,{snapshotUuids:s}),a=await cr.D5.decryptSnapshots(o.snapshots,n);r.push(...a)}return r},Zl=async(e,t,n,r,i)=>{const s=(0,Cu.Z)(r,100),o=(0,In.Z)(r);let a=0;for(const r of s){a+=(0,In.Z)(r);const s={scope:i,contentVersion:n,isFinal:a===o,vaultUuid:t,snapshots:r};await c.putVaultReportingSnapshots(e.session,s)}},jl=async(e,t,n,r)=>{if(!(e.account&&e.accountOverview&&e.accountOverview.vaults&&cr.D5.shouldReportWithSnapshots(e.accountOverview)))return;const i=e.accountOverview.vaults.some((e=>void 0===e.snapshotContentVersion||e.snapshotContentVersion<e.contentVersion));if(!i)return;let s;try{const t=await e.dvrPubKey;if(void 0===t)return;s=t}catch{return}const o=e.account?.hasFeature.itemsInWrongAccountPolicy,a=y.Account.getAllowedWatchtowerDomains(e.account);for(await(0,jc.jD)();;){let i;try{i=await cr.aD.getVaultReportingSync(e)}catch(e){console.error("Error retrieving vault reporting assignment",e);break}if(void 0===i)break;const u=await n(e,i.vaultUuid);if(void 0===u)break;const c=await r(e,u);if(0===i.items?.length)continue;const l=void 0===i.items?c:c.filter((e=>i?.items?.includes(e.uuid)));let d;try{d=await cr.aD.generateWatchtowerReportForItems(l,!0,o,a)}catch(e){console.error("Error generating Watchtower reports on vault items",e);break}const p=await Promise.all(l.map((async e=>{const t=d[e.uuid],n=void 0!==t?cr.aD.toWatchtowerReportForApi(t):void 0,r=await y.newSnapshotForItem(e,a,n);return s.encrypt(r)})));try{await cr.aD.putVaultReportingSnapshots(e,u.uuid,u.contentVersion,p,y.VaultSnapshotInsertScopeType.Full)}catch(e){console.error("Error saving vault item snapshots",e);break}t&&await cr.D5.wait(1e3)}(0,jc.$f)()},Yl=async(e,t,n,r)=>{if(!e.account||!e.accountOverview||!e.dvrPubKey)return;let i;try{const t=await e.dvrPubKey;if(void 0===t)return;i=t}catch{return}const s=e.account?.hasFeature.itemsInWrongAccountPolicy,o=y.Account.getAllowedWatchtowerDomains(e.account);if(!y.SnapshotVaultTypes.includes(t.vault.type)||!cr.D5.shouldReportWithSnapshots(e.accountOverview))return;let a;try{a=cr.aD.toWatchtowerReportForApi(r??await cr.aD.generateWatchtowerReportForItem(t,!0,s,o))}catch(e){return void console.error("Error generating Watchtower report on vault item",e)}const u=await y.newSnapshotForItem(t,o,a),c=await i.encrypt(u);try{await cr.aD.putVaultReportingSnapshots(e,t.vault.uuid,n,[c],y.VaultSnapshotInsertScopeType.Patch)}catch(e){console.error("Error saving vault item snapshots",e)}},Hl=async(e,t,n)=>{const r={},i={},s=(0,Cu.Z)(t,20);for(let t=0,o=s.length;t<o;t++){const a=s[t];if(!a)break;const{vaultAccess:u}=await c.getVaultReportingVaultAccess(e.session,{vaultUuids:a});u.forEach((e=>{r[e.vaultUuid]=e.userUuids,i[e.vaultUuid]=e.groupUuids})),n?.(t/o)}return{vaultAccessUserUuids:r,vaultAccessGroupUuids:i}},Wl=async(e,t,n)=>{const r={},i=(0,Cu.Z)(t,20);for(let t=0,s=i.length;t<s;t++){const o=i[t];if(!o)break;const{groupMemberships:a}=await c.getVaultReportingGroupMemberships(e.session,{groupUuids:o});a.forEach((e=>{r[e.groupUuid]=e.userUuids})),n?.(t/s)}return r},$l=async e=>c.getDetailedVaultReportingStats(e.session),Jl=async e=>c.getAutomatedQuest(e.session).then((async e=>e));var ql=n(88139);const zl=async(e,t,n,r)=>{const[i,s]=await Promise.all([n.encryptSelfAndKeyset(r),n.exportVerifier()]);await cr.hi.createRecoveryKey(e.session,{uuid:n.kid,label:t,enc:(0,P.bytesToBase64url)((0,P.json2ab)(i.encRecoveryKey)),encryptedBy:i.encRecoveryKey.kid,cryptoVersion:n.version,verifierParam:(0,P.bytesToBase64url)((0,P.json2ab)(s))});const o=ql.PT.newForRecoveryCode();await cr.hi.createRecoveryPolicy(e.session,{recoveryKeyUuid:n.kid,...o});const a=await cr.hi.addRecoverableMaterial(e.session,n.kid,{encryptedKeyMaterial:(0,P.bytesToBase64url)((0,P.json2ab)(i.encKeysetSymKey))}),u=await cr.hi.getRecoveryKey(e.session,n.kid).then((e=>{const t=(0,P.base64urlToBytes)(e.enc);return(0,P.decode)(t,P.jsonBytes.pipe(Sr.JweB)).unwrap()}));await n.checkIntegrity(r,i.encKeysetSymKey,a.integrity,u),await cr.hi.activateRecoveryKey(e.session,n.kid)},Xl=async(e,t)=>{await cr.hi.deleteRecoveryKey(e.session,t)},Ql=async(e,t,n)=>cr.hi.getRecoveryPolicies(e.session,t,n).then((e=>e.policyUuids)),ed=async(e,t)=>{const n=await cr.hi.getRecoveryPolicy(e.session,t);return new ql.PT(t,n.recoveryKeyUuid,n)},td=async(e,t)=>{const n=await ed(e,t),r=await nd(e,n.recoveryKeyUuid);return new ql.uz(n,r)},nd=async(e,t)=>cr.hi.getRecoveryKey(e.session,t),rd=async e=>(await cr.hi.getRecoveryAttempts(e.session).then((e=>e.recoveryAttempts))).map(ql.hR.fromParts);var id=n(81567);const sd=6;class od{constructor(e,t,n){this.startEmailVerification=async e=>{try{const t=await cr.hi.recoveryKeyStartEmailVerification(this.session,!1,{email:e});return(0,id.ok)(new ad(this.key,this.session,t.sentToEmail))}catch(e){if((0,R.isNewServerError)(e)&&e.reason===R.ServerErrorReason.maximumAttemptsReached)return(0,id.cn)(pd.ResendLimitReached);throw e}},this.proceedToVerified=async e=>new ud(this.key,this.session,e),this.key=e,this.session=t,this.state=n}}class ad{constructor(e,t,n){this.verifyEmail=async e=>{try{await cr.hi.recoveryKeySubmitEmailVerification(this.session,{emailVerificationChallenge:e})}catch(e){if(!(0,R.isNewServerError)(e))throw e;switch(e.reason){case R.ServerErrorReason.incorrectValue:return(0,id.cn)(yd.IncorrectCode);case R.ServerErrorReason.maximumAttemptsReached:return(0,id.cn)(yd.AttemptLimitReached);case R.ServerErrorReason.expired:return(0,id.cn)(yd.CodeExpired);default:throw e}}const t=await cr.hi.recoveryKeyGetAttemptStatus(this.session);if("ID_VERIFICATION_COMPLETE"!==t.attemptState)throw new Error(`recovery attempt not in expected state (${t.attemptState})`);return(0,id.ok)(new ud(this.key,this.session,t.aux))},this.resendEmailVerificationCode=async()=>{try{await cr.hi.recoveryKeyStartEmailVerification(this.session,!0,{email:void 0})}catch(e){if((0,R.isNewServerError)(e)&&e.reason===R.ServerErrorReason.maximumAttemptsReached)return(0,id.cn)(pd.ResendLimitReached);throw e}return(0,id.ok)(void 0)},this.key=e,this.session=t,this.emailToDisplay=n}}class ud{constructor(e,t,n){this.decryptKeyset=async(e,t)=>{const n=await this.key.decryptKeysetSymKey(e).then((async e=>y.SymmetricKey.newFromJwkSymKey(e))),[r,i]=await Promise.all([y.EncryptionKeyPair.decryptWithKey(n,{pubKey:t.pubKey,encPriKey:t.encPriKey}),(0,y.decryptSigningKeyPair)(n,{pubKey:t.spubKey,encPriKey:t.encSPriKey})]);return new y.Keyset(t.uuid,n,r,i,t.sn)},this.encryptKeyset=async(e,t)=>t.encryptWithKey(e),this.completeRecovery=async(e,t,n,r,i,s)=>{const o={...r,v:await t.srpx.verifier(C.SrpMethod.fromString(r.method).group).then((async e=>e.exportServerHex()))},{encMaterial:a,encKeyset:u}=await cr.hi.recoveryKeyGetMaterial(this.session).then((async e=>{const t=(0,P.base64urlToBytes)(e.encryptedKeyMaterial);return{encMaterial:(0,P.decode)(t,P.jsonBytes.pipe(Sr.JweB)).unwrap(),encKeyset:e.encryptedKeyset}})),c=await this.decryptKeyset(a,u),l=await this.encryptKeyset(t.auk,c),d=s?await s.encryptCredentialBundle(t):void 0,{sessionUuid:y,signInTokenDetails:p,email:m,userUuid:f,accountUuid:g}=await cr.hi.recoveryKeyPostRegistration(this.session,{accountKeyFormat:n.format.toString(),accountKeyUuid:n.id,language:i,device:e,keyset:l,userAuth:o,deviceCredentials:d?{v:2,encCredentials:d}:void 0});return new cd(y,p?.token,t,{email:m,userUuid:f,accountUuid:g},n)},this.key=e,this.session=t,this.aux=n}}class cd{constructor(e,t,n,r,i){this.signIn=async(e,t)=>{e.session.clearSessionKey(),e.session.setSessionUuid(this.sessionUuid);const n=await cr.hi.getAuthMethods(e.session,void 0,this.details.userUuid);if(rc(n.authMethods))throw new Error("Not implemented");if(ac(n.authMethods)){if(void 0===this.signInToken)throw new Error("Missing sign in token");return Ne(e,{email:this.details.email,userUuid:this.details.userUuid,credentialBundle:this.credentialBundle,secretKeyFormat:this.secretKey.unwrapFormatAsKnown(),secretKeyUuid:this.secretKey.id},this.signInToken,t)}if(sc(n.authMethods))return Fe(e,{email:this.details.email,muk:await this.credentialBundle.auk.exportJwk(),secretKey:this.secretKey.exportSensitiveReadableString(),srpX:this.credentialBundle.srpx.exportHex()},t);throw new Error("Could not auth with any auth methods")},this.sessionUuid=e,this.signInToken=t,this.credentialBundle=n,this.details=r,this.secretKey=i}}const ld=async(e,t)=>{let n;try{n=await cr.hi.recoveryKeyBeginAttempt(e.session,{recoveryKeyUuid:t.kid})}catch(e){if((0,R.isNewServerError)(e)&&e.code===R.HTTPStatusCode.notFound)return(0,id.cn)(dd.NotFound);throw e}const{sessionUuid:r,cryptoVersion:i}=n;if(i!==C.CryptoVersion.V1)throw new Error("unknown crypto version");const s=await t.toRecoveryKey(i),o=await s.beginAuth();e.session.setSessionUuid(r);const a=await cr.hi.recoveryKeyAuthV1Begin(e.session,{bigA:o.bigAhex}),u=await o.recieveBigBhex(a.bigB);let c;try{c=await cr.hi.recoveryKeyAuthV1ConfirmKey(e.session,{clientHash:u.clientHash})}catch(e){if(!(0,R.isNewServerError)(e))throw e;if(e.code===R.HTTPStatusCode.unauthorized)return(0,id.cn)(dd.AuthenticationFailed);switch(e.reason){case R.ServerErrorReason.recentRecoveryAborted:return(0,id.cn)(dd.RecentAbortedAttempt);case R.ServerErrorReason.recentLogin:return(0,id.cn)(dd.RecentLogin);default:throw e}}const l=await u.recieveServerHash(c.serverHash);e.session.setSessionUuid(r),await e.session.importSessionKey(l.rawKey),e.session.requestId=1;const d=await cr.hi.recoveryKeyGetAttemptStatus(e.session);return(0,id.ok)(new od(s,e.session,d))};var dd,yd,pd;!function(e){e.RecentAbortedAttempt="RECENT_ABORTED_ATTEMPT",e.RecentLogin="RECENT_LOGIN",e.AuthenticationFailed="AUTHENTICATION_FAILED",e.NotFound="NOT_FOUND"}(dd||(dd={})),function(e){e.IncorrectCode="INCORRECT_CODE",e.AttemptLimitReached="ATTEMPT_LIMIT_REACHED",e.CodeExpired="CODE_EXPIRED"}(yd||(yd={})),function(e){e.ResendLimitReached="RESEND_LIMIT_REACHED"}(pd||(pd={}));const md=async(e,t)=>{const n=(()=>{if(e.account?.hasFeature["b5x-as-trusted-device"]&&e.account&&e.user&&e.account.uuid===t.accountUuid&&e.user.uuid===t.userUuid&&e.user.secretKey?.isTrustedDeviceFormat())return e.session.auth?.srpX})();return{requestId:t.requestId,srpx:n}},fd=async e=>c.getApplicationsCatalog(e.session),gd=async(e,t)=>(0,c.createAccountGatedFeatureTrialAction)(e.session,t),hd=async(e,t)=>(0,c.updateAccountGatedFeatureTrialAction)(e.session,t);var vd=n(70940);const Cd=async e=>{if(e.user&&e.account&&e.user.hasPermission(y.Permission.ManageGroups)&&!e.account.teamMembersGroup&&e.account.hasFeature.members)return async()=>{const t=new y.Group({name:"Team Members",type:y.Group.TypeTeamMembers,desc:"All team members."}),n=await(0,z.Aj)(e,{attrs:y.Group.Attr.PubKey}),[r,i]=await Promise.all([(0,z.hE)(e,t,n),B(e)]),s=i.filter((e=>e.type===y.User.Type.Regular)).map((async n=>{const i=await(0,j.Ay)(e,n,{attrs:y.Person.Attr.PubKey});await t.addMembership(r,i,{role:c.GroupMembership.Role.Member})}));await Promise.all(s),await(0,z.B6)(e,t)}};var Ad=n(43661);const wd=async e=>{if(!e.user||!e.account)return;if(!e.user.hasPermission(Ad.y3.BelongsToRecoveryGroup))return;const t=e.account.recoveryGroup,n=e.account.ownersGroup,r=e.account.administratorsGroup,i=await(0,z.L7)(e).catch((e=>{}));if(!t||!i)return;const s=!!t.recoveryKeyset,o=!n||n.hasPermission(Ad.y3.Recover),a=!r||r.hasPermission(Ad.y3.Recover);return s&&o&&a?void 0:async()=>{console.warn("Running keyset migration!"),s||(console.warn("Running RecoveryGroup keyset migration!"),await(0,z.rZ)(e,t,i)),n&&!o&&(console.warn("Running OwnersGroup keyset migration!"),await(0,z.rZ)(e,n,i)),r&&!a&&(console.warn("Running AdminGroup keyset migration!"),await(0,z.rZ)(e,r,i))}},Sd=async e=>{const t=new Date(2017,4,10),n=e.account?.createdAt||new Date,r=e.user?.createdAt||new Date;if(n>t)return;const[i,s]=await Promise.all([r<t?(0,Y.XG)(e):Promise.resolve(void 0),e.user?.hasPermission(y.Permission.ViewAdminConsole)?(0,Y.Fv)(e):Promise.resolve(void 0)]),o=i&&i.desc!==y.Vault.DefaultDescMarker,a=s&&e.user&&e.user.canManageVault(s)&&s.desc!==y.Vault.DefaultDescMarker;if(!o&&!a)return;const u=[];return i&&o&&(i.desc=y.Vault.DefaultDescMarker,u.push((0,Y.Lf)(e,i))),s&&a&&(s.desc=y.Vault.DefaultDescMarker,u.push((0,Y.Lf)(e,s))),Promise.all(u).then((()=>{}))},Td=async e=>Promise.resolve(),Pd=async e=>{const t=await Promise.all([Sd(e),wd(e),Cd(e),(0,vd.Q)(e)]);await Promise.all((0,D.Z)(t).map((async e=>e())))}},59473:function(e,t,n){n.d(t,{B6:function(){return A},F$:function(){return u},H7:function(){return f},I_:function(){return g},Nr:function(){return y},Os:function(){return d},V7:function(){return v},Zs:function(){return m},hj:function(){return c},nP:function(){return p},pw:function(){return w},sY:function(){return l},wk:function(){return C},z5:function(){return h}});var r=n(14521),i=n(79686),s=n(98798),o=n(44715);const a=e=>e.filter((e=>e.email)).map((e=>new i.Invitation(e))),u=async e=>{const t=await r.getPendingInvitations(e.session);return a(t)},c=async(e,t)=>(await r.getInviteVaults(e.session,t)).map((e=>new i.InviteVaultV2(e))),l=async(e,t)=>{await r.updateInviteVault(e.session,t)},d=async(e,t)=>{await r.deleteInviteVault(e.session,t)},y=async(e,t,n,i,o)=>{const u=(e=>{const t=e.reduce(((e,t)=>({successfulInvites:[...e.successfulInvites,...t.successfulInvites],failedInvites:[...e.failedInvites,...t.failedInvites]})),{successfulInvites:[],failedInvites:[]});return{successfulInvites:a(t.successfulInvites),failedInvites:t.failedInvites}})(await s.batchChain((async t=>{const s=t.map((e=>({email:e,language:"en",vaults:i})));return r.inviteUsersViaEmail(e.session,s,n,o)}),100,t));if(1===u.failedInvites.length&&0===u.successfulInvites.length&&u.failedInvites[0]?.reason)throw new s.errors.ClientError("is_existing_guest"===u.failedInvites[0]?.reason?s.errors.ClientErrorCode.emailAlreadyInUseByGuest:s.errors.ClientErrorCode.emailAlreadyInUseByMember);return u},p=async(e,t)=>{const n=await r.inviteViaSlack(e.session,t);return a(n)},m=async(e,t)=>{const n=t.map((e=>e.uuid)),i=await s.batchChain((async t=>(await r.resendInvitations(e.session,t),[])),15,n);return a(i)},f=async(e,t,n)=>await r.lookUpInvitation(e.session,t,n),g=async(e,t)=>await r.lookUpTeamInvitation(e.session,t),h=async(e,t)=>await r.teamInvitePerson(e.session,t),v=async e=>{const t=await r.regenerateSignUpLink(e.session);return e.account&&(e.account.inviteSecret=t.inviteSecret,e.account.attrVersion++,(0,o.fq)(e)),t},C=async(e,t)=>{const n=t.map((e=>e.uuid));await r.revokeInvitations(e.session,n)},A=async(e,t)=>await r.generateReplyToConfirmation(e.session,t),w=async(e,t,n)=>await r.completeReplyToConfirmation(e.session,t,n)},20622:function(e,t,n){n.d(t,{AT:function(){return v},DK:function(){return y},Jt:function(){return m},SX:function(){return p},qp:function(){return h}});var r=n(52384),i=n(66334),s=n(76515),o=n(79686),a=n(95154),u=n(23428),c=n(18292),l=n(30126);const d=(0,u.$y)("action/keyset"),y=(e,t)=>{const n=(0,r.Z)(t,"uuid");(0,l.zm)(e,"keysets").saveEntries(n)},p=async(e,t)=>d("decryptKeysets",(async()=>{const n=e.user&&e.user.masterKey,i=(0,r.Z)(t,(e=>e.uuid)),s=(0,l.zm)(e,"keysets");let o=Promise.resolve([]);for(const r of t)o=o.then((async t=>f(r.uuid,i,s,n).then((i=>(e.user&&r.encryptedBy===n?.KID()&&(e.user.activeKeyset=i,e.user.pubKey=i.ekeyPair.pubKey),[...t,i])))));return o})),m=(e,t)=>(0,l.zm)(e,"keysets").getEntry(t),f=async(e,t,n,r,i=0)=>d("getDecryptedKeyset",(async()=>{if(i>50)throw new Error("Infinite loop!");const s=n.getEntry(e);if(s)return s;const o=t[e];if(o)return g(o,t,n,r,i+1).then((e=>(n.saveEntry(e.uuid,e),e)));throw new Error("Could not find keyset. <"+e+">")})),g=async(e,t,n,r,i=0)=>d("decryptKeysetFindParent",(async()=>{if(e.encryptedBy===r?.KID())return r?o.Keyset.decryptWithKey(r,e):Promise.reject(new Error("Missing master key"));const s=e.encryptedBy||e.encSymKey.kid;if(!s)throw new Error("Missing encryptedBy.");if(s===e.uuid)throw new Error("Keyset is self-encrypted.");return f(s,t,n,r,i).then((async t=>o.Keyset.decryptWithKeyset(t,e)))})),h=async e=>{const t=e.accountOverview;if(e.accountOverview=await(0,c.X)(e),!t||e.accountOverview&&e.accountOverview.keysetVersion!==t.keysetVersion)return v(e)},v=async e=>{const{keysets:t}=await(0,i.H)(e.session);if(!e.user)throw new Error("Missing user");if(!e.user.masterKey){const n=t.find((e=>e.encryptedBy===o.KID_MASTER_PASSWORD));if(!n)throw new Error("Could not find active keyset");const r=(0,a.uE)(n.encSymKey);e.user.masterKey=await s.Auk.derive(r,e.user.getCredentials())}return p(e,t)}},18346:function(e,t,n){n.d(t,{Ak:function(){return v},B7:function(){return p},FV:function(){return l},Hz:function(){return c},Lo:function(){return s.Lo},PP:function(){return y},TD:function(){return C},aT:function(){return d},bC:function(){return s.bC},cl:function(){return m},jl:function(){return f},nu:function(){return s.nu},q:function(){return h}});var r=n(39722),i=n(14521),s=n(88764),o=n(70794),a=n(98798);const u=(0,n(23428).$y)("action/mfa"),c=async(e,t)=>u("enableMFA",(async()=>{const n=await i.enableMfa(e.session,t);return e.user&&(n&&n.dsecret&&(e.user.dSecret=n.dsecret),e.user.hasMFAEnabled=!0),n??void 0})),l=async(e,t)=>{try{await i.disableMfa(e.session,t),e.user&&(e.user.dSecret=void 0,e.user.hasMFAEnabled=!1)}catch(e){throw console.error("disableMfa failed: "+e),e}},d=async(e,t)=>u("sendMFACode",(async()=>i.sendMfaCode(e.session,t))),y=async e=>u("getMFA",(async()=>(await i.getMfa(e.session)).map((e=>({...e,createdAt:(0,o.y)(e.createdAt),updatedAt:(0,o.y)(e.updatedAt)}))))),p=async e=>u("getMFAConfig",(async()=>i.getMfaConfig(e.session))),m=async(e,t)=>u("verifyTotp",(async()=>i.verifyTotp(e.session,t))),f=(e,t)=>{const n=new r.misc.hmac(r.codec.base64url.toBits(e),r.hash.sha256).encrypt(r.codec.base32.toBits(t));return r.codec.base64url.fromBits(n).slice(0,8)},g=e=>({type:"public-key",id:a.base64urlToBytes(e)}),h=async(e,t,n,r,i)=>{if(!navigator.credentials||!navigator.credentials.create)throw new Error("Browser does not support WebAuthn.");if(!e.user)throw new Error("Missing user");const o=n.map((e=>g(e))),u=await navigator.credentials.create({publicKey:{challenge:a.base64urlToBytes(r),rp:{id:i,name:"1Password"},user:{id:a.str2ab(e.user.uuid),name:e.user.email,displayName:e.user.name},pubKeyCredParams:[{type:"public-key",alg:-7}],timeout:6e4,attestation:"none",authenticatorSelection:{authenticatorAttachment:"cross-platform",userVerification:"discouraged",residentKey:"discouraged"},excludeCredentials:o}});if(!u)throw new Error("Credential is missing.");const{attestationObject:c,clientDataJSON:l}=u.response;return{type:s.Lo.WebAuthn,keyHandle:u.id,keyValue:a.bytesToBase64url(new Uint8Array(c)),keyName:t,webAuthnClientData:a.bytesToBase64url(new Uint8Array(l))}},v=async(e,t,n)=>{if(!navigator.credentials||!navigator.credentials.get)throw Error;const r=e.map((e=>g(e)));if(0===r.length)throw Error;const i=await navigator.credentials.get({publicKey:{challenge:a.base64urlToBytes(t),rpId:n,allowCredentials:r,userVerification:"discouraged",timeout:6e4}});if(!i)throw Error;const{signature:s,authenticatorData:o,clientDataJSON:u}=i.response;return{keyHandle:i.id,signature:a.bytesToBase64url(new Uint8Array(s)),authData:a.bytesToBase64url(new Uint8Array(o)),clientData:a.bytesToBase64url(new Uint8Array(u))}},C=()=>{const e=navigator.credentials;return!!(e&&e.get&&e.create&&window.PublicKeyCredential)}},70940:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(79686),i=n(51896),s=n(20915);const o=async e=>{if(!e.user||!e.account)return;const t=e.user.isOwner()||r.User.isAdmin(e.user),n=e.account.hasFeature.members&&e.account.hasFeature.managedServiceProvider&&e.account.hasFeature["msp-foundation"];return!e.account.mspTechniciansGroup&&t&&n?async()=>{const t=new r.Group({name:"MSP Technicians",type:r.Group.TypeMSPTechnicians,desc:"Access to add, view, administer, and unlink managed companies as an external account manager."}),n=await(0,i.Aj)(e,{attrs:r.Group.Attr.PubKey});await(0,i.hE)(e,t,n),await(0,i.B6)(e,t),await(0,s.Z2)(e)}:void 0}},20915:function(e,t,n){n.d(t,{Ei:function(){return f},Pl:function(){return h},XS:function(){return v},Z2:function(){return m},ag:function(){return C},qq:function(){return g}});var r=n(14521),i=n(79686),s=n(38002),o=n(23428),a=n(66348),u=n(51896),c=n(20622);const l="action/msp",d=(0,s.P)(l),y=(0,o.$y)(l),p=new Set([i.Group.TypeMSPTechnicians,i.Group.TypeOwners,i.Group.TypeAdmins]),m=async e=>{const t=await(0,a.M3)(e,[a.NE.Groups]),n=await i.Keyset.generateWithSigningKeys();n.sn=1;const s=await Promise.all(t.groups.filter((e=>p.has(e.type))).map((async t=>{if(!(t=await(0,u.ex)(e,t,{attrs:i.Group.Attr.PubKey,mustReload:!0})).pubKey)throw new Error("Missing public key");const r=await n.encryptWithKey(t.pubKey);return{accessorUuid:t.uuid,accessorType:i.ObjectDataAccessorType.Group,encKey:r,encryptedBy:r.encryptedBy}})));return r.setupMsp(e.session,{access:s})},f=async(e,t,n)=>{const s=await(0,i.importPubKey)(n.pubKey),o=i.createSymmetricKey();await o.generate(i.JWK_ALG_A256GCM);const a=await o.encryptWithKey(s),u=await i.Keyset.generateWithSigningKeys();u.sn=1;const c=await u.encryptWithKey(o);return r.createManagedAccount(e.session,{companyDetails:t,managedAccountKey:{kid:o.uuid,encryptedBy:n.uuid,encKey:a},eamUserKeyset:c})},g=async e=>y("getUserMspPermissions",(async()=>r.getUserMspPermissions(e.session).catch(d("getUserMspPermissions")))),h=async(e,t)=>{const n=await r.createLaunchSession(e.session,{managedAccountUuid:t}),[s]=await(0,c.SX)(e,[n.mspKey]);if(!s)throw new Error("Keyset missing");if(!n.managedAccountKey)throw new Error("Managed Account Keyset missing");const o=await i.createSymmetricKey(n.managedAccountKey.kid).decryptWithKeyset(s,n.managedAccountKey.encKey);if(!o.jwk)throw new Error("Managed Account Keyset missing");return{type:"transfer_credentials",accountUuid:t,...n,managedAccountKey:o.jwk}},v=(e,t,n)=>{const r=`${C(e,t)}/launch-ma`;return n?`${r}?landing-page=${n}`:r},C=(e,t)=>`https://${t}.${e.config.server}`},47157:function(e,t,n){n.d(t,{TH:function(){return i},tu:function(){return s},v:function(){return o}});var r=n(14521);const i=async e=>(await r.getNotifications(e.session)).notifications,s=async(e,t)=>{await r.acknowledgeNotification(e.session,{uuid:t})},o=async(e,t)=>{await r.saveNotificationSettings(e.session,{token:t})}},48426:function(e,t,n){n.d(t,{$0:function(){return l},AH:function(){return M},AM:function(){return I},D7:function(){return A},E6:function(){return v},Ey:function(){return O},FF:function(){return R},Mc:function(){return E},Oh:function(){return k},XE:function(){return g},_g:function(){return b},aU:function(){return m},eR:function(){return P},fP:function(){return h},oB:function(){return f},pQ:function(){return C},qE:function(){return D},qc:function(){return p},sK:function(){return y},ud:function(){return U}});var r=n(61320),i=n.n(r),s=n(14521),o=n(79686),a=n(98798),u=n(51896),c=n(20622);const l=async(e,t)=>(await s.getUserCombinedObjectDataAccess(e.session,t)).combinedAccess;var d;!function(e){e[e.Fulfilled=0]="Fulfilled",e[e.Rejected=1]="Rejected"}(d||(d={}));const y=async e=>p(e,Object.values(o.ObjectType)),p=async(e,t)=>{const n=await Promise.all(t.map((async t=>{try{return{status:d.Fulfilled,value:await l(e,t)}}catch{return{status:d.Rejected}}}))),r=[];return n.forEach((e=>{e.status===d.Fulfilled&&r.push(e.value)})),r},m=async(e,t,n,r)=>s.getCombinedObjectAccessors(e.session,t,n,r||{}),f=async(e,t,n)=>{const r=t.find((t=>t.uuid===e.encryptedBy));if(!r)throw new Error("None of the keysets match this object data");let i;if(e.data.dataType!==o.DataType.None&&e.data.dataType!==o.DataType.UserManagedServiceAccountCreator){const t=await(0,o.createSymmetricKey)().decryptWithKeyset(r,e.data.encKey),s=await t.decrypt(e.data.encData);i=a.decode(s,a.jsonBytes.pipe(n)).unwrap()}return{objectUuid:e.objectUuid,data:i,acl:e.acl}},g=async(e,t,n,r)=>{const i=t.data.find((e=>e.objectUuid===n&&e.data.dataType!==o.DataType.None));if(!i)throw new Error("Unable to find object data for uuid");if(E(i)){const n=await(0,c.SX)(e,t.keysets);return f(i,n,r)}const s=a.decode(i.data,r).unwrap();return{objectUuid:i.objectUuid,data:s,acl:i.acl}},h=async(e,t,n)=>{const r=await s.getObjectDataAccessPreflight(e.session,t,n);for(const n of r.requiredGroups){const i=await(0,u.ex)(e,n,{attrs:o.Group.Attr.PubKey});await P(e,t,o.ObjectDataAccessScope.Manage,i,[],r)}return await s.getObjectDataPreflight(e.session,t)},v=async(e,t,n,r,i,o=[])=>{let a=await s.getObjectDataPreflight(e.session,t);if(a||(a=await h(e,t,r)),!a)throw new Error("Unable to get or bootstrap object data preflight.");const u=await w(t,i.objectUuid,n,i,[...a.accessors,...o]);await s.createObjectData(e.session,t,{objectUuid:i.objectUuid,data:u})},C=async(e,t)=>{let n=[...t.accessors];const r=o.ObjectType.ServiceAccountUserManaged;if(!t.accessors?.length){const t=await h(e,r,s.ObjectDataAccessScope.Manage);if(!t)throw new Error("Unable to get or bootstrap object data preflight.");n=[...t.accessors]}return n.map((e=>({objectType:r,objectUuid:t.uuid,data:{dataType:o.DataType.UserManagedServiceAccountCreator},encryptedBy:e.kid,acl:[o.ObjectDataAccessAcl.ServiceAccountCreatorManaged]})))},A=async(e,t,n,r,i)=>{await s.deleteObjectData(e.session,t,n,i,r)},w=async(e,t,n,r,i)=>Promise.all(i.map((async i=>{let s;if(r.data&&S(n,r.acl,i.acl)){const e=i.encKeyset?.pubKey||i.pubKey;if(!e)throw new Error("missing encryption public key for ODA");const t=(0,o.createSymmetricKey)();await t.generate(o.JWK_ALG_A256GCM);const u=await t.encrypt(a.json2ab(r.data)),c=await(0,o.importPubKey)(e),l=await t.encryptWithKey(c);s={dataType:n,encKey:l,encData:u}}else s={dataType:o.DataType.None};return{objectType:e,objectUuid:t,data:s,encryptedBy:i.kid,acl:r.acl}}))),S=(e,t,n)=>e!==o.DataType.ConnectCredentialsSigningPrivateKeyToken&&e!==o.DataType.ConnectCredentialsFull||(t.some((e=>e===o.ObjectDataAccessAcl.ServiceAccountTokenCreate))||n.some((e=>e===o.ObjectDataAccessAcl.ServiceAccountTokenCreate||e===o.ObjectDataAccessScope.Manage))),T=e=>{let t;switch(e.accessorType){case"group":t=s.ObjectDataAccessorType.Group;break;case"user":t=s.ObjectDataAccessorType.User;break;default:throw new Error("Accessor type not supported")}return t},P=async(e,t,n,r,a,u)=>{if(!r.pubKey)throw new Error("Unable to add object data access for group.");const c=i()().toISOString(),l=await o.Keyset.generateWithSigningKeys();l.sn+=1;const d=await l.encryptWithKey(r.pubKey),y={state:s.ObjectDataAccessState.Active,objectType:t,accessorUuid:r.uuid,accessorType:T(r),kid:l.uuid,pubKey:d.pubKey,encKeyset:d,encryptedBy:r.pubKey.uuid,acl:[n,...a],createdAt:c,updatedAt:c},p={access:y,data:await R(e,u,y)};return await s.createObjectDataAccess(e.session,p),y},b=async(e,t,n,r)=>s.deleteObjectDataAccess(e.session,t,n,r),R=async(e,t,n)=>{if(!t.keyset)return[];if(!n.encKeyset)throw new Error("Missing encKeyset");const[r]=await(0,c.SX)(e,[t.keyset]);if(void 0===r)throw new Error("reEncryptRequiredData: Error decrypting ODA preflight keyset");return Promise.all(t.data.map((async e=>{if(!E(e))return{objectType:e.objectType,objectUuid:e.objectUuid,data:e.data,encryptedBy:n.kid,acl:e.acl};const t=await f(e,[r],o.ObjectDataType),[i]=await w(e.objectType,e.objectUuid,e.data.dataType,t,[n]);if(void 0===i)throw new Error("Error encrypting ODA");return i})))},E=e=>"encKey"in e.data&&"encData"in e.data,I=async(e,t)=>s.getObjectDataAccessorsForObjectType(e.session,t),U=async(e,t,n,r)=>s.getObjectDataAccessPreflight(e.session,t,n,r),O=async(e,t,n,r,i)=>{const a=await Promise.all(t.map((async t=>{const r=await U(e,n,o.ObjectDataAccessScope.Some,t);if(r.existingAccess)return r.existingAccess;const i=await(0,u.ex)(e,t,{attrs:o.Group.Attr.PubKey});return P(e,n,o.ObjectDataAccessScope.Some,i,[],r)}))),c=await l(e,n),d=await g(e,c,r,i),y=await w(n,r,o.DataType.ConnectCredentialsSigningPrivateKeyToken,d,a);await s.addObjectData(e.session,n,{objectUuid:r,data:y})},k=async(e,t,n,r,i,a)=>{const u=(await s.getObjectDataAccess(e.session,n,o.ObjectDataAccessorType.Group,t)).access[0];if(u){const c=await l(e,n),d=await g(e,c,r,i);await A(e,n,r,t,o.ObjectDataAccessorType.Group);const y={...d,acl:a},p=await w(n,r,o.DataType.ConnectCredentialsSigningPrivateKeyToken,y,[u]);try{await s.addObjectData(e.session,n,{objectUuid:r,data:p})}catch(t){const i=await w(n,r,o.DataType.ConnectCredentialsSigningPrivateKeyToken,d,[u]);throw await s.addObjectData(e.session,n,{objectUuid:r,data:i}),t}}},D=async(e,t)=>{try{return await s.getAllObjectDataWithDataSpec1(e.session,t)}catch(e){const t=a.errors.getError(e);if(a.errors.isNewServerErrorWithStatus(t,a.errors.HTTPStatusCode.notFound))return;if(a.errors.isNewServerErrorWithStatus(t,a.errors.HTTPStatusCode.forbidden))return void console.warn("Not enough access for getAllObjectDataWithDataSpec1.",t);console.error("Failed to getAllObjectDataRecordsWithDataSpec1:",t)}},M=async(e,{objectData:t,objectType:n})=>{const r=await l(e,n),i=await I(e,n);t.map((async t=>{const a=await g(e,r,t.objectUuid,o.ServiceAccountConnectObjectDataValue),u=i.access.find((e=>e.kid===t.encryptedBy));if(void 0===u)throw new Error("Error finding matching accessor for ObjectData");const[c]=await w(n,t.objectUuid,o.DataType.ConnectCredentialsSigningPrivateKeyToken,a,[u]);if(void 0===c)throw new Error("Error encrypting ODA");await s.updateObjectData(e.session,n,t.objectUuid,u.accessorType,u.accessorUuid,{data:c})}))}},13932:function(e,t,n){n.d(t,{$D:function(){return R},Bu:function(){return S},Ou:function(){return v},eD:function(){return I},i0:function(){return T},iB:function(){return P},jY:function(){return E},kg:function(){return A},pj:function(){return b},qv:function(){return U}});var r=n(27206),i=n(94605),s=n(27076),o=n(14521),a=n(79686),u=n(92706),c=n(38002),l=n(23428),d=n(51896),y=n(69490),p=n(80464),m=n(24683);const f="action/package",g=(0,c.P)(f),h=(0,l.$y)(f),v=async e=>Promise.resolve().then((async()=>{if(e.account&&!e.account.hasPackages)return Promise.resolve(void 0);let t;return console.log("Processing Incoming Packages"),P(e,{mustReload:!0}).then((async n=>(t=n,o.getIncomingPackages(e.session)))).then((async t=>Promise.all((0,r.Z)(t,(async t=>o.getIncomingPackage(e.session,t.uuid)))))).then((async n=>Promise.all((0,r.Z)(n,(async n=>u.packageFromAPI(e,t,n,(async t=>(0,y.F3)(e,t)))))))).then((async n=>{const i=await Promise.all((0,r.Z)(n,C(e,t))),[s,a]=i.reduce((([e,t],n)=>"string"==typeof n?[[...e,n],t]:[e,[...t,n]]),[[],[]]);if(s.length>0&&(await o.removePackages(e.session,s),console.warn(`Removed ${s.length} invalid packages`)),a.length>0){const n=await(0,m.u7)(e,a,t);return console.log(`Processed ${a.length} package(s)`),n}}))})).catch(g("processIncomingPackages")),C=(e,t)=>async n=>{if(!n.uuid)throw new Error("Really messed up package, missing UUID");if(!n.item)return console.warn(`Removing package with no item: ${n.uuid}`),n.uuid;const r=n.item.details.documentAttributes;if(r&&!r.documentId)return console.warn(`Removing package with no document ID: ${n.uuid}`),n.uuid;const i=n.item;return i.itemVersion=await o.getVaultItemVersion(e.session,t.uuid,i.uuid),i},A=async(e,t,n)=>h("sendPackages",(async()=>{const r=await(0,d.Aj)(e,{attrs:a.Group.Attr.PubKey}),i=await(0,y.F3)(e,n),s=await w(e,t,i,r),c=s.map(u.packageToAPI);return await o.sendPackages(e.session,c),s})),w=async(e,t,n,r)=>h("createPackagesForPeople",(async()=>{const s=e.user;if(!s)throw new Error("Missing user");const o=(0,i.Z)(n.map((e=>t.map((async t=>new a.Package(s,e,t).encryptAndSign(r))))));return Promise.all(o)})),S=async(e,t)=>{const n=t.map((e=>{if(!e.uuid)throw new Error("Missing package UUID");return e.uuid}));return o.removePackages(e.session,n)},T=async(e,t)=>Promise.resolve().then((async()=>o.getPackagesForVaultItem(e.session,t.vault.uuid,t.uuid).then((async n=>u.packagesFromAPI(e,t.vault,n,(async t=>(0,y.F3)(e,t))))))).catch(g("getPackagesForVaultItem")),P=async(e,t)=>Promise.resolve().then((async()=>e.user&&a.User.isGuest(e.user)?(0,p._w)(e,{mustReload:!0}).then((e=>(0,s.Z)(e))):(0,p.XG)(e,t))).then((e=>{if(!e)throw new Error("Current user does not have a receiving vault");return e})).catch(g("getReceivingVault")),b=async(e,t)=>{},R=async e=>{},E=async(e,t)=>{},I=async(e,t)=>o.markPackageAsRead(e.session,t),U=async(e,t)=>o.removePackageV2(e.session,t)},45674:function(e,t,n){var r,i;n.d(t,{r:function(){return i},s:function(){return r}}),function(e){e.Asc="ASC",e.Desc="DESC"}(r||(r={})),function(e){e.Name="Name",e.CreatedAt="Created",e.UpdatedAt="Updated"}(i||(i={}))},69490:function(e,t,n){n.d(t,{BY:function(){return u},F3:function(){return c},qc:function(){return l}});var r=n(52384),i=n(1166),s=n(14521),o=n(98798);const a=(0,n(23428).$y)("action/pub_key"),u=(e,t)=>{const n=(0,r.Z)(e,"uuid");return t.map((e=>{const t=n[e.uuid];if(void 0===t)throw new Error("mergeInPubKeys: accessor not found");return{...t,pubKey:e.pubKey}}))},c=async(e,t)=>{const n=(0,i.Z)(t.map(o.getValidUserUuid));return 0===n.length?[]:(0,o.batchChain)((async t=>s.getUserPubKeys(e.session,t)),195,n)},l=async(e,t)=>a("getGroupPubKeys",(async()=>{const n=(0,i.Z)(t.map(o.getValidGroupUuid));return 0===n.length?[]:(0,o.batchChain)((async t=>s.getGroupPubKeys(e.session,t)),195,n)}))},20806:function(e,t,n){n.d(t,{U:function(){return c},s:function(){return l}});var r=n(91670),i=n(87347),s=n(27206),o=n(86257);const a=r.Z,u=i.Z,c=()=>({contexts:{},getAllEntries(e){return d(this,e)},getEntry(e,t,n){return y(this,e,t,n)},withEntries(e,t,n){return m(this,e,t,n)},withOnlyEntries(e,t,n){return f(this,e,t,n)},withoutEntries(e,t){return g(this,e,t)},withoutContext(e){return h(this,e)}}),l=e=>{C={...C,[e]:Date.now()}},d=(e,t)=>{const n=e.contexts[t];if(n&&n.timestamp>A(t))return(0,s.Z)(u(n.entries),(e=>e.value))},y=(e,t,n,r)=>{const{attrMask:i}=(e=>({attrMask:0,...e}))(r),s=e.contexts[t],o=s&&s.entries[n];if(o&&o.timestamp>A(t)&&(o.attrMask&i)===i)return o.value},p=e=>({attrMask:0,timestamp:Date.now(),...e}),m=(e,t,n,r)=>{const{attrMask:i,timestamp:s}=p(r),o=e.contexts[t],u={...o&&o.entries||{},...a(n,(e=>({attrMask:i,value:e,timestamp:s})))};return v(e,t,{entries:u})},f=(e,t,n,r)=>{const{attrMask:i,timestamp:s}=p(r),o=a(n,(e=>({attrMask:i,value:e,timestamp:s})));return v(e,t,{entries:o,timestamp:s})},g=(e,t,n)=>{const r=e.contexts[t],i=r&&r.entries||{},s=(0,o.Z)(i,n);return v(e,t,{entries:s})},h=(e,t)=>({...e,contexts:(0,o.Z)(e.contexts,t)}),v=(e,t,n)=>{const r=e.contexts[t]||{};return{...e,contexts:{...e.contexts,[t]:{entries:{},timestamp:0,...r,...n}}}};let C={};const A=e=>C[e]||0},11323:function(e,t,n){n.d(t,{$p:function(){return u},Fy:function(){return o},ME:function(){return s},Zm:function(){return c},fL:function(){return l},ub:function(){return a}});var r=n(14521),i=n(79686);const s=async(e,t,n)=>r.revokeServiceAccountToken(e.session,t,n),o=async(e,t,n,i)=>{const s={name:i};return r.renameServiceAccountToken(e.session,t,n,s)},a=async e=>r.revokeAllServiceAccountTokensForAccount(e.session),u=async(e,t,n,i,s)=>{const{saJwt:o,registerTokenRequest:a}=await l(e,t,i,s,n.token,n.sPriKey.kid,n.sPriKey);return await r.registerServiceAccountToken(e.session,a),o},c=async(e,t,n,i,s)=>{const{saJwt:o,registerTokenRequest:a}=await l(e,t,i,s,void 0,n.signingKey.kid,n.signingKey);return await r.registerServiceAccountToken(e.session,a),o},l=async(e,t,n,r,s,o,a)=>{if(!e.account)throw new Error("Cannot register token without Account information");const u=await i.createServiceAccountJwt({signingKey:a,accountUuid:e.account.uuid,serviceAccountUuid:t,createTokenInfo:r,bearerToken:s}),c=await i.tokenSignatureHash(u);return{saJwt:u,registerTokenRequest:{kid:o,subject:t,name:n,account_uuid:e.account.uuid,token_info:{...r,signatureHash:c}}}}},74327:function(e,t,n){n.d(t,{Db:function(){return O},EG:function(){return g},G8:function(){return h},Sx:function(){return C},TL:function(){return I},Tx:function(){return A},ZT:function(){return T},Zh:function(){return v},ln:function(){return E},nf:function(){return U},oV:function(){return m},vp:function(){return R},wL:function(){return w}});var r=n(52913),i=n(14521),s=n(79686),o=n(92706),a=n(98798),u=n(23428),c=n(44715),l=n(49308),d=n(20806),y=n(11323),p=n(97668);const m=async(e,t)=>i.createServiceAccountPreflight(e.session,t);let f=d.U();const g=async(e,t,n,r)=>{const{user:i,userAuth:s}=await(0,p.Dz)(e,t,n,r);if(!i.masterKey)throw new Error("Missing master key");if(!i.secretKey)throw new Error("Missing secret key");const o=await i.encryptActiveKeysetWithMasterKey(),a={email:i.email,muk:await i.masterKey.exportJwk(),secretKey:i.secretKey.exportSensitiveReadableString(),srpX:s.srpX,signInAddress:e.account&&e.account.urlHost(e.config.server)||"",userAuth:s.params};return{user:i,encKeyset:o,creds:a}},h=async(e,t,n,r,a,u,c,l,d,p,m,f,g)=>{let h,v;if(d&&(({saJwt:h,registerTokenRequest:v}=await(0,y.fL)(e,d.serviceAccountUuid,d.tokenName,d.tokenInfo,d.bearerToken,d.kid,d.signingKey)),v.subject!==r.uuid))throw new Error("Token subject must match Service Account UUID from preflight response.");const C=n.getCredentials(),A={access:l,serviceAccountType:u,keyset:t,preflightToken:r.token,permissions:c,userAuth:s.Auth.getForUpload(a),userRegistration:{uuid:r.uuid,email:r.email,name:n.name,avatar:p,accountKeyFormat:C.secretKey.format.toString(),accountKeyUuid:C.secretKey.id,newsletterPrefs:0,language:n.language},registerSAToken:v,throttleKeyData:m,rotated:f,objectData:g},w=await i.createServiceAccountV3(e.session,A);return{person:await o.parsePerson(e,w,0,void 0),saJwt:h}},v=async e=>i.getIntegrations(e.session),C=async e=>i.getServiceAccounts(e.session),A=async(e,t,n,r)=>{r=r||P();const i=[];for(const s of n){const n=await(0,l.eX)(e,t,s,r);i.push(n)}return i},w=async(e,t,n)=>{const r={...e,accessorType:"user"};n=n||b();const i=[];for(const e of t){const t=await s.VaultAccess.generate(e,r,n),a=o.vaultAccessToAPI(t);i.push(a)}return i},S={attrs:s.ServiceAccountUser.Attr.None,mustReload:!1},T=async(e,t,n)=>{const{attrs:r,mustReload:a}={...S,...n},c=a?void 0:f.getEntry(e.id,t,{attrMask:r});return c&&c.hasAttrMask(r)?c:(0,u.HF)(["action/serviceaccounts","getServiceAccount",e.id,t,r],(async()=>{const n=await i.getServiceAccount(e.session,t,s.ServiceAccountUser.translateAttrMaskNames(r)),a=await o.parseServiceAccount(n,r,c);return f=f.withEntries(e.id,{[t]:a},{attrMask:r,timestamp:Date.now()}),a}))},P=()=>({role:i.GroupMembership.Role.Member,state:i.GroupMembership.State.Active}),b=()=>({acl:s.vaultACL.RWE,leaseTimeout:0}),R=async(e,t,n)=>{const s={uuid:t.uuid,...(0,r.Z)(t,["type","attrVersion","state","email"]),name:n};await i.changeUserName(e.session,s),(0,c.e5)(e),e.nc.emit(a.notification.UsersChanged)},E=async(e,t,n)=>{const s={uuid:t.uuid,...(0,r.Z)(t,["type","attrVersion","state","email"]),imageId:n};await i.changeUserAvatar(e.session,s),(0,c.e5)(e),e.nc.emit(a.notification.UsersChanged)},I=async(e,t,n)=>{const r=3600*n*1e9;await i.updateServiceAccount(e.session,t,{expiresIn:r})},U=()=>{f=d.U()},O=e=>{f=f.withoutContext(e.id)}},27150:function(e,t,n){n.d(t,{$S:function(){return T},A8:function(){return M},B8:function(){return w},CA:function(){return O},EJ:function(){return P},Hz:function(){return h},PG:function(){return g},RQ:function(){return y},Tg:function(){return D},Ty:function(){return v},UD:function(){return A},VQ:function(){return f},cQ:function(){return I},dy:function(){return b},kI:function(){return U},pr:function(){return p},r:function(){return r},sD:function(){return k},vn:function(){return S},xH:function(){return m}});var r,i=n(14521),s=n(76515),o=n(79686),a=n(92706),u=n(98798),c=n(66348),l=n(76936),d=n(81959);!function(e){e[e.Invite=1]="Invite",e[e.Recovery=2]="Recovery",e[e.Provision=3]="Provision"}(r||(r={}));const y=async(e,t,n,r)=>i.getSignupDetails(e.session,`${t}?email=${encodeURIComponent(n)}`).then((t=>{const n=t.type===o.Account.Type.Business?t.domain:o.MY_DOMAIN;return r.set("l",t.language),`https://${n}.${e.config.server}/register-account/${t.uuid}?${r}`})),p=async(e,t,n,r)=>i.signUpAndGetInfo(e.session,t,n,r).then((async t=>{const n=t.defaultBillingFrequency||i.billing.Frequency.Yearly,r=t.availablePlans.find((e=>e.frequency===n));if(!r)throw new Error("Could not find default plan");const s={uuid:t.uuid,domain:t.domain,plan:r,tierName:t.tierName,trialEndsAt:(0,u.dateFromGolang)(t.trialEndsAt),taxAdvice:void 0,features:t.features,duplicateAccounts:t.duplicateAccounts||[],accountCreationDisabled:t.accountCreationDisabled,promoCode:t.promoCode,setupIntentCode:t.setupIntentCode};return(0,l.ZQ)(e,r.display.amount,"").then((e=>(s.taxAdvice=e,s))).catch((()=>s))})),m=async(e,t)=>{const n={email:t.email,domain:t.domain,name:t.accountName,type:t.accountType,language:t.language,promoCode:t.promoCode,referrer:t.referrer,source:t.source||d.W.Web,tierName:t.tierName},r=t.accountType===o.Account.Type.Business?await(0,c.ge)(e,t.accountName):o.MY_DOMAIN;n.domain=r,t.accountType===o.Account.Type.Individual&&(n.name=n.email),await i.legacySignUpAccount(e.session,n)},f=async(e,t)=>{const n={email:t.email,domain:"",name:t.accountName||t.userName,type:t.accountType,language:t.language,promoCode:t.promoCode,purchaseOrderToken:t.purchaseOrderToken,stripePurchaseOrderToken:t.stripePurchaseOrderToken,referrer:t.referrer,source:t.source||d.W.Web,tierName:t.tierName,companySize:t.companySize,phoneNumber:t.phoneNumber},r=t.accountType===o.Account.Type.Business?await(0,c.ge)(e,t.accountName):o.MY_DOMAIN;return n.domain!==o.MY_DOMAIN&&(n.domain=r),{domain:r,emailResendToken:(await i.signUpAccount(e.session,n)).emailResendToken||void 0}},g=async(e,t)=>{const n=await i.getSignupDetails(e.session,t);return a.signupFromAPI(n)},h=async(e,t,n)=>i.updateSignup(e.session,t,n),v=async(e,t,n)=>{try{return i.updateSignupAccountType(e.session,t,n)}catch(e){throw console.error("[updateServerSignup] Failed to update signup details:",e),e}},C={},A=async(e,t)=>(await S(e,t),P(e)),w=async(e,t)=>(await T(e,t),b(e,t.challenge,t.encryptedDeviceCredential,t.auth)),S=async(e,t)=>{if(C[e.id]=t.signupUuid,e.account=new o.Account({uuid:"",type:t.accountType,state:o.Account.StateRegistered,name:t.accountName,domain:t.domain,avatar:t.accountAvatar||"",attrVersion:1,createdAt:u.dateToGolang(new Date)}),!t.name)throw new Error("Name is missing");if(!e.account)throw new Error("Unexpected error, missing account.");const n=t.secretKey||await s.SecretKey.generate();e.user=new o.OldUser({email:t.email,password:t.password,language:t.language,name:t.name,newsletterPrefs:t.newsletterPrefs,secretKey:n,avatar:t.avatar}),e.userAuth=await o.Auth.generate({email:t.email,password:t.password,secretKey:n}),e.user.masterKey=await s.Auk.deriveDefaultKdf({email:t.email,password:t.password,secretKey:n}),await e.user.generateNewKeyset()},T=async(e,t)=>{if(C[e.id]=t.signupUuid,e.account=new o.Account({uuid:"",type:t.accountType,state:o.Account.StateRegistered,name:t.accountName,domain:t.domain,avatar:t.accountAvatar||"",attrVersion:1,createdAt:u.dateToGolang(new Date)}),!t.name)throw new Error("Name is missing");if(!e.account)throw new Error("Unexpected error, missing account.");let n;n=t.accountKeyUuid?await s.SecretKey.forTrustedDevice(t.accountKeyUuid):await s.SecretKey.generateForTrustedDevice(),e.user=new o.OldUser({email:t.email,language:t.language,name:t.name,newsletterPrefs:t.newsletterPrefs,avatar:t.avatar,secretKey:n}),e.user.masterKey=t.auk,await e.user.generateNewKeyset()},P=async e=>{if(!u.config.device)throw new Error("Missing device identifier");const t=u.config.device,n=e.user;if(!n)throw new Error("Missing user.");if(!n.secretKey)throw new Error("Missing Secret Key.");const r=await n.encryptActiveKeysetWithMasterKey(),s=e.userAuth;if(!s)throw new Error("Missing auth for user.");const a=e.account;if(!a)throw new Error("Missing account.");const c=C[e.id];if(!c)throw new Error("Missing signup identifier.");const l={signupUuid:c,user:{email:n.email,language:n.language,name:n.name,newsletterPrefs:n.newsletterPrefs,accountKeyFormat:n.secretKey.format.toString(),accountKeyUuid:n.secretKey.id,avatar:n.avatar},account:{name:a.name,domain:a.domain,type:a.type,avatar:a.avatar},device:t,keyset:r,userAuth:o.Auth.getForUpload(s)};if(!l.user.name)throw new Error("Name is missing");return i.postAccount(e.session,l)},b=async(e,t,n,r)=>{if(!u.config.device)throw new Error("Missing device identifier");const s=u.config.device,o=e.user;if(!o)throw new Error("Missing user.");if(!o.name)throw new Error("Name is missing");if(!o.secretKey)throw new Error("Missing Secret Key.");const a=await o.encryptActiveKeysetWithMasterKey();if(!e.account)throw new Error("Missing account.");const c=C[e.id];if(!c)throw new Error("Missing signup identifier.");const l={signupUuid:c,user:{email:o.email,language:o.language,name:o.name,newsletterPrefs:o.newsletterPrefs,accountKeyFormat:o.secretKey.format.toString(),accountKeyUuid:o.secretKey.id,avatar:o.avatar,challenge:t,deviceCredential:{v:2,encCredentials:n}},account:{name:e.account.name,domain:e.account.domain,type:e.account.type,avatar:e.account.avatar},device:s,keyset:a,userAuth:r};return i.postAccount(e.session,l)},R={},E=async e=>{const t=new o.OldUser({language:e.language,avatar:e.avatar,newsletterPrefs:e.newsletterPrefs,secretKey:await s.SecretKey.generateForTrustedDevice()});return t.masterKey=e.credentialBundle.auk,await t.generateNewKeyset(),{user:t,userAuth:o.Auth.createFromPreComputedX(e.credentialBundle.srpx.exportBytes())}},I=async(e,t,n,r)=>{const{user:s,userAuth:a}=await E(t);if(e.user=s,e.userAuth=a,!s.secretKey)throw new Error("User does not have a Secret Key");const[u,c]=await Promise.all([s.encryptActiveKeysetWithMasterKey(),r.encryptCredentialBundle(t.credentialBundle)]),l={invite:{uuid:t.uuid,token:t.token},user:{identity:t.identity,accountKeyFormat:s.secretKey.format.toString(),accountKeyUuid:s.secretKey.id,email:"",name:"",language:s.language,newsletterPrefs:s.newsletterPrefs,avatar:s.avatar},device:n,keyset:u,userAuth:o.Auth.getForUpload(a),deviceCredentials:{v:2,encCredentials:c}},d=await i.signUpUser(e.session,l);if(!d.sessionUuid)throw new Error("signUpUser did not return sessionUuid");return e.session.setSessionUuid(d.sessionUuid),d},U=async(e,t,n,r)=>{const{user:s,userAuth:a}=await E(t);if(e.user=s,e.userAuth=a,!s.secretKey)throw new Error("User does not have a Secret Key");const[u,c]=await Promise.all([s.encryptActiveKeysetWithMasterKey(),r.encryptCredentialBundle(t.credentialBundle)]),l={token:t.token,uuid:t.uuid,accountKeyFormat:s.secretKey.format.toString(),accountKeyUuid:s.secretKey.id,language:s.language,userAuth:o.Auth.getForUpload(a),identity:t.identity,deviceCredentials:{v:2,encCredentials:c},device:n,keyset:u};return i.continueRecovery(e.session,l)},O=async(e,t,n,r)=>{const{user:s,userAuth:a}=await E(t);if(e.user=s,e.userAuth=a,!s.secretKey)throw new Error("User does not have a Secret Key");const[u,c]=await Promise.all([s.encryptActiveKeysetWithMasterKey(),r.encryptCredentialBundle(t.credentialBundle)]),l={token:t.token,uuid:t.uuid,accountKeyFormat:s.secretKey.format.toString(),accountKeyUuid:s.secretKey.id,language:s.language,userAuth:o.Auth.getForUpload(a),identity:t.identity,deviceCredentials:{v:2,encCredentials:c},device:n,keyset:u};return i.acceptProvision(e.session,l)},k=async(e,t)=>{R[e.id]=t;const n=t.secretKey||await s.SecretKey.generate();e.user=new o.OldUser({email:t.email,password:t.password,language:t.language,name:t.name,secretKey:n,avatar:t.avatar,newsletterPrefs:t.newsletterPrefs,meta:t.meta}),e.userAuth=await o.Auth.generate({email:t.email,password:t.password,secretKey:n}),e.user.masterKey=await s.Auk.deriveDefaultKdf({email:t.email,password:t.password,secretKey:n}),await e.user.generateNewKeyset()},D=async e=>{if(!u.config.device)throw new Error("Missing device identifier");const t=e.user;if(!t)throw new Error("Missing user.");if(!t.secretKey)throw new Error("Missing Secret Key.");const n=await t.encryptActiveKeysetWithMasterKey(),s=e.userAuth;if(!s)throw new Error("Missing auth for user.");const a=R[e.id];if(!a)throw new Error("Missing signup.");switch(a.source){case r.Invite:{const r={invite:{uuid:a.uuid,token:a.token},user:{email:t.email,language:t.language,name:t.name,newsletterPrefs:t.newsletterPrefs,accountKeyFormat:t.secretKey.format.toString(),accountKeyUuid:t.secretKey.id,avatar:t.avatar,meta:t.meta},device:u.config.device,keyset:n,userAuth:o.Auth.getForUpload(s)};return i.signUpUser(e.session,r)}case r.Recovery:{if(void 0===a.emailVerification)throw new Error("Missing email verification success token");const r={accountKeyFormat:t.secretKey.format.toString(),accountKeyUuid:t.secretKey.id,device:u.config.device,keyset:n,language:t.language,token:a.token,emailVerificationSuccessToken:a.emailVerification,userAuth:o.Auth.getForUpload(s),uuid:a.uuid};return i.continueRecovery(e.session,r)}case r.Provision:{const r={accountKeyFormat:t.secretKey.format.toString(),accountKeyUuid:t.secretKey.id,device:u.config.device,keyset:n,language:t.language,token:a.token,userAuth:o.Auth.getForUpload(s),uuid:a.uuid,userMfa:a.userMfa,emailVerification:a.emailVerification};return i.acceptProvision(e.session,r)}default:throw new Error("Invalid signup source")}},M=async(e,t)=>i.resendVerificationEmail(e.session,t)},81959:function(e,t,n){var r;n.d(t,{W:function(){return r}}),function(e){e.Web="B",e.iOS="I",e.Android="A",e.Windows="W",e.Mac="M",e.CLI="C",e.API="P",e.ThirdParty="T",e.MobileWeb="O"}(r||(r={}))},85972:function(e,t,n){n.d(t,{A9:function(){return h},Od:function(){return p},Sc:function(){return a},Sw:function(){return m},Vz:function(){return f},_5:function(){return l},as:function(){return u},oH:function(){return d},ts:function(){return g},wU:function(){return c},xb:function(){return y}});var r=n(79593),i=n(14521),s=n(98798);const o=(0,n(38002).P)("action/slack"),a=async e=>{try{return{type:"slack-app",slackApp:await i.getSlackApp(e.session)}}catch(e){return s.errors.isNewServerError(e)?{type:"server-error",error:e}:{type:"error",error:e}}},u=async(e,t)=>{const n=[];let r="";do{try{const t=await i.getSlackChannels(e.session,r);n.push(...t.channels),r=t.cursor??""}catch(e){return o("getSlackChannels",e)}}while(""!==r&&(!t||n.length<t));return n},c=async(e,t)=>{try{return(await i.getGridSlackGroups(e.session,t)).userGroups}catch(e){return o("getSlackGroups",e)}},l=async(e,t,n)=>{const r=[];let s="";do{try{const n=await i.getGridSlackChannels(e.session,t,s);r.push(...n.channels),s=n.cursor??""}catch(e){return o("getGridSlackChannels",e)}}while(""!==s&&(!n||r.length<n));return r},d=async(e,t)=>{try{return{type:"slack_users_response",slackUsers:await i.getGridSlackUsers(e.session,t)}}catch(e){return s.errors.isServerError(e,s.errors.ServerErrorReason.slackUserLimitReached)?{type:"slack_users_response_large_team_error"}:{type:"slack_users_response_other_error"}}},y=async e=>{try{return(await i.getGridSlackTeams(e.session)).teams}catch(e){return o("getGridSlackTeams",e)}},p=async e=>{try{return(await i.getSlackGroups(e.session)).userGroups}catch(e){return o("getSlackGroups",e)}},m=async(e,t)=>{const n=(0,r.Z)(t);return i.updateSlackApp(e.session,n).catch(o("updateSlackApp"))},f=async e=>{try{return{type:"slack_users_response",slackUsers:await i.getSlackUsers(e.session)}}catch(e){return s.errors.isServerError(e,s.errors.ServerErrorReason.slackUserLimitReached)?{type:"slack_users_response_large_team_error"}:{type:"slack_users_response_other_error"}}},g=async e=>{try{const{nonce:t}=await i.postSlackNonce(e.session);return t}catch(e){return console.error("Failed to get nonce:",e),s.errors.isNewServerError(e)?{type:"server-error",error:e}:{type:"error",error:e}}},h=async(e,t)=>{await i.postSlackAccessToken(e.session,t)}},31385:function(e,t,n){n.d(t,{$f:function(){return P},D1:function(){return I},DQ:function(){return A},FB:function(){return D},GL:function(){return R},GQ:function(){return f},IF:function(){return v},Ie:function(){return U},MA:function(){return M},Qn:function(){return S},Tq:function(){return h},XI:function(){return O},Y2:function(){return g},ZE:function(){return w},d2:function(){return b},eH:function(){return C},jD:function(){return T},qy:function(){return F},uP:function(){return k},v3:function(){return E}});var r=n(69243),i=n(48583),s=n(14521),o=n(98798),a=n(23428);const u="action/text";let c,l,d,y,p;const m={},f=async e=>(0,a.$y)(u)("checkPwnedPasswords",(async()=>g(e,s.getPwnedHashList))),g=async(e,t)=>{const n=await o.crypto.unsafeHashStringSha1UpperHex(e),r=m[n];if(void 0!==r)return r;{const e=n.slice(0,5),r=await t(e),s=(0,i.Z)(r,n);return m[n]=s,s}},h=()=>d||{},v=()=>y||{},C=()=>p||{},A=async e=>{c||(c=await s.getPassphraseWordList(e.config.txtBase),o.setPassphraseWordList(c))},w=()=>{c=void 0,o.setPassphraseWordList(void 0)},S=async e=>(l||(l=await s.getCommonPasswordsList(e.config.txtBase),o.setCommonPasswordsList(l)),l),T=async()=>{await R(),await U(),await D()},P=()=>{I(),k(),F()},b=()=>{l=void 0,o.setCommonPasswordsList(void 0)},R=async()=>{d||(d=await s.getWatchtowerData())},E=e=>{try{const t=o.decode(JSON.parse(e),r.record(r.string,r.number)).unwrap();d=t}catch(e){throw console.error("Unable to import Watchtower data, provided JSON has invalid format.",e),new Error("Provided JSON has invalid format.")}},I=()=>{d=void 0},U=async()=>(0,a.$y)(u)("loadTwoFactorSitesList",(async()=>{if(!y)return s.getTwoFactorSitesList().then((e=>{y=e}))})),O=e=>{try{const t=o.decode(JSON.parse(e),r.record(r.string,r.string)).unwrap();y=t}catch(e){throw console.error("Unable to import two-factor sites, provided JSON has invalid format.",e),new Error("Provided JSON has invalid format.")}},k=()=>{y=void 0},D=async()=>(0,a.$y)(u)("loadPasskeySitesList",(async()=>{if(!p)return s.getPasskeySitesList().then((e=>{p=e}))})),M=e=>{try{const t=o.decode(JSON.parse(e),r.record(r.string,r.string)).unwrap();p=t}catch(e){throw console.error("Unable to import passkey sites, provided JSON has invalid format.",e),new Error("Provided JSON has invalid format.")}},F=()=>{p=void 0}},97668:function(e,t,n){n.d(t,{Ay:function(){return D},DF:function(){return ee},Dz:function(){return re},E7:function(){return R},Eg:function(){return F},I_:function(){return z},NP:function(){return te},Nq:function(){return b},Od:function(){return W},PE:function(){return Y},Pz:function(){return U},UL:function(){return I},Ve:function(){return E},Vt:function(){return $},Zo:function(){return ne},bU:function(){return Z},c0:function(){return Q},f1:function(){return x},j_:function(){return q},jt:function(){return J},mz:function(){return H},nS:function(){return j},nl:function(){return O},wE:function(){return X},yC:function(){return G},z6:function(){return K}});var r=n(52384),i=n(29955),s=n(1166),o=n(17673),a=n(14521),u=n(76515),c=n(79686),l=n(92706),d=n(98798),y=n(23428),p=n(66348),m=n(44715),f=n(51896),g=n(49308),h=n(20622),v=n(69490),C=n(20806),A=n(80464);const w="action/user",S=(0,y.$y)(w),T=15;let P=C.U();const b=async(e,t)=>S("updateUser",(async()=>{const n=t||e.user;return n?a.updateUser(e.session,l.personToAPI(n)):Promise.reject(new Error("Missing user"))})),R=(e,t)=>P.getEntry(e.id,t),E=(e,t)=>{P=P.withOnlyEntries(e.id,(0,r.Z)(t,"uuid"))},I=()=>{P=C.U()},U=e=>{P=P.withoutContext(e.id)},O=(e,t)=>{P=P.withEntries(e.id,{[t.uuid]:t})},k={attrs:c.Person.Attr.None,mustReload:!1},D=async(e,t,n)=>S("getPerson",(async()=>{const r=d.getValidUserUuid(t);if(!r)throw new Error("Invalid user reference");const{attrs:i,mustReload:s}={...k,...n},o=s?void 0:P.getEntry(e.id,r,{attrMask:i});return o&&o.hasAttrMask(i)?o:(0,y.HF)([w,"getPerson",e.id,r,i],(async()=>a.getUser(e.session,r,i).then((async t=>{const n=Date.now();return Promise.all([l.parsePerson(e,t,i,o),n])})).then((([t,n])=>(P=P.withEntries(e.id,{[r]:t},{attrMask:i,timestamp:n}),t)))))})),M=async(e,t)=>{const n=await(0,v.F3)(e,t);return(0,v.BY)(t,n)},F=async(e,t,n)=>S("confirmUsers",(async()=>{if(!(0,i.Z)(t)){if(!e.account||!e.account.hasFeature.members)throw new Error("Cannot confirm members for this account");e.account.teamMembersGroup?await _(e,t,n):await L(e,t),(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)}})),_=async(e,t,n)=>S("confirmWithTeamMembersGroup",(async()=>{const r=await(0,f.w9)(e);await d.batchChain((async t=>{const i=await M(e,t),s=i.filter((e=>e.type===c.User.Type.Regular)),o=await N(e,s,r);return n?await B(e,i,o,n):await V(e,i,o),[]}),25,t)})),K=async(e,t)=>{if(!e.account)throw new Error("Failed to get account.");const n=(0,p.$2)(e.account.type,t.avatar),r=(0,f.Aj)(e,{attrs:c.Group.Attr.PubKey}),i=(0,f.w9)(e,{attrs:c.Group.Attr.PubKey}),s=n.generateNewKey(),[o,u]=await Promise.all([r,i,s]),l=(0,g.eX)(e,t,u,{role:a.GroupMembership.Role.Member}),d=c.VaultAccess.generate(n,t,{acl:c.vaultACL.RWE|c.vaultACL.Manage}),y=c.VaultAccess.generate(n,o,{acl:c.vaultACL.Recover}),[m,h,v]=await Promise.all([l,d,y]),C=await(0,A.HM)(e,n,[h,v]);return a.upgradeGuestToMember(e.session,t.uuid,C,m)},N=async(e,t,n)=>S("addMembersToGroup",(async()=>{if(!n.activeKeysetUuid)throw new Error("Missing group's active keyset UUID.");const r=(0,h.Jt)(e,n.activeKeysetUuid);if(!r)throw new Error("Could not find group's active keyset.");return Promise.all(t.map((async e=>n.createMembership(r,e,{role:a.GroupMembership.Role.Member}))))})),V=async(e,t,n)=>S("confirmWithGroupMemberships",(async()=>{const r=(0,s.Z)(t.map(d.getValidUserUuid));return a.confirmUsersWithMemberships(e.session,r,n)})),B=async(e,t,n,r)=>S("confirmWithGroupMembershipsAndVaults",(async()=>{const i=(0,s.Z)(t.map((e=>d.getValidUserUuid(e.uuid)))),o=d.mapObject((e=>e.uuid),(e=>e),t),u=[];for(const t of r){const n=await(0,A.R1)(e,t.vaultUuid,{attrs:c.Vault.Attr.All});if(!n)throw new Error(`Missing vault for ${t.vaultUuid}`);const r=o[t.accessorUuid];r?.type===c.User.Type.Regular&&u.push(await c.VaultAccess.generate(n,{...r,accessorType:t.accessorType},{acl:t.acl}))}return a.confirmUsersWithMembershipsAndVaultAccessList(e.session,i,n,u)})),L=async(e,t)=>S("confirmWithEveryoneVault",(async()=>{const n=await(0,A.Fv)(e,{attrs:c.Vault.Attr.All});if(!n)throw new Error("Missing Everyone vault");const r=await M(e,t),i=r.filter((e=>e.type===c.User.Type.Regular)).map((async e=>c.VaultAccess.generate(n,{...e,accessorType:"user"},{acl:c.vaultACL.RWE}))),o=(await Promise.all(i)).map(l.vaultAccessToAPI),u=(0,s.Z)(r.map(d.getValidUserUuid));return a.confirmUsersWithVaultAccessList(e.session,u,o)})),x=async(e,t)=>S("suspendUsers",(async()=>{await d.batchChain((async t=>(await a.suspendUsers(e.session,t),[])),T,t.map(d.getValidUserUuid)),(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})),G=async(e,t)=>S("markAwayForTravel",(async()=>a.markAwayForTravel(e.session,t.map(d.getValidUserUuid)).then((()=>{(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})))),Z=async(e,t)=>S("markBackFromTravel",(async()=>a.markBackFromTravel(e.session,t.map(d.getValidUserUuid)).then((()=>{(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})))),j=async(e,t)=>S("beginUserRecovery",(async()=>{await d.batchChain((async t=>(await a.beginRecovery(e.session,t),[])),T,t.map(d.getValidUserUuid)),(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})),Y=async(e,t)=>S("cancelUserRecovery",(async()=>{await d.batchChain((async t=>(await a.cancelRecovery(e.session,t),[])),T,t.map(d.getValidUserUuid)),(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})),H=async(e,t)=>S("completeUserRecovery",(async()=>{const n=await(0,v.F3)(e,t),r=n.map((e=>e.uuid));await d.batchChain((async t=>{const i=await a.getRecoverableKeysForPeople(e.session,r),s=await l.recoverableKeysForPeopleFromAPI(e,i),o=await s.encryptForPeople(n);return await a.completeRecovery(e.session,t,o),[]}),T,r),(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})),W=async(e,t)=>S("reactivateUsers",(async()=>{await d.batchChain((async t=>(await a.reactivateUsers(e.session,t),[])),T,t.map(d.getValidUserUuid)),(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})),$=async(e,t)=>S("deleteUsers",(async()=>{const n=t.filter((e=>e.state===c.User.State.RecoveryStarted)),r=t.filter((e=>!c.User.canBeDeleted(e)));let i=Promise.resolve();return n.length>0&&(i=i.then((async()=>Y(e,n)))),r.length>0&&(i=i.then((async()=>x(e,r)))),i.then((async()=>d.batchChain((async t=>(await a.deleteUsers(e.session,t),[])),T,t.map((e=>e.uuid))))).then((()=>{(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)}))})),J=async(e,t,n)=>S("deletePerson",(async()=>{let r=Promise.resolve();return t.state===c.User.State.RecoveryStarted&&(r=r.then((async()=>Y(e,[t])))),c.User.canBeDeleted(t)||(r=r.then((async()=>x(e,[t])))),r.then((async()=>await a.deletePerson(e.session,t.uuid,n))).then((()=>{(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)}))})),q=async(e,t,n)=>{const r={...l.personToAPI(t),imageId:n};return a.changeUserAvatar(e.session,r)},z=async(e,t,n)=>S("changeUserName",(async()=>{const r=(0,o.Z)(l.personToAPI(t),{name:n});return a.changeUserName(e.session,r)})).then((()=>{(0,m.e5)(e),e.nc.emit(d.notification.UsersChanged)})),X=async(e,t,n)=>S("getRecoveryDetails",(async()=>a.findRecoveryDetails(e.session,t,{token:n}))),Q=async(e,t,n)=>a.recoveryVerifyEmailStart(e.session,t,{token:n}),ee=async(e,t,n)=>a.recoveryVerifyEmailResend(e.session,t,{token:n});var te;!function(e){e.INCORRECT_CODE="INCORRECT_CODE",e.ATTEMPT_LIMIT_REACHED="ATTEMPT_LIMIT_REACHED",e.CODE_EXPIRED="CODE_EXPIRED"}(te||(te={}));const ne=async(e,t,n,r)=>a.recoveryVerifyEmailAuth(e.session,t,{token:n,emailVerificationChallenge:r}).catch((e=>{if(!d.errors.isNewServerError(e))throw e;switch(e.reason){case d.errors.ServerErrorReason.maximumAttemptsReached:return te.ATTEMPT_LIMIT_REACHED;case d.errors.ServerErrorReason.incorrectValue:return te.INCORRECT_CODE;case d.errors.ServerErrorReason.expired:return te.CODE_EXPIRED;default:throw e}})),re=async(e,t,n,r)=>{const i={email:t,secretKey:await u.SecretKey.generate(),password:d.generateUUID()},s=new c.OldUser({...i,uuid:r,name:n,language:e.user?.language||"en",newsletterPrefs:0}),o=await c.Auth.generate(i);return s.masterKey=await u.Auk.deriveDefaultKdf(i),await s.generateNewKeyset(),{user:s,userAuth:o}}},80464:function(e,t,n){n.d(t,{AM:function(){return N},Ei:function(){return I},Eu:function(){return _},FA:function(){return a.FA},Fc:function(){return ie},Fv:function(){return U},HM:function(){return H},HN:function(){return K},Id:function(){return G},LU:function(){return se},Lf:function(){return X},Oh:function(){return Z},Ox:function(){return $},R1:function(){return b},Tt:function(){return k},Uh:function(){return re},Vb:function(){return oe},XG:function(){return O},_w:function(){return P},aV:function(){return z},hg:function(){return te},j:function(){return F},mm:function(){return D},mz:function(){return T},pT:function(){return ee},ro:function(){return M},rt:function(){return ae},sh:function(){return q},tJ:function(){return x},u5:function(){return o.u5},ud:function(){return S},uf:function(){return a.uf},uq:function(){return ne},yX:function(){return L},zr:function(){return Q}});var r=n(52913),i=n(52384),s=n(14521),o=n(78359),a=n(85486),u=n(79686),c=n(92706),l=n(98798),d=n(23428),y=n(95743),p=n(44715),m=n(51896),f=n(20806);const g="action/vault",h=(0,d.$y)(g),v={attrs:u.Vault.Attr.None,mustReload:!1},C={mustReload:!1,withAccessorPreviews:!1};let A=f.U(),w=f.U();const S=async(e,t)=>{const{hasClientAccess:n,permissions:i,types:o}=t,a=i&&u.BitSet.includes(i,u.vaultACL.ReadItem),l=(0,r.Z)({...v,...t,permission:a?"read":void 0},"user","withAccessorPreviews","group","permission","limit");return(await(0,d.HF)([g,"getVaultsV2",e.id,JSON.stringify(l)],(async()=>{const t=await s.getVaults(e.session,l);return await c.parseVaults(e,t)}),t.cacheAllowanceMs)).filter((t=>(!n||t.hasClientAccess(u.VaultClientAccess.Web))&&(!o||o.includes(t.type))&&(!i||u.Vault.activeUserHasAcl(t,i))&&!(0,y.KN)(t.name,e.account?.features["hide-lastpass-importer-metadata-vault"])))},T=async(e,t,n,r)=>(0,d.HF)([g,"getVaultsV2",e.id,JSON.stringify({...r,date:t,direction:n})],(async()=>{const{vaults:i,hasMoreData:o}=await s.getVaultsByCreation(e.session,t,n,r||{});return{hasMoreData:o,vaults:await c.parseVaults(e,i)}})),P=async(e,t)=>h("getVaults",(async()=>{const n={...C,...t},{mustReload:r,withAccessorPreviews:o}=n;if(!r){const t=o?w.getAllEntries(e.id):A.getAllEntries(e.id)||w.getAllEntries(e.id);if(t)return t}return(0,d.HF)([g,"getVaults",e.id],(async()=>s.getVaults(e.session,{withAccessorPreviews:o}).then((async t=>Promise.all([c.parseVaults(e,t),Date.now()]))).then((([t,n])=>{const r=(0,i.Z)(t,"uuid");return o?w=w.withOnlyEntries(e.id,r,{timestamp:n}):A=A.withOnlyEntries(e.id,r,{timestamp:n}),t}))))})),b=async(e,t,n)=>h("getVault",(async()=>{const r=l.getValidVaultUuid(t);if(!r)throw new Error("Invalid vault reference");const{attrs:i,mustReload:o}={...v,...n},a=o?void 0:A.getEntry(e.id,r,{attrMask:i});return a&&a.hasAttrMask(i)?a:(0,d.HF)([g,"getVault",e.id,r],(async()=>s.getVault(e.session,r,i).then((async t=>Promise.all([c.parseVault(e,t,i,a),Date.now()]))).then((([t,n])=>(A=A.withEntries(e.id,{[r]:t},{attrMask:i,timestamp:n}),t)))))})),R=new Map([[u.Vault.TypePersonal,s.getPersonalVault],[u.Vault.TypeEveryone,s.getEveryoneVault],[u.Vault.TypeSystem,s.getSystemVault],[u.Vault.TypeManagedApplications,s.getManagedVault],[u.Vault.TypeGeneratedPasswords,s.getGeneratedPasswordsVault]]);let E=f.U();const I=async(e,t,n)=>{const r=R.get(t);if(!r)throw new Error("Unsupported vault type.");if(!n||!n.mustReload){const n=E.getEntry(e.id,t);if(n)return n}const i=await r(e.session);if(!i)return;const s=await c.parseVault(e,i);return E=E.withEntries(e.id,{[t]:s}),s},U=async(e,t)=>I(e,u.Vault.TypeEveryone,t),O=async(e,t)=>I(e,u.Vault.TypePersonal,t),k=async e=>(0,d.HF)([g,"getVaultsForAccountTransfer",e.id],(async()=>{const t=await s.getVaultsForAccountTransfer(e.session);return c.parseVaults(e,t)})),D=e=>E.getEntry(e.id,u.Vault.TypePersonal),M=async e=>I(e,u.Vault.TypeSystem),F=async e=>h("createSystemVault",(async()=>{if(!e.user)throw new Error("Missing user");const{mandatoryGroupUuids:t}=await L(e,u.Vault.TypeSystem),n=new u.Vault({desc:u.Vault.DefaultDescMarker,name:"System",type:u.Vault.TypeSystem});await n.generateNewKey();const r=await V(e,n,t),{uuid:i}=await $(e,n,r),s=await b(e,i,{attrs:u.Vault.Attr.All,mustReload:!0});return E=E.withEntries(e.id,{[u.Vault.TypeSystem]:s}),s})),_=async e=>h("createManagedVault",(async()=>{if(!e.user)throw new Error("Missing user");const{mandatoryGroupUuids:t}=await L(e,u.Vault.TypeManagedApplications),n=new u.Vault({desc:u.Vault.DefaultDescMarker,name:"Managed",type:u.Vault.TypeManagedApplications});await n.generateNewKey();const r=await B(e,n,t),i=await $(e,n,r);return E=E.withEntries(e.id,{[u.Vault.TypeManagedApplications]:i}),i})),K=async e=>I(e,u.Vault.TypeGeneratedPasswords),N=async e=>h("createGeneratedPasswordsVault",(async()=>{if(!e.user)throw new Error("Missing user");const{mandatoryGroupUuids:t}=await L(e,u.Vault.TypeGeneratedPasswords),n=new u.Vault({desc:u.Vault.DefaultDescMarker,name:"Generated Passwords",type:u.Vault.TypeGeneratedPasswords});await n.generateNewKey();const r=await V(e,n,t),i=await $(e,n,r);return E=E.withEntries(e.id,{[u.Vault.TypeGeneratedPasswords]:i}),i})),V=async(e,t,n)=>{if(!e.user)throw new Error("Missing user");return Promise.all([u.VaultAccess.generate(t,e.user,{acl:u.vaultACL.DEFAULT_VAULT_CREATION_ACL}),...n.map(Y(e,t))])},B=async(e,t,n)=>{if(!e.user)throw new Error("Missing user");return Promise.all([u.VaultAccess.generate(t,e.user,{acl:u.vaultACL.MANAGED_VAULT_ACL}),...n.map(Y(e,t))])},L=async(e,t)=>h("getCreateVaultPreflight",(async()=>s.getCreateVaultPreflight(e.session,t))),x=async e=>s.createAccountTransferVaultPreflight(e.session),G=async(e,t,n)=>{const r=new u.Vault(t);if(await r.generateNewKey(),!e.user)throw new Error("Missing user");const i=e.user.type!==u.User.Type.ExternalAccountManagement,s=await Promise.all([...i?[u.VaultAccess.generate(r,e.user,{acl:u.vaultACL.ALL})]:[],...n.map(Y(e,r))]);return $(e,r,s)},Z=async(e,t,n)=>{const r={...t,type:u.Vault.TypeUserCreated},i=new u.Vault(r);if(await i.generateNewKey(),!e.user)throw new Error("Missing user");const s=await Promise.all([u.VaultAccess.generate(i,e.user,{acl:u.vaultACL.ALL}),...n.map(Y(e,i))]);return J(e,i,s)},j={[u.Group.TypeRecovery]:u.vaultACL.Recover,[u.Group.TypeOwners]:u.vaultACL.Manage,[u.Group.TypeAdmins]:u.vaultACL.Manage,[u.Group.TypeExternalAccountManagers]:u.vaultACL.Manage},Y=(e,t)=>async n=>{const r=await(0,m.ex)(e,n,{attrs:u.Group.Attr.PubKey}),i=j[r.type];if("number"!=typeof i||0===i)throw new Error("System group ACL is not defined for this group");return u.VaultAccess.generate(t,r,{acl:i})},H=async(e,t,n)=>{if(await t.encryptAttrs(),!e.user)throw new Error("Missing user");if(!e.user.activeKeyset)throw new Error("Missing user");if(!t.activeKey)throw new Error("Missing active key");return await t.activeKey.encryptWithKey(e.user.activeKeyset.ekeyPair),c.vaultToAPI(t,n)},W=(e,t)=>{void 0===e.getCombinedAcl()&&e.setCombinedAcl(t.reduce(((e,t)=>e|t.acl),0))},$=async(e,t,n)=>{const r=await H(e,t,n);return await s.createVault(e.session,r),W(t,n),t},J=async(e,t,n)=>{const r=await H(e,t,n);return await s.createVaultForAccountTransfer(e.session,r),W(t,n),t},q=async(e,t)=>s.deleteVaultPreflight(e.session,t.uuid),z=async(e,t)=>{await s.deleteVault(e.session,t.uuid),A=A.withoutEntries(e.id,[t.uuid])},X=async(e,t)=>h("updateVault",(async()=>t.encryptAttrs().then((async t=>s.updateVault(e.session,c.vaultToAPI(t)))))),Q=async(e,t,n)=>{await s.updateVaultClientAccess(e.session,t,n)},ee=async(e,t)=>{await s.enableTravelSafe(e.session,t.uuid),(0,p.e5)(e)},te=async(e,t)=>{await s.disableTravelSafe(e.session,t.uuid),(0,p.e5)(e)},ne=async(e,t)=>{await s.enableServiceAccountAccess(e.session,t.uuid),(0,p.e5)(e)},re=async(e,t)=>{await s.disableServiceAccountAccess(e.session,t.uuid),(0,p.e5)(e)},ie=()=>{A=f.U()},se=e=>{A=A.withoutContext(e.id)},oe=()=>{w=f.U()},ae=e=>{w=w.withoutContext(e.id)}},24683:function(e,t,n){n.d(t,{Er:function(){return D},J4:function(){return E},L:function(){return C},Me:function(){return w},Ng:function(){return v},WC:function(){return k},Xt:function(){return T},b1:function(){return h},cT:function(){return R},e1:function(){return K},fb:function(){return F},hn:function(){return b},iG:function(){return P},u7:function(){return I},ys:function(){return _},zQ:function(){return M}});var r=n(55130),i=n(19559),s=n(5774),o=n(60604),a=n(14521),u=n(79686),c=n(92706),l=n(98798),d=n(38002),y=n(23428),p=n(80464);const m="action/vault_item",f=(0,d.P)(m),g=(0,y.$y)(m),h=async(e,t,n,r)=>{const i=(await a.getVaultItemDetails(e.session,t.uuid,n)).item;return c.vaultItemFromAPI(i,r||t)},v=async(e,t)=>Promise.resolve().then((async()=>{if(!t)throw new Error("Missing vault");const n=t.uuid;return a.getVaultItemsOverviews(e.session,n).then((async e=>c.vaultItemsFromAPI(e.items||[],t)))})).catch(f("getVaultItemsOverviews")),C=async(e,t)=>g("getVaultItems",(async()=>A(e,t,0,[]).then((async e=>c.vaultItemsFromAPI(e,t))))),A=async(e,t,n,r)=>g("getVaultItemsBatch",(async()=>a.getVaultItems(e.session,t.uuid,n).then((async n=>{const i=n.items?r.concat(n.items):r;return n.batchComplete?Promise.resolve(i):A(e,t,n.contentVersion,i)})))),w=async(e,t,n)=>{try{const r=await a.getFile(e.session,n,t.uuid,t.vault.uuid);return c.decryptDocument(n,r)}catch(r){if(l.errors.isClientError(r,l.errors.ClientErrorCode.missingFileId))return S(e,t.uuid,t.vault.uuid,n);throw new Error(`Failed to retrieve document: ${r}`)}},S=async(e,t,n,r)=>{const i=await a.getFileIdsFromItemUuid(e.session,t,n);for(const s of i)try{const i={...r,..."fileId"in r?{fileId:s}:{documentId:s}},o=await a.getFileV2(e.session,i,t,n);return"fileId"in r?c.decryptFile(r,o):c.decryptDocument(r,o)}catch(e){console.error(`Decryption failed for file ${s}: ${e}. Moving to next file `);continue}throw new Error(`Unable to decrypt any files linked to item ${t}`)},T=async(e,t,n)=>{const r=await w(e,t,n);return new Blob([r],{type:"application/octet-stream"})},P=async(e,t,n)=>{const{data:r,attributes:i}=await c.encryptDocument(t,n),{fileId:s,signingKey:o}=await a.uploadFile(e.session,r);if(s)return{...i,documentId:s,signingKey:o};throw new Error("Session did not provide file ID.")},b=async(e,t,n)=>{try{const r=await a.getFile(e.session,n,t.uuid,t.vault.uuid);return c.decryptFile(n,r)}catch(r){if(l.errors.isClientError(r,l.errors.ClientErrorCode.missingFileId))return S(e,t.uuid,t.vault.uuid,n);throw new Error(`Failed to retrieve file: ${r}`)}},R=async(e,t)=>{const{data:n,attributes:r}=await c.encryptFile(t),{fileId:i,signingKey:s}=await a.uploadFile(e.session,n);if(i)return{...r,fileId:i,signingKey:s};throw new Error("Session did not provide file ID.")},E=async(e,t)=>{if(!t.overview.icons||!t.overview.icons.detail)throw new Error("Missing icon");const n=await b(e,t,t.overview.icons.detail);return l.blobToBase64DataURI(new Blob([n]))},I=async(e,t,n)=>{const o=await(0,p.R1)(e,n.uuid),a=(0,r.Z)(t,100),u={contentVersion:0,updatedItems:{},failedItems:{}};for(const t of a){const n=await U(e,t,o);for(const e of t)n.failedItems&&n.failedItems[e.uuid]||e.itemVersion++;o.contentVersion=n.contentVersion,u.contentVersion=n.contentVersion,u.updatedItems=(0,i.Z)(u.updatedItems,n.updatedItems),u.failedItems=(0,i.Z)(u.failedItems,n.failedItems)}if(0===(0,s.Z)(u.updatedItems)&&(0,s.Z)(u.failedItems)>0)throw new Error("Failed to patch vault items.");return u},U=async(e,t,n)=>{const r=await O(e,t),i=await Promise.all(r.map(c.vaultItemToApi)),o=await a.patchVaultItems(e.session,n.uuid,n.contentVersion,i),u=(0,s.Z)(o.updatedItems),d=(0,s.Z)(o.failedItems);if(0===u&&1===d){const e=Object.keys(o.failedItems)[0];if(void 0!==e&&o.failedItems[e]===l.errors.ItemStatusCode.incorrectItemVersion)throw new Error("This item has been edited by someone else. Refresh and make your edits again.")}else d>0&&console.error(`${d} item(s) failed to save. ${u} item(s) saved successfully.`);return o},O=async(e,t)=>{const n=[],r={};for(const i of t){const t=i.details.documentAttributes;if(t&&!t.signingKey){if(!t.documentId)throw new Error("Invalid document item, missing document ID.");r[t.documentId]=t,n.push(a.getFileKey(e.session,t.documentId))}const s=i.overview&&i.overview.icons&&i.overview.icons.detail;s&&!s.signingKey&&(s.fileId?(r[s.fileId]=s,n.push(a.getFileKey(e.session,s.fileId))):delete i.overview.icons)}const i=await Promise.all(n);for(const e of i){const t=r[e.fileId];if(!t)throw new Error("Missing file attributes.");t.signingKey=e.signingKey}return t},k=async(e,t)=>{if(u.Vault.activeUserHasAcl(t,u.BitSet.combine([u.vaultACL.ViewHistory,u.vaultACL.UpdateItem]))){const n=await a.getDeletedVaultItemsDeprecated(e.session,t.uuid);return c.vaultItemsFromAPI(n,t)}return[]},D=async(e,t,n)=>{await a.postPurgeDeletedVaultItems(e.session,t.uuid,[n])},M=async(e,t)=>await a.getVaultItemHistory(e.session,t.vault.uuid,t.uuid),F=async(e,t)=>{await a.deleteVaultItemHistory(e.session,t.vault.uuid,t.uuid)},_=async(e,t,n,r)=>{const i=t.uuid,s=await a.getPreviousVersionOfItem(e.session,i,n.uuid,r);return c.vaultItemFromAPI(s,t)},K=async e=>g("getAllCreditCardItems",(async()=>(0,p.XG)(e))).then((async t=>t?v(e,t):Promise.reject(new Error("Missing Personal vault")))).then((async t=>{const n=(0,o.Z)(t,(e=>e.templateUuid===u.VaultItemTemplate.CreditCardUuid&&e.state===u.VaultItem.ItemState.Active)).map((async t=>h(e,t.vault,t.uuid,t)));return Promise.all(n)}))},80129:function(e,t,n){n.d(t,{NJ:function(){return d},Tk:function(){return c},lY:function(){return m},mP:function(){return l},rZ:function(){return y},sp:function(){return p},uR:function(){return u}});var r=n(86257),i=n(14521),s=n(79686),o=n(92706);const a=(0,n(23428).$y)("action/vault_item_template"),u=async(e,t=!1)=>(await i.getAccountTemplates(e.session,t)).templates.map(o.vaultItemTemplateFromAPI),c=async e=>u(e,!0),l=async e=>{const t=await i.getDefaultTemplate(e.session,s.VaultItemTemplate.IdentityUuid);return o.vaultItemTemplateFromAPI(t)},d=async(e,t)=>a("getDefaultTemplate",(async()=>{const n=await i.getDefaultTemplate(e.session,t);return o.vaultItemTemplateFromAPI(n)})),y=async(e,t)=>i.postTemplate(e.session,{...(0,r.Z)(t,"sidebarIcon"),sourceIcon:t.sidebarIcon}),p=async(e,t,n)=>{const r=t.map((e=>e.uuid));return i.changeTemplatesState(e.session,r,n)},m=async e=>{const t=await c(e),n=t.find((e=>e.uuid===s.VaultItemTemplate.LoginUuid));if(!n)throw new Error("login template not found");const r=t.find((e=>e.uuid===s.VaultItemTemplate.CreditCardUuid));if(!r)throw new Error("credit card template not found");const i=t.find((e=>e.uuid===s.VaultItemTemplate.SecureNoteUuid));if(!i)throw new Error("secure note template not found");const o=t.find((e=>e.uuid===s.VaultItemTemplate.IdentityUuid));if(!o)throw new Error("identity template not found");return{loginTemplate:n,creditCardTemplate:r,secureNoteTemplate:i,identityTemplate:o}}},43972:function(e,t,n){n.d(t,{T4:function(){return C},ae:function(){return w},ys:function(){return S}});var r=n(48583),i=n(99942),s=n(91670),o=n(52384),a=n(77954),u=n(87347),c=n(5881),l=n(92757),d=n(61320),y=n.n(d),p=n(79686),m=n(98798),f=n(23428),g=n(57119),h=n(31385);const v=(0,f.$y)("action/vault_item_watchtower"),C=e=>({compromisedDomain:e.compromisedDomain,expired:e.expired,expiringSoon:e.expiringSoon,inactivePasskey:e.inactivePasskey,inactiveTwoFactor:e.inactiveTwoFactor,itemsInWrongAccount:e.itemsInWrongAccount,passwordStrength:e.passwordStrength,reusedPassword:e.reusedPassword,unsecuredWebsite:e.unsecuredWebsite,vulnerablePassword:e.vulnerablePassword}),A=async e=>{try{const t=await Promise.all(e.map(h.GQ));return(0,r.Z)(t,!0)}catch(e){return console.error("Failed to check pwned passwords.",e),!1}},w=async(e,t,n,r,s)=>v("generateWatchtowerReportForItem",(async()=>{const o={};if(e.overview.b5UserUUID)return o;const a=t?A:async()=>Promise.resolve(!1),u=s||P(e);return a(u).then((t=>{const s=T(e);if(s){o.compromisedDomain=s;const e=(0,g.os)();e&&e[s]&&(o.hibpReport=e[s])}n&&m.isItemInWrongAccount(e,r)&&(o.itemsInWrongAccount=!0),t&&(o.vulnerablePassword=!0);const a=e.username?e.username.value:"";for(const e of u){const t=m.calculatePasswordStrength(e,a);(!o.passwordStrength||o.passwordStrength>t)&&(o.passwordStrength=t)}if(e.overview.URLs)for(const t of e.overview.URLs)if((0,i.Z)(t.u.toLowerCase(),"http://")){o.unsecuredWebsite=!0;break}if(e.templateUuid===p.VaultItemTemplate.LoginUuid&&e.overview.URLs&&!R(e))for(const t of e.overview.URLs){const e=b(t.u);if(e){o.inactiveTwoFactor=e;break}}if(e.templateUuid===p.VaultItemTemplate.LoginUuid&&e.overview.URLs&&!I(e))for(const t of e.overview.URLs){const e=E(t.u);if(e){o.inactivePasskey=e;break}}let c,l=0;switch(e.templateUuid){case p.VaultItemTemplate.PassportUuid:{const t=p.VaultItem.findFieldWithName(p.VaultItem.FieldName.Passport.Expiry,e);t&&(c=p.VaultItem.getNumberValue(t),l=23328e3);break}case p.VaultItemTemplate.DriverLicenseUuid:{const t=p.VaultItem.findFieldWithName(p.VaultItem.FieldName.DriverLicense.Expiry,e);t&&(c=y()(p.VaultItem.getNumberValue(t),"YYYYMM").unix(),l=5184e3);break}case p.VaultItemTemplate.CreditCardUuid:{const t=p.VaultItem.findFieldWithName(p.VaultItem.FieldName.CreditCard.Expiry,e);t&&(c=y()(p.VaultItem.getNumberValue(t),"YYYYMM").endOf("month").unix(),l=5184e3);break}case p.VaultItemTemplate.MembershipUuid:{const t=p.VaultItem.findFieldWithName(p.VaultItem.FieldName.Membership.Expiry,e);t&&(c=y()(p.VaultItem.getNumberValue(t),"YYYYMM").endOf("month").unix(),l=5184e3);break}}if("number"==typeof c&&!Number.isNaN(c)){const e=Math.floor(Date.now()/1e3);e>c?o.expired=!0:e>c-l&&(o.expiringSoon=!0)}return o}))})),S=async(e,t,n,r)=>v("generateWatchtowerReportForItems",(async()=>{const i={},c=e.filter((e=>e.state===p.VaultItem.ItemState.Active)),l=(0,s.Z)((0,o.Z)(c,"uuid"),(e=>P(e))),d=(0,a.Z)((0,u.Z)(l)),y=[];for(;c.length>0;)y.push(c.splice(0,10));let m=Promise.resolve([]);for(const e of y)m=m.then((async()=>{const s=[];for(const o of e)s.push(w(o,t,n,r,l[o.uuid]).then((e=>{const t=l[o.uuid];if(t)for(const n of t)(d[n]??0)>1&&(e.reusedPassword=!0);i[o.uuid]=e})));return Promise.all(s)}));return m.then((()=>i))})),T=e=>{const t=(0,h.Tq)();if(!e.getPassword())return;const n=e.overview?e.overview.URLs:void 0;if(!n)return;const r={};for(const e of n){let n;try{n=new URL(m.addProtocolToUrlIfNeeded(e.u)).hostname,n=n.replace(/^www\./,"")}catch{continue}const i=t[n];i&&(r[n]=i)}if(0===Object.keys(r).length)return;const i=e.passwordUpdatedAt;return i?(0,c.Z)(r,(e=>"number"==typeof e&&e>i)):void 0},P=e=>{const t=[];if(e.templateUuid===p.VaultItemTemplate.LoginUuid||e.templateUuid===p.VaultItemTemplate.PasswordUuid){const n=e.getPassword();n&&(e.overview.url||n.length>6||/\D/.test(n))&&t.push(n)}else if(e.details&&e.details.sections)for(const n of e.details.sections){if(!n.fields)continue;const e=n.fields.filter((e=>e.k===p.VaultItem.FieldType.Concealed&&(0,r.Z)(e.n,"password")));for(const n of e)n.v&&t.push(p.VaultItem.getStringValue(n))}return t},b=e=>{if(!e)return;const t=(0,h.IF)();try{const n=new URL(m.addProtocolToUrlIfNeeded(e)).hostname;if(t[n])return t[n];const r=n.split(".");r.shift();const i=r.join(".");return t[i]?t[i]:void 0}catch{return}},R=e=>{if(e.tags.some((e=>!!e&&"2fa"===e.toLowerCase())))return!0;if(!e.details||!e.details.sections)return!1;for(const t of e.details.sections){const e=(0,l.Z)(t.fields,(e=>p.VaultItem.isTotpField(e)));if(e&&e.v)return!0}return!1},E=e=>{if(!e)return;const t=(0,h.eH)();try{const n=new URL(m.addProtocolToUrlIfNeeded(e)).hostname;if(t[n])return t[n];const r=n.split(".");r.shift();const i=r.join(".");return t[i]?t[i]:void 0}catch{return}},I=e=>!!e.details.passkey},35606:function(e,t,n){n.d(t,{$1:function(){return v},BG:function(){return R},Be:function(){return A},DZ:function(){return x},EO:function(){return T},FS:function(){return I},G4:function(){return O},H6:function(){return M},IV:function(){return g},Ie:function(){return z},K1:function(){return Z},K6:function(){return P},Kh:function(){return _},M3:function(){return B},NE:function(){return V},NG:function(){return L},O1:function(){return h},OK:function(){return C},Rr:function(){return b},UG:function(){return te},VB:function(){return S},W9:function(){return Q},XG:function(){return y},YY:function(){return F},Yj:function(){return w},a6:function(){return E},gB:function(){return W},ht:function(){return k},ju:function(){return D},mR:function(){return K},mh:function(){return X},mo:function(){return q},sG:function(){return G},sU:function(){return J},tm:function(){return j},u9:function(){return ee},uX:function(){return m},vC:function(){return U},xR:function(){return H},xW:function(){return p},xx:function(){return $},xz:function(){return Y},yK:function(){return N},yM:function(){return f}});var r=n(69243),i=n(98798),s=n(87794),o=n(73820),a=n(49756),u=n(88764),c=n(47729),l=n(78359);const d=(0,o.F)("web-api/api/account.ts"),y=r.partial({companySize:r.string},"AccountMeta"),p=r.readonly(r.type({hasPackages:r.boolean,hasNativeClient:r.boolean,hasNonSafariClient:r.boolean,mustMigrate:r.boolean}),"UserFlags"),m=r.readonly(r.type({hasRecoveryMembers:r.boolean,isAccountManaged:r.boolean}),"AccountFlags"),f=r.readonly(r.type({inviteSecret:r.string,inviteEmailDomains:(0,i.withDefaultUndefined)(r.string)}),"InviteSettings"),g=r.readonly(r.type({billingCompanyName:(0,i.withDefault)(r.string,""),billingAddress:(0,i.withDefault)(r.string,""),billingEmails:(0,i.withDefault)(r.string,"")}),"BillingSettings"),h=r.readonly(r.type({trialStartedAt:r.string,trialDays:r.number,status:r.string,provider:r.string,freezesAt:r.string,members:r.number,guests:r.number,settings:g}),"BillingInfo"),v=r.type({alerts:r.string,notifications:r.string},"SlackSettings"),C=r.partial({isEnabled:r.boolean,rememberDays:r.number,integrationKey:r.string,secretKey:r.string,host:r.string},"DuoSettings"),A=r.readonly(r.type({url:(0,i.withDefaultUndefined)(r.string)}),"SupportSettings"),w=r.readonly(r.type({address:r.string,verified:r.boolean}),"ReplyToEmailSettings"),S=r.readonly(r.partial({isEnabled:r.boolean,notificationEmails:r.string,monitoringEnabled:r.boolean,monitoringDomain:r.string,deploymentOption:r.string,identityProvider:r.string,replyToEmail:w}),"ProvisioningSettings");var T;!function(e){e.Minimum="",e.Medium="M",e.Strict="S",e.Custom="C"}(T||(T={}));const P=r.readonly(r.type({type:(0,i.fromStringEnum)(T,"MasterPasswordPolicyType"),customString:(0,i.withDefault)(r.string,"")}),"MasterPasswordPolicySettings"),b=r.readonly(r.intersection([r.type({enforced:(0,i.withDefault)(r.boolean,!1)},"type"),r.partial({availableTypes:(0,i.withDefaultUndefined)(r.readonlyArray((0,i.fromStringEnum)(u.Lo,"MfaType")))},"partial")]),"TwoFactorSettings"),R=r.readonlyArray(r.string),E=r.readonly(r.type({requireModernApps:(0,i.withDefault)(r.boolean,!1)}),"ClientRestrictionSettings"),I=r.readonly(r.partial({hideDeveloperTools:(0,i.withDefault)(r.boolean,!1),hideIntegrations:(0,i.withDefault)(r.boolean,!1),updatedAt:i.IsoStringDate}),"SidebarNavigationPoliciesSettings"),U=r.readonly(r.partial({blockFileStorage:(0,i.withDefault)(r.boolean,!1),blockPasskeyAuthenticator:(0,i.withDefault)(r.boolean,!1),privateVaultsBusinessWatchtowerReportingEnabled:(0,i.withDefault)(r.boolean,!0),allowedWatchtowerDomains:(0,i.withDefaultUndefined)(r.string)}),"TeamMemberPoliciesSettings"),O=r.readonly(r.type({isEnabled:(0,i.withDefault)(r.boolean,!1),daysUntilDelete:(0,i.withDefaultUndefined)(r.number)}),"AutoDeleteSuspendedUsersSettings"),k=r.readonly(r.type({enabled:(0,i.withDefault)(r.boolean,!1),daysUntilDelete:(0,i.withDefaultUndefined)(r.number)})),D=r.readonly(r.type({definition:k}),"AutoDeleteSuspendedUsersPolicyResponse"),M=r.type({slackURLs:(0,i.withDefaultUndefined)(v),betaIsEnabled:(0,i.withDefault)(r.boolean,!1),richIconsAreDisabled:(0,i.withDefault)(r.boolean,!1),duo:(0,i.withDefaultUndefined)(C),support:(0,i.withDefaultUndefined)(A),provisioning:(0,i.withDefaultUndefined)(S),masterPasswordPolicy:(0,i.withDefaultUndefined)(P),twoFactor:(0,i.withDefaultUndefined)(b),clientRestrictions:(0,i.withDefaultUndefined)(E),teamMemberPolicies:(0,i.withDefaultUndefined)(U),disableEmergencyKit:(0,i.withDefault)(r.boolean,!1),sidebarNavigationPolicies:(0,i.withDefaultUndefined)(I)},"AccountSettings"),F=r.readonly(r.type({groups:r.number,invitations:r.number,users:r.number,vaults:r.number,activeGuests:r.number,activeUsers:r.number,activeManagedAccounts:r.number}),"EntityCounts"),_=r.type({gatedFeature:r.string,trialDays:r.number,remainingDays:r.number,optedOut:r.boolean},"GatedFeatureTrial"),K=r.readonly(r.intersection([r.type({uuid:r.string,name:r.string,domain:r.string,type:r.string,state:r.string,avatar:r.string,attrVersion:r.number,createdAt:r.string},"type"),r.partial({storageUsed:r.number,baseAttachmentURL:r.string,baseAvatarURL:r.string,me:c.n5,meta:y,counts:F,users:r.array(c.kY),groups:r.array(a.ZA),tier:s.Tier,userFlags:p,accountFlags:m,invite:f,billing:h,promotions:r.array(s.Promotion),settings:M,gatedFeatureTrials:r.array(_)},"partial")]),"Account"),N=r.readonly(r.partial({domain:r.string,email:r.string}),"CheckDomainRequests");var V;!function(e){e.AccountFlags="account-flags",e.Billing="billing",e.Counts="counts",e.Groups="groups",e.Invite="invite",e.Me="me",e.MeMemberships="me.memberships",e.Meta="meta",e.Promotions="promotions",e.Settings="settings",e.SettingsTeamMemberPolicies="settings.team-member-policies",e.Tier="tier",e.UserFlags="user-flags",e.Users="users",e.GatedFeatureTrials="account-gated-feature-trials"}(V||(V={}));const B=d((e=>({name:"getAccountWithAttrs",method:"GET",url:`/api/v3/account${(0,l.Pj)({attrs:e})}`,responseType:K}))),L=d(((e,t)=>({name:"activateAccount",method:"PUT",url:"/api/v1/account/activate",body:{vaults:e,groups:t},responseType:i.ignore}))),x=d((e=>({name:"joinAccount",method:"PUT",url:"/api/v1/person/join",body:{vault:e},responseType:i.ignore}))),G=d((e=>({name:"updateAccount",method:"PUT",url:"/api/v1/account/attrs",body:e,responseType:i.ignore}))),Z=d((e=>({name:"updateBillingSettings",method:"PUT",url:"/api/v1/account/billingsettings",body:e,responseType:i.ignore}))),j=d((()=>({name:"deleteAccount",method:"DELETE",url:"/api/v1/account",responseType:i.ignore}))),Y=d(((e,t)=>({name:"verifyLockedOutAccountDeletion",method:"GET",url:`/api/v1/account/${e}/${t}/verifydeletion`,responseType:i.ignore}))),H=d(((e,t)=>({name:"lockedOutDeleteAccount",method:"DELETE",url:`/api/v1/account/${e}/${t}`,responseType:i.ignore}))),W=r.readonly(r.type({result:r.boolean}),"CheckDomainAvailabilityResponse"),$=d(((e,t)=>({name:"checkDomainAvailability",method:"POST",url:"/api/v1/domain/check",body:{domain:e,email:t},responseType:W,encrypted:!1}))),J=r.readonly(r.type({domain:r.string}),"GetSuggestedDomainResponse"),q=d((e=>({name:"getSuggestedDomain",method:"POST",url:"/api/v1/domain/suggestion",body:{accountName:e},responseType:J,encrypted:!1}))),z=d((e=>({name:"changeDomain",method:"PUT",url:`/api/v1/account/domain/${e}`,responseType:i.ignore}))),X=d((e=>({name:"postImage",method:"POST",url:"/api/v1/image",body:e,responseType:r.string,options:{dataType:"arraybuffer",responseType:"text"},encrypted:!1}))),Q=d((e=>({name:"changeAccountType",method:"PUT",url:"/api/v2/account/type",body:e,responseType:i.ignore}))),ee=r.readonly(r.type({activeMembers:r.number,activeGuests:r.number,billedMembers:r.number,billedGuests:r.number}),"AccountUserCounts"),te=d((()=>({name:"getAccountUserCounts",method:"GET",url:"/api/v1/account/counts",responseType:ee})))},85962:function(e,t,n){n.d(t,{Bm:function(){return v},NE:function(){return S},SV:function(){return y},bU:function(){return d},cS:function(){return f},eY:function(){return m},hG:function(){return A},hI:function(){return h},ju:function(){return g},uF:function(){return w},xG:function(){return T},y2:function(){return p},yt:function(){return C}});var r=n(69243),i=n(61320),s=n.n(i),o=n(98798),a=n(73820),u=n(86560),c=n(78359);const l=(0,a.F)("web-api/api/activity.ts"),d=100,y="regular_user",p="external_user",m=()=>s()().subtract(13,"month"),f=r.readonly(r.intersection([r.type({actor:u.kY,time:r.string,ipAddress:r.string,action:r.string},"type"),r.partial({eid:r.number,uuid:r.string,objectType:r.string,objectUuid:r.string,auxInfo:r.string,auxUUID:r.string,sessionUuid:r.string,actorType:r.string},"partial")]),"Activity"),g=r.readonly(r.type({objectType:r.string,action:r.string}),"Event"),h=r.readonly(r.type({auditEvents:r.readonlyArray(f),cursor:r.string,hasMore:r.boolean,totalCount:r.number}),"ActivityWithCursor"),v=l(((e,t,n,r,i,s,o,a,u)=>({name:"getFilteredActivityLogReports",method:"POST",url:"/api/v4/auditevents",body:{cursor:e,limit:t,startTime:n,endTime:r,direction:i,events:s,actorUuids:o,memberUuids:a,genericUuids:u},responseType:h}))),C=r.readonly(r.type({count:r.number,hasMore:r.boolean}),"AuditEventsTotalReports"),A=l(((e,t,n,r,i,s)=>({name:"getFilteredActivityLogTotalReports",method:"POST",url:"/api/v1/auditevents/summary",body:{startTime:e,endTime:t,events:n,actorUuids:r,memberUuids:i,genericUuids:s},responseType:C}))),w=l((e=>({name:"reportAuditEvent",method:"POST",url:"/api/v1/auditevents/report",body:e,responseType:o.ignore})));var S;!function(e){e.Group="G",e.Vault="V",e.Person="P",e.ServiceAccount="S"}(S||(S={}));const T=l(((e,t)=>({name:"getActivityFeed",method:"GET",url:`/api/v1/auditevents/feed/${t}${(0,c.Pj)({type:e})}`,responseType:r.readonlyArray(f)})))},92057:function(e,t,n){n.d(t,{$6:function(){return m},$i:function(){return S},BP:function(){return I},HJ:function(){return R},Lk:function(){return d},Nt:function(){return g},O8:function(){return P},PJ:function(){return v},UL:function(){return O},Vm:function(){return F},Yf:function(){return p},bV:function(){return T},gx:function(){return l},oe:function(){return E},qu:function(){return y},rR:function(){return w},rS:function(){return h},rb:function(){return A},rt:function(){return M},ug:function(){return U},w7:function(){return D},wG:function(){return C},wR:function(){return b},x2:function(){return f},xJ:function(){return k}});var r=n(69243),i=n(98798),s=n(95743),o=n(73820),a=n(88764),u=n(78072);const c=(0,o.F)("web-api/api/auth.ts"),l=r.type({method:r.string,alg:r.string,iterations:r.number,salt:r.string,v:r.string}),d=r.type({method:r.string,alg:r.string,iterations:r.number,salt:r.string},"AuthParams"),y=r.intersection([r.type({status:r.string},"type"),r.partial({sessionID:r.string,accountKeyFormat:r.string,accountKeyUuid:r.string,userAuth:d,newDomain:r.string,newHost:r.string,newEmail:r.string},"partial")],"StartAuthResponse"),p=c((e=>({name:"startAuth",method:"POST",url:"/api/v3/auth/start",body:e,responseType:y,encrypted:!1}))),m=r.type({userB:r.string},"SrpResponse"),f=c((e=>({name:"postAuth",method:"POST",url:"/api/v2/auth",body:{userA:e},responseType:m,encrypted:!1}))),g=r.type({serverVerifyHash:r.string},"SrpResponse"),h=c((e=>({name:"confirmKeyAuth",method:"POST",url:"/api/v2/auth/confirm-key",body:{clientVerifyHash:e},responseType:g,encrypted:!1}))),v=r.type({enabled:r.boolean},"DsecretResponse"),C=r.type({enabled:r.boolean},"DsecretProxyResponse"),A=r.type({enabled:r.boolean,digits:r.number},"TotpResponse"),w=r.intersection([r.type({enabled:r.boolean,host:r.string,sigRequest:r.string},"type"),r.partial({authURL:r.string},"partial")],"DuoResponse"),S=r.type({enabled:r.boolean,keyHandles:r.array(r.string),challenge:r.string,rpid:r.string},"WebAuthnResponse"),T=r.intersection([r.type({enabled:r.boolean,availableTypes:(0,s.Wc)(r.readonlyArray((0,s.N6)(a.Lo,"MfaType")),[])},"type"),r.partial({webAuthnChallenge:r.string,webAuthnRpid:r.string},"partial")],"MustEnableResponse"),P=r.readonly(r.type({enabled:r.boolean,digits:(0,s.Wc)(r.number,0),methods:r.array(r.string)}),"CodeResponse"),b=r.partial({dsecret:v,dsecretProxy:C,totp:A,duo:w,webAuthn:S,mustEnable:T,code:P},"MfaResponse"),R=r.intersection([r.type({notifier:r.string},"type"),r.partial({accountUuid:r.string,userUuid:r.string,mfa:b,ssoMigrationGracePeriod:u.GQ},"partial")],"CompleteAuthResponse"),E=c((e=>({name:"completeAuth",method:"POST",url:"/api/v2/auth/complete",body:e,responseType:R}))),I=c((e=>({name:"verifyMfa",method:"POST",url:"/api/v1/auth/mfa",body:e,responseType:a.R$}))),U=c((e=>({name:"enableMfaWithAuth",method:"POST",url:"/api/v1/auth/mfa/enable",body:e,responseType:a.R$}))),O=c((e=>({name:"submitNewUserAuth",method:"POST",url:"/api/v1/user/auth",body:e,responseType:s.ID}))),k=c((()=>({name:"extendSession",method:"PUT",url:"/api/v1/session/touch",responseType:s.ID}))),D=c((()=>({name:"signOut",method:"PUT",url:"/api/v1/session/signout",responseType:s.ID}))),M=r.readonly(r.type({sessionUuid:r.string,sessionKey:i.crypto.JwkSymKey,notifier:r.string},"DelegateSessionResponse")),F=c(((e,t)=>({name:"delegateSession",method:"POST",url:"/api/v2/delegatesession",body:{device:e,isNewPhysicalDevice:t},responseType:M})))},10771:function(e,t,n){n.d(t,{LW:function(){return o},ZK:function(){return a},wV:function(){return s}});var r=n(69243);const i=(0,n(73820).F)("web-api/api/billing/coupon.ts"),s=r.readonly(r.type({stripeCouponUID:r.string,amountOff:r.number,percentOff:r.number,createdAt:r.string,currency:r.string,duration:r.string,durationInMonths:r.number}),"Coupon"),o=r.readonly(r.type({name:r.string,description:r.string,trialDays:r.number,addTrialDays:r.boolean,coupon:r.union([s,r.undefined]),suppressPromotionDescription:r.boolean,thirdPartyBilling:r.boolean,automatedPartnership:r.boolean,showBilling:r.boolean}),"Promotion"),a=i(((e,t)=>({name:"getValidPromotionFromCode",method:"GET",url:`/api/v2/coupon/${e}/${t}/check`,encrypted:!1,responseType:o})))},87794:function(e,t,n){n.r(t),n.d(t,{BillingStats:function(){return K},Card:function(){return l},Charge:function(){return b},ChildAccountRelationship:function(){return me},Coupon:function(){return g.wV},CustomerAddress:function(){return a},Discount:function(){return R},Feature:function(){return ue},Frequency:function(){return F.Di},FrequencyCodec:function(){return F.WW},GiftCard:function(){return v},Invoice:function(){return E},InvoiceLine:function(){return P},InvoicePdf:function(){return I},MspInvoice:function(){return U},OpTaxNumber:function(){return T},PendingPaymentMethod:function(){return L},Plan:function(){return F.fU},Promotion:function(){return g.LW},PurchaseOrder:function(){return Y},PurchaseOrderStatus:function(){return j},RemainingAmount:function(){return ke},SetupIntent:function(){return we},StripePurchaseOrder:function(){return W},StripePurchaseOrderStatus:function(){return H},StripeSubscription:function(){return Z},Subscription:function(){return $},TaxAdvice:function(){return ee},Tier:function(){return ce},UpdatePaymentMethodRequest:function(){return Pe},activateStripeBilling:function(){return oe},addCard:function(){return d},addOrUpdateAddress:function(){return u},attachAsChildAccount:function(){return he},cancelStripeSubscription:function(){return X},changeDefaultCard:function(){return y},changeDefaultPaymentMethod:function(){return Ee},checkChildAccountCode:function(){return ve},checkGiftCard:function(){return w},createAppleSubscription:function(){return re},createChildAccountRelationship:function(){return fe},createPlayStoreSubscription:function(){return ne},createSetupIntent:function(){return Se},createUnverifiedSetupIntent:function(){return Te},deleteCard:function(){return p},deletePaymentMethod:function(){return Ie},deletePendingPaymentMethod:function(){return x},detachChildAccount:function(){return Ce},endTrialPeriod:function(){return Q},getAvailableTiers:function(){return le},getBillingStats:function(){return N},getCard:function(){return f},getChildAccountRelationship:function(){return ge},getDefaultTiers:function(){return ye},getGiftCards:function(){return A},getInvoiceDetails:function(){return k},getInvoicePdf:function(){return D},getInvoices:function(){return O},getIsValidPurchaseOrderToken:function(){return ie},getIsValidStripePurchaseOrderToken:function(){return se},getPaymentMethod:function(){return Re},getRemainingAmount:function(){return De},getSubscription:function(){return J},getTaxAdvice:function(){return te},getUpgradeTiers:function(){return de},getValidPromotionFromCode:function(){return g.ZK},linkAccountToPartner:function(){return Ue},redeemGiftCard:function(){return C},requestInvoiceEmail:function(){return M},subscribeWithStripe:function(){return z},updateCard:function(){return m},updatePaymentMethod:function(){return be},updateStripeSubscription:function(){return q}});var r=n(69243),i=n(95743),s=n(73820);const o=(0,s.F)("web-api/api/billing/customer_address.ts"),a=r.readonly(r.type({country:r.string,provinceOrState:r.string,zip:r.string}),"CustomerAddress"),u=o((e=>({name:"addOrUpdateAddress",method:"POST",url:"/api/v1/billing/address",body:e,responseType:i.ID}))),c=(0,s.F)("web-api/api/billing/card.ts"),l=r.readonly(r.type({stripeCardUid:r.string,brand:r.string,country:r.string,isDefault:r.boolean,expMonth:r.number,expYear:r.number,name:r.string,state:r.union([r.string,r.undefined]),zip:r.union([r.string,r.undefined]),lastFour:(0,i.Wc)(r.string,"")}),"Card"),d=c((e=>({name:"addCard",method:"POST",url:"/api/v1/cards",body:e,responseType:i.ID}))),y=c((e=>({name:"changeDefaultCard",method:"PATCH",url:`/api/v1/cards/${e.stripeCardUid}/default`,responseType:i.ID}))),p=c((e=>({name:"deleteCard",method:"DELETE",url:`/api/v1/cards/${e}`,responseType:i.ID}))),m=c(((e,t)=>({name:"updateCard",method:"PATCH",url:`/api/v1/card/${e}`,body:t,responseType:i.ID}))),f=c((e=>({name:"getCard",method:"GET",url:`/api/v1/cards/${e}`,responseType:l})));var g=n(10771);const h=(0,s.F)("web-api/api/billing/gift_card.ts"),v=r.readonly(r.type({code:r.string,redeemedAt:r.string,amount:r.number,description:r.string,purchaserEmail:r.string}),"GiftCard"),C=h((e=>({name:"redeemGiftCard",method:"POST",url:"/api/v1/giftcard/redeem",body:e,responseType:i.ID}))),A=h((()=>({name:"getGiftCards",method:"GET",url:"/api/v1/giftcards",responseType:r.readonlyArray(v)}))),w=h((e=>({name:"checkGiftCard",method:"POST",url:`/api/v1/giftcard/${encodeURIComponent(e)}/check`,responseType:i.ID}))),S=(0,s.F)("web-api/api/billing/invoice.ts"),T=r.readonly(r.type({label:r.string,number:r.string,effective:r.string}),"OpTaxNumber"),P=r.readonly(r.type({stripeInvoiceLineUID:r.string,amount:r.number,currency:r.string,description:r.string,periodStart:r.string,periodEnd:r.string,planUID:r.union([r.string,r.undefined]),quantity:(0,i.Wc)(r.number,0),proration:(0,i.Wc)(r.boolean,!1),discountable:(0,i.Wc)(r.boolean,!1),taxName:(0,i.Wc)(r.string,"")}),"InvoiceLine"),b=r.readonly(r.type({uid:r.string,amount:r.number,captured:r.boolean,created:r.string,currency:r.string,paid:r.boolean,refunded:r.boolean,amountRefunded:r.number,desc:r.string,failMsg:r.string,failCode:r.string,meta:(0,i.Wc)(r.record(r.string,r.string),{}),email:r.string,statement:r.string,status:r.string,source:r.union([l,r.null])}),"Charge"),R=r.readonly(r.type({coupon:r.union([g.wV,r.null]),start:r.string,end:r.string}),"Discount"),E=r.readonly(r.type({stripeInvoiceUID:r.string,accountName:r.string,address:r.string,amountDue:r.number,attemptCount:r.number,attempted:r.boolean,billTo:r.string,charge:r.union([b,r.null]),closed:r.boolean,currency:r.string,date:r.string,description:r.string,discount:r.union([R,r.null]),endingBalance:r.number,forgiven:r.boolean,lines:(0,i.Wc)((0,i.hX)(P),[]),metadata:(0,i.Wc)(r.record(r.string,r.string),{}),nextPaymentAttempt:r.string,willRetry:r.boolean,paid:r.boolean,periodStart:r.string,periodEnd:r.string,startingBalance:r.number,statementDescriptor:r.string,subtotal:r.number,tax:r.number,taxPercent:r.number,total:r.number,taxName:r.string,taxNumber:(0,i.Wc)(r.string,""),isTaxExempt:(0,i.Wc)(r.boolean,!1),opTaxNumbers:r.union([r.readonlyArray(T),r.null]),showDefaultTaxMsg:r.boolean}),"Invoice"),I=r.readonly(r.type({fileName:r.string,contentType:r.string,contents:r.string}),"InvoicePDF"),U=r.readonly(r.type({periodStart:r.number,periodEnd:r.number,pricePerSeat:r.number,currency:r.string,taxRate:r.number,netSeats:r.number})),O=S(((e=0,t=20)=>({name:"getInvoices",method:"GET",url:`/api/v1/invoices?page=${e}&limit=${t}`,responseType:r.readonlyArray(E)}))),k=S((e=>({name:"getInvoiceDetails",method:"GET",url:`/api/v1/invoice/${e}`,responseType:E}))),D=S((e=>({name:"getInvoicePdf",method:"GET",url:`/api/v1/invoice/${e}/pdf`,responseType:I}))),M=S((e=>({name:"requestInvoiceEmail",method:"POST",url:`/api/v1/invoice/${e}/email`,responseType:i.ID})));var F=n(68430);const _=(0,s.F)("web-api/api/billing/billing_stats.ts"),K=r.readonly(r.type({activeMembers:r.number,activeGuests:r.number,billedMembers:r.number,billedGuests:r.number}),"BillingStats"),N=_((()=>({name:"getBillingStats",method:"GET",url:"/api/v1/billing/stats",responseType:K})));var V=n(98798);const B=(0,s.F)("web-api/api/billing/pendingpaymentmethod.ts"),L=r.readonly(r.type({id:r.number,accountId:r.number,setupIntentUid:r.string,isDefault:r.boolean,isFailed:r.boolean}),"PendingPaymentMethod"),x=B((e=>({name:"deletePendingPaymentMethod",method:"DELETE",url:`/api/v1/pendingPaymentMethod/${e}`,responseType:V.ignore}))),G=(0,s.F)("web-api/api/billing/subscription.ts"),Z=r.readonly(r.type({stripeSubscriptionUid:r.string,cancelAtPeriodEnd:r.boolean,canceledAt:r.string,currentPeriodEnd:r.string,currentPeriodStart:r.string,endedAt:r.string,quantity:r.number,start:r.string,status:r.string,taxPercent:r.number,effectiveTaxRate:r.number,trialEnd:r.string,trialStart:r.string,taxNumber:r.string,isTaxExempt:r.boolean,country:r.string,provinceOrState:r.string,zip:r.string}),"StripeSubscription");var j;!function(e){e.Paid="P",e.Outstanding="O",e.Special="S"}(j||(j={}));const Y=r.readonly(r.type({state:r.string,teamMembers:r.number,totalPrice:r.number,paymentStatus:(0,i.N6)(j,"PurchaseOrderStatus"),startDate:r.string,endDate:r.string}),"PurchaseOrder");var H;!function(e){e.Approved="A",e.Pending="P",e.Canceled="C",e.Delinquent="D"}(H||(H={}));const W=r.readonly(r.type({state:r.string,teamMembers:r.number,memberPrice:r.number,billingStartDate:r.string,customerPO:r.string,frequency:r.union([r.literal("Y"),r.literal("M")]),secretsAutomationPrice:r.number,vaultAccessCredits:r.number}),"StripePurchaseOrder"),$=r.readonly(r.type({balance:r.number,subscription:Z,plan:r.union([F.fU,r.undefined]),cards:r.union([r.readonlyArray(l),r.null]),nextInvoice:r.union([E,r.undefined]),hasInvoices:r.boolean,purchaseOrder:r.union([Y,r.undefined]),stripePurchaseOrder:r.union([W,r.undefined]),customerAddress:r.union([a,r.undefined]),pendingCreditAmount:(0,i.Wc)(r.number,0),coupon:r.union([g.wV,r.undefined]),pendingPaymentMethods:r.union([r.array(L),r.undefined]),billingStats:r.union([K,r.undefined])}),"Subscription"),J=G((()=>({name:"getSubscription",method:"GET",url:"/api/v2/billing",responseType:$}))),q=G((e=>({name:"updateStripeSubscription",method:"POST",url:"/api/v2/subscription",body:e,responseType:i.ID}))),z=G((e=>({name:"subscribeWithStripe",method:"POST",url:"/api/v1/billing/activate",body:e,responseType:i.ID}))),X=G((()=>({name:"cancelStripeSubscription",method:"DELETE",url:"/api/v1/subscription",responseType:i.ID}))),Q=G((()=>({name:"endTrialPeriod",method:"DELETE",url:"/api/v1/subscription/trial",responseType:i.ID}))),ee=r.readonly(r.type({countryCode:r.string,provinceCode:r.string,postalCode:r.string,taxRate:r.number,taxRateString:r.string,effectiveTaxRate:r.number,effectiveTaxRateString:r.string,taxName:r.string,originalPrice:r.number,totalPrice:r.number,totalTax:r.number,useTaxData:r.boolean}),"TaxAdvice"),te=G((e=>({name:"getTaxAdvice",method:"POST",url:"/api/v2/taxadvice",body:e,responseType:ee,encrypted:!1}))),ne=G((e=>({name:"createPlayStoreSubscription",method:"POST",url:"/api/v1/subscriptions/playstore",body:e,responseType:i.ID}))),re=G((e=>({name:"createAppleSubscription",method:"POST",url:"/api/v1/subscriptions/apple",body:e,options:{dataType:"arraybuffer"},responseType:i.ID}))),ie=G((e=>({name:"getIsValidPurchaseOrderToken",method:"GET",url:`/api/v1/purchase_order/${e}/check`,responseType:i.ID}))),se=G((e=>({name:"getIsValidStripePurchaseOrderToken",method:"GET",url:`/api/v1/stripe_purchase_order/${e}/check`,responseType:i.ID}))),oe=G((e=>({name:"activateStripeBilling",method:"POST",url:"/api/v1/billing/activate",body:e,responseType:i.ID}))),ae=(0,s.F)("web-api/api/billing/tier.ts"),ue=r.readonly(r.type({title:r.string,desc:r.string}),"Feature"),ce=r.readonly(r.type({name:r.string,accountType:r.string,isPublic:r.boolean,sortOrder:r.number,trialDays:r.number,backupDays:r.number,guestsIncluded:r.number,maxGuests:r.number,membersIncluded:r.number,maxMembers:r.number,minQuantity:r.number,storagePerAccount:r.number,storagePerUser:r.number,marketingText:r.readonly(r.type({defaultPriceDisplayFrequency:F.WW,localizedFeatures:(0,i.Wc)(r.readonlyArray(ue),[]),name:r.string,viewDetailsURL:r.string})),features:(0,i.Wc)(r.readonlyArray(r.string),[]),gatedFeatures:(0,i.Wc)(r.readonlyArray(r.string),[]),plans:(0,i.Wc)(r.readonlyArray(F.fU),[]),tierChangeMappings:(0,i.Wc)(r.readonlyArray(r.string),[])}),"Tier"),le=ae((()=>({name:"getAvailableTiers",method:"GET",url:"/api/v2/billing/tiers",responseType:r.readonlyArray(ce)}))),de=ae((()=>({name:"getUpgradeTiers",method:"GET",url:"/api/v2/billing/tiers/upgrades",responseType:r.readonlyArray(ce)}))),ye=ae((()=>({name:"getDefaultTiers",method:"GET",url:"/api/v2/billing/tiers/defaults",responseType:r.readonlyArray(ce)}))),pe=(0,s.F)("web-api/api/billing/child_account_relationship.ts"),me=r.readonly(r.type({code:r.string,state:r.string}),"ChildAccountRelationship"),fe=pe((()=>({name:"createChildAccountRelationship",method:"POST",url:"/api/v1/account/child",responseType:me}))),ge=pe((()=>({name:"getChildAccountRelationship",method:"GET",url:"/api/v1/account/child",responseType:me}))),he=pe((e=>({name:"attachAsChildAccount",method:"POST",url:"/api/v1/account/child/attach",body:{code:e},responseType:i.ID}))),ve=pe((e=>({name:"checkChildAccountCode",method:"POST",url:`/api/v1/account/child/${encodeURIComponent(e)}/check`,responseType:i.ID}))),Ce=pe((()=>({name:"detachChildAccount",method:"DELETE",url:"/api/v1/account/child",responseType:i.ID}))),Ae=(0,s.F)("web-api/api/billing/payment.ts"),we=r.readonly(r.type({uid:r.string,clientSecret:r.string}),"SetupIntent"),Se=Ae((()=>({name:"createSetupIntent",method:"POST",url:"/api/v1/billing/payment/setup_intents",encrypted:!0,responseType:we}))),Te=Ae(((e,t)=>({name:"createUnverifiedSetupIntent",method:"POST",url:"/api/v1/billing/payment/unverified_setup_intents",body:{setupIntentCode:e,signupUid:t},encrypted:!1,responseType:we}))),Pe=r.readonly(r.type({name:r.string,country:r.string,state:r.string,zip:r.string,expYear:r.number,expMonth:r.number}),"UpdatePaymentMethodRequest"),be=Ae(((e,t)=>({name:"updatePaymentMethod",method:"PATCH",url:`/api/v1/paymentmethod/${e}`,body:t,responseType:i.ID}))),Re=Ae((e=>({name:"getPaymentMethod",method:"GET",url:`/api/v1/paymentmethod/${e}`,responseType:l}))),Ee=Ae((e=>({name:"changeDefaultPaymentMethod",method:"PATCH",url:`/api/v1/paymentmethod/${e}/default`,responseType:i.ID}))),Ie=Ae((e=>({name:"deletePaymentMethod",method:"DELETE",url:`/api/v1/paymentmethod/${e}`,responseType:i.ID}))),Ue=(0,s.F)("web-api/api/billing/partnership.ts")((e=>({name:"linkAccountToPartner",method:"POST",url:"/api/v1/billing/partnership/link",body:e,responseType:V.ignore}))),Oe=(0,s.F)("web-api/api/billing/remaining_amount.ts"),ke=r.readonly(r.type({remainingAmount:r.number})),De=Oe((()=>({name:"getRemainingAmount",method:"GET",url:"/api/v1/billing/remaining",responseType:ke})))},68430:function(e,t,n){n.d(t,{Di:function(){return r},WW:function(){return o},fU:function(){return a}});var r,i=n(69243),s=n(95743);!function(e){e.Monthly="M",e.Yearly="Y",e.Daily="D",e.ThreeYear="3",e.FiveYear="5",e.Other="O"}(r||(r={}));const o=(0,s.N6)(r,"Frequency"),a=i.readonly(i.type({frequency:o,sortOrder:i.number,currency:i.string,display:i.readonly(i.type({amount:i.number,isPerUser:i.boolean}))}),"Plan")},20793:function(e,t,n){n.d(t,{X:function(){return s},l:function(){return o}});var r=n(69243);const i=(0,n(73820).F)("web-api/api/client_restrictions.ts"),s=r.readonly(r.intersection([r.type({clientName:r.string,version:r.string},"type"),r.partial({osVersion:r.string},"partial")]),"ModernAppVersion"),o=i((()=>({name:"getModernAppVersions",method:"GET",url:"/api/v1/modern-app-versions",responseType:r.array(s)})))},73820:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(98798),i=n(61670),s=n(35914);const o=e=>t=>u(((...n)=>({...t(...n),filename:e}))),a=s.assertLogSafe,u=e=>async(t,...n)=>{const r={body:void 0,...e(...n)},s=r.responseType===i.ID?{...r.options??{},responseType:"ignore"}:r.options,o=r.encrypted??!0,u=a(r.name),l=a(r.filename),d=await t.request({name:u,method:r.method,url:r.url,body:r.body,encrypted:o,decryptResponse:r.decryptResponse,options:s}),y=await c({response:d,responseType:s?.responseType??"json",endpointName:u});return(0,i.Jx)(y,r.responseType,{mode:r.validation,file:l,func:u}).unwrap()},c=async({response:e,responseType:t,endpointName:n})=>{try{switch(t){case"json":{const t=await e.text();if(""===t)return;return JSON.parse(t)}case"arraybuffer":return await e.arrayBuffer();case"text":return await e.text();case"ignore":return}}catch{const e=(0,s.assertLogSafe)(t),i=s.L`Failed to decode response as ${e} for ${n}`,o=new r.LoggableError({errorClass:r.ExceptionType.ValidationError,message:i});throw console.error(i.str),r.reportError(o),o}}},4280:function(e,t,n){n.d(t,{QS:function(){return a},Rr:function(){return l},SJ:function(){return c},ey:function(){return u},tW:function(){return d}});var r=n(69243),i=n(76284),s=n(98798);const o=(0,n(73820).F)("web-api/api/firewall_rules.ts"),a=r.readonly(r.intersection([r.type({type:(0,s.fromStringEnum)(i.oX,"FirewallRuleScopeType")},"type"),r.partial({uuid:r.string},"partial")]),"FirewallRuleScope"),u=r.readonly(r.intersection([r.type({type:(0,s.fromStringEnum)(i.JR,"FirewallRuleType"),action:(0,s.fromStringEnum)(i.uq,"FirewallRuleAction"),value:r.readonly((0,s.withDefault)(r.array(r.union([(0,s.fromStringEnum)(i.rZ,"FirewallRuleAnonymousType"),r.string])),[]))},"type"),r.partial({scope:r.readonlyArray(a)},"partial")]),"FirewallRule"),c=r.readonly(r.type({rules:r.union([r.readonlyArray(u),r.null])}),"FirewallRules"),l=o((e=>({name:"postFirewallRules",method:"POST",url:"/api/v1/firewallrules",body:e,responseType:s.ignore}))),d=o((()=>({name:"getFirewallRules",method:"GET",url:"/api/v1/firewallrules",responseType:c})))},49756:function(e,t,n){n.d(t,{B5:function(){return A},F7:function(){return b},FI:function(){return O},IQ:function(){return l},Jl:function(){return _},RN:function(){return R},SB:function(){return E},Sn:function(){return f},Tl:function(){return p},ZA:function(){return y},c9:function(){return D},dU:function(){return P},ex:function(){return g},hu:function(){return k},iE:function(){return S},jA:function(){return m},mD:function(){return C},mO:function(){return F},pF:function(){return h},qc:function(){return v},rZ:function(){return I},sS:function(){return w},sU:function(){return M},z4:function(){return U},zC:function(){return T}});var r=n(69243),i=n(98798),s=n(73820),o=n(78072),a=n(78359),u=n(85486);const c=(0,s.F)("web-api/api/groups.ts");var l;!function(e){let t;!function(e){e.Manager="A",e.Member="R"}(t=e.Role||(e.Role={}));const n=(0,i.fromStringEnum)(t,"Role");let s;!function(e){e.Active="A",e.Deleted="D",e.Inactive="I"}(s=e.State||(e.State={}));const o=(0,i.fromStringEnum)(s,"State");e.Type=r.readonly(r.type({groupUuid:r.string,memberUuid:r.string,role:n,state:o,version:r.number}),"GroupMembership")}(l||(l={}));const d=["pubkey","memberships","vault-access","recoverable-ks","user-counts"],y=r.intersection([r.type({uuid:r.string,name:r.string,type:r.string,desc:r.string,attrVersion:r.number,activeKeysetUuid:r.string,permissions:r.number},"type"),r.partial({createdAt:r.string,updatedAt:r.string,avatar:r.string,archivedKeysets:r.readonlyArray(i.crypto.KeysetCiphertext),userMembership:l.Type,sso:o.JQ,recoverableKeyset:i.crypto.KeysetCiphertext,recoveryKeyset:i.crypto.KeysetCiphertext,pubKey:i.crypto.JwkRsaPubKey,memberships:r.array(l.Type),vaultAccess:r.readonlyArray(u.cG),userCount:r.number},"partial")],"Group"),p=r.readonly(r.type({groups:r.array(y),totalCount:r.number}),"GroupsResponse"),m=c(((e,t)=>{const n=(0,a.KO)(e,d);return{name:"getGroups",method:"GET",url:`/api/v1/groups${(0,a.Pj)({limit:t?.limit,offset:t?.offset,search:t?.search,sort:t?.sort,sortDir:t?.sortDir,membershipsOnly:t?.membershipsOnly,attrs:n})}`,responseType:r.array(y)}})),f=c(((e,t)=>{const n=(0,a.KO)(e,d);return{name:"searchGroupsCount",method:"GET",url:`/api/v1/groups/count${n.length>0?"?attrs="+n.join(","):""}${(0,a.Pj)({search:t?.search})}`,responseType:r.number}})),g=c(((e,t)=>{const n=(0,a.KO)(t,d);return{name:"getGroup",method:"GET",url:`/api/v2/group/${e}${n.length>0?"?attrs="+n.join(","):""}`,responseType:y}})),h=r.readonly(r.type({uuid:r.string,pubKey:i.crypto.JwkRsaPubKey}),"GroupPubKey"),v=c((e=>({name:"getGroupPubKeys",method:"GET",url:`/api/v1/group/pubkeys?uuids=${e.join(",")}`,responseType:r.array(h)}))),C=c((e=>({name:"updateGroup",method:"PUT",url:`/api/v1/group/${e.uuid}/attrs`,body:e,responseType:i.ignore}))),A=c(((e,t)=>({name:"updateGroupPermissions",method:"PUT",url:`/api/v1/group/${e}/permissions`,body:{permissions:t},responseType:i.ignore}))),w=c((e=>({name:"createGroup",method:"POST",url:"/api/v1/group",body:e,responseType:i.ignore}))),S=c((e=>({name:"deleteGroup",method:"DELETE",url:`/api/v1/group/${e}`,responseType:i.ignore}))),T=c((e=>({name:"markGroupReadyForPurging",method:"POST",url:`/api/v1/group/${e}/purge`,responseType:i.ignore}))),P=r.readonly(r.partial({currentUserMustResetPassword:r.boolean}),"UpdateGroupMembershipsResponse"),b=c(((e,t,n)=>({name:"updateGroupMembershipRole",method:"PATCH",url:`/api/v1/group/${t}/person/${e}/role/${n}`,responseType:i.ignore}))),R=c(((e,t)=>({name:"patchGroupMemberships",method:"PATCH",url:`/api/v3/group/${e}/membership`,body:t,responseType:P}))),E=c(((e,t)=>({name:"patchUserMemberships",method:"PATCH",url:`/api/v2/user/${e}/membership`,body:t,responseType:P}))),I=c((e=>({name:"addRecoveryKeysetToGroup",method:"PUT",url:`/api/v1/group/${e.uuid}/recoverykeyset`,body:e,responseType:i.ignore}))),U=r.readonly(r.type({csv:r.string}),"GetGroupMembersCsvResponse"),O=c((e=>({name:"getGroupMembersCsv",method:"GET",url:`/api/v1/group/${e}/members/csv`,responseType:U}))),k=r.readonly(r.type({count:r.number}),"UniqueUserCountResponse"),D=r.readonly(r.type({groupUuids:r.array(r.string)}),"UniqueUserCountForGroupsRequest"),M=c((e=>({name:"postUniqueUserCountForGroups",method:"POST",url:"/api/v3/group/unique/users",body:e,responseType:k}))),F=r.readonly(r.type({applicationUuids:r.array(r.string)}),"GroupApplicationAssignmentRequest"),_=c(((e,t)=>({name:"putGroupApplicationAssignment",method:"PUT",url:`/api/v1/group/${e}/assign-applications`,body:t,responseType:i.ignore})))},58617:function(e,t,n){n.d(t,{Me:function(){return c},XH:function(){return y},ZO:function(){return l},a8:function(){return f},kt:function(){return d},o3:function(){return g},os:function(){return p},vU:function(){return m}});var r=n(69243),i=n(98798),s=n(73820),o=n(86560),a=n(78359);const u=(0,s.F)("web-api/api/hibp.ts"),c=r.readonly(r.type({name:r.string,domain:r.string,title:r.string,date:r.string,addedDate:r.string,description:r.string,dataClasses:r.array(r.string),isSpamList:(0,i.withDefault)(r.boolean,!1),notifiedDate:(0,i.withDefaultUndefined)(r.string)}),"HibpBreach"),l=r.readonly(r.intersection([r.type({email:r.string,breachNames:r.array(r.string)},"type"),r.partial({aliases:r.array(r.string),user:o.kY,invitePending:r.boolean,inviteExpired:r.boolean},"partial")]),"HibpUser"),d=r.readonly(r.type({domains:r.array(r.string),users:r.array(l),breaches:r.array(c),lastRunAt:(0,i.withDefaultUndefined)(r.string),isTruncated:r.boolean,numActive:r.number,numInactive:r.number}),"HibpDomainReport"),y=r.readonly(r.type({csv:r.string}),"HibpDomainReportCsv"),p=u((()=>({name:"getHibpReport",method:"GET",url:"/api/v1/report/hibp",options:{timeout:6e4},responseType:r.array(c)}))),m=u((e=>({name:"getHibpDomainReport",method:"GET",url:`/api/v1/report/hibp/domain/${e}`,options:{timeout:6e4},responseType:d}))),f=u(((e,t)=>({name:"getHibpDomainReportCsv",method:"GET",url:`/api/v1/report/hibp/domain/${e}/csv${(0,a.Pj)({reportType:t})}`,options:{timeout:6e4},responseType:y}))),g=u((e=>({name:"postHibpDomainReportNotify",method:"POST",url:"/api/v1/report/hibp/domain/notify",body:e,responseType:i.ignore})))},40508:function(e,t,n){n.d(t,{R:function(){return s},w:function(){return o}});var r=n(69243);const i=(0,n(73820).F)("web-api/api/icons.ts"),s=r.readonly(r.type({version:r.string,icons:r.readonlyArray(r.type({url:r.string,description:r.string}))}),"IconSet"),o=i((e=>({name:"getIcons",method:"GET",url:`/api/v1/icons/${e}`,responseType:s})))},71215:function(e,t,n){n.d(t,{$2:function(){return v},BI:function(){return c},HT:function(){return d},J1:function(){return a},LW:function(){return o},SJ:function(){return f},Sl:function(){return C},_X:function(){return u},dN:function(){return h},gN:function(){return p},ic:function(){return m},jm:function(){return l},t:function(){return g},uq:function(){return y}});var r=n(69243),i=n(98798);const s=(0,n(73820).F)("web-api/api/identity.ts"),o=r.readonly(r.type({identityAccessToken:r.string}));var a;!function(e){let t,n;!function(e){e.Oidc="OIDC",e.Saml="SAML"}(t=e.SsoProtocolType||(e.SsoProtocolType={})),function(e){e.Group="group",e.User="user"}(n=e.ApplicationAssignmentResourceType||(e.ApplicationAssignmentResourceType={}));const s=(0,i.fromStringEnum)(t,"SsoProtocolType"),o=(0,i.fromStringEnum)(n,"ApplicationAssignmentResourceType");let a;!function(e){e.Active="active",e.Inactive="inactive",e.Pending="pending"}(a=e.ApplicationStatusType||(e.ApplicationStatusType={}));const u=(0,i.fromStringEnum)(a,"ApplicationStatusType"),c=r.readonly(r.partial({allowed_redirect_uris:r.array(r.string),allowed_logout_uris:r.array(r.string),initiate_login_uri:r.string,client_secret:r.union([r.string,r.undefined])})),l=r.readonly(r.partial({configuration_type:r.union([r.literal("metadata"),r.literal("explicit")]),service_provider_metadata_url:r.union([r.string,r.undefined]),service_provider_metadata_xml:r.union([r.string,r.undefined]),acs_url:r.union([r.string,r.undefined]),entity_id:r.union([r.string,r.undefined]),relay_state:r.union([r.string,r.undefined]),name_id_format:r.union([r.string,r.undefined]),logout_url:r.union([r.string,r.undefined]),binding_type:r.union([r.string,r.undefined]),user_attributes:r.record(r.string,r.string),group_attributes:r.record(r.string,r.string)})),d=r.readonly(r.partial({OidcConfiguration:r.union([c,r.undefined]),SamlConfiguration:r.union([l,r.undefined])})),y=r.readonly(r.type({resource_type:r.union([o,r.string]),resource_uuid:r.string}));e.ManagedApplication=r.readonly(r.type({assignments:r.union([r.array(y),r.undefined]),catalog_uuid:r.union([r.string,r.undefined]),configuration:d,created_at:r.string,kolide_enabled:r.boolean,name:r.string,status:u,type:r.union([s,r.string]),updated_at:r.string,url:r.union([r.string,r.undefined]),uuid:r.string}),"SsoApplication"),e.ManagedApplicationsResponse=r.readonly(r.type({applications:r.array(e.ManagedApplication)})),e.ManagedApplicationConfiguration=r.readonly(r.type({configuration:d,name:r.string,type:r.union([s,r.string])}),"SsoApplication"),e.ManagedApplicationDisplayProperties=r.readonly(r.type({login_initiation_url:r.string,name:r.string,uuid:r.string,service_provider_url:r.string}))}(a||(a={}));const u=r.readonly(r.type({userApplications:r.array(a.ManagedApplicationDisplayProperties)},"UserApplication")),c=r.readonly(r.type({certificate:r.string})),l=s((()=>({name:"getIdentityAccessToken",method:"POST",url:"/api/v1/oidc/token",responseType:o}))),d=s((()=>({name:"getUserApplications",method:"GET",url:"/api/v1/user/applications",responseType:u}))),y=s((e=>({name:"createSsoApp",method:"POST",url:"/api/v1/idp/application",body:e,responseType:a.ManagedApplication}))),p=s((e=>({name:"deleteSsoApp",method:"DELETE",url:`/api/v1/idp/applications/${e}`,responseType:i.ignore}))),m=s((e=>({name:"patchSsoApp",method:"PATCH",url:`/api/v1/idp/applications/${e.uuid}`,body:e,responseType:a.ManagedApplication}))),f=s((()=>({name:"getAccountApplications",method:"GET",url:"/api/v1/idp/applications",responseType:a.ManagedApplicationsResponse}))),g=s((e=>({name:"getApplicationDetails",method:"GET",url:`/api/v1/idp/applications/${e}`,responseType:a.ManagedApplication}))),h=s(((e,t)=>({name:"putApplicationGroupAssignment",method:"PUT",url:`/api/v1/applications/${e}/assign-groups`,body:{groupUuids:t},responseType:i.ignore}))),v=s((e=>({name:"patchApplicationDeviceCheckStatus",method:"PATCH",url:"/api/v1/idp/applications/device_check_status",body:e,responseType:i.ignore}))),C=s((()=>({name:"getAccountHandoffCertificate",method:"GET",url:"/api/v1/idp/account-certificate",responseType:c})))},14521:function(e,t,n){n.r(t),n.d(t,{ACTIVITIES_BATCH_SIZE:function(){return _.bU},AbortSignal:function(){return It.Rw},AccessorPreview:function(){return qn.PF},Account:function(){return r.mR},AccountAttrs:function(){return r.NE},AccountFlags:function(){return r.uX},AccountInfo:function(){return Ps.wP},AccountMeta:function(){return r.XG},AccountRegistrationResponse:function(){return Ps.aX},AccountSettings:function(){return r.H6},AccountSupportInfo:function(){return go.Xh},AccountTemplatesResponse:function(){return xo.Ow},AccountTransferDetails:function(){return Xo},AccountUserCounts:function(){return r.u9},ActivationHubTaskName:function(){return v},Activity:function(){return _.cS},ActivityFeedType:function(){return _.NE},ActivityLogTotalReports:function(){return _.yt},ActivityWithCursor:function(){return _.hI},AddRecoverableMaterialRequest:function(){return Yu},AddRecoverableMaterialResponse:function(){return Hu},AffectedUserCountsResponse:function(){return fo.iH},AggregateVaultSnapshotApp:function(){return eu},AggregateVaultSnapshotsRequest:function(){return Qa},AggregateVaultSnapshotsResponse:function(){return tu},AllowAccountCreationLastUpdatedByUser:function(){return jr},AllowAccountCreationPolicyDefinition:function(){return Zr},AllowAccountCreationPolicyResponse:function(){return Yr},AllowedWatchtowerDomainsSettings:function(){return r.BG},ApplicationCatalogItem:function(){return fc},ApplicationCatalogReponse:function(){return gc},AttestationConveyancePreference:function(){return It.Du},Auth:function(){return K.gx},AuthMethod:function(){return Kt},AuthParams:function(){return K.Lk},AuthStates:function(){return Sr.GA},AuthenticationExtensionsClientInputs:function(){return It.dy},AuthenticatorAssertionResponse:function(){return It.re},AuthenticatorAttachment:function(){return It.Ye},AuthenticatorAttestationResponse:function(){return It.n0},AuthenticatorSelectionCriteria:function(){return It.XK},AuthenticatorTransport:function(){return It.VC},AutoDeleteSuspendedUsersPolicyRequest:function(){return r.ht},AutoDeleteSuspendedUsersPolicyResponse:function(){return r.ju},AutoDeleteSuspendedUsersSettings:function(){return r.G4},AutoLockLastUpdatedByUser:function(){return Rr},AutoLockPolicyDefinition:function(){return br},AutoLockPolicyResponse:function(){return Er},BannerClosedStatus:function(){return V},BannerGroupTimeouts:function(){return L},BannerInstance:function(){return B},BannerInstances:function(){return x},BasePerson:function(){return Tr.NA},BeginDomainVerificationResponse:function(){return Wo.O$},BillingInfo:function(){return r.O1},BillingSettings:function(){return r.IV},BillingSupportInfo:function(){return go.tU},BleAuthenticatorTransport:function(){return It.uY},BrexClientInfoResponse:function(){return ma},BrexRefreshToken:function(){return da},BrexRequestAccessTokenResponse:function(){return fa},BrexVerifier:function(){return la},CheckDomainAvailabilityResponse:function(){return r.gB},CheckDomainRequest:function(){return r.yK},ClientRestrictionSettings:function(){return r.a6},CodeResponse:function(){return K.O8},CombinedObjectAccessor:function(){return qn.WM},CompanyRole:function(){return Ps.ks},CompleteAuthResponse:function(){return K.HJ},ConfirmKeyResponse:function(){return K.Nt},CreateRecoveryKeyRequest:function(){return _u},CreateRecoveryPolicyRequest:function(){return Gu},CreateRecoveryPolicyResponse:function(){return Zu},CreateServiceAccountPreflightResponse:function(){return cs},CredentialAssertionResponse:function(){return It.m_},CredentialBundleAuthResponse:function(){return Rt.Wy},CredentialCreationOptions:function(){return It.a0},CredentialCreationResponse:function(){return It.Ev},DEFAULT_SNAPSHOT_RETRIEVAL_PAGE_SIZE:function(){return Ja},DataType:function(){return qn.g},DefaultByCreationParams:function(){return ce.uf},DelegateSessionResponse:function(){return K.rt},DepartureReason:function(){return Co},DepartureType:function(){return vo},DetailedVaultReportingStatsResponse:function(){return Cu},DeviceEnrollment:function(){return yo},DeviceEnrollmentRequest:function(){return Xs},DeviceEnrollmentResponse:function(){return Qs},DeviceEnrollmentState:function(){return eo},DeviceEnrollmentStateCodec:function(){return to},DeviceEnrollmentStatusResponse:function(){return ro},DiscouragedUserVerificationRequirement:function(){return It.a2},DsecretProxyResponse:function(){return K.wG},DsecretResponse:function(){return K.PJ},DuoResponse:function(){return K.rR},DuoSettings:function(){return r.OK},Durations:function(){return ko.UF},EMAIL_KEY_HANDLE:function(){return Un.nu},EnableMfaResponse:function(){return Un.VH},EncryptedCredentialBundle:function(){return Et.A1},EncryptedDeviceCredentials:function(){return Et.oV},EntityCounts:function(){return r.YY},Event:function(){return _.ju},ExpiresIn:function(){return cr},ExtendedPartialUser:function(){return Sr.Fp},FastmailAccountId:function(){return oa},FastmailVerifier:function(){return sa},Feature:function(){return Da},FeaturesList:function(){return Ma},Feedback:function(){return $e},File:function(){return Xe},FileReference:function(){return Zo.hy},FindSsoGroupDeadlineResponse:function(){return fo.fA},FirewallRule:function(){return ct.ey},FirewallRuleScope:function(){return ct.QS},FirewallRules:function(){return ct.SJ},GatedFeatureTrial:function(){return r.Kh},GetAccountHandoffCertificateResponse:function(){return vc.BI},GetAccountReportCsvResponse:function(){return Bi.IU},GetActivationHubTasksResponse:function(){return A},GetCombinedObjectAccessorsResponse:function(){return qn.Y2},GetEmailTemplateResponse:function(){return je},GetEmailTemplatesResponse:function(){return Ze},GetGroupMembersCsvResponse:function(){return lt.z4},GetGroupsResponse:function(){return lt.Tl},GetIdentityAccessTokenResponse:function(){return vc.LW},GetIntegrationsResponse:function(){return ss},GetPendingInvitationResponseIo:function(){return Cr},GetServiceAccountsResponse:function(){return rs},GetSignInAttemptRequest:function(){return As},GetSignInAttemptsResponse:function(){return Cs},GetSignInAttemptsResponseV2:function(){return ws},GetSlackChannelsResponse:function(){return Ds},GetSuggestedDomainResponse:function(){return r.sU},GetUserApplicationsResponse:function(){return vc._X},GetUserCredentialsResponse:function(){return It.yV},GetVaultItemSnapshotsByUuidsRequest:function(){return iu},GetVaultItemSnapshotsRequest:function(){return qa},GetVerifiedDomainsResponse:function(){return Wo.FG},GetWebAuthnChallengeResponse:function(){return Un._Y},Group:function(){return lt.ZA},GroupApplicationAssignmentRequest:function(){return lt.mO},GroupMembership:function(){return lt.IQ},GroupPubKey:function(){return lt.pF},GroupUuidsBatch:function(){return fu},HibpBreach:function(){return Go.Me},HibpDomainReport:function(){return Go.kt},HibpDomainReportCsv:function(){return Go.XH},HibpUser:function(){return Go.ZO},HybridAuthenticatorTransport:function(){return It.er},IconSet:function(){return dt.R},IdentityProviders:function(){return fo.MW},IncomingPackage:function(){return er},IncomingPackageOverviewV2:function(){return ar},IncomingPackageV2:function(){return ur},InsightsBreachesSortAttrs:function(){return mt},InsightsPaginationQueryParams:function(){return At},InsightsReportsSortAttrs:function(){return ft},InsightsSortingQueryParams:function(){return pt},InsightsTeamReport:function(){return St},InsightsTeamReportCsv:function(){return Pt},InsightsTeamReportOverview:function(){return ht},InsightsTeamReportUser:function(){return Ct},InsightsTeamUsageIssueType:function(){return wt},InsightsTeamUsageSortAttrs:function(){return gt},Integration:function(){return is},InternalAuthenticatorTransport:function(){return It.pp},InviteSettings:function(){return r.yM},ItemDetailResponse:function(){return Zo.HA},ItemHistoryMetadata:function(){return Zo.Pm},ItemHistoryResponse:function(){return Zo.eZ},ItemShareAvailableTo:function(){return hn.FR},ItemShareRecipientType:function(){return hn.my},ItemShareState:function(){return hn.II},ItemUsageAction:function(){return fn},ItemsResponse:function(){return Zo.PR},LastAuthDeviceForEnrollment:function(){return zs},LastAuthDeviceType:function(){return Js},LastAuthDeviceTypeCodec:function(){return qs},LastViewedReport:function(){return Bi.UU},LastViewedReports:function(){return Bi.Bx},LimitedVaultsResponse:function(){return ce.qJ},MAX_ALLOWED_FAILED_LOGIN_ATTEMPTS:function(){return Kr},MAX_EMAIL_BATCH_SIZE:function(){return Bi.sG},MAX_SNAPSHOTS_RETRIEVAL_VAULTS_COUNT:function(){return $a},MIN_ALLOWED_FAILED_LOGIN_ATTEMPTS:function(){return _r},MIN_LOCKOUT_PERIOD:function(){return Nr},ManagedAccount:function(){return wn},ManagedAccountState:function(){return An},MasterPasswordPolicySettings:function(){return r.K6},MasterPasswordPolicyType:function(){return r.EO},MfaCodeParams:function(){return Un.aF},MfaConfig:function(){return Un.tb},MfaParams:function(){return Un.wo},MfaResponse:function(){return K.wR},MfaTotpParams:function(){return Un.jM},MfaType:function(){return Un.Lo},MfaWebAuthnParams:function(){return Un.qy},MigratingUserState:function(){return ta},ModernAppVersion:function(){return j.X},MonitoringStatus:function(){return kn},MsgA:function(){return H},MsgB:function(){return W},MustEnableResponse:function(){return K.bV},NativeOidcState:function(){return Rt.o2},NfcAuthenticatorTransport:function(){return It.M6},NotificationType:function(){return xn},ObjectData:function(){return qn.UT},ObjectDataAccess:function(){return qn.FL},ObjectDataAccessAcl:function(){return qn.MO},ObjectDataAccessAclCodec:function(){return qn.xr},ObjectDataAccessAclScopeCodec:function(){return qn.$j},ObjectDataAccessPreflightResponse:function(){return qn.Vy},ObjectDataAccessScope:function(){return qn.mn},ObjectDataAccessScopeCodec:function(){return qn.vO},ObjectDataAccessState:function(){return qn.WT},ObjectDataAccessStateCodec:function(){return qn.ip},ObjectDataAccessorType:function(){return qn.tJ},ObjectDataAccessorTypeCodec:function(){return qn.l3},ObjectDataAccessorsForObjectTypeResponse:function(){return qn.so},ObjectDataAcl:function(){return qn.Rp},ObjectDataAclCodec:function(){return qn.FT},ObjectDataPreflightResponse:function(){return qn.wr},ObjectDataValue:function(){return qn.Ib},ObjectDataWithSpec1Response:function(){return qn.pd},ObjectType:function(){return qn.LP},OidcAuth:function(){return kt},OidcAuthMethod:function(){return Ft},OptionalVaultReportingSyncResponse:function(){return uu},Package:function(){return Qn},PackageOverviews:function(){return lr},PartialUser:function(){return Sr.kY},PasswordAuth:function(){return Ot},PasswordAuthMethod:function(){return Mt},PatchVaultItemsResponse:function(){return Zo.u0},PendingVerifiedDomain:function(){return Wo.yH},Person:function(){return Tr.Fc},PolicyContexts:function(){return zr},PolicyNames:function(){return Xr},PostRecoveryKeyUserRegistrationRequest:function(){return dc},PostRecoveryKeyUserRegistrationResponse:function(){return yc},PreferredUserVerificationRequirement:function(){return It.tC},PreviewGroup:function(){return ce.hA},PreviewUser:function(){return ce.Jz},ProvisionedGroupKeyset:function(){return fi},ProvisionedKeys:function(){return gi},ProvisionedVaultKey:function(){return mi},ProvisioningSettings:function(){return r.VB},PublicKeyCredentialCreationOptions:function(){return It.$V},PublicKeyCredentialDescriptor:function(){return It.PY},PublicKeyCredentialParameters:function(){return It.zN},PublicKeyCredentialRpEntity:function(){return It.g0},PublicKeyCredentialType:function(){return It.fR},PublicKeyCredentialUserEntity:function(){return It.wk},ReadOnlyAuth:function(){return Bt},RecoverableGroupKeyset:function(){return Oi},RecoverableKeys:function(){return Di},RecoverableKeysForPeople:function(){return Mi},RecoverablePackageKey:function(){return ki},RecoverableVaultKey:function(){return Ui},RecoveryAttempt:function(){return Xu},RecoveryAttemptIdentityVerificationCompleteAux:function(){return tc},RecoveryAttemptsResponse:function(){return Qu},RecoveryGetAttemptStatusResponse:function(){return nc},RecoveryGetMaterialResponse:function(){return cc},RecoveryKeyResponse:function(){return Vu},RecoveryKeyStartRequest:function(){return Ru},RecoveryKeyState:function(){return Nu},RecoveryPolicyResponse:function(){return qu},RecoveryPolicyUuidsResponse:function(){return $u},RecoverySrpARequest:function(){return Uu},RecoverySrpBResponse:function(){return Ou},RecoverySrpConfirmKeyRequest:function(){return Du},RecoverySrpConfirmKeyResponse:function(){return Mu},ReplyToEmailSettings:function(){return r.Yj},ReportAccount:function(){return Bi.T3},ReportAccountUser:function(){return Bi.qb},ReportCursors:function(){return Bi.qC},ReportDashboardOverview:function(){return Ni},ReportItem:function(){return Bi.oD},ReportItemUsage:function(){return Bi.LZ},ReportOldDevice:function(){return Bi.Au},ReportOldDeviceDevice:function(){return Bi.Se},ReportOldDevices:function(){return Bi.WL},ReportOldDevicesOverview:function(){return Bi.Ex},ReportOldDevicesOverviewClient:function(){return Bi.m5},ReportOverview:function(){return Bi.am},ReportSectionAccountOverview:function(){return Bi.Rb},ReportSectionExtendedAccountOverview:function(){return Bi.Cr},ReportSectionUserItemUsage:function(){return Bi.Jv},ReportSectionUserOverview:function(){return Bi.gn},ReportSectionVaultItemUsage:function(){return Bi.bE},ReportSectionVaultOverview:function(){return Bi.y3},ReportSections:function(){return Bi.XV},ReportUser:function(){return Bi.z5},ReportUserItemUsage:function(){return Bi.v_},ReportUserItemUsageOverview:function(){return Bi.xp},ReportVault:function(){return Bi.Tp},ReportVaultItemUsage:function(){return Bi.wZ},ReportVaults:function(){return Bi.gq},RequiredUserVerificationRequirement:function(){return It.Ak},ResidentKeyRequirement:function(){return It.RV},RestrictFailedLoginAttemptsPolicyDefinition:function(){return Vr},RestrictFailedLoginAttemptsPolicyResponse:function(){return Br},SendMfaCodeResponse:function(){return Un.T5},SendMsgbRequest:function(){return q},SendTagbRequest:function(){return z},Sender:function(){return or},ServiceAccount:function(){return ts},ServiceAccountBillables:function(){return Qi},ServiceAccountToken:function(){return ji},ServiceAccountType:function(){return Sr.m4},ServiceAccountUser:function(){return ns},ServiceAccountVaultAccess:function(){return Xi},ServiceAccountsPartialUser:function(){return Sr.k2},SessionKeyRestoreResponse:function(){return Pa},SessionKeySaveResponse:function(){return Sa},SetUpCredentialBundleRequest:function(){return Gt},SetUpCredentialBundleResponse:function(){return Zt},SharedCredentialBundle:function(){return X},SidebarNavPolicy:function(){return kr},SidebarNavigationPoliciesSettings:function(){return r.FS},SignInAttemptReasons:function(){return ms},SignInAuxInfoTypes:function(){return fs},SignInTokenDetails:function(){return Et.bm},Signup:function(){return Ps.Al},SignupFeatureCreditCardForm:function(){return Ps.fJ},SignupFeatureUnlockWithPasskey:function(){return Ps.$F},SignupFeatures:function(){return Ps.p3},SlackApp:function(){return Es},SlackAppState:function(){return Rs},SlackChannel:function(){return ks},SlackGroup:function(){return _s},SlackNonce:function(){return Is},SlackSettings:function(){return r.$1},SlackTeam:function(){return Ms},SlackUser:function(){return Us},SlackUsers:function(){return Os},SrpResponse:function(){return K.$6},SsoApplication:function(){return vc.J1},SsoAuthResponse:function(){return Rt.SJ},SsoAuthenticationPolicy:function(){return fo.r7},SsoFederationSettings:function(){return fo.cp},SsoGroup:function(){return fo.JQ},SsoMigrationGracePeriod:function(){return fo.GQ},SsoOidcIdentity:function(){return Ps.BH},SsoOidcState:function(){return Rt.Uc},SsoOidcWellKnownSettingsRequest:function(){return fo.rB},SsoSettings:function(){return fo.SO},SsoSignInOptions:function(){return Lt},SsoState:function(){return fo.W3},SsoValidateResponse:function(){return fo.o4},StandardMfaParams:function(){return Un.Z$},StartAuthResponse:function(){return K.qu},StartEmailVerificationRequest:function(){return ic},StartEmailVerificationResponse:function(){return sc},StartRecoveryResponse:function(){return Eu},SubmitEmailVerificationRequest:function(){return ac},SupportGetAccounts:function(){return go.h},SupportInfo:function(){return go.Kc},SupportSettings:function(){return r.Be},TOTP_KEY_HANDLE:function(){return Un.bC},TagA:function(){return $},TagB:function(){return J},Task:function(){return C},TeamMemberPoliciesSettings:function(){return r.vC},TimePeriod:function(){return ko.XH},TotpResponse:function(){return K.rb},TrustedDeviceUpgradeEventRequest:function(){return Et.IR},TrustpilotData:function(){return Mo},TwoFactorSettings:function(){return r.Rr},UniqueUserCountForGroupsRequest:function(){return lt.c9},UniqueUserCountResponse:function(){return lt.hu},UpdateGroupMembershipsResponse:function(){return lt.dU},UpdateObjectDataRequest:function(){return qn.rb},UpdateSignupRequest:function(){return Ps.VD},UsbAuthenticatorTransport:function(){return It.gq},User:function(){return qi.n5},UserCombinedObjectDataAccess:function(){return qn.gk},UserCombinedObjectDataAccessResponse:function(){return qn.$N},UserCookie:function(){return Ko},UserFilterType:function(){return Bi.cy},UserFlags:function(){return r.xW},UserKeysets:function(){return vn.C},UserMeta:function(){return Ps.wd},UserPubKey:function(){return Tr.RN},UserSupportInfo:function(){return go.pc},UserVerificationRequirement:function(){return It.gP},UserWebauthnCredential:function(){return It.Gk},Vault:function(){return ce.jc},VaultAccess:function(){return ce.cG},VaultClaim:function(){return Gi},VaultItem:function(){return Zo.nc},VaultItemSnapshotsByUuidsResponse:function(){return su},VaultItemSnapshotsResponse:function(){return za},VaultItemTemplate:function(){return xo._t},VaultItemTemplateAttrs:function(){return xo.lm},VaultItemTemplateIcons:function(){return xo.hc},VaultManagers:function(){return Yo},VaultReportingGroupMembership:function(){return gu},VaultReportingGroupMembershipsResponse:function(){return hu},VaultReportingVaultAccess:function(){return yu},VaultReportingVaultAccessResponse:function(){return pu},VaultReportingVaultOverviewResponse:function(){return Ha},VaultUuidsBatch:function(){return du},VaultsReportAttributes:function(){return Bi.Z3},VaultsReportTypes:function(){return Bi.zq},VerifiedDomain:function(){return Wo.S6},VerifiedDomainType:function(){return Wo.K2},VerifyMfaResponse:function(){return Un.R$},WatchtowerReportItem:function(){return E},WatchtowerReportVaultData:function(){return R},WatchtowerReports:function(){return I},WatchtowerStats:function(){return U},WebAuthnResponse:function(){return K.$i},WebauthnAssertion:function(){return It.nT},WebauthnAuth:function(){return Dt},WebauthnAuthMethod:function(){return _t},WebauthnCredentialDescriptor:function(){return It.x0},WebauthnPublicKeyRequest:function(){return It.T6},WellKnownUrlRequest:function(){return fo.OH},WellKnownUrlResponse:function(){return fo.g5},acceptProvision:function(){return yi},acknowledgeNotification:function(){return Yn},activateAccount:function(){return r.NG},activateRecoveryKey:function(){return xu},addCredentialBundle:function(){return xt},addDevice:function(){return ke},addObjectData:function(){return qn.Ov},addRecoverableMaterial:function(){return Wu},addRecoveryKeysetToGroup:function(){return lt.rZ},addVaultAccess:function(){return ce.qu},aggregateVaultSnapshots:function(){return nu},beginChangeEmail:function(){return qi.w$},beginDomainVerification:function(){return Wo.sX},beginRecovery:function(){return Ri},billing:function(){return Sc},cancelChangeEmail:function(){return qi.wH},cancelDeviceEnrollment:function(){return co},cancelRecovery:function(){return Ii},changeAccountType:function(){return r.W9},changeDomain:function(){return r.Ie},changeTemplatesState:function(){return xo.sp},changeUserAvatar:function(){return Tr.j_},changeUserName:function(){return Tr.I_},checkDomainAvailability:function(){return r.xx},checkProvisioningEmailVerification:function(){return di},completeActivationHubTask:function(){return S},completeAuth:function(){return K.oe},completeChangeEmail:function(){return qi.UO},completeDomainVerification:function(){return Wo.S3},completeRecovery:function(){return Fi},completeReplyToConfirmation:function(){return un},completeUserProvision:function(){return hi},confirmKeyAuth:function(){return K.rS},confirmUsersWithMemberships:function(){return Tr.RM},confirmUsersWithMembershipsAndVaultAccessList:function(){return Tr.A3},confirmUsersWithVaultAccessList:function(){return Tr.Rj},continueRecovery:function(){return Ei},convertPwnedApiResponseToHashes:function(){return bo},createAccountGatedFeatureTrialAction:function(){return Ac},createAccountTransferVaultPreflight:function(){return ce.tJ},createDetailedVaultReportingPubkey:function(){return ja},createGroup:function(){return lt.sS},createItemShare:function(){return hn.L9},createLaunchSession:function(){return In},createManagedAccount:function(){return Rn},createMonitoringCheck:function(){return Dn},createObjectData:function(){return qn.E6},createObjectDataAccess:function(){return qn.eR},createProvisionUser:function(){return ri},createProvisioningProgressStep:function(){return $o},createRecoveryKey:function(){return Ku},createRecoveryPolicy:function(){return ju},createServiceAccountPreflight:function(){return ls},createServiceAccountV3:function(){return os},createSsoApp:function(){return vc.uq},createSsoSettings:function(){return fo.rv},createVault:function(){return ce.Id},createVaultForAccountTransfer:function(){return ce.Oh},createWatchtowerPubkey:function(){return F},delegateSession:function(){return K.Vm},deleteAccessorFromVault:function(){return ce.pD},deleteAccount:function(){return r.tm},deleteAccountCookie:function(){return Bo},deleteAllDevices:function(){return Ke},deleteDevice:function(){return De},deleteGroup:function(){return lt.iE},deleteInactiveDevices:function(){return Me},deleteInviteVault:function(){return pn},deleteItemShare:function(){return hn.c$},deleteObjectData:function(){return qn.D7},deleteObjectDataAccess:function(){return qn._g},deletePerson:function(){return Tr.jt},deleteRecoveryKey:function(){return Lu},deleteSsoApp:function(){return vc.gN},deleteUserCookie:function(){return Lo},deleteUserCredential:function(){return It.Jd},deleteUsers:function(){return Tr.Vt},deleteVault:function(){return ce.aV},deleteVaultItemHistory:function(){return Zo.fb},deleteVaultPreflight:function(){return ce.sh},deleteVerifiedDomain:function(){return Wo.I4},destroySessionRestorationKey:function(){return Ra},disableMfa:function(){return Un.B2},disableServiceAccountAccess:function(){return ce.Uh},disableTravelSafe:function(){return ce.hg},enableMfa:function(){return Un.wk},enableMfaWithAuth:function(){return K.ug},enableServiceAccountAccess:function(){return ce.uq},enableTravelSafe:function(){return ce.pT},endpointForFile:function(){return o.F},extendSession:function(){return K.xJ},externalUserActorType:function(){return _.y2},findFirstDateOfDuration:function(){return ko.Cb},findOldestUsageDate:function(){return ko.Vt},findRecoveryDetails:function(){return Si},generateReplyToConfirmation:function(){return an},getAccountApplications:function(){return vc.SJ},getAccountHandoffCertificate:function(){return vc.Sl},getAccountOverview:function(){return m},getAccountReport:function(){return Bi.$F},getAccountReportCsv:function(){return Bi.u4},getAccountShareSettings:function(){return hn.S0},getAccountTemplates:function(){return xo.q3},getAccountTransfersDetails:function(){return Qo},getAccountUserCounts:function(){return r.UG},getAccountWithAttrs:function(){return r.M3},getActivationHubTasks:function(){return w},getActivityFeed:function(){return _.xG},getActivityLogDefaultStartTime:function(){return _.eY},getAffectedUserCounts:function(){return fo.gy},getAllObjectDataWithDataSpec1:function(){return qn.HN},getAllowAcocuntCreationPolicy:function(){return Hr},getAppDetails:function(){return vc.t},getApplicationsCatalog:function(){return hc},getAuthMethods:function(){return Vt},getAutoDeleteSuspendedUsersPolicies:function(){return Jr},getAutoLockPolicy:function(){return Ir},getAutomatedQuest:function(){return Pu},getBannersForSession:function(){return G},getBrexClientInfo:function(){return ga},getCombinedObjectAccessors:function(){return qn.aU},getCommonPasswordsList:function(){return Eo},getCreateVaultPreflight:function(){return ce.yX},getDashboardReport:function(){return Vi},getDateForVaultsFilter:function(){return ce.FA},getDefaultTemplate:function(){return xo.NJ},getDefaultVaultPermissions:function(){return Ua},getDeletedVaultItems:function(){return Zo.rL},getDeletedVaultItemsDeprecated:function(){return Zo.ou},getDetailedVaultReportingPubkey:function(){return Ya},getDetailedVaultReportingStats:function(){return Au},getDeveloperReport:function(){return me},getDeveloperServiceAccountsReport:function(){return Ee},getDeveloperServiceAccountsReportCsv:function(){return Ue},getDeveloperSharedVaultsReport:function(){return Se},getDeveloperSharedVaultsReportCsv:function(){return Pe},getDeveloperUsersReport:function(){return he},getDeveloperUsersReportCsv:function(){return Ce},getDeviceEnrollmentStatus:function(){return io},getEmailSubscriptions:function(){return Be},getEmailTemplateByUuid:function(){return He},getEmailTemplates:function(){return Ye},getEncryptedCredentialBundle:function(){return Yt},getEnrollment:function(){return po},getEveryoneVault:function(){return ce.Fv},getFeatures:function(){return Fa},getFile:function(){return tt},getFileIdsFromItemUuid:function(){return rt},getFileKey:function(){return it},getFileV2:function(){return nt},getFileWithRedirect:function(){return ot},getFilteredActivityLogReports:function(){return _.Bm},getFilteredActivityLogTotalReports:function(){return _.hG},getFirewallRules:function(){return ct.tW},getGeneratedPasswordsVault:function(){return ce.HN},getGridSlackChannels:function(){return Bs},getGridSlackGroups:function(){return Ls},getGridSlackTeams:function(){return Gs},getGridSlackUsers:function(){return xs},getGroup:function(){return lt.ex},getGroupDeadline:function(){return fo.Cj},getGroupMembersCsv:function(){return lt.FI},getGroupPubKeys:function(){return lt.qc},getGroups:function(){return lt.jA},getHibpDomainReport:function(){return Go.vU},getHibpDomainReportCsv:function(){return Go.a8},getHibpReport:function(){return Go.os},getIcons:function(){return dt.w},getIdentityAccessToken:function(){return vc.jm},getIncomingPackage:function(){return rr},getIncomingPackageV2:function(){return mr},getIncomingPackages:function(){return nr},getIncomingPackagesV2:function(){return yr},getInsightsTeamReport:function(){return Tt},getInsightsTeamReportCsv:function(){return bt},getInsightsTeamReportOverview:function(){return vt},getIntegrations:function(){return as},getInviteVaults:function(){return dn},getItemReportWithCursors:function(){return Bi.$6},getItemReportWithFilters:function(){return Bi.aF},getItemShareAuditDetails:function(){return hn.BX},getItemSharePreflight:function(){return hn.w0},getKeysets:function(){return vn.H},getLastViewedReports:function(){return Bi.d6},getManagedAccounts:function(){return bn},getManagedVault:function(){return ce.vh},getMfa:function(){return Un.Rs},getMfaConfig:function(){return Un.Vr},getModernAppVersions:function(){return j.l},getMonitoringStatus:function(){return Mn},getMoreIncomingPackages:function(){return pr},getNotifications:function(){return jn},getNotifierUrl:function(){return Jn},getObjectDataAccess:function(){return qn.It},getObjectDataAccessForUserAndType:function(){return qn.D6},getObjectDataAccessPreflight:function(){return qn.ud},getObjectDataAccessorsForObjectType:function(){return qn.AM},getObjectDataPreflight:function(){return qn.Wp},getOldDevicesReport:function(){return Bi.zv},getOverviewReport:function(){return Bi.uk},getPackagesForVaultItem:function(){return ir},getPartialUsers:function(){return Sr.N0},getPasskeySitesList:function(){return Oo},getPassphraseWordList:function(){return Ro},getPendingDeviceEnrollments:function(){return uo},getPendingInvitation:function(){return wr},getPendingInvitations:function(){return en},getPersonalVault:function(){return ce.XG},getPreAuthFeatures:function(){return _a},getPreviousVersionOfItem:function(){return Zo.ys},getProvisionDetails:function(){return ci},getProvisionedPersonalVault:function(){return pi},getPwnedHashList:function(){return Po},getRecoverableKeysForPeople:function(){return _i},getRecoveryAttempts:function(){return ec},getRecoveryKey:function(){return Bu},getRecoveryPolicies:function(){return Ju},getRecoveryPolicy:function(){return zu},getResendDetails:function(){return ui},getRestrictFailedLoginAttemptsPolicy:function(){return Lr},getServiceAccount:function(){return ds},getServiceAccounts:function(){return us},getShareHistoryForItem:function(){return hn.Ki},getShareSeviceAuthToken:function(){return hn.xd},getSidebarNavPolicies:function(){return Dr},getSignInAttempts:function(){return Ss},getSignInAttemptsV2:function(){return Ts},getSignupDetails:function(){return Ps.PG},getSlackApp:function(){return js},getSlackChannels:function(){return Vs},getSlackGroups:function(){return Zs},getSlackUsers:function(){return Ns},getSsoSettings:function(){return fo.je},getSuggestedDomain:function(){return r.mo},getSupportAccountsList:function(){return go.sD},getSystemVault:function(){return ce.ro},getTrustpilotReviewData:function(){return Fo},getTwoFactorSitesList:function(){return Uo},getUser:function(){return Tr.PR},getUserApplications:function(){return vc.HT},getUserCombinedObjectDataAccess:function(){return qn.$0},getUserCookies:function(){return No},getUserCredentials:function(){return It.Ty},getUserItemUsageOverview:function(){return Bi.z4},getUserMspPermissions:function(){return Bn},getUserProvisionedKeys:function(){return vi},getUserPubKeys:function(){return Tr.F3},getUserReport:function(){return Bi.fP},getVault:function(){return ce.R1},getVaultItemDetails:function(){return Zo.Tq},getVaultItemHistory:function(){return Zo.zQ},getVaultItemSnapshots:function(){return Xa},getVaultItemSnapshotsByUuids:function(){return ou},getVaultItemVersion:function(){return Zo.pw},getVaultItems:function(){return Zo.L},getVaultItemsOverviews:function(){return Zo.Ng},getVaultManagers:function(){return Ho},getVaultReport:function(){return Bi.HD},getVaultReportingGroupMemberships:function(){return vu},getVaultReportingSync:function(){return cu},getVaultReportingVaultAccess:function(){return mu},getVaultReportingVaultOverviews:function(){return Wa},getVaults:function(){return ce._w},getVaultsByCreation:function(){return ce.mz},getVaultsForAccountTransfer:function(){return ce.Tt},getVaultsReport:function(){return Bi.qF},getVerifiedDomains:function(){return Wo.Ly},getWatchtowerData:function(){return Io},getWatchtowerPubkey:function(){return O},getWatchtowerReport:function(){return D},getWatchtowerStats:function(){return M},getWebAuthnChallenge:function(){return Un.ws},insightsTelemetry:function(){return Ca},inviteUsersViaEmail:function(){return nn},inviteViaSlack:function(){return tn},isValidReportParams:function(){return Bi.yq},joinAccount:function(){return r.DZ},kickoffDeviceEnrollment:function(){return no},legacySignUpAccount:function(){return Ps.xH},lockedOutDeleteAccount:function(){return r.xR},lookUpInvitation:function(){return Xt},lookUpTeamInvitation:function(){return Qt},markAwayForTravel:function(){return Tr.yC},markBackFromTravel:function(){return Tr.bU},markGroupReadyForPurging:function(){return lt.zC},markPackageAsRead:function(){return fr},markSignatureInvalid:function(){return mo},parseUrlSearchParamsFromObject:function(){return Ar},patchApplicationDeviceCheckStatus:function(){return vc.$2},patchGroupMemberships:function(){return lt.RN},patchMigratingUserState:function(){return na},patchSsoApp:function(){return vc.ic},patchUserMemberships:function(){return lt.SB},patchVaultItems:function(){return Zo.u7},performBannerAction:function(){return Z},postAccount:function(){return Ps.ts},postAuth:function(){return K.x2},postBrexRefreshToken:function(){return pa},postBrexVerifier:function(){return ya},postFastmailRefreshToken:function(){return ua},postFastmailVerifier:function(){return aa},postFirewallRules:function(){return ct.Rr},postHibpDomainReportNotify:function(){return Go.o3},postImage:function(){return r.mh},postMigratingUsers:function(){return ea},postOidcWellKnownUrl:function(){return fo.ej},postPurgeDeletedVaultItems:function(){return Zo.Dk},postSlackAccessToken:function(){return Ws},postSlackNonce:function(){return Hs},postTemplate:function(){return xo.rZ},postUniqueUserCountForGroups:function(){return lt.sU},promptConfirmChangeEmail:function(){return qi.Gz},putApplicationGroupAssignments:function(){return vc.dN},putGroupApplicationAssignment:function(){return lt.Jl},putVaultReportingSnapshots:function(){return lu},reactivateUsers:function(){return Tr.Od},reauthorizeDevice:function(){return Fe},receiveMsgA:function(){return ee},receiveMsgB:function(){return ne},receiveSharedCredentialBundle:function(){return ae},receiveTagA:function(){return ie},receiveTagB:function(){return oe},recoveryKeyAuthV1Begin:function(){return ku},recoveryKeyAuthV1ConfirmKey:function(){return Fu},recoveryKeyBeginAttempt:function(){return Iu},recoveryKeyGetAttemptStatus:function(){return rc},recoveryKeyGetMaterial:function(){return lc},recoveryKeyPostRegistration:function(){return pc},recoveryKeyStartEmailVerification:function(){return oc},recoveryKeySubmitEmailVerification:function(){return uc},recoveryVerifyEmailAuth:function(){return bi},recoveryVerifyEmailResend:function(){return Pi},recoveryVerifyEmailStart:function(){return Ti},regenerateSignUpLink:function(){return ln},registerServiceAccountToken:function(){return Hi},registerWebauthnCredential:function(){return It.jT},regularUserActorType:function(){return _.SV},removePackageV2:function(){return gr},removePackages:function(){return sr},renameServiceAccountToken:function(){return Wi},reportAuditEvent:function(){return _.uF},reportItemUsage:function(){return gn},reportOutdatedBrowser:function(){return zn},reportUsoAction:function(){return Aa},requestAccountDeletion:function(){return go.Ak},requestBrexAccessToken:function(){return ha},requestSupportEmail:function(){return go.OR},require2FAOnNextSignIn:function(){return _e},resendAllUsersProvision:function(){return ai},resendInvitations:function(){return sn},resendProvisioningEmailVerification:function(){return li},resendUserProvision:function(){return oi},resendVerificationEmail:function(){return Ps.A8},restoreSessionRestorationKey:function(){return ba},revokeAllServiceAccountTokensForAccount:function(){return Ji},revokeInvitations:function(){return on},revokeServiceAccountToken:function(){return $i},saveNotificationSettings:function(){return Hn},saveSessionRestorationKey:function(){return Ta},searchGroupsCount:function(){return lt.Sn},sendFeedback:function(){return Je},sendMfaCode:function(){return Un.rq},sendMsgA:function(){return Q},sendMsgB:function(){return te},sendNoSigninPastMonthEmail:function(){return Bi.LS},sendPackageV2:function(){return dr},sendPackages:function(){return tr},sendTagA:function(){return re},sendTagB:function(){return se},sendUnredeemedFamilyAccountEmail:function(){return Bi.Ju},sendUnusedPrivateVaultEmail:function(){return Bi.hV},setUserCookie:function(){return Vo},setupCredentialBundle:function(){return jt},setupMsp:function(){return Vn},shareCredentialBundle:function(){return ue},signOut:function(){return K.w7},signUpAccount:function(){return Ps.VQ},signUpAndGetInfo:function(){return Ps.pr},signUpUser:function(){return Ps.SA},ssoValidateEnd:function(){return fo.pd},ssoValidateStart:function(){return fo.XK},startAuth:function(){return K.Yf},startOidcAuth:function(){return Rt.r},startUserProvision:function(){return ii},submitDepartureSurvey:function(){return Ao},submitNewUserAuth:function(){return K.UL},suspendMigratedUser:function(){return ra},suspendUserProvision:function(){return si},suspendUsers:function(){return Tr.f1},teamInvitePerson:function(){return rn},timePeriodToDate:function(){return ko.qC},unlinkManagedAccount:function(){return En},unsafeCancelDeviceEnrollment:function(){return lo},unsafeGetDeviceEnrollmentStatus:function(){return so},updateAccount:function(){return r.sG},updateAccountGatedFeatureTrialAction:function(){return wc},updateAccountShareSettings:function(){return hn.tb},updateAllowAccountCreationPolicy:function(){return Wr},updateAutoDeleteSuspendedUsersPolicies:function(){return qr},updateAutoLockPolicy:function(){return Ur},updateBillingSettings:function(){return r.K1},updateBulkGroupVaultAccessPermissions:function(){return ce.nl},updateDefaultVaultPermissions:function(){return Oa},updateEmailSubscriptions:function(){return Le},updateGroup:function(){return lt.mD},updateGroupMembershipRole:function(){return lt.F7},updateGroupPermissions:function(){return lt.B5},updateGroupVaultAccessPermissions:function(){return ce.KE},updateInviteVault:function(){return yn},updateObjectData:function(){return qn.QD},updatePersonVaultAccessPermissions:function(){return ce.ML},updateRestrictFailedLoginAttemptsPolicy:function(){return xr},updateServiceAccount:function(){return ys},updateSidebarNavPolicies:function(){return Mr},updateSignup:function(){return Ps.nq},updateSignupAccountType:function(){return Ps.iu},updateSlackApp:function(){return Ys},updateSsoSettings:function(){return fo.ev},updateUser:function(){return Tr.Nq},updateUserCredential:function(){return It.EC},updateVault:function(){return ce.Lf},updateVaultClientAccess:function(){return ce.zr},updateVerifiedDomain:function(){return Wo.xI},upgradeGuestToMember:function(){return Tr.z6},uploadFile:function(){return st},uploadWatchtowerReport:function(){return k},userFilterTypeOptions:function(){return Bi.sJ},validateItemShareRecipients:function(){return hn.DO},verifyLockedOutAccountDeletion:function(){return r.xz},verifyMfa:function(){return K.BP},verifyOidc:function(){return Rt.Ky},verifyPasskey:function(){return It.Yg},verifyTotp:function(){return Un.cl},verifyWebauthnCredentialAttestation:function(){return It.CS}});var r=n(35606),i=n(69243),s=n(95743),o=n(73820);const a=(0,o.F)("web-api/api/account_overview.ts"),u=i.readonly(i.intersection([i.type({accessVersion:i.number,attrVersion:i.number,contentVersion:i.number,uuid:i.string},"type"),i.partial({snapshotContentVersion:i.number,watchtowerReportNeedsUpdating:i.boolean},"partial")]),"VaultOverview"),c=i.readonly(i.type({permissions:i.number}),"UserOverview"),l=i.readonly(i.intersection([i.type({status:i.keyof({A:!0,C:!0,F:!0,L:!0,T:!0,P:!0}),storageUsed:(0,s.Wc)(i.number,0)},"type"),i.partial({accountWillFreezeAt:i.string,storageCapacity:i.number},"partial")]),"BillingOverview"),d=i.readonly(i.type({isEnabled:i.boolean,serverItemSnapshotPayloadVersion:i.number}),"DetailedVaultReporting"),y=i.readonly(i.type({lastUpdatedAt:i.number}),"ActivationHubOverview"),p=i.readonly(i.intersection([i.type({notifier:i.string,accountVersion:i.number,billingVersion:i.number,templateVersion:i.number,userVersion:i.number,keysetVersion:i.number,userOverview:c,billingOverview:l,hasPackages:i.boolean,supportsItemUsage:i.boolean},"type"),i.partial({vaults:i.readonlyArray(u),watchtowerReportVersion:i.number,detailedVaultReporting:d,activationHubOverview:y},"partial")]),"AccountOverview"),m=a((()=>({name:"getAccountOverview",method:"GET",url:"/api/v2/overview",responseType:p})));var f=n(98798),g=n(78359);const h=(0,o.F)("web-api/api/activation_hub.ts");var v;!function(e){e.DownloadExtension="download-extension",e.SetUpAutofill="set-up-autofill",e.Practice="practice",e.PracticeExtension="practice-extension",e.MigrateData="migrate-data",e.AccessPasswords="access-passwords",e.Unknown="unknown"}(v||(v={}));const C=i.readonly(i.type({uuid:i.string,name:(0,f.withFallback)((0,f.fromStringEnum)(v,"ActivationHubTaskName"),(()=>v.Unknown)),description:i.string,dismissable:i.boolean,tags:i.array(i.string),ordering:i.number,dependencies:i.array(i.string),completedAt:(0,f.withDefaultUndefined)(i.string),dismissed:(0,f.withDefaultUndefined)(i.boolean)}),"Task"),A=i.readonly(i.type({total:i.number,tasks:i.array(C)},"GetActivationHubTasksResponse")),w=h((e=>({name:"getActivationHubTasks",method:"GET",url:`/api/v1/activation-hub/tasks/list${(0,g.Pj)({tags:e.tags,limit:e.limit})}`,responseType:A}))),S=h((e=>({name:"completeActivationHubTask",method:"PUT",url:`/api/v1/activation-hub/tasks/${e.uuid}/completed`,body:{dismissed:e.dismiss,completedAt:e.completedAt},responseType:f.ignore})));var T=n(14502);const P=(0,o.F)("web-api/api/admin_watchtower.ts"),b=i.readonly(i.type({pubKey:T.JwkRsaPubKey}),"WatchtowerPubkey"),R=i.readonly(i.type({encryptedBy:i.string,vaultKeySn:i.number,encVaultKey:f.crypto.JweB,encVaultAttrs:f.crypto.JweB,combinedAcl:i.number}),"WatchtowerReportVaultData"),E=i.readonly(i.intersection([i.type({uuid:i.string,vaultUuid:i.string,vaultType:i.string,updatedAt:i.string,isOutdated:i.boolean,encData:f.crypto.Jwe},"type"),i.partial({vaultName:i.string,vaultData:R},"partial")]),"WatchtowerReportItem"),I=i.readonly(i.type({reports:i.array(E),nextStartUuid:i.string}),"WatchtowerReports"),U=i.readonly(i.type({accountVaultCount:i.number,accountEmptyVaultCount:i.number}),"WatchtowerStats"),O=P((()=>({name:"getWatchtowerPubkey",method:"GET",url:"/api/v1/report/watchtower/pubkey",responseType:b}))),k=P(((e,t)=>({name:"uploadWatchtowerReport",method:"POST",url:`/api/v1/report/watchtower/vault/${e}`,body:t,responseType:s.ID}))),D=P(((e,t)=>({name:"getWatchtowerReport",method:"GET",url:`/api/v1/report/watchtower${(0,g.Pj)({vaultTypes:e,startUuid:t})}`,responseType:I}))),M=P((e=>({name:"getWatchtowerStats",method:"GET",url:`/api/v1/report/watchtower/stats${(0,g.Pj)({vaultTypes:e})}`,responseType:U}))),F=P(((e,t)=>({name:"createWatchtowerPubkey",method:"POST",url:`/api/v1/report/watchtower/pubkey/${e}`,body:{pubKey:t},responseType:s.ID})));var _=n(85962),K=n(92057);const N=(0,o.F)("web-api/api/banners.ts");var V;!function(e){e.Accept="A",e.Dismiss="D"}(V||(V={}));const B=i.readonly(i.type({uuid:i.string,banner:i.string,group:i.number}),"BannerInstance"),L=i.readonlyArray(i.type({group:i.number,until:i.string}),"BannerGroupTimeouts"),x=i.readonly(i.type({instances:(0,f.withDefaultUndefined)(i.array(B)),snooze:(0,f.withDefault)(L,[])}),"BannerInstances"),G=N((e=>({name:"getBannersForSession",method:"GET",url:`/api/v2/banner/instances?groups=${e}`,responseType:x}))),Z=N(((e,t)=>({name:"performBannerAction",method:"POST",url:`/api/v2/banner/instance/${e}/status`,body:{status:t},responseType:x})));var j=n(20793);const Y=(0,o.F)("web-api/api/cpace.ts"),H=i.readonly(i.type({msga:i.string}),"MsgA"),W=i.readonly(i.type({msgb:i.string}),"MsgB"),$=i.readonly(i.type({taga:i.string}),"TagA"),J=i.readonly(i.type({tagb:i.string}),"TagB"),q=i.readonly(i.type({msgb:i.string,signInToken:i.string}),"SendMsgbRequest"),z=i.readonly(i.type({tagb:i.string,signInToken:i.string}),"SendTagbRequest"),X=i.readonly(i.type({encCreds:f.crypto.JweB}),"SharedCredentialBundle"),Q=Y(((e,t)=>({name:"sendMsgA",method:"PUT",url:`/api/v3/device/enrollments/${t}/cpace/msga`,body:{msga:e},responseType:f.ignore}))),ee=Y(((e,t)=>({name:"receiveMsgA",method:"POST",url:`/api/v3/device/enrollments/${t}/cpace/msga`,body:{signInToken:e},responseType:(0,f.withDefaultUndefined)(H),encrypted:!1}))),te=Y(((e,t,n)=>({name:"sendMsgB",method:"PUT",url:`/api/v3/device/enrollments/${n}/cpace/msgb`,body:{msgb:e,signInToken:t},responseType:f.ignore,encrypted:!1}))),ne=Y((e=>({name:"receiveMsgB",method:"GET",url:`/api/v3/device/enrollments/${e}/cpace/msgb`,responseType:(0,f.withDefaultUndefined)(W),decryptResponse:"mustDecryptExceptUndefined"}))),re=Y(((e,t)=>({name:"sendTagA",method:"PUT",url:`/api/v3/device/enrollments/${t}/cpace/taga`,body:{taga:e},responseType:f.ignore}))),ie=Y(((e,t)=>({name:"receiveTagA",method:"POST",url:`/api/v3/device/enrollments/${t}/cpace/taga`,body:{signInToken:e},responseType:(0,f.withDefaultUndefined)($),encrypted:!1}))),se=Y(((e,t,n)=>({name:"sendTagB",method:"PUT",url:`/api/v3/device/enrollments/${n}/cpace/tagb`,body:{tagb:e,signInToken:t},responseType:f.ignore,encrypted:!1}))),oe=Y((e=>({name:"receiveTagB",method:"GET",url:`/api/v3/device/enrollments/${e}/cpace/tagb`,responseType:(0,f.withDefaultUndefined)(J),decryptResponse:"mustDecryptExceptUndefined"}))),ae=Y(((e,t)=>({name:"receiveSharedCredentialBundle",method:"POST",url:`/api/v3/device/enrollments/${t}/share/credentials`,body:{signInToken:e},responseType:(0,f.withDefaultUndefined)(X),encrypted:!1}))),ue=Y(((e,t)=>({name:"shareCredentialBundle",method:"PUT",url:`/api/v3/device/enrollments/${e}/share/credentials`,body:{encCreds:t},responseType:f.ignore})));var ce=n(85486);const le=(0,o.F)("web-api/api/developer_report.ts"),de=i.readonly(i.type({count:i.number,templateUuid:i.string}),"DeveloperReportItemCount"),ye=i.readonly(i.type({numInPrivateVaults:i.number,numInSharedVaults:i.number}),"DeveloperReportItems"),pe=i.readonly(i.type({developerItems:i.record(i.string,ye),numUsers:i.number,numUsersCli:i.number,numUsersSsh:i.number,numServiceAccounts:i.number,numServiceAccountsActive:i.number}),"DeveloperReport"),me=le((e=>({name:"getDeveloperReport",method:"POST",url:"/api/v1/report/developer",responseType:pe,body:{filterGroups:e}}))),fe=i.readonly(i.type({avatar:i.string,cliLastAccessed:i.union([i.string,i.null]),developerItems:i.readonlyArray(de),firstName:i.string,lastName:i.string,uuid:i.string}),"DeveloperUsersReportUser"),ge=i.readonly(i.type({numUsers:i.number,users:i.array(fe)}),"DeveloperUsersReport"),he=le(((e,t,n,r,i)=>({name:"getDeveloperUsersReport",method:"POST",url:"/api/v1/report/developer/users",body:{filterGroups:n,pageNum:e,perPage:t,sortBy:r,sortDir:i},responseType:ge}))),ve=i.readonly(i.type({csv:i.string}),"DeveloperUsersReportCsv"),Ce=le(((e,t,n)=>({name:"getDeveloperUsersReportCsv",method:"POST",url:"/api/v1/report/developer/users/csv",responseType:ve,body:{filterGroups:e,sortBy:t,sortDir:n}}))),Ae=i.readonly(i.type({developerItems:i.readonlyArray(de),uuid:i.string,vault:i.union([ce.jc,i.null])}),"DeveloperSharedVaultsReportVault"),we=i.readonly(i.type({numSharedVaults:i.number,sharedVaults:i.array(Ae)}),"DeveloperSharedVaultsReport"),Se=le(((e,t,n,r,i)=>({name:"getDeveloperSharedVaultsReport",method:"POST",url:"/api/v1/report/developer/shared-vaults",responseType:we,body:{filterGroups:n,pageNum:e,perPage:t,sortBy:r,sortDir:i}}))),Te=i.readonly(i.type({csv:i.string}),"DeveloperSharedVaultsReportCsv"),Pe=le(((e,t,n)=>({name:"getDeveloperSharedVaultsReportCsv",method:"POST",url:"/api/v1/report/developer/shared-vaults/csv",responseType:Te,body:{filterGroups:e,sortBy:t,sortDir:n}}))),be=i.readonly(i.type({numAccounts:i.number,avatar:i.string,canCreateVaults:i.boolean,isCreatorActive:i.boolean,lastAccessedAt:i.union([i.string,i.null]),name:i.string,numDeveloperItems:i.number,numVaults:i.number,tokenCreatedAt:i.string,tokenExpiry:i.union([i.string,i.null]),tokenLastRotatedAt:i.union([i.string,i.null]),uuid:i.string},"DeveloperServiceAccountItem")),Re=i.readonly(i.type({numServiceAccounts:i.number,serviceAccounts:i.array(be)}),"DeveloperServiceAccountsReport"),Ee=le(((e,t,n,r)=>({name:"getDeveloperServiceAccountsReport",method:"POST",url:"/api/v1/report/developer/service-accounts",responseType:Re,body:{pageNum:e,perPage:t,sortBy:n,sortDir:r}}))),Ie=i.readonly(i.type({csv:i.string}),"DeveloperServiceAccountsReportCsv"),Ue=le(((e,t)=>({name:"getDeveloperServiceAccountsReportCsv",method:"POST",url:"/api/v1/report/developer/service-accounts/csv",responseType:Ie,body:{sortBy:e,sortDir:t}}))),Oe=(0,o.F)("web-api/api/device.ts"),ke=Oe((e=>({name:"addDevice",method:"POST",url:"/api/v1/device",body:e,encrypted:!1,responseType:f.ignore}))),De=Oe(((e,t)=>({name:"deleteDevice",method:"DELETE",url:t?`/api/v1/device/${e}/${t}`:`/api/v1/device/${e}`,responseType:f.ignore}))),Me=Oe((()=>({name:"deleteInactiveDevices",method:"DELETE",url:"/api/v1/device/old",responseType:f.ignore}))),Fe=Oe((e=>({name:"reauthorizeDevice",method:"PUT",url:`/api/v1/device/${e}/reauthorize`,responseType:f.ignore}))),_e=Oe((e=>({name:"require2FAOnNextSignIn",method:"DELETE",url:`/api/v1/device/${e}/dsecret`,responseType:f.ignore}))),Ke=Oe((e=>({name:"deleteAllDevices",method:"DELETE",url:`/api/v2/devices/${e}`,responseType:f.ignore}))),Ne=(0,o.F)("web-api/api/email_subscriptions.ts"),Ve=i.readonly(i.type({subscriptions:i.type({newsletter:i.boolean,events:i.boolean,content:i.boolean,announcements:i.boolean,research:i.boolean,unsubscribed:i.boolean})}),"EmailSubscriptions"),Be=Ne((()=>({name:"getEmailSubscriptions",method:"GET",url:"/api/v1/emailsubscriptions",responseType:Ve}))),Le=Ne((e=>({name:"updateEmailSubscriptions",method:"PUT",url:"/api/v1/emailsubscriptions",body:e,responseType:f.ignore}))),xe=(0,o.F)("web-api/api/email_templates.ts"),Ge=i.intersection([i.type({canCustomize:i.boolean,description:i.string,title:i.string,uuid:i.string}),i.partial({content:i.string,options:i.string})]),Ze=i.array(Ge),je=Ge,Ye=xe((()=>({name:"getEmailTemplates",method:"GET",url:"/api/v1/email-templates",responseType:Ze}))),He=xe((e=>({name:"getEmailTemplateByUuid",method:"GET",url:`/api/v1/email-templates/${e}`,responseType:je}))),We=(0,o.F)("web-api/api/feedback.ts"),$e=i.type({message:i.string,canContact:i.boolean,url:i.string},"Feedback"),Je=We((e=>({name:"sendFeedback",method:"POST",url:"/api/v1/feedback",body:e,responseType:s.ID})));var qe=n(35914);const ze=(0,o.F)("web-api/api/file.ts"),Xe=i.intersection([i.type({fileId:i.string},"type"),i.partial({signingKey:f.crypto.JwkSymKey},"partial")],"File"),Qe=42e4,et=e=>"fileId"in e?e.fileId:e.documentId,tt=async(e,t,n,r)=>{const i=et(t);if(!i)throw new f.errors.ClientError(f.errors.ClientErrorCode.missingFileId,"Missing file ID");const s=t.signingKey?`/api/v2/file/${r}/${n}/${encodeURIComponent(i)}`:`/api/v1/file/${encodeURIComponent(i)}`,o=await ot(e,s);if("object"==typeof o&&2===o?.byteLength&&"{}"===f.ab2str(o)){const e=qe.L`Requested corrupted file ${(0,qe.assertLogSafe)(i)} for vault ${(0,qe.assertLogSafe)(r)} and item ${(0,qe.assertLogSafe)(n)}`;throw console.error(e),f.reportError(new f.LoggableError({errorClass:qe.L`CorruptedFileError`,message:e,severityLevel:"warning"})),new f.errors.ClientError(f.errors.ClientErrorCode.corruptedFile,"This file is corrupted.")}return o},nt=async(e,t,n,r)=>{const i=et(t);if(!i)throw new f.errors.ClientError(f.errors.ClientErrorCode.missingFileId,"Missing file ID");const s=`/api/v2/file/${r}/${n}/${encodeURIComponent(i)}`,o=await ot(e,s);if("object"==typeof o&&2===o?.byteLength&&"{}"===f.ab2str(o)){const e=qe.L`Requested corrupted file ${(0,qe.assertLogSafe)(i)} for vault ${(0,qe.assertLogSafe)(r)} and item ${(0,qe.assertLogSafe)(n)}`;throw console.error(e),f.reportError(new f.LoggableError({errorClass:qe.L`CorruptedFileError`,message:e,severityLevel:"warning"})),new f.errors.ClientError(f.errors.ClientErrorCode.corruptedFile,"This file is corrupted.")}return o},rt=ze(((e,t)=>({name:"getFileIdsFromItemUuid",method:"GET",url:`/api/v1/files/${t}/${e}`,responseType:i.array(i.string)}))),it=ze((e=>({name:"getFileKey",method:"GET",url:`/api/v3/filekey/${e}`,responseType:Xe}))),st=ze((e=>({name:"uploadFile",method:"POST",url:"/api/v2/file",body:e,options:{timeout:Qe,dataType:"arraybuffer"},responseType:Xe,encrypted:!1,decryptResponse:"mustDecrypt"}))),ot=async(e,t)=>{const n=await at(e,t);return await ut(e,n)},at=ze((e=>({name:"getFileRedirectUrl",method:"GET",url:e,options:{responseType:"text",headers:{"X-Use-302-Redirect":"false"}},responseType:i.string,encrypted:!1}))),ut=ze((e=>({name:"getFileFromUrl",method:"GET",url:e,options:{responseType:"arraybuffer",timeout:Qe},responseType:f.arrayBuffer,encrypted:!1})));var ct=n(4280),lt=n(49756),dt=n(40508);const yt=(0,o.F)("web-api/api/insights.ts");var pt,mt,ft,gt;!function(e){e.Filter="filter",e.Attribute="sort-by",e.Direction="sort-direction"}(pt||(pt={})),function(e){e.Email="email",e.BreachesCount="breaches-count",e.BreachName="breach-name",e.Date="date",e.MembersCount="members-count",e.Invited="invited"}(mt||(mt={})),function(e){e.VaultName="vault-name",e.VaultType="vault-type",e.ItemsCount="items-count",e.IssuesCount="issues-count"}(ft||(ft={})),function(e){e.TeamMember="team-member",e.AccessDate="access-date",e.JoinDate="join-date"}(gt||(gt={}));const ht=i.readonly(i.type({noLinkedAccountCount:i.number,notUsing1PasswordCount:i.number,notUsingPrivateCount:i.number,teamMembersCount:i.number,guestUsersCount:i.number}),"InsightsTeamReportOverview"),vt=yt((()=>({name:"getInsightsTeamReportOverview",method:"GET",url:"/api/v1/insights/teamusage/overview",responseType:ht}))),Ct=i.readonly(i.type({uuid:i.string,email:i.string,name:i.string,createdAt:i.string,avatar:(0,f.withDefaultUndefined)(i.string),lastAuthAt:(0,f.withDefaultUndefined)(i.string),isNotified:i.boolean,numGroups:(0,f.withDefaultUndefined)(i.number),privateVaultItems:(0,f.withDefaultUndefined)(i.number)}),"InsightsTeamReportUser");var At,wt;!function(e){e.PageNumber="page-number",e.ItemsPerPage="items-per-page"}(At||(At={})),function(e){e.Signins="no-recent-usage",e.FamilyAccount="no-family-accounts",e.PrivateVault="no-private-vault-usage"}(wt||(wt={}));const St=i.readonly(i.type({users:i.readonlyArray(Ct)}),"InsightsTeamReport"),Tt=yt(((e,t,n,r,i)=>({name:"getInsightsTeamReport",method:"GET",url:`/api/v1/insights/teamusage${(0,g.Pj)({[pt.Filter]:e,[At.PageNumber]:t,[At.ItemsPerPage]:n,[pt.Attribute]:r,[pt.Direction]:i})}`,responseType:St}))),Pt=i.readonly(i.type({csv:i.string}),"InsightsTeamReportCsv"),bt=yt(((e,t,n)=>({name:"getInsightsTeamReportCsv",method:"GET",url:"/api/v1/insights/teamusage/csv"+(0,g.Pj)({[pt.Filter]:e,[pt.Attribute]:t,[pt.Direction]:n}),responseType:Pt})));var Rt=n(13691),Et=n(15555),It=n(47250);const Ut=(0,o.F)("web-api/api/auth_methods.ts"),Ot="PASSWORD+SK",kt="OIDC",Dt="WEBAUTHN",Mt=i.type({type:i.literal(Ot)},"PasswordAuthMethod"),Ft=i.intersection([i.type({type:i.literal(kt)},"type"),i.partial({provider:i.string,iconUrl:i.string},"partial")],"OidcAuthMethod"),_t=i.type({type:i.literal(Dt),assertion:It.nT},"type"),Kt=i.readonly(i.union([Mt,Ft,_t]),"AuthMethod"),Nt=i.intersection([i.readonly(i.type({authMethods:i.array(Kt)}),"authMethods"),i.partial({userUuid:i.string},"userUuid"),i.partial({signInAddress:i.string},"signInAddress")],"AuthMethodResponse"),Vt=Ut(((e,t)=>({name:"getAuthMethods",method:"POST",url:"/api/v2/auth/methods",body:{email:e,userUuid:t},responseType:Nt,encrypted:!1}))),Bt=i.readonly(i.type({method:i.string,alg:i.string,iterations:i.number,salt:i.string,v:i.string}),"ReadOnlyAuth"),Lt=i.readonly(i.partial({authOnly:i.boolean,landingPage:i.string}),"SsoSignInOptions"),xt=Ut(((e,t,n)=>({name:"addCredentialBundle",method:"POST",url:"/api/v3/user/devicecredentials",body:{deviceCredentials:e,keyId:t,enrollmentUuid:n},responseType:f.ignore}))),Gt=i.readonly(i.type({deviceCredentials:Et.A1,auth:Bt,activeKeyset:T.KeysetCiphertext}),"SetUpCredentialBundleRequest"),Zt=i.readonly(i.type({accountKeyUuid:i.string}),"SetUpCredentialBundleResponse"),jt=Ut(((e,t,n)=>({name:"setupCredentialBundle",method:"PUT",url:"/api/v3/user/devicecredentials",body:{deviceCredentials:e,auth:t,activeKeyset:n},responseType:Zt}))),Yt=Ut((e=>({name:"getEncryptedCredentialBundle",method:"GET",url:`/api/v3/auth/devicecredentials?keyUuid=${e}`,responseType:Rt.Wy}))),Ht=(0,o.F)("web-api/api/invitation.ts"),Wt=i.readonly(i.type({secret:i.string,accountName:i.string}),"TeamInvitationDetails"),$t=i.readonly(i.type({uuid:i.string,token:i.union([i.string,i.undefined]),accountUuid:i.string,accountName:i.union([i.string,i.undefined]),accountType:i.union([i.string,i.undefined]),accountHost:i.string,disableEmergencyKit:(0,f.withDefault)(i.boolean,!1),showExtensionFirstFlow:(0,f.withDefault)(i.boolean,!1),email:i.string,language:i.string,senderFullName:i.union([i.string,i.undefined]),senderEmail:i.union([i.string,i.undefined]),state:i.union([i.string,i.undefined]),type:i.union([i.string,i.undefined]),sentAt:i.union([i.string,i.undefined]),timeout:i.union([i.number,i.undefined]),acceptedAt:i.union([i.string,i.undefined]),revokedAt:i.union([i.string,i.undefined]),migratingFrom:i.union([i.string,i.undefined]),accountUsesNewKeysets:i.boolean,passwordRules:i.string,iconSet:(0,f.withDefaultUndefined)(dt.R),accountAuthMethods:(0,f.withDefault)(i.array(Kt),[]),isManaged:(0,f.withDefault)(i.boolean,!1)}),"InvitationDetails"),Jt=i.readonly(i.type({email:i.string,reason:i.union([i.literal("is_existing_user"),i.literal("is_existing_guest")])}),"FailedInvites"),qt=i.readonly(i.type({successfulInvites:i.array($t),failedInvites:i.array(Jt)}),"InviteResponse"),zt=i.readonly(i.type({state:i.string,inviteUuid:i.union([i.string,i.undefined]),userUuid:i.union([i.string,i.undefined]),vaultAcl:i.union([i.number,i.undefined]),vaultUuid:i.union([i.string,i.undefined]),shouldConfirm:i.boolean}),"InviteVaultV2"),Xt=Ht(((e,t)=>({name:"lookUpInvitation",method:"GET",url:`/api/v1/invite/${e}/${t}`,responseType:$t,encrypted:!1}))),Qt=Ht((e=>({name:"lookUpTeamInvitation",method:"GET",url:`/api/v1/teaminvite/${e}`,encrypted:!1,responseType:Wt}))),en=Ht((()=>({name:"getPendingInvitations",method:"GET",url:"/api/v1/invites",responseType:i.array($t)}))),tn=Ht((e=>({name:"inviteViaSlack",method:"POST",url:"/api/v1/invite/slack",body:e,options:{timeout:6e4},responseType:i.array($t)}))),nn=Ht(((e,t,n)=>({name:"inviteUsersViaEmail",method:"POST",url:"/api/v1/invite"+(n?`?source=${n}`:""),body:{invites:e,type:t},responseType:i.array(qt)}))),rn=Ht((e=>({name:"teamInvitePerson",method:"POST",url:"/api/v1/teaminvite",body:e,responseType:f.ignore,encrypted:!1}))),sn=Ht((e=>({name:"resendInvitations",method:"GET",url:`/api/v1/invite/resend/${e.join(",")}`,responseType:i.array($t)}))),on=Ht((e=>({name:"revokeInvitations",method:"DELETE",url:`/api/v1/invite/${e.join(",")}`,responseType:f.ignore}))),an=Ht((e=>({name:"generateReplyToConfirmation",method:"POST",url:"/api/v1/invite/replyto/begin",body:{email:e},responseType:f.ignore}))),un=Ht(((e,t)=>({name:"completeReplyToConfirmation",method:"POST",url:"/api/v1/invite/replyto/complete",body:{token:t,email:e},responseType:f.ignore}))),cn=i.readonly(i.type({inviteSecret:i.string}),"RegenerateSignUpLinkResponse"),ln=Ht((()=>({name:"regenerateSignUpLink",method:"PUT",url:"/api/v1/account/teaminvite/regenerate",responseType:cn}))),dn=Ht((e=>({name:"getInviteVaults",method:"GET",url:`/api/v2/invitevault${(0,g.Pj)(e)}`,responseType:i.array(zt)}))),yn=Ht((e=>({name:"updateInviteVault",method:"PUT",url:"/api/v2/invitevault",body:e,responseType:f.ignore}))),pn=Ht((e=>({name:"deleteInviteVault",method:"DELETE",url:"/api/v2/invitevault",body:e,responseType:f.ignore}))),mn=(0,o.F)("web-api/api/item_usage.ts");var fn;!function(e){e.Fill="fill",e.SelectSsoProvider="select-sso-provider",e.EnterItemEditMode="enter-item-edit-mode",e.Export="export",e.Share="share",e.SecureCopy="secure-copy",e.Reveal="reveal"}(fn||(fn={}));const gn=mn((e=>({name:"reportItemUsage",method:"POST",url:"/api/v3/user/itemusage",body:e,responseType:s.ID})));var hn=n(58022),vn=n(66334);const Cn=(0,o.F)("web-api/api/managed_account.ts");var An;!function(e){e.Active="A",e.Unlinked="U"}(An||(An={}));const wn=i.readonly(i.type({uuid:i.string,name:i.string,domain:(0,f.withDefaultUndefined)(i.string),state:(0,f.fromStringEnum)(An,"ManagedAccountState"),activeSeats:(0,f.withDefaultUndefined)(i.number)},"ManagedAccount")),Sn=i.readonly(i.intersection([i.type({name:i.string,country:i.string}),i.partial({website:i.string,region:i.string,zip:i.string})]),"CompanyDetails"),Tn=i.readonly(i.type({kid:i.string,encryptedBy:i.string,encKey:f.crypto.JweB},"ManagedAccountKey")),Pn=(i.readonly(i.type({companyDetails:Sn,managedAccountKey:Tn,eamUserKeyset:f.crypto.KeysetCiphertext},"CreateManagedAccountRequest")),i.readonly(i.type({managedAccountUuid:i.string})),i.readonly(i.type({sessionUuid:i.string,sessionKey:f.crypto.JwkSymKey,managedAccountKey:Tn,mspKey:f.crypto.KeysetCiphertext,notifier:i.string},"LaunchSessionResponse"))),bn=(i.readonly(i.type({type:i.string,accountUuid:i.string,sessionUuid:i.string,sessionKey:f.crypto.JwkSymKey,managedAccountKey:f.crypto.JwkSymKey,mspKey:f.crypto.KeysetCiphertext,notifier:i.string}),"LaunchSessionData"),i.readonly(i.type({type:i.string},"MessageRelayReady")),Cn((()=>({name:"getManagedAccounts",method:"GET",url:"/api/v1/msp/managed-accounts",responseType:i.array(wn)})))),Rn=Cn((e=>({name:"createManagedAccount",method:"POST",url:"/api/v1/msp/managed-accounts",body:e,responseType:wn}))),En=Cn((e=>({name:"unlinkManagedAccount",method:"DELETE",url:`/api/v1/msp/managed-accounts/${e}`,responseType:f.ignore}))),In=Cn((e=>({name:"createLaunchSession",method:"POST",url:"/api/v1/msp/launch",body:e,responseType:Pn})));var Un=n(88764);const On=(0,o.F)("web-api/api/monitoring.ts"),kn=i.readonly(i.partial({status:i.union([i.literal("error"),i.literal("ok"),i.literal("unknown")]),lastChecked:i.string}),"MonitoringStatus"),Dn=On((e=>({name:"createMonitoringCheck",method:"POST",url:"/api/v1/monitoring",body:e,responseType:f.ignore}))),Mn=On((()=>({name:"getMonitoringStatus",method:"GET",url:"/api/v1/monitoring/status",responseType:kn}))),Fn=(0,o.F)("web-api/api/msp.ts"),_n=i.readonly(i.type({accessorUuid:i.string,accessorType:i.string,encKey:T.KeysetCiphertext,encryptedBy:i.string},"MspAccess")),Kn=i.readonly(i.array(_n)),Nn=(i.readonly(i.type({access:Kn})),i.readonly(i.type({acl:i.array(i.string),encKeyset:T.KeysetCiphertext},"MspUserPermissionsResponse"))),Vn=Fn((e=>({name:"setupMsp",method:"POST",url:"/api/v1/msp",body:e,responseType:f.ignore}))),Bn=Fn((()=>({name:"getUserMspPermissions",method:"GET",url:"/api/v1/msp",responseType:Nn}))),Ln=(0,o.F)("web-api/api/notifications.ts");var xn;!function(e){e.DeviceEnrollment="DEVICE_ENROLL"}(xn||(xn={}));const Gn=i.intersection([i.type({uuid:i.string,type:i.string},"type"),i.partial({payload:i.string},"partial")],"Notification"),Zn=i.readonly(i.type({notifications:i.readonlyArray(Gn)}),"NotificationsResponse"),jn=Ln((()=>({name:"getNotifications",method:"GET",url:"/api/v2/notification",responseType:Zn}))),Yn=Ln((e=>({name:"acknowledgeNotification",method:"POST",url:"/api/v2/notification/acknowledge",body:e,responseType:f.ignore}))),Hn=(i.readonly(i.type({token:i.string}),"SaveSettingsRequest"),Ln((e=>({name:"saveNotificationSettings",method:"POST",url:"/api/v2/notification/settings",body:e,responseType:f.ignore})))),Wn=(0,o.F)("web-api/api/notifier.ts"),$n=i.readonly(i.type({notifierUrl:i.string},"type"),"GetNotifierUrlResponse"),Jn=Wn((()=>({name:"getNotifierUrl",method:"GET",url:"/api/v2/notifier/url",responseType:$n})));var qn=n(45507);const zn=(0,o.F)("web-api/api/outdated_browser.ts")((e=>({name:"reportOutdatedBrowser",method:"POST",url:"/api/v2/report-outdated-browser",body:e,responseType:s.ID}))),Xn=(0,o.F)("web-api/api/package.ts"),Qn=i.intersection([i.type({sourceVaultUuid:i.string,senderUuid:i.string,recipientUuid:i.string,itemUuid:i.string,itemVersion:i.number,templateUuid:i.string,encKey:f.crypto.JweB,recoverableEncKey:f.crypto.JweB,encOverview:f.crypto.JweB,signature:f.crypto.JwsB},"type"),i.partial({uuid:i.string,createdAt:i.string,updatedAt:i.string,clientCreatedAt:i.string,clientUpdatedAt:i.string,encDetails:f.crypto.JweB},"partial")],"Package"),er=i.readonly(i.intersection([Qn,i.type({uuid:i.string},"type")]),"IncomingPackage"),tr=Xn((e=>({name:"sendPackages",method:"PATCH",url:"/api/v1/packages",body:e,responseType:f.ignore}))),nr=Xn((()=>({name:"getIncomingPackages",method:"GET",url:"/api/v1/packages/incoming",responseType:i.array(er)}))),rr=Xn((e=>({name:"getIncomingPackage",method:"GET",url:`/api/v1/package/${e}`,responseType:er}))),ir=Xn(((e,t)=>({name:"getPackagesForVaultItem",method:"GET",url:`/api/v1/packages/sent/${e}/${t}`,responseType:i.array(er)}))),sr=Xn((e=>({name:"removePackages",method:"DELETE",url:"/api/v1/packages",body:e,responseType:f.ignore}))),or=i.readonly(i.type({uuid:i.string,name:i.string,email:i.string,avatar:i.string,signingKey:f.crypto.JwkEcPubKey}),"Sender"),ar=i.readonly(i.intersection([i.type({uuid:i.string,formatVersion:i.number,sender:or,createdAt:i.string,expiresAt:i.string,encOverview:f.crypto.JweB},"type"),i.partial({readAt:i.string},"partial")]),"IncomingPackageOverviewV2"),ur=i.readonly(i.intersection([ar,i.type({encDetails:f.crypto.JweB},"type")]),"IncomingPackageV2");var cr;!function(e){e[e.OneDay=86400]="OneDay",e[e.OneWeek=604800]="OneWeek",e[e.OneMonth=2678400]="OneMonth",e[e.TwoMonths=5356800]="TwoMonths"}(cr||(cr={}));const lr=i.readonly(i.type({packages:i.readonlyArray(ar),totalCount:i.number}),"PackageOverviews"),dr=Xn((e=>({name:"sendPackageV2",method:"POST",url:"/api/v2/packages",body:e,responseType:f.ignore}))),yr=Xn((()=>({name:"getIncomingPackagesV2",method:"GET",url:"/api/v2/packages",responseType:lr}))),pr=Xn((e=>({name:"getMoreIncomingPackages",method:"GET",url:`/api/v2/packages${(0,g.Pj)(e)}`,responseType:lr}))),mr=Xn((e=>({name:"getIncomingPackageV2",method:"GET",url:`/api/v2/packages/${e}`,responseType:ur}))),fr=Xn((e=>({name:"markPackageAsRead",method:"PATCH",url:`/api/v2/packages/${e}/read`,responseType:f.ignore}))),gr=Xn((e=>({name:"removePackageV2",method:"DELETE",url:`/api/v2/packages/${e}`,responseType:f.ignore}))),hr=(0,o.F)("web-api/api/pending_invitations.ts"),vr=i.type({uuid:i.string,email:i.string,userType:i.string,expiresAt:i.string,status:i.string}),Cr=i.type({pendingInvitations:i.array(vr),totalCount:i.number},"GetPendingInvitationResponse"),Ar=e=>{const t=new URLSearchParams;return Object.entries(e).forEach((([e,n])=>{t.append(e,n.toString())})),t.toString()},wr=hr((e=>({name:"getPendingInvitation",method:"GET",url:`/api/v1/pending-invitations?${Ar(e)}`,responseType:Cr})));var Sr=n(86560),Tr=n(5003);const Pr=(0,o.F)("web-api/api/policies/auto_lock.ts"),br=i.readonly(i.type({enabled:(0,f.withDefault)(i.boolean,!1),lockAfterIdleTimeMin:(0,f.withDefault)(i.number,480)}),"AutoLockPolicyDefinition"),Rr=i.readonly(i.partial({uuid:i.string,firstName:i.string,lastName:i.string}),"AutoLockLastUpdatedByUser"),Er=i.readonly(i.intersection([i.type({definition:br}),i.partial({lastUpdated:i.string,lastUpdatedByUser:Rr})]),"AutoLockPolicyResponse"),Ir=Pr((()=>({name:"getAutoLockPolicy",method:"GET",url:`/api/v1/policies/${zr.AdminExperience}/${Xr.AutoLock}`,responseType:Er}))),Ur=Pr((e=>({name:"updateAutoLockPolicy",method:"POST",url:`/api/v1/policies/${zr.AdminExperience}/${Xr.AutoLock}`,body:{definition:e},responseType:f.ignore}))),Or=(0,o.F)("web-api/api/policies/sidebar_navigation.ts"),kr=i.readonly(i.type({definition:r.FS}),"SidebarNavPolicy"),Dr=Or((()=>({name:"getSidebarNavPolicies",method:"GET",url:`/api/v1/policies/${zr.AdminExperience}/${Xr.SidebarNav}`,responseType:kr}))),Mr=Or((e=>({name:"updateSidebarNavPolicies",method:"POST",url:`/api/v1/policies/${zr.AdminExperience}/${Xr.SidebarNav}`,body:{definition:e},responseType:f.ignore}))),Fr=(0,o.F)("web-api/api/policies/restrict_failed_login_attempts.ts"),_r=3,Kr=10,Nr=10,Vr=i.readonly(i.type({enabled:(0,f.withDefault)(i.boolean,!1),allowedAttempts:(0,f.withDefault)(i.number,_r),lockoutPeriodMin:(0,f.withDefault)(i.number,Nr)}),"RestrictFailedLoginAttemptsPolicyDefinition"),Br=i.readonly(i.type({definition:Vr}),"RestrictFailedLoginAttemptsPolicyResponse"),Lr=Fr((()=>({name:"getRestrictFailedLoginAttemptsPolicy",method:"GET",url:`/api/v2/policies/${zr.AdminExperience}/${Xr.RestrictFailedLoginAttempts}`,responseType:Br}))),xr=Fr((e=>({name:"updateRestrictFailedLoginAttemptsPolicy",method:"POST",url:`/api/v2/policies/${zr.AdminExperience}/${Xr.RestrictFailedLoginAttempts}`,body:{definition:e},responseType:f.ignore}))),Gr=(0,o.F)("web-api/api/policies/allow_account_creation.ts"),Zr=i.readonly(i.type({enabled:(0,f.withDefault)(i.boolean,!1)}),"AllowAccountCreationDefinition"),jr=i.readonly(i.partial({uuid:i.string,firstName:i.string,lastName:i.string}),"AllowAccountCreationLastUpdatedByUser"),Yr=i.readonly(i.intersection([i.type({definition:Zr}),i.partial({lastUpdated:i.string,lastUpdatedByUser:jr})]),"AllowAccountCreationResponse"),Hr=Gr((()=>({name:"getAllowAccountCreationPolicy",method:"GET",url:`/api/v2/policies/${zr.AdminExperience}/${Xr.AllowAccountCreation}`,responseType:Yr}))),Wr=Gr((e=>({name:"updateAllowAccountCreationPolicy",method:"POST",url:`/api/v2/policies/${zr.AdminExperience}/${Xr.AllowAccountCreation}`,body:{definition:e},responseType:f.ignore}))),$r=(0,o.F)("web-api/api/policies/auto_delete_suspended_users.ts"),Jr=$r((()=>({name:"getAutoDeleteSuspendedUsersPolicies",method:"GET",url:`/api/v2/policies/${zr.AdminExperience}/${Xr.AutoDeleteSuspendedUsers}`,responseType:r.ju}))),qr=$r((e=>({name:"updateAutoDeleteSuspendedUsersPolicies",method:"POST",url:`/api/v2/policies/${zr.AdminExperience}/${Xr.AutoDeleteSuspendedUsers}`,body:{definition:e},responseType:f.ignore})));var zr,Xr;!function(e){e.AdminExperience="admin-exp"}(zr||(zr={})),function(e){e.AllowAccountCreation="allow-account-creation",e.AutoLock="auto-lock",e.SidebarNav="sidebar-nav",e.RestrictFailedLoginAttempts="restrict-failed-login-attempts",e.AutoDeleteSuspendedUsers="auto-delete-suspended-users"}(Xr||(Xr={}));const Qr=(0,o.F)("web-api/api/provision.ts"),ei=i.readonly(i.type({uuid:i.string,accountName:i.string,accountType:i.string,accountUuid:i.string,domain:i.string,name:i.string,email:i.string,passwordRules:i.string,accountUsesNewKeysets:i.union([i.boolean,i.undefined]),accountAuthMethods:i.readonlyArray(Kt),account2faTypes:(0,f.withDefault)(i.readonlyArray((0,f.fromStringEnum)(Un.Lo,"MfaType")),[]),enforce2faSetup:i.boolean,disableEmergencyKit:(0,f.withDefault)(i.boolean,!1)}),"Provision"),ti=i.readonly(i.type({valid:i.boolean}),"ProvisioningEmailVerificationValidity"),ni=i.readonly(i.type({lastResendAt:i.union([i.string,i.undefined]),resendAllCooldown:i.number}),"ResendDetails"),ri=Qr((e=>({name:"createProvisionUser",method:"POST",url:"/api/v1/provision/user",body:e,responseType:Tr.Fc}))),ii=Qr(((e,t)=>({name:"startUserProvision",method:"PUT",url:`/api/v1/provision/user/${encodeURIComponent(e)}/start${(0,g.Pj)(t)}`,responseType:f.ignore}))),si=Qr((e=>({name:"suspendUserProvision",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(e)}/suspend`,responseType:f.ignore}))),oi=Qr((e=>({name:"resendUserProvision",method:"PUT",url:"/api/v1/provision/resend",body:e,responseType:f.ignore}))),ai=Qr((()=>({name:"resendAllUsersProvision",method:"PUT",url:"/api/v1/provision/resend-all",body:{},responseType:f.ignore}))),ui=Qr((()=>({name:"getResendDetails",method:"GET",url:"/api/v1/provision/resend-all/details",responseType:ni}))),ci=Qr(((e,t)=>({name:"getProvisionDetails",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(e)}/${t}`,responseType:ei,encrypted:!1}))),li=Qr(((e,t)=>({name:"resendProvisioningEmailVerification",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(e)}/${t}/resend-verification`,responseType:f.ignore}))),di=Qr(((e,t,n)=>({name:"checkProvisioningEmailVerification",method:"GET",url:`/api/v2/provision/user/${encodeURIComponent(e)}/${t}/${n}`,encrypted:!1,responseType:ti}))),yi=Qr((e=>({name:"acceptProvision",method:"POST",url:"/api/v1/provision/user/accept",body:e,responseType:f.ignore,encrypted:!1}))),pi=Qr((e=>({name:"getProvisionedPersonalVault",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(e)}/personalvault`,responseType:ce.jc}))),mi=i.readonly(i.type({vaultUuid:i.string,vaultKeySN:i.number,encryptedBy:i.string,encVaultKey:f.crypto.JweB}),"ProvisionedVaultKey"),fi=i.readonly(i.type({groupUuid:i.string,keyset:f.crypto.KeysetCiphertext}),"ProvisionedGroupKeyset"),gi=i.readonly(i.type({keyset:f.crypto.KeysetCiphertext,vaultKeys:i.readonlyArray(mi),groupKeysets:i.readonlyArray(fi)}),"ProvisionedKeys"),hi=Qr(((e,t)=>({name:"completeUserProvision",method:"PUT",url:`/api/v1/provision/user/${encodeURIComponent(e)}/complete`,body:t,responseType:f.ignore}))),vi=Qr((e=>({name:"getUserProvisionedKeys",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(e)}/keys`,responseType:gi}))),Ci=(0,o.F)("web-api/api/recovery.ts"),Ai=i.readonly(i.type({uuid:i.string,accountUuid:i.string,accountName:i.string,accountType:i.string,domain:i.string,name:i.string,email:i.string,passwordRules:i.string,accountUsesNewKeysets:i.union([i.boolean,i.undefined]),accountAuthMethods:i.array(Kt),disableEmergencyKit:(0,f.withDefault)(i.boolean,!1),recoveryKeysExist:(0,f.withDefault)(i.boolean,!1)}),"Recovery"),wi=(i.readonly(i.type({token:i.string}),"FindRecoveryDetails"),i.readonly(i.type({token:i.string,emailVerificationChallenge:i.string}),"RecoveryChallengeVerify"),i.readonly(i.type({emailVerificationSuccessToken:i.string}),"RecoveryChallengeVerifyResponse")),Si=Ci(((e,t)=>({name:"findRecoveryDetails",method:"POST",url:`/api/v1/recover/${encodeURIComponent(e)}/details`,body:t,responseType:Ai,encrypted:!1}))),Ti=Ci(((e,t)=>({name:"recoveryVerifyEmailStart",method:"POST",url:`/api/v2/recover/${encodeURIComponent(e)}/verify-email/start`,body:t,responseType:f.ignore,encrypted:!1}))),Pi=Ci(((e,t)=>({name:"recoveryVerifyEmailResend",method:"POST",url:`/api/v2/recover/${encodeURIComponent(e)}/verify-email/resend`,body:t,responseType:f.ignore,encrypted:!1}))),bi=Ci(((e,t)=>({name:"recoveryVerifyEmailAuth",method:"POST",url:`/api/v2/recover/${encodeURIComponent(e)}/verify-email/verify`,body:t,responseType:wi,encrypted:!1}))),Ri=Ci((e=>({name:"beginRecovery",method:"PUT",url:`/api/v1/recover/begin/${e.join(",")}`,responseType:f.ignore}))),Ei=Ci((e=>({name:"continueRecovery",method:"POST",url:"/api/v2/recover/continue",body:e,responseType:f.ignore,encrypted:!1}))),Ii=Ci((e=>({name:"cancelRecovery",method:"PUT",url:`/api/v1/recover/cancel/${e.join(",")}`,responseType:f.ignore}))),Ui=i.readonly(i.type({vaultUuid:i.string,vaultKeySN:i.number,encryptedBy:i.string,encVaultKey:f.crypto.JweB}),"RecoverableVaultKey"),Oi=i.readonly(i.type({groupUuid:i.string,keyset:f.crypto.KeysetCiphertext}),"RecoverableGroupKeyset"),ki=i.readonly(i.type({packageUuid:i.string,key:f.crypto.JweB}),"RecoverablePackageKey"),Di=i.readonly(i.type({vaultKeys:i.readonlyArray(Ui),groupKeysets:i.readonlyArray(Oi),packageKeys:i.readonlyArray(ki)}),"RecoverableKeys"),Mi=i.readonly(i.type({keys:i.readonlyArray(Di)}),"RecoverableKeysForPeople"),Fi=Ci(((e,t)=>({name:"completeRecovery",method:"PUT",url:`/api/v1/recover/complete/${e.join(",")}`,body:t,responseType:f.ignore}))),_i=Ci((e=>({name:"getRecoverableKeysForPeople",method:"GET",url:`/api/v1/recover/keys/${e.join(",")}`,responseType:Mi}))),Ki=(0,o.F)("web-api/api/dashboard.ts"),Ni=i.readonly(i.type({activeUsersCount:i.number,deletedUsersCount:i.number,invitedUsersCount:i.number,invitedUsersToConfirm:i.array(Sr.kY),invitedUsersToConfirmCount:i.number,guestUsersCount:i.number,recoveredUsersToConfirm:i.array(Sr.kY),recoveredUsersToConfirmCount:i.number,recoveringUsersCount:i.number,suspendedUsersCount:i.number,travelingUsers:i.array(Sr.kY),travelingUsersCount:i.number}),"ReportDashboardOverview"),Vi=Ki((()=>({name:"getDashboardReport",method:"GET",url:"/api/v1/report/dashboard",responseType:Ni})));var Bi=n(68359),Li=n(19669);const xi=(0,o.F)("web-api/api/serviceaccount_tokens.ts"),Gi=i.type({u:i.string,a:i.number},"VaultClaim"),Zi=i.intersection([i.type({jti:i.string,issuer:i.string,audience:i.string,features:i.readonlyArray(i.string)},"type"),i.partial({expiry:i.string,vaults:i.readonlyArray(Gi),signatureHash:i.string},"partial")],"TokenInfo"),ji=i.intersection([i.type({name:i.string,state:i.string,signedBy:i.string,createdAt:i.string,tokenInfo:Zi},"type"),i.partial({expiresAt:i.string},"partial")],"ServiceAccountToken"),Yi=(i.type({name:i.string,subject:i.string,account_uuid:i.string,token_info:i.intersection([Zi,i.type({signatureHash:i.string})]),kid:i.string},"RegisterServiceAccountTokenRequest"),i.readonly(i.type({id:i.string}),"RegisterServiceAccountTokenResponse")),Hi=(i.type({name:i.string},"RenameServiceAccountTokenRequest"),xi((e=>({name:"registerServiceAccountToken",method:"POST",url:"/api/v2/serviceaccounts/token",body:e,responseType:Yi})))),Wi=xi(((e,t,n)=>({name:"renameServiceAccountToken",method:"PATCH",url:`/api/v1/serviceaccounts/${encodeURIComponent(e)}/tokens/${encodeURIComponent(t)}`,body:n,responseType:f.ignore}))),$i=xi(((e,t)=>({name:"revokeServiceAccountToken",method:"DELETE",url:`/api/v1/serviceaccounts/${encodeURIComponent(e)}/tokens/${encodeURIComponent(t)}`,responseType:f.ignore}))),Ji=xi((()=>({name:"revokeAllServiceAccountTokensForAccount",method:"DELETE",url:"/api/v1/serviceaccounts/tokens",responseType:f.ignore})));var qi=n(47729);const zi=(0,o.F)("web-api/api/serviceaccounts.ts"),Xi=i.type({totalVaults:i.number,displayable:i.array(ce.cG)},"ServiceAccountVaultAccess"),Qi=i.type({credits:i.number},"ServiceAccountBillables"),es=(0,f.fromStringEnum)(Sr.m4,"ServiceAccountType"),ts=i.intersection([Tr.NA,i.readonly(i.type({creatorUuid:i.string,serviceAccountType:es},"type")),i.partial({tokens:i.readonlyArray(ji),serviceAccountVaultAccess:i.readonly(Xi),billables:i.readonly(Qi),permissions:i.number,rotatedAt:i.string,expiresAt:i.string},"partial")],"ServiceAccount"),ns=i.intersection([qi.n5,i.readonly(i.type({createdAt:i.string,creatorUuid:i.string,serviceAccountType:es,tokensVersion:i.number},"type")),i.partial({creatorFirstName:i.string,creatorLastName:i.string,creatorState:i.string,tokens:i.array(ji),devices:i.array(Li.Device.Type),serviceAccountVaultAccess:i.readonly(Xi),billables:i.readonly(Qi),rotatedAt:i.string},"partial")],"ServiceAccountUser"),rs=i.readonly(i.type({serviceAccounts:i.array(Sr.k2)}),"GetServiceAccountsResponse"),is=i.readonly(i.intersection([i.type({serviceAccount:ns},"type"),i.partial({devices:i.array(Li.Device.Type)},"partial")],"Integration")),ss=i.readonly(i.intersection([i.type({integrations:i.array(is)},"type"),i.partial({releases:Li.AppReleases},"partial")],"GetIntegrationsResponse")),os=zi((e=>({name:"createServiceAccountV3",method:"POST",url:"/api/v3/serviceaccounts",body:e,responseType:Tr.Fc}))),as=zi((()=>({name:"getIntegrations",method:"GET",url:"/api/v1/integrations?attrs=vault-access,groups,devices,app-releases",responseType:ss}))),us=zi((()=>({name:"getServiceAccounts",method:"GET",url:"/api/v1/serviceaccounts",responseType:rs}))),cs=i.readonly(i.type({email:i.string,token:i.string,uuid:i.string,throttleKey:i.string,accessors:i.readonlyArray(qn.FL)},"CreateServiceAccountPreflightResponse")),ls=zi((e=>({name:"createServiceAccountPreflight",method:"GET",url:`/api/v1/serviceaccounts/preflight/${encodeURIComponent(e)}`,responseType:cs}))),ds=zi(((e,t)=>({name:"getServiceAccount",method:"GET",url:`/api/v1/serviceaccount/${e}${t.length>0?(0,g.Pj)({attrs:t}):""}`,responseType:ts}))),ys=zi(((e,t)=>({name:"updateServiceAccount",method:"PATCH",url:`/api/v1/serviceaccount/${e}`,body:t,responseType:f.ignore}))),ps=(0,o.F)("web-api/api/sign_in_attempts.ts");var ms,fs;!function(e){e.Reported="report_firewall_rule",e.Blocked="firewall_rule",e.Credentials="credentials",e.Mfa="mfa",e.AppVersion="app_version",e.Sso="sso"}(ms||(ms={})),function(e){e.Country="country",e.Continent="continent",e.Ip="ip",e.Anonymous="anonymous",e.All="all"}(fs||(fs={}));const gs=i.union([i.literal(ms.Reported),i.literal(ms.Blocked),i.literal(ms.Credentials),i.literal(ms.Mfa),i.literal(ms.AppVersion),i.literal(ms.Sso)],"SignInAttemptReasonsEnum"),hs=i.union([i.literal(fs.Country),i.literal(fs.Continent),i.literal(fs.Ip),i.literal(fs.Anonymous),i.literal(fs.All)],"SignInAuxInfoTypesEnum"),vs=i.readonly(i.intersection([i.type({country:i.string,date:i.string,deviceUuid:i.string,email:i.string,ip:i.string,location:i.string,osName:i.string,clientName:i.string,point:i.type({lat:i.number,lon:i.number}),reason:gs,userUuid:i.string,uuid:i.string},"type"),i.partial({auxInfo:i.partial({type:hs,value:i.string})},"partial")]),"SignInAttempt"),Cs=i.readonly(i.type({attempts:i.readonlyArray(vs)}),"GetSignInAttemptsResponse"),As=i.readonly(i.partial({userUuid:i.string,includeStates:i.array(i.string),excludeStates:i.array(i.string),limit:i.number,cursor:i.string}),"GetSignInAttemptRequest"),ws=i.readonly(i.type({attempts:i.array(vs),cursor:i.string,hasMore:i.boolean,totalCount:i.number}),"GetSignInAttemptsResponseV2"),Ss=ps((()=>({name:"getSignInAttempts",method:"GET",url:"/api/v1/signinattempts",responseType:Cs}))),Ts=ps((e=>({name:"getSigninAttemptsV2",method:"POST",url:"/api/v2/signinattempts",body:e,responseType:ws})));var Ps=n(31918);const bs=(0,o.F)("web-api/api/slack.ts");var Rs;!function(e){e.Active="A",e.Inactive="I",e.NotLoaded="N"}(Rs||(Rs={}));const Es=i.readonly(i.type({state:(0,f.fromStringEnum)(Rs,"SlackAppState"),notifChannelUid:i.string,alertChannelUid:i.string,scope:i.string,teamName:i.string,alertNotifTeamUid:i.string,enterpriseUid:i.string,enterpriseName:i.string,enterpriseUrl:i.string,enterpriseTeams:(0,f.withDefault)(i.readonlyArray(i.string),[]),isGranular:i.boolean}),"SlackApp"),Is=i.readonly(i.type({nonce:i.string}),"SlackNonce"),Us=i.readonly(i.intersection([i.type({email:i.string,hasPendingInvite:i.boolean,hasTeamUser:i.boolean,name:i.string,uid:i.string},"type"),i.partial({avatar:i.string,handle:i.string},"partial")]),"SlackUser"),Os=i.readonly(i.type({users:i.array(Us)}),"SlackUsers"),ks=i.readonly(i.intersection([i.type({name:i.string,uid:i.string,numMembers:i.number,isPrivate:i.boolean},"type"),i.partial({topic:i.string},"partial")]),"SlackChannel"),Ds=i.readonly(i.type({channels:i.array(ks),cursor:i.string}),"GetSlackChannelsResponse"),Ms=i.readonly(i.type({uid:i.string,name:i.string}),"SlackTeam"),Fs=i.readonly(i.type({teams:i.array(Ms)}),"SlackTeams"),_s=i.readonly(i.type({uid:i.string,name:i.string,numMembers:i.number,handle:i.string}),"SlackGroup"),Ks=i.readonly(i.type({userGroups:i.array(_s)}),"SlackGroups"),Ns=bs((()=>({name:"getSlackUsers",method:"GET",url:"/api/v1/slack/users",responseType:Os}))),Vs=bs((e=>({name:"getSlackChannels",method:"GET",options:{timeout:9e4},url:`/api/v3/slack/channels${(0,g.Pj)({cursor:e})}`,responseType:Ds}))),Bs=bs(((e,t)=>({name:"getGridSlackChannels",method:"GET",options:{timeout:9e4},url:`/api/v3/slack/grid/teams/${e}/channels${(0,g.Pj)({cursor:t})}`,responseType:Ds}))),Ls=bs((e=>({name:"getGridSlackGroups",method:"GET",url:`/api/v3/slack/grid/teams/${e}/usergroups`,responseType:Ks}))),xs=bs((e=>({name:"getGridSlackUsers",method:"GET",url:`/api/v1/slack/grid/teams/${e}/users`,responseType:Os}))),Gs=bs((()=>({name:"getGridSlackTeams",method:"GET",url:"/api/v1/slack/grid/teams",responseType:Fs}))),Zs=bs((()=>({name:"getSlackGroups",method:"GET",url:"/api/v1/slack/usergroups",responseType:Ks}))),js=bs((()=>({name:"getSlackApp",method:"GET",url:"/api/v2/slack/app",responseType:Es}))),Ys=bs((e=>({name:"updateSlackApp",method:"PUT",url:"/api/v1/slack/app",body:e,responseType:f.ignore}))),Hs=bs((()=>({name:"postSlackNonce",method:"POST",url:"/api/v1/slack/oauth/nonce",responseType:Is}))),Ws=bs((e=>({name:"postSlackAccessToken",method:"POST",url:"/api/v1/slack/oauth/verify",body:e,responseType:f.ignore}))),$s=(0,o.F)("web-api/api/sso_enrollment.ts");var Js;!function(e){e.Web="WEB",e.Core="CORE",e.Unknown="UNKNOWN"}(Js||(Js={}));const qs=(0,f.fromStringEnum)(Js,"LastAuthDeviceType"),zs=i.intersection([i.type({clientType:qs},"type"),i.partial({clientName:i.string},"partial")],"LastAuthDeviceForEnrollment"),Xs=i.readonly(i.type({signInToken:i.string}),"DeviceEnrollmentRequest"),Qs=i.intersection([i.type({enrollmentUuid:i.string,accountKeyUuid:i.string},"type"),i.partial({lastDevice:zs},"partial")],"DeviceEnrollmentResponse");var eo;!function(e){e.SelectingVerifier="SELECTING_VERIFIER",e.WaitingForCode="WAITING_FOR_CODE",e.PendingValidation="PENDING_VALIDATION",e.Success="SUCCESS"}(eo||(eo={}));const to=(0,f.fromStringEnum)(eo,"DeviceEnrollmentState"),no=$s((e=>({name:"kickoffDeviceEnrollment",method:"POST",url:"/api/v3/device/enrollments",encrypted:!1,body:{signInToken:e},responseType:Qs}))),ro=i.readonly(i.type({status:to}),"DeviceEnrollmentStatusResponse"),io=$s((e=>({name:"getDeviceEnrollmentStatus",method:"GET",url:`/api/v3/device/enrollments/${e}/status`,responseType:ro}))),so=$s(((e,t)=>({name:"unsafeGetDeviceEnrollmentStatus",method:"POST",url:"/api/v3/device/enrollments/status",encrypted:!1,body:{enrollmentUuid:e,signInToken:t},responseType:ro}))),oo=i.readonly(i.type({enrollmentUuid:i.string,status:to,device:Li.Device.Type}),"TrustedDeviceEnrollment"),ao=i.readonly(i.type({enrollments:i.array(oo)}),"AvailableTrustedDeviceEnrollmentsResponse"),uo=$s((()=>({name:"getPendingDeviceEnrollments",method:"GET",responseType:ao,url:"/api/v3/device/enrollments"}))),co=$s((e=>({name:"cancelDeviceEnrollment",method:"DELETE",url:`/api/v2/device/enrollments/${e}`,responseType:f.ignore,options:{responseType:"text"}}))),lo=$s(((e,t)=>({name:"unsafeCancelDeviceEnrollment",method:"DELETE",url:"/api/v2/device/enrollments",body:{enrollmentUuid:e,signInToken:t},encrypted:!1,responseType:f.ignore,options:{responseType:"text"}}))),yo=i.readonly(i.type({newDeviceUuid:i.string,verifyingDeviceUuid:i.string,status:to}),"DeviceEnrollment"),po=$s((e=>({name:"getEnrollment",method:"GET",responseType:yo,url:`/api/v3/device/enrollments/${e}`}))),mo=$s((e=>({name:"markSignatureInvalid",method:"POST",url:`/api/v3/device/enrollments/${e}/invalid`,responseType:f.ignore,options:{responseType:"text"}})));var fo=n(78072),go=n(84641);const ho=(0,o.F)("web-api/api/survey.ts");var vo,Co;!function(e){e.Cancellation="cancellation",e.Deletion="deletion"}(vo||(vo={})),function(e){e.DuplicateAccount="duplicate_account",e.DidNotUse="did_not_use",e.CouldNotUnderstand="could_not_understand",e.TooExpensive="too_expensive",e.MeNotYou="me_not_you",e.Other="other"}(Co||(Co={}));const Ao=ho((e=>({name:"submitDepartureSurvey",method:"POST",url:"/api/v1/survey",body:e,responseType:f.ignore,encrypted:!1})));var wo=n(16586),So=n(98095);const To=async(e,t)=>(0,So.W)("GET",e,void 0,t).then((async e=>{if(e.status<200||e.status>=300)throw new wo.ServerError(e.status);return"text"===t?.responseType?e.text():e.json()})),Po=async e=>To(`https://api.pwnedpasswords.com/range/${e}`,{responseType:"text",timeout:5e3,cache:!0}).then((e=>(0,f.decode)(e,i.string).unwrap())).then(bo(e)),bo=e=>t=>t.trim().split("\n").map((t=>`${e}${t.slice(0,35)}`)),Ro=async e=>To((0,f.joinPath)(e,"generator/combined_words.txt"),{responseType:"text"}).then((e=>(0,f.decode)(e,i.string).unwrap())).then((e=>e.trim().split("\n"))),Eo=async e=>To((0,f.joinPath)(e,"banlist/combined_words.txt"),{responseType:"text"}).then((e=>(0,f.decode)(e,i.string).unwrap())).then((e=>e.trim().split("\n"))),Io=async()=>To("https://watchtower.1password.com/api/v1/compromised-sites",{cache:!0}).then((e=>(0,f.decode)(e,i.record(i.string,i.number)).unwrap())),Uo=async()=>To("https://watchtower.1password.com/api/v1/2fa-sites",{cache:!0}).then((e=>(0,f.decode)(e,i.record(i.string,i.string)).unwrap())),Oo=async()=>To("https://watchtower.1password.com/api/v1/passkey-sites",{cache:!0}).then((e=>(0,f.decode)(e,i.record(i.string,i.string)).unwrap()));var ko=n(82283);const Do=(0,o.F)("web-api/api/trustpilot.ts"),Mo=i.readonly(i.type({reviewLink:i.string,rating:i.number,numberOfReviews:i.number}),"TrustpilotData"),Fo=Do((()=>({name:"getTrustpilotReviewData",method:"GET",url:"/api/v1/trustpilot-review",responseType:Mo}))),_o=(0,o.F)("web-api/api/user_cookie.ts"),Ko=i.readonly(i.type({userUuid:i.string,userEmail:i.string,userName:i.string,userAvatarURL:i.string,usingMyDomain:i.boolean,accountUuid:i.string,accountType:i.string,accountName:i.string,accountDomain:i.string,accountAvatarURL:i.string,hasPrioritySupport:i.boolean}),"UserCookie"),No=_o((e=>({name:"getUserCookies",method:"GET",url:`https://accounts.${e}/api/v1/accountcookies`,options:{withCredentials:!0,timeout:5e3},responseType:(0,f.withDefault)(i.array(Ko),[]),encrypted:!1}))),Vo=_o((e=>({name:"setUserCookie",method:"PATCH",url:`https://accounts.${e}/api/v1/accountcookie`,options:{withCredentials:!0},responseType:f.ignore}))),Bo=_o(((e,t)=>({name:"deleteAccountCookie",method:"DELETE",url:`https://accounts.${e}/api/v1/accountcookie/account/${t}`,options:{withCredentials:!0},responseType:f.ignore}))),Lo=_o(((e,t)=>({name:"deleteUserCookie",method:"DELETE",url:`https://accounts.${e}/api/v1/accountcookie/user/${t}`,options:{withCredentials:!0},responseType:f.ignore})));var xo=n(69935),Go=n(58617),Zo=n(45765);const jo=(0,o.F)("web-api/api/vault_managers.ts"),Yo=i.readonly(i.type({managers:i.readonlyArray(Sr.kY)}),"VaultManagers"),Ho=jo((e=>({name:"getVaultManagers",method:"GET",url:`/api/v1/vault/${e}/managers`,responseType:Yo})));var Wo=n(67741);const $o=(0,o.F)("web-api/api/wizard_progress.ts")((e=>({name:"createProvisioningProgressStep",method:"POST",url:"/api/v1/wizard/provisioning/progress",body:e,responseType:f.ignore}))),Jo=(0,o.F)("web-api/api/account_transfer.ts"),qo=i.readonly(i.intersection([i.type({uuid:i.string},"type"),i.partial({domain:i.string},"partial")]),"AccountTransferAccount"),zo=i.readonly(i.type({pending:i.number,complete:i.number,declined:i.number}),"AccountTransferUserCounts"),Xo=i.readonly(i.intersection([i.type({originAccount:qo,destinationAccount:qo},"type"),i.partial({userCounts:zo},"partial")]),"AccountTransferDetails"),Qo=Jo((()=>({name:"getAccountTransfersDetails",method:"GET",url:"/api/v1/account/transfer",responseType:Xo}))),ea=Jo((e=>({name:"postMigratingUsers",method:"POST",url:"/api/v1/accountmigration/users",body:e,responseType:s.ID})));var ta;!function(e){e.Pending="P",e.Complete="C",e.Declined="D",e.Inactive="I"}(ta||(ta={}));const na=Jo((e=>({name:"patchMigratingUserState",method:"PATCH",url:`/api/v1/accountmigration/user/${e}`,responseType:s.ID}))),ra=Jo((()=>({name:"suspendMigratedUser",method:"PUT",url:"/api/v1/accountmigration/user/suspend",responseType:s.ID}))),ia=(0,o.F)("web-api/api/fastmail.ts"),sa=i.readonly(i.type({verifier:i.string,nonce:i.string}),"FastmailVerifier"),oa=i.readonly(i.type({accountId:i.string,refreshToken:i.string},"FastmailAccountId")),aa=ia((()=>({name:"postFastmailVerifier",method:"POST",url:"/api/v1/fastmail/verifier",responseType:sa}))),ua=ia((e=>({name:"postFastmailRefreshToken",method:"POST",url:"/api/v1/fastmail/oauth/exchange",body:e,responseType:oa}))),ca=(0,o.F)("web-api/api/brex.ts"),la=i.readonly(i.type({nonce:i.string,verifier:(0,f.withDefaultUndefined)(i.string)}),"BrexVerifier"),da=i.readonly(i.type({refreshToken:i.string,accountId:i.string},"BrexRefreshToken")),ya=ca((()=>({name:"postBrexVerifier",method:"POST",url:"/api/v1/brex/verifier",responseType:la}))),pa=ca((e=>({name:"postBrexRefreshToken",method:"POST",url:"/api/v1/brex/oauth/exchange",body:e,responseType:da}))),ma=i.readonly(i.type({clientSecret:(0,f.withDefaultUndefined)(i.string),clientId:i.string},"BrexClientInfoResponse")),fa=i.readonly(i.type({refreshToken:i.string,accessToken:i.string,expiresIn:i.number},"BrexRequestAccessTokenResponse")),ga=ca((()=>({name:"getBrexClientInfo",method:"GET",url:"/api/v1/brex/clientinfo",responseType:ma}))),ha=ca((e=>({name:"requestBrexAccessToken",method:"POST",url:"/api/v1/brex/oauth/accesstoken",body:e,responseType:fa}))),va=(0,o.F)("web-api/api/telemetry.ts"),Ca=va(((e,t)=>({name:"insightsTelemetry",method:"POST",url:`/api/v1/insights/telemetry/${e}${(0,g.Pj)(t||{})}`,body:t,responseType:f.ignore}))),Aa=va((e=>({name:"reportUsoAction",method:"POST",url:`/api/v1/uso/telemetry/${e}`,responseType:f.ignore}))),wa=(0,o.F)("web-api/api/session_restoration.ts"),Sa=i.readonly(i.type({sessionRestorationToken:i.string,tokenPubKey:i.string},"SessionKeySaveResponse")),Ta=wa(((e,t)=>({name:"saveSessionRestorationKey",method:"POST",url:"/api/v2/session-restore/save-key",body:{jwk:e,redirectState:t},responseType:Sa,decryptResponse:"dontDecrypt"}))),Pa=i.readonly(i.type({sessionRestorationKey:f.crypto.JwkSymKey},"SessionKeyRestoreResponse")),ba=wa(((e,t)=>({name:"saveSessionRestorationKey",method:"POST",encrypted:!1,url:"/api/v2/session-restore/restore-key",body:{sessionRestorationToken:e,redirectState:t},responseType:Pa}))),Ra=wa((e=>({name:"destroySessionRestorationKey",method:"DELETE",encrypted:!1,url:"/api/v2/session-restore/destroy-key",body:{sessionRestorationToken:e},responseType:f.ignore}))),Ea=(0,o.F)("web-api/api/default_vault_permissions.ts"),Ia=i.readonly(i.type({acl:i.number})),Ua=Ea((()=>({name:"getDefaultVaultPermissions",method:"GET",responseType:Ia,url:"/api/v3/account/defaultvaultacl"}))),Oa=Ea((e=>({name:"getDefaultVaultPermissions",method:"PUT",responseType:s.ID,url:"/api/v3/account/defaultvaultacl",body:e}))),ka=(0,o.F)("web-api/api/features.ts"),Da=i.readonly(i.type({name:i.string}),"Feature"),Ma=i.readonly(i.type({features:i.readonlyArray(Da)}),"FeaturesList"),Fa=ka((e=>({name:"getFeatures",method:"POST",url:"/api/v2/features",body:{features:e},responseType:Ma}))),_a=ka((e=>({name:"getPreAuthFeatures",method:"POST",url:"/api/v2/pre-registration-features",body:{features:e},responseType:Ma,encrypted:!1})));var Ka=n(76515),Na=n(28967),Va=n(75902);const Ba=["b5local.com","b5dev.com","b5dev.ca","b5dev.eu","b5test.com","b5test.ca","b5test.eu","b5rev.com"],La=({session:e})=>async t=>await e.request({encrypted:!0,method:"POST",name:qe.L`confidentialComputingCreateSession`,url:"/api/v1/confidential-computing/session",body:t}),xa=({session:e,name:t,url:n,method:r,timeout:i})=>async({encryptedRequest:s,sessionUuid:o})=>await e.request({name:t,url:n,method:r,body:s,encrypted:!0,options:{dataType:"arraybuffer",headers:{"Enclave-Session-Uuid":o},timeout:i}}),Ga=(0,o.F)("web-api/api/detailed_vault_reporting.ts"),Za=i.readonly(i.type({pubKey:T.JwkRsaPubKey}),"DetailedVaultReportingPubkey"),ja=Ga(((e,t)=>({name:"createDetailedVaultReportingPubkey",method:"POST",url:`/api/v1/report/dvr/pubkey/${e}`,body:{pubKey:t},responseType:s.ID}))),Ya=Ga((()=>({name:"getDetailedVaultReportingPubkey",method:"GET",url:"/api/v1/report/dvr/pubkey",responseType:Za}))),Ha=i.readonly(i.type({vaultOverviews:i.array(Na.D),pageSize:i.number,page:i.number}),"VaultReportingVaultOverviewResponse"),Wa=Ga((e=>({name:"getVaultReportingVaultOverviews",method:"GET",url:`/api/v1/report/dvr/vaults?page=${e}`,responseType:Ha}))),$a=100,Ja=1e3,qa=i.readonly(i.partial({uuid:i.string,cursor:i.string,limit:i.number,endTime:i.string,hasUrl:i.boolean,vaultUuids:i.array(i.string),templateUuids:i.array(i.string),trashedStates:i.array(i.string),isBusinessRelated:i.boolean}),"GetVaultItemSnapshotsRequest"),za=i.readonly(i.type({snapshots:i.array(Ka.EncryptedVaultItemSnapshot),cursor:i.string,hasMore:i.boolean,totalCount:i.number}),"VaultItemSnapshotsResponse"),Xa=Ga((e=>({name:"getVaultItemSnapshots",method:"POST",url:"/api/v1/report/dvr/snapshots",body:e,responseType:za}))),Qa=i.readonly(i.intersection([i.type({dvrPrivateKey:i.string}),i.partial({vaultUuids:i.array(i.string),hasUrl:i.boolean,templateUuids:i.array(i.string),trashedStates:i.array(i.string),isBusinessRelated:i.boolean})]),"AggregateVaultSnapshotsRequest"),eu=i.readonly(i.type({hostname:i.string,snapshots:i.array(i.string),vaults:i.array(i.string)}),"AggregateVaultSnapshotApp"),tu=i.readonly(i.type({apps:i.array(eu)}),"AggregateVaultSnapshotsResponse"),nu=(ru=e=>({method:"POST",name:qe.L`aggregateVaultSnapshots`,url:"/api/v1/report/dvr/aggregate-vault-snapshots",destinationPath:"/app-insights-aggregation/api/v1/aggregate-vault-snapshots",body:e,responseType:tu,timeout:9e4}),async(e,t,...n)=>{const{name:r,url:i,method:s="POST",destinationPath:o,body:a,responseType:u,timeout:c=3e4}=ru(...n),l=(e=>Ba.some((t=>e.split(":",1)[0]?.endsWith(`.${t}`))))(t),d=await(0,Va.kA)({performSessionHandshake:La({session:e}),devMode:l}),y=await d.fetch({bytes:f.jsonBytes.encode(a),destinationPath:o,sendRequest:xa({session:e,name:r,url:i,method:s,timeout:c})});return(0,f.decode)(y,f.jsonBytes.pipe(u)).unwrap()});var ru;const iu=i.readonly(i.type({snapshotUuids:i.array(i.string)}),"GetVaultItemSnapshotsByUuidsRequest"),su=i.readonly(i.type({snapshots:i.array(Ka.EncryptedVaultItemSnapshot)}),"VaultItemSnapshotsByUuidsResponse"),ou=Ga((e=>({name:"getVaultItemSnapshotsByUuids",method:"POST",url:"/api/v1/report/dvr/snapshotsbyuuids",body:e,responseType:su}))),au=i.readonly(i.intersection([i.type({vaultUuid:i.string}),i.partial({items:i.array(i.string,"vaultItemUuids")})]),"VaultReportingSyncResponse"),uu=(0,s.Hj)(au),cu=Ga((()=>({name:"getVaultReportingSync",method:"GET",url:"/api/v1/report/dvr/sync",responseType:uu}))),lu=Ga((e=>({name:"putVaultReportingSnapshots",method:"PUT",url:"/api/v1/report/dvr/snapshots",body:e,responseType:s.ID}))),du=i.type({vaultUuids:i.array(i.string)},"VaultUuidsBatch"),yu=i.type({vaultUuid:i.string,userUuids:i.array(i.string),groupUuids:i.array(i.string)},"VaultReportingVaultAccess"),pu=i.readonly(i.type({vaultAccess:i.array(yu)}),"VaultReportingVaultAccessResponse"),mu=Ga((e=>({name:"getVaultReportingVaultAccess",method:"POST",url:"/api/v1/report/dvr/vaults/access",body:e,responseType:pu}))),fu=i.type({groupUuids:i.array(i.string)},"GroupUuidsBatch"),gu=i.type({groupUuid:i.string,userUuids:i.array(i.string)},"VaultReportingGroupMembership"),hu=i.readonly(i.type({groupMemberships:i.array(gu)}),"VaultReportingGroupMembershipsResponse"),vu=Ga((e=>({name:"getVaultReportingGroupMemberships",method:"POST",url:"/api/v1/report/dvr/groups/membership",body:e,responseType:hu}))),Cu=i.readonly(i.type({numVaultsSearchedForSnapshots:i.number}),"DetailedVaultReportingStatsResponse"),Au=Ga((()=>({name:"getDetailedVaultReportingStats",method:"GET",url:"/api/v1/report/dvr/stats",responseType:Cu})));var wu=n(79686);const Su=(0,o.F)("web-api/api/quest.ts"),Tu=i.readonly(i.intersection([i.type({id:i.number,title:i.string,description:i.string,url:i.string,priorityLevel:i.number,image:i.string,badgeColor:(0,g.N6)(wu.ColorType,"ColorType"),questColor:(0,g.N6)(wu.ColorType,"ColorType")}),i.partial({badgeText:i.string})]),"Quest"),Pu=Su((()=>({name:"getAutomatedQuest",method:"GET",url:"/api/v1/quest",responseType:i.union([Tu,i.null])}))),bu=(0,o.F)("web-api/api/recovery_key.ts"),Ru=i.exact(i.type({recoveryKeyUuid:i.string}),"RecoveryKeyStartRequest"),Eu=i.exact(i.type({sessionUuid:i.string,cryptoVersion:i.string}),"StartRecoveryResponse"),Iu=bu((e=>({name:"recoveryKeyBeginAttempt",method:"POST",url:"/api/v2/recovery-keys/session/new",body:e,responseType:Eu,encrypted:!1}))),Uu=i.exact(i.type({bigA:i.string}),"RecoverySrpARequest"),Ou=i.exact(i.type({bigB:i.string}),"RecoverySrpBResponse"),ku=bu((e=>({name:"recoveryKeyAuthV1Begin",method:"POST",url:"/api/v2/recovery-keys/session/auth/cv1/start",body:e,responseType:Ou,encrypted:!1}))),Du=i.exact(i.type({clientHash:i.string}),"RecoverySrpConfirmKeyRequest"),Mu=i.exact(i.type({serverHash:i.string}),"RecoverySrpConfirmKeyResponse"),Fu=bu((e=>({name:"recoveryKeyAuthV1ConfirmKey",method:"POST",url:"/api/v2/recovery-keys/session/auth/cv1/confirm",body:e,responseType:Mu,encrypted:!1}))),_u=i.type({uuid:i.string,label:i.union([i.string,i.null]),enc:i.string,encryptedBy:i.string,cryptoVersion:i.string,verifierParam:i.string}),Ku=bu((e=>({name:"createRecoveryKey",method:"POST",url:"/api/v2/recovery-keys/keys",body:e,responseType:f.ignore})));var Nu;!function(e){e.Provisional="PROVISIONAL",e.PolicyAdded="PROVISIONAL_POLICY_ADDED",e.PendingActivation="PENDING_ACTIVATION",e.Active="ACTIVE",e.Suspended="SUSPENDED",e.Deleted="DELETED",e.Displaced="DISPLACED"}(Nu||(Nu={}));const Vu=i.type({uuid:i.string,label:i.union([i.string,i.null]),state:i.string,enc:i.string,encryptedBy:i.string,cryptoVersion:i.string,verifierParam:i.string,createdAt:i.string,updatedAt:i.string}),Bu=bu((e=>({name:"getRecoveryKey",method:"GET",url:`/api/v2/recovery-keys/keys/${e}`,responseType:Vu}))),Lu=bu((e=>({name:"deleteRecoveryKey",method:"DELETE",url:`/api/v2/recovery-keys/keys/${e}`,responseType:f.ignore}))),xu=bu((e=>({name:"activateRecoveryKey",method:"POST",url:`/api/v2/recovery-keys/keys/${e}/activate`,responseType:f.ignore}))),Gu=i.type({recoveryKeyUuid:i.string,feature:i.string,custody:i.string,configuration:i.type({userVerification:i.array(i.string),delaySecs:i.number}),specVersion:i.string}),Zu=i.type({uuid:i.string}),ju=bu((e=>({name:"createRecoveryPolicy",method:"POST",url:"/api/v2/recovery-keys/policies",body:e,responseType:Zu}))),Yu=i.type({encryptedKeyMaterial:i.string}),Hu=i.type({integrity:i.string}),Wu=bu(((e,t)=>({name:"addRecoverableMaterial",method:"POST",url:`/api/v2/recovery-keys/keys/${e}/material`,body:t,responseType:Hu}))),$u=i.type({policyUuids:i.array(i.string)}),Ju=bu(((e,t)=>({name:"getRecoveryPolicies",method:"GET",url:`/api/v2/recovery-keys/policies${(0,g.Pj)({feature:e,state:t})}`,responseType:$u}))),qu=i.exact(i.type({uuid:i.string,recoveryKeyUuid:i.string,feature:i.string,custody:i.string,configuration:i.exact(i.type({userVerification:i.array(i.string),delaySecs:i.number})),specVersion:i.string,createdAt:i.string,updatedAt:i.string})),zu=bu((e=>({name:"getRecoveryPolicy",method:"GET",url:`/api/v2/recovery-keys/policies/${e}`,responseType:qu}))),Xu=i.type({uuid:i.string,policyUuid:i.string,state:i.string,createdAt:i.string,updatedAt:i.string,expiresAt:i.string}),Qu=i.type({recoveryAttempts:i.array(Xu)}),ec=bu((()=>({name:"getRecoveryAttempts",method:"GET",url:"/api/v2/recovery-keys/attempts",responseType:Qu}))),tc=i.type({userUuid:i.string,accountUuid:i.string,accountName:i.string,accountType:i.string,domain:i.string,name:i.string,email:i.string,passwordRules:i.string,accountUsesNewKeysets:i.boolean,accountAuthMethods:i.array(Kt),disableEmergencyKit:i.boolean}),nc=i.union([i.type({attemptState:i.union([i.literal("KEY_VERIFIER_ACCEPTED"),i.literal("EMAIL_VERIFICATION_PENDING")]),policySpecVersion:i.string,custody:i.string,aux:i.type({verificationModes:i.array(i.string)})}),i.type({attemptState:i.literal("ID_VERIFICATION_COMPLETE"),policySpecVersion:i.string,custody:i.string,aux:tc})],"RecoveryGetAttemptStatusResponse"),rc=bu((()=>({name:"recoveryKeyGetAttemptStatus",method:"GET",url:"/api/v2/recovery-keys/session/status",responseType:nc,encrypted:!0}))),ic=i.exact(i.type({email:i.union([i.string,i.undefined])})),sc=i.exact(i.type({sentToEmail:i.string})),oc=bu(((e,t)=>({name:"recoveryKeyStartEmailVerification",method:"POST",url:"/api/v2/recovery-keys/session/identity-verification/email/start"+(e?"?resend=true":""),body:t,responseType:sc,encrypted:!0}))),ac=i.exact(i.type({emailVerificationChallenge:i.string})),uc=bu((e=>({name:"recoveryKeySubmitEmailVerification",method:"POST",url:"/api/v2/recovery-keys/session/identity-verification/email/submit",body:e,responseType:f.ignore,encrypted:!0}))),cc=i.exact(i.type({encryptedKeyMaterial:i.string,encryptedKeyset:T.KeysetCiphertext}),"RecoveryGetMaterialResponse"),lc=bu((()=>({name:"recoveryKeyGetMaterial",method:"GET",url:"/api/v2/recovery-keys/session/material",responseType:cc,encrypted:!0}))),dc=i.exact(i.type({accountKeyFormat:i.string,accountKeyUuid:i.string,language:i.string,device:Li.Device.Type,keyset:T.KeysetCiphertext,userAuth:K.gx,deviceCredentials:i.union([Et.A1,i.undefined])})),yc=i.exact(i.type({sessionUuid:i.string,signInTokenDetails:i.union([Et.bm,i.undefined]),email:i.string,userUuid:i.string,accountUuid:i.string})),pc=bu((e=>({name:"recoveryKeyPostRegistration",method:"POST",url:"/api/v2/recovery-keys/session/complete",body:e,responseType:yc,encrypted:!0}))),mc=(0,o.F)("web-api/api/applications_catalog.ts"),fc=i.readonly(i.exact(i.type({uuid:i.string,name:i.string,url:i.string,isEnabled:i.boolean})),"ApplicationCatalogItem"),gc=i.readonly(i.exact(i.type({data:i.array(fc)})),"ApplicationCatalogItemReponse"),hc=mc((()=>({name:"getApplicationsCatalog",method:"GET",url:"/api/v1/applications/catalog",responseType:gc})));var vc=n(71215);const Cc=(0,o.F)("web-api/api/account_gated_feature_trials.ts"),Ac=Cc((e=>({name:"createAccountGatedFeatureTrialAction",method:"POST",url:"/api/v1/accountgatedfeaturetrial",body:e,responseType:f.ignore}))),wc=Cc((e=>({name:"updateAccountGatedFeatureTrialAction",method:"PATCH",url:"/api/v1/accountgatedfeaturetrial",body:e,responseType:f.ignore})));var Sc=n(87794)},58022:function(e,t,n){n.d(t,{BX:function(){return I},DO:function(){return b},FR:function(){return a},II:function(){return p},Ki:function(){return A},L9:function(){return T},S0:function(){return F},c$:function(){return k},my:function(){return c},tb:function(){return D},w0:function(){return w},xd:function(){return O}});var r=n(69243),i=n(98798),s=n(14502);const o=(0,n(73820).F)("web-api/api/item_share.ts");var a;!function(e){e.AnyoneWithTheLink="P",e.OnlySomePeople="A"}(a||(a={}));const u=(0,i.fromStringEnum)(a,"ItemShareAvailableTo");var c;!function(e){e.Email="E",e.Domain="D"}(c||(c={}));const l=(0,i.fromStringEnum)(c,"ItemShareRecipientType"),d=r.intersection([r.type({allowed:r.boolean,maxSize:r.number}),r.partial({allowedTypes:r.readonlyArray(u),allowedRecipientTypes:r.readonlyArray(l),maxExpiry:r.number,defaultExpiry:r.number,maxViews:r.union([r.number,r.undefined])})]),y=r.readonly(r.type({allowedTypes:r.readonlyArray(u),allowedRecipientTypes:r.readonlyArray(l),maxExpiry:r.number,defaultExpiry:r.number,maxViews:r.union([r.number,r.undefined]),files:d}),"ItemSharePreflightResponse");var p;!function(e){e.Active="A",e.Inactive="I"}(p||(p={}));const m=(0,i.fromStringEnum)(p,"ItemShareState"),f=r.readonly(r.type({type:r.literal(c.Email),email:r.string}),"ItemShareRecipientEmail"),g=r.readonly(r.type({type:r.literal(c.Domain),domain:r.string}),"ItemShareRecipientDomain"),h=r.union([f,g]),v=r.readonly(r.type({uuid:r.string,state:m,itemVersion:r.number,createdAt:i.IsoStringDate,expiresAt:i.IsoStringDate,sharedBy:r.readonly(r.type({uuid:r.string,name:r.union([r.string,r.undefined])})),encShareSecret:r.union([s.JweB,r.undefined]),url:r.string,type:u,recipients:r.union([r.readonlyArray(h),r.undefined]),viewCount:r.number,maxViews:r.union([r.number,r.undefined]),canDelete:r.boolean})),C=r.readonly(r.type({shares:r.readonlyArray(v)})),A=o(((e,t)=>({name:"getSharedHistoryForItem",method:"GET",url:`/api/v4/itemshare/${e}/${t}`,responseType:C}))),w=o(((e,t)=>({name:"getItemSharePreflight",method:"GET",url:`/api/v4/itemshare/preflight/${e}/${t}`,responseType:y}))),S=r.readonly(r.type({url:r.string}),"CreateItemShareResponse"),T=o((e=>({name:"createItemShare",method:"POST",url:"/api/v4/itemshare",body:e,responseType:S}))),P=r.readonly(r.type({rejectedRecipients:r.readonlyArray(h)})),b=o((e=>({name:"validateItemShareRecipients",method:"POST",url:"/api/v4/itemshare/validate-recipients",body:e,responseType:P}))),R=r.readonly(r.type({uuid:r.string,ip:r.string,accessorEmail:r.string,timestamp:i.IsoStringDate,action:r.string,location:r.union([r.readonly(r.type({city:r.string,country:r.string,countryCode:r.string}),"ItemShareAuditLocation"),r.undefined])}),"ItemShareAuditEvent"),E=r.readonly(r.type({createdAt:i.IsoStringDate,expiresAt:i.IsoStringDate,maxViews:r.union([r.number,r.undefined]),state:r.string,accessType:u,sharedBy:r.string,recipients:(0,i.withDefault)(r.readonlyArray(h),[]),events:(0,i.withDefault)(r.readonlyArray(R),[])}),"ItemShareAuditDetailsResponse"),I=o((e=>({name:"getItemShareAuditDetails",method:"GET",url:`/api/v3/itemshare/audit/${e}`,responseType:E}))),U=r.readonly(r.type({token:r.string,email:r.string,expiresAt:i.IsoStringDate}),"ShareSeviceAuthTokenResponse"),O=o((()=>({name:"getShareSeviceAuthToken",method:"GET",url:"/api/v3/itemshare/token",responseType:U}))),k=o(((e,t,n)=>({name:"deleteItemShare",method:"DELETE",url:`/api/v3/itemshare/${e}/${t}/${n}`,responseType:i.ignore}))),D=o((e=>({name:"updateAccountShareSettings",method:"POST",url:"/api/v3/itemshare/admin/settings",body:e,responseType:i.ignore}))),M=r.readonly(r.type({allowedDomains:(0,i.withDefault)(r.readonlyArray(r.string),[]),allowedTypes:r.readonlyArray(u),enforceAllowedDomains:r.boolean,allowFiles:r.union([r.boolean,r.undefined]),defaultExpiry:r.number,maxExpiry:r.number,maxViews:r.union([r.number,r.undefined]),allowTeamJoin:r.boolean})),F=o((()=>({name:"getAccountShareSettings",method:"GET",url:"/api/v3/itemshare/admin/settings",responseType:M})))},66334:function(e,t,n){n.d(t,{C:function(){return o},H:function(){return a}});var r=n(69243),i=n(14502);const s=(0,n(73820).F)("web-api/api/keyset.ts"),o=r.readonly(r.type({version:r.number,keysets:r.readonlyArray(i.KeysetCiphertext)}),"UserKeysets"),a=s((()=>({name:"getKeysets",method:"GET",url:"/api/v2/account/keysets",responseType:o})))},88764:function(e,t,n){n.d(t,{B2:function(){return w},Lo:function(){return l},R$:function(){return g},Rs:function(){return T},T5:function(){return h},VH:function(){return C},Vr:function(){return P},Z$:function(){return d},_Y:function(){return R},aF:function(){return y},bC:function(){return u},cl:function(){return b},jM:function(){return p},nu:function(){return c},qy:function(){return m},rq:function(){return S},tb:function(){return v},wk:function(){return A},wo:function(){return f},ws:function(){return E}});var r=n(69243),i=n(98798),s=n(73820),o=n(78072);const a=(0,s.F)("web-api/api/mfa.ts"),u="totp",c="email";var l;!function(e){e.Totp="T",e.Duo="D",e.Dsecret="S",e.DsecretProxy="P",e.WebAuthn="W",e.Email="E"}(l||(l={}));const d=r.readonly(r.intersection([r.type({type:(0,i.fromStringEnum)(l,"MfaType"),keyHandle:r.string,keyValue:r.string},"type"),r.partial({createdAt:r.string,updatedAt:r.string},"partial")]),"StandardMfaParams"),y=r.readonly(r.intersection([d,r.type({digits:r.number,code:r.string})]),"MfaCodeParams"),p=r.readonly(r.intersection([d,r.partial({digits:r.number,totpClientData:r.string})]),"MfaTotpParams"),m=r.readonly(r.intersection([d,r.partial({keyName:r.string,webAuthnClientData:r.string})]),"MfaWebAuthnParams"),f=r.union([p,m,y]),g=r.partial({dsecret:r.string,ssoMigrationGracePeriod:o.GQ},"VerifyMfaResponse"),h=r.readonly(r.type({length:r.number,method:r.string}),"SendMfaCodeResponse"),v=r.readonly(r.type({allowedTypes:r.array((0,i.fromStringEnum)(l,"MfaType")),canDisableAll:r.boolean,enforced:r.boolean,hasMFA:r.boolean}),"MfaConfig"),C=r.union([g,r.null],"EnableMfaResponse"),A=a((e=>({name:"enableMfa",method:"POST",url:"/api/v1/user/mfa",body:e,responseType:C}))),w=a((e=>({name:"disableMfa",method:"PUT",url:`/api/v1/user/mfa/${e}`,responseType:i.ignore}))),S=a((e=>({name:"sendMfaCode",method:"POST",url:"/api/v1/user/mfa/code",body:e,responseType:h,encrypted:!1}))),T=a((()=>({name:"getMfa",method:"GET",url:"/api/v1/user/mfa",responseType:r.array(f)}))),P=a((()=>({name:"getMfaConfig",method:"GET",url:"/api/v1/user/mfa/config",responseType:v}))),b=a((e=>({name:"verifyTotp",method:"POST",url:"/api/v1/user/mfa/totp/verify",body:{totpCode:e},responseType:g}))),R=r.readonly(r.type({challenge:r.string,rpid:r.string}),"GetWebAuthnChallengeResponse"),E=a((()=>({name:"getWebAuthnChallenge",method:"GET",url:"/api/v1/user/mfa/webauthn/challenge",responseType:R})))},45507:function(e,t,n){n.d(t,{$0:function(){return D},$N:function(){return k},$j:function(){return v},AM:function(){return L},D6:function(){return J},D7:function(){return $},E6:function(){return B},FL:function(){return F},FT:function(){return A},HN:function(){return X},Ib:function(){return b},It:function(){return V},LP:function(){return y},MO:function(){return g},Ov:function(){return W},PF:function(){return I},QD:function(){return q},Rp:function(){return C},UT:function(){return R},Vy:function(){return Y},WM:function(){return U},WT:function(){return w},Wp:function(){return Z},Y2:function(){return M},_g:function(){return K},aU:function(){return G},eR:function(){return _},g:function(){return l},gk:function(){return O},ip:function(){return S},l3:function(){return P},mn:function(){return m},pd:function(){return z},rb:function(){return E},so:function(){return N},tJ:function(){return T},ud:function(){return H},vO:function(){return f},wr:function(){return x},xr:function(){return h}});var r=n(69243),i=n(98798),s=n(16586),o=n(95743),a=n(73820),u=n(78359);const c=(0,a.F)("web-api/api/object_access.ts");var l;!function(e){e.ConnectCredentialsFull="full",e.ConnectCredentialsSigningPrivateKeyToken="signing-private-key,token",e.SigningPrivateKey="signing-private-key",e.AdminWatchtowerKeysetPrivateKey="private-key",e.DetailedVaultReportingKeysetPrivateKey="private-key",e.UserManagedServiceAccountCreator="usermanaged-service-account-creator",e.None=""}(l||(l={}));const d=(0,o.N6)(l,"DataType");var y;!function(e){e.ServiceAccountConnect="serviceaccount.connect",e.ServiceAccountDataStreaming="serviceaccount.streaming",e.AdminWatchtowerKeyset="keyset.adminwatchtower",e.ServiceAccountUserManaged="serviceaccount.usermanaged",e.DetailedVaultReportingKeyset="keyset.detailedvaultreporting"}(y||(y={}));const p=(0,o.N6)(y,"ObjectType");var m;!function(e){e.Manage="scope:manage",e.Every="scope:every",e.Some="scope:some"}(m||(m={}));const f=(0,o.N6)(m,"ObjectDataAccessScope");var g;!function(e){e.ServiceAccountTokenCreate="token-create",e.ServiceAccountTokenRevoke="token-delete",e.ServiceAccountTokenEdit="token-edit",e.ServiceAccountCreate="sa-create",e.ServiceAccountEdit="sa-edit",e.ServiceAccountDelete="sa-delete",e.ServiceAccountCreatorManaged="sa-creator-managed",e.ServiceAccountConnectVaultAccessEdit="vault-access-edit",e.ServiceAccountConnectAddRemove="add-remove"}(g||(g={}));const h=(0,o.N6)(g,"ObjectDataAccessAcl"),v=r.union([f,h]);var C;C||(C={});const A=(0,o.N6)(C,"ObjectDataAcl");var w;!function(e){e.Active="A"}(w||(w={}));const S=(0,o.N6)(w,"ObjectDataAccessState");var T;!function(e){e.Group="G",e.User="U"}(T||(T={}));const P=(0,o.N6)(T,"ObjectDataAccessorType"),b=r.readonly(r.union([r.type({dataType:d,encKey:i.crypto.JweB,encData:i.crypto.JweB}),r.type({dataType:r.literal(l.None)}),r.intersection([r.type({dataType:r.literal(l.UserManagedServiceAccountCreator)}),r.partial({creatorUuid:r.string})])]),"ObjectDataValue"),R=r.readonly(r.type({objectType:p,objectUuid:r.string,data:b,encryptedBy:r.string,acl:r.readonlyArray(r.string)})),E=r.readonly(r.type({data:R}),"UpdateObjectDataRequest"),I=r.readonly(r.type({avatar:r.string,name:r.string,type:r.string}),"AccessorPreview"),U=r.readonly(r.intersection([r.type({accessorType:P,accessorUuid:r.string,acl:r.readonlyArray(r.string),objectType:r.string,objectUuid:r.string,scope:f},"type"),r.partial({accessorPreview:I},"partial")],"CombinedObjectAccessor")),O=r.readonly(r.type({objectType:p,scope:f,keysets:r.readonlyArray(i.crypto.KeysetCiphertext),data:r.readonlyArray(R)}),"UserCombinedObjectDataAccess"),k=r.readonly(r.type({combinedAccess:O}),"UserCombinedObjectDataAccessResponse"),D=c((e=>({name:"getUserCombinedObjectDataAccess",method:"GET",url:`/api/v1/objects/${e}/access/combined`,responseType:k}))),M=r.readonly(r.type({access:r.array(U)})),F=r.readonly(r.intersection([r.type({state:S,objectType:p,accessorUuid:r.string,accessorType:P,kid:r.string,pubKey:i.crypto.JwkRsaPubKey,encryptedBy:r.string,createdAt:r.string,updatedAt:r.string,acl:r.array(v)},"type"),r.partial({encKeyset:i.crypto.KeysetCiphertext},"partial")]),"ObjectDataAccess"),_=c((e=>({name:"createObjectDataAccess",method:"POST",url:`/api/v1/objects/${e.access.objectType}/access`,body:e,responseType:o.ID}))),K=c(((e,t,n)=>({name:"deleteObjectDataAccess",method:"DELETE",url:`/api/v1/objects/${e}/access/${n}/${t}`,responseType:o.ID}))),N=r.readonly(r.type({access:r.readonlyArray(F)})),V=c(((e,t,n)=>({name:"getObjectDataAccess",method:"GET",url:`/api/v1/objects/${e}/access/${t}/${n}`,responseType:N}))),B=c(((e,t)=>({name:"createObjectData",method:"POST",url:`/api/v1/objects/${e}`,body:t,responseType:o.ID}))),L=c((e=>({name:"getObjectDataAccessorsForObjectType",method:"GET",url:`/api/v1/objects/${e}/access`,responseType:N}))),x=r.readonly(r.type({objectType:p,accessors:r.readonlyArray(F)}),"ObjectDataPreflightResponse"),G=c(((e,t,n)=>({name:"getCombinedObjectAccessors",method:"GET",url:`/api/v1/objects/${e}/${t}/access/combined${(0,u.Pj)({accessorDetails:n.accessorDetails})}`,responseType:M}))),Z=async(e,t)=>{try{return await j(e,t)}catch(e){const t=(0,s.getError)(e);if((0,s.isNewServerErrorWithStatus)(t,s.HTTPStatusCode.notFound))return;throw t}},j=c((e=>({name:"getObjectDataPreflightWith404",method:"GET",url:`/api/v2/objects/${e}/preflight`,responseType:x}))),Y=r.readonly(r.type({objectType:p,requiredGroups:(0,o.Wc)(r.readonlyArray(r.string),[]),existingAccess:r.union([F,r.undefined]),keyset:r.union([i.crypto.KeysetCiphertext,r.undefined]),data:(0,o.Wc)(r.readonlyArray(R),[])}),"ObjectDataAccessPreflightResponse"),H=c(((e,t,n)=>{let r=`/api/v1/objects/${e}/access/preflight/${t}`;return n&&(r+=`?accessoruuid=${n}`),{name:"getObjectDataAccessPreflight",method:"GET",url:r,responseType:Y}})),W=c(((e,t)=>({name:"addObjectData",method:"PATCH",url:`/api/v1/objects/${e}`,body:t,responseType:o.ID}))),$=c(((e,t,n,r)=>({name:"deleteObjectData",method:"DELETE",url:`/api/v1/objects/${e}/${t}/${n}/${r}`,responseType:o.ID}))),J=c((e=>({name:"getObjectDataAccessForUserAndType",method:"GET",url:`/api/v1/objects/${e}/access/user`,responseType:N}))),q=c(((e,t,n,r,i)=>({name:"updateObjectData",method:"PUT",url:`/api/v1/objects/${e}/${t}/${n}/${r}`,body:i,responseType:o.ID}))),z=r.readonly(r.type({objectType:p,objectData:r.readonlyArray(R)}),"ObjectDataWithSpec1Response"),X=c((e=>({name:"getAllObjectDataWithDataSpec1",method:"GET",url:`/api/v1/objects/${e}/dataspec/1`,responseType:z})))},13691:function(e,t,n){n.d(t,{Ky:function(){return h},SJ:function(){return m},Uc:function(){return C},Wy:function(){return f},o2:function(){return v},r:function(){return d}});var r=n(69243),i=n(98798),s=n(14502),o=n(92057),a=n(73820),u=n(15555);const c=(0,a.F)("web-api/api/oidc.ts"),l=r.readonly(r.type({authRedirect:r.string}),"StartOidcAuthResponse"),d=c((e=>({name:"startOidcAuth",method:"POST",url:"/api/v3/auth/sso/oidc/start",body:e,options:{headers:{"X-AgileBits-Client":i.config.clientDescriptor}},responseType:l,encrypted:!1}))),y=r.readonly(r.type({accountUuid:r.string,userUuid:r.string,email:r.string,sessionUuid:r.string}),"VerifyOidcResponseUserData"),p=r.union([r.literal("found"),r.literal("must_enroll_initial_device"),r.literal("device_not_enrolled"),r.literal("sso_migration_deadline_passed")],"VerifyOidcResponseType"),m=r.intersection([r.type({signInTokenDetails:u.bm},"signInTokenDetails"),r.partial({encSignInRefreshTokenDetails:s.Jwe},"encSignInRefreshTokenDetails")]),f=r.intersection([u.A1,r.readonly(r.type({accountKeyFormat:r.string,accountKeyUuid:r.string,userAuth:o.Lk}),"extra")],"CredentialBundleAuthResponse"),g=r.intersection([r.type({type:p},"type"),r.type({user:y},"user"),r.partial({auth:f},"auth"),r.type({ssoAuth:m},"ssoAuth")],"VerifyOidcResponse"),h=c(((e,t,n,r)=>({name:"verifyOIDC",method:"POST",url:"/api/v3/auth/sso/oidc/verify",options:{headers:{"X-AgileBits-Client":i.config.clientDescriptor}},encrypted:!1,body:{code:e,state:t,device:n,signInRefreshTokenClientKey:r},responseType:g}))),v=r.readonly(r.type({b5_state:r.string,redirect_uuid:r.string}),"NativeOidcState"),C=r.readonly(r.type({b5State:r.string,accountUuid:r.string,clientShortCode:r.string}),"SsoOidcState")},86560:function(e,t,n){n.d(t,{Fp:function(){return m},GA:function(){return p},N0:function(){return g},k2:function(){return y},kY:function(){return l},m4:function(){return d}});var r=n(69243),i=n(7581),s=n(98798),o=n(21328),a=n(73820),u=n(78359);const c=(0,a.F)("web-api/api/partial_user.ts"),l=r.readonly(r.type({uuid:r.string,name:r.string,email:r.string,avatar:r.string,state:r.string,type:r.string}),"PartialUser");var d;!function(e){e.Provisioning="P",e.Connect="C",e.DataStreaming="D",e.Cli="X",e.UserManaged="M",e.Na="",e.Slack="slack",e.Duo="duo",e.MaskedEmails="MaskedEmails",e.Brex="Brex",e.PrivacyCom="PrivacyCom"}(d||(d={}));const y=r.intersection([l,r.readonly(r.type({createdAt:r.string,creatorUuid:r.string,serviceAccountType:(0,s.fromStringEnum)(d,"ServiceAccountType")},"type")),r.partial({canActiveUserViewDetails:r.boolean,permissions:r.number},"partial")],"ServiceAccountsPartialUser");var p;!function(e){e.Migrated="MIGRATED",e.PendingMigration="PENDING_MIGRATION",e.InAuthRecovery="IN_AUTH_RECOVERY",e.PendingAuthRecovery="PENDING_AUTH_RECOVERY",e.Other="OTHER"}(p||(p={}));const m=r.readonly(r.intersection([l,r.partial({combinedPermissions:r.number,authState:(0,s.fromStringEnum)(p,"AuthStates")},"partial")]),"ExtendedPartialUser"),f=r.readonly(r.intersection([r.type({totalCount:r.number,users:r.readonlyArray(m)},"type"),r.partial({serviceAccounts:r.readonlyArray(y)},"partial")]),"GetPartialUsersResponse"),g=async(e,t,n)=>{if((0,o.E)(t.search))return{totalCount:0,users:[],serviceAccounts:[]};const r=t.emails?(0,i.Z)(t.emails):[],s=[];for(const e of r){const t=s.length-1,n=s[t];t>=0&&void 0!==n&&n.length+e.length<350?s[t]+=","+e:s.push(e)}const a=C(t.attrs);if(s.length>0){const r=s.map((async r=>{const i={...t,attrs:a,membershipLimit:n,emails:r,limit:t.limit,offset:t.offset,sort:t.sort,sortDir:t.sortDir};return h(e,(0,u.Pj)(i))}));return(await Promise.all(r)).reduce(((e,t)=>({totalCount:e.totalCount+t.totalCount,users:[...e.users,...t.users],serviceAccounts:[...e.serviceAccounts||[],...t.serviceAccounts||[]]})),{totalCount:0,users:[],serviceAccounts:[]})}{const n={...t,attrs:a,limit:t.limit,offset:t.offset,sort:t.sort,sortDir:t.sortDir};return h(e,(0,u.Pj)(n))}},h=c((e=>({name:"getUsers",method:"GET",url:`/api/v3/users${e}`,responseType:f}))),v={combinedPermissions:"combined-permissions",authState:"auth-state"},C=e=>e.map((e=>v[e]))},5003:function(e,t,n){n.d(t,{A3:function(){return T},F3:function(){return g},Fc:function(){return y},I_:function(){return h},NA:function(){return d},Nq:function(){return I},Od:function(){return E},PR:function(){return m},RM:function(){return w},RN:function(){return f},Rj:function(){return S},Vt:function(){return C},bU:function(){return R},f1:function(){return P},j_:function(){return v},jt:function(){return A},yC:function(){return b},z6:function(){return U}});var r=n(69243),i=n(19669),s=n(98798),o=n(73820),a=n(49756),u=n(78359),c=n(85486);const l=(0,o.F)("web-api/api/person.ts"),d=r.intersection([r.type({uuid:r.string,email:r.string,name:r.string,state:r.string,type:r.string,attrVersion:r.number,keysetVersion:r.number},"type"),r.partial({avatar:r.string,language:r.string,combinedPermissions:r.number,newsletterPrefs:r.number,preferences:r.number,externalGUID:r.string,createdAt:r.string,updatedAt:r.string,lastAuthAt:r.string},"partial")],"BasePerson"),y=r.intersection([d,r.partial({hasMFAEnabled:r.boolean,proposedEmail:r.string,pubKey:s.crypto.JwkRsaPubKey},"partial"),r.type({personalItemsCount:r.union([r.number,r.null]),keysets:r.union([r.readonlyArray(s.crypto.KeysetCiphertext),r.null]),memberships:r.union([r.readonlyArray(a.IQ.Type),r.null]),vaultAccess:r.union([r.readonlyArray(c.cG),r.null]),devices:r.union([r.readonlyArray(i.Device.Type),r.null])},"type")],"Person"),p=["pubkey","keysets","groups","vault-access","devices","personal-items-count","proposed-email-change"],m=l(((e,t)=>{const n=(0,u.KO)(t,p);return{name:"getUser",method:"GET",url:`/api/v2/user/${e}?states=all${n.length>0?"&attrs="+n.join(","):""}`,responseType:y}})),f=r.readonly(r.type({uuid:r.string,pubKey:s.crypto.JwkRsaPubKey}),"UserPubKey"),g=l((e=>({name:"getUserPubKeys",method:"GET",url:`/api/v1/user/pubkeys?uuids=${e.join(",")}`,responseType:r.array(f)}))),h=l((e=>({name:"changeUserName",method:"POST",url:"/api/v1/person/name",body:e,responseType:s.ignore}))),v=l((e=>({name:"changeUserAvatar",method:"POST",url:"/api/v1/person/avatar",body:e,responseType:s.ignore}))),C=l((e=>({name:"deleteUsers",method:"DELETE",url:`/api/v1/people/${e.join(",")}`,responseType:s.ignore}))),A=l(((e,t)=>({name:"deletePerson",method:"DELETE",url:"/api/v2/people",body:{uuid:e,reason:t},responseType:s.ignore}))),w=l(((e,t)=>({name:"confirmUsersWithMemberships",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:e,groupMemberships:t},responseType:s.ignore}))),S=l(((e,t)=>({name:"confirmUsersWithVaultAccessList",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:e,vaultaccess:t},responseType:s.ignore}))),T=l(((e,t,n)=>({name:"confirmUsersWithMembershipsAndVaultAccessList",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:e,groupMemberships:t,vaultaccess:n},responseType:s.ignore}))),P=l((e=>({name:"suspendUsers",method:"PUT",url:`/api/v1/people/suspend/${e.join(",")}`,responseType:s.ignore}))),b=l((e=>({name:"markAwayForTravel",method:"PUT",url:"/api/v1/people/enabletravel",body:{uuids:e},responseType:s.ignore}))),R=l((e=>({name:"markBackFromTravel",method:"PUT",url:"/api/v1/people/disabletravel",body:{uuids:e},responseType:s.ignore}))),E=l((e=>({name:"reactivateUsers",method:"PUT",url:`/api/v1/people/reactivate/${e.join(",")}`,responseType:s.ignore}))),I=l((e=>({name:"updateUser",method:"POST",url:"/api/v1/user/attrs",body:e,responseType:s.ignore}))),U=l(((e,t,n)=>({name:"upgradeGuestToMember",method:"PUT",responseType:s.ignore,url:`/api/v3/user/upgrade-guest/${e}`,body:{vault:t,membership:n}})))},68359:function(e,t,n){n.d(t,{$6:function(){return q},$F:function(){return te},Au:function(){return j},Bx:function(){return W},Cr:function(){return B},Ex:function(){return G},HD:function(){return Q},IU:function(){return ie},Ju:function(){return ae},Jv:function(){return P},LS:function(){return ue},LZ:function(){return I},Rb:function(){return N},Se:function(){return Z},T3:function(){return V},Tp:function(){return M},UU:function(){return H},WL:function(){return Y},XV:function(){return g},Z3:function(){return v},aF:function(){return z},am:function(){return L},bE:function(){return D},cy:function(){return C},d6:function(){return ce},fP:function(){return J},gn:function(){return S},gq:function(){return _},hV:function(){return oe},m5:function(){return x},oD:function(){return U},qC:function(){return E},qF:function(){return ee},qb:function(){return K},sG:function(){return f},sJ:function(){return A},u4:function(){return se},uk:function(){return ne},v_:function(){return T},wZ:function(){return k},xp:function(){return R},y3:function(){return O},yq:function(){return $},z4:function(){return X},z5:function(){return b},zq:function(){return h},zv:function(){return re}});var r=n(69243),i=n(46673),s=n(78641),o=n(98798),a=n(73820),u=n(86560),c=n(5003),l=n(82283),d=n(78359),y=n(85486),p=n(45765);const m=(0,a.F)("web-api/api/report.ts"),f=50;var g,h,v,C;!function(e){e.Overview="overview",e.ExtendedOverview="extended",e.Users="users"}(g||(g={})),function(e){e.NoManager="nomanager",e.HighPopulation="highlyshared"}(h||(h={})),function(e){e.UsersCount="userscount"}(v||(v={})),function(e){e.Active="active",e.All="all",e.Inactive="inactive"}(C||(C={}));const A=[C.All,C.Active,C.Inactive],w=r.type({vaultUuid:r.string,count:r.number}),S=r.readonly(r.type({user:c.Fc,groupCount:r.number,vaultCount:r.number,itemCount:r.number}),"ReportSectionUserOverview"),T=r.readonly(r.type({vaultUuid:r.string,itemUuid:r.string,lastUsedAt:r.string,lastUsedVersion:r.number,action:r.union([r.string,r.undefined])}),"ReportUserItemUsage"),P=r.readonly(r.type({itemUsages:r.readonlyArray(T),vaults:r.readonlyArray(y.jc),vaultItemsByVault:r.record(r.string,r.readonlyArray(p.nc))}),"ReportSectionUserItemUsage"),b=r.readonly(r.partial({overview:S,itemUsage:P}),"ReportUser"),R=r.readonly(r.type({usageByVaults:r.array(w),totalUsage:r.number}),"ReportUserItemUsageOverview"),E=r.readonly(r.partial({current:r.string,later:r.string,earlier:r.string}),"ReportCursors"),I=r.readonly(r.type({vaultUuid:r.string,userUuid:r.string,itemUuid:r.string,usedAt:r.string,usedVersion:r.number,action:r.union([r.string,r.undefined])}),"ReportItemUsage"),U=r.readonly(r.type({cursors:E,itemUsages:r.readonlyArray(I),vaults:r.record(r.string,y.jc),vaultItems:r.record(r.string,p.nc),partialUsers:r.record(r.string,u.kY),hasMore:r.boolean}),"ReportItem"),O=r.readonly(r.type({vault:y.jc,userCount:r.number,groupCount:r.number,currentUserUuids:r.array(r.string)}),"ReportSectionVaultOverview"),k=r.readonly(r.type({userUuid:r.string,itemUuid:r.string,lastUsedAt:r.string,lastUsedVersion:r.number,action:r.union([r.string,r.undefined])}),"ReportVaultItemUsage"),D=r.readonly(r.type({itemUsages:r.readonlyArray(k),vault:y.jc,vaultItems:r.readonlyArray(p.nc),usersByUserUuid:r.record(r.string,u.kY)}),"ReportSectionVaultItemUsage"),M=r.readonly(r.partial({overview:O,itemUsage:D}),"ReportVault"),F=r.readonly(r.type({usersCount:r.number,vault:y.jc}),"ReportVaultsItem"),_=r.readonly(r.type({items:r.readonlyArray(F)}),"ReportVaults"),K=r.readonly(r.type({deviceCount:r.number,hasMFAEnabled:r.boolean,hasLinkedAccount:r.boolean,lastAuthAt:(0,o.withDefaultUndefined)(r.string),createdAt:r.string,personalItemCount:r.number,personalVaultContentVersion:r.number,user:u.kY}),"ReportAccountUser"),N=r.readonly(r.type({userCount:r.number,groupCount:r.number,vaultCount:r.number}),"ReportSectionAccountOverview"),V=r.readonly(r.partial({overview:N,users:r.readonlyArray(K)}),"ReportAccount"),B=r.readonly(r.type({userActiveCount:r.number,userSuspendedCount:r.number,userPendingCount:r.number,userInRecoveryCount:r.number,userGuestCount:r.number,invitesPendingCount:r.number,groupCount:r.number,vaultCount:r.number,vaultSharedCount:r.number,privateVaultCount:r.number,privateVaultItemsCount:r.number,itemCount:r.number,itemSharedCount:r.number,deviceCount:r.number,fileCount:r.number,fileSize:r.number}),"ReportSectionExtendedAccountOverview"),L=r.readonly(r.type({extended:B}),"ReportOverview"),x=r.readonly(r.type({clientName:r.string,count:r.number,modernCount:r.number}),"ReportOldDevicesOverviewClient"),G=r.readonly(r.type({clients:r.readonlyArray(x)}),"ReportOldDevicesOverview"),Z=r.readonly(r.type({uuid:r.string,name:r.string,clientName:r.string,osName:r.string,osVersion:r.string,lastAuthAt:r.string}),"ReportOldDeviceDevice"),j=r.readonly(r.type({device:Z,user:u.kY}),"ReportOldDevice"),Y=r.readonly(r.type({overview:G,devices:r.readonlyArray(j)}),"ReportOldDevices"),H=r.readonly(r.type({reportName:r.string,lastViewedAt:r.string}),"LastViewedReport"),W=r.readonly(r.type({reports:r.readonlyArray(H)}),"LastViewedReports"),$=e=>"itemUuid"in e&&(0,o.isValidItemUuid)(e.itemUuid)?(0,o.isValidVaultUuid)(e.vaultUuid):"vaultUuid"in e&&(0,o.isValidVaultUuid)(e.vaultUuid)||"userUuid"in e&&(0,o.isValidUserUuid)(e.userUuid),J=m(((e,t)=>({name:"getUserReport",method:"GET",url:`/api/v1/report/user/${e}?sections=${t.join(",")}`,responseType:b}))),q=m(((e,t)=>({name:"getItemReportWithCursors",method:"GET",url:`/api/v1/report/itemusage/history${d.Pj({...(0,i.Z)(e,((e,t)=>(0,s.Z)(t))),cursor:t.earlier})}`,responseType:U,validation:"unsafe_report_only"}))),z=m(((e,t)=>({name:"getItemReportWithFilters",method:"GET",url:`/api/v1/report/itemusage/history${d.Pj({...(0,i.Z)(e,((e,t)=>(0,s.Z)(t))),date:t.date.toISOString(),todate:(0,l.qC)(t.toDate).toISOString(),limit:t.limit})}`,responseType:U,validation:"unsafe_report_only"}))),X=m(((e,t)=>({name:"getUserItemUsageOverview",method:"GET",url:`/api/v1/report/itemusage/overview${d.Pj({"user-uuid":e,date:t.date.toISOString(),todate:(0,l.qC)(t.toDate).toISOString()})}`,responseType:R}))),Q=m(((e,t)=>({name:"getVaultReport",method:"GET",url:`/api/v1/report/vault/${e}?sections=${t.join(",")}`,responseType:M}))),ee=m(((e,t)=>{let n=`/api/v1/report/vaults/${e}`;return t.length>0&&(n+=`?attrs=${t.join(",")}`),{name:"getVaultsReport",method:"GET",url:n,responseType:_}})),te=m((e=>({name:"getAccountReport",method:"GET",url:`/api/v2/report/account?sections=${e.join(",")}`,responseType:V}))),ne=m((e=>({name:"getOverviewReport",method:"GET",url:`/api/v1/report/overview?sections=${e.join(",")}`,responseType:L,options:{timeout:6e4}}))),re=m((()=>({name:"getOldDevicesReport",method:"GET",url:"/api/v1/report/devices/old",responseType:Y}))),ie=r.readonly(r.type({csv:r.string}),"GetAccountReportCsvResponse"),se=m((()=>({name:"getAccountReportCsv",method:"GET",url:"/api/v1/report/account/csv",responseType:ie}))),oe=m((e=>({name:"sendUnusedPrivateVaultEmail",method:"POST",url:"/api/v1/report/teamusage/unused-private-vault/notify",body:{recipients:e},responseType:o.ignore}))),ae=m((e=>({name:"sendUnredeemedFamilyAccountEmail",method:"POST",url:"/api/v1/report/teamusage/unredeemed-family-account/notify",body:{recipients:e},responseType:o.ignore}))),ue=m((e=>({name:"sendNoSigninPastMonthEmail",method:"POST",url:"/api/v1/report/teamusage/no-signin-past-month/notify",body:{recipients:e},responseType:o.ignore}))),ce=m((()=>({name:"getLastViewedReports",method:"GET",url:"/api/v1/report/lastviewed",responseType:W})))},98095:function(e,t,n){n.d(t,{U:function(){return o},W:function(){return s}});var r=n(61670),i=n(16586);const s=async(e,t,n,r)=>a(r?.timeout,t,{method:e,body:o(n,r?.dataType),cache:r?.cache?"default":"reload",credentials:r?.withCredentials?"include":void 0,headers:r?.headers}),o=(e,t)=>{if(null!=e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array){if("arraybuffer"===t)return e;throw new TypeError("Expected arraybuffer data type")}if("string"==typeof e){if("text"===t)return(0,r.J5)(e);throw new TypeError("Expected text data type")}if("json"===t)return(0,r.FA)(e);throw new TypeError("Unexpected request body and data type")}},a=async(e,t,n)=>{if(void 0===e)return fetch(t,n);if("undefined"==typeof AbortController)return Promise.race([fetch(t,n),new Promise(((t,n)=>{setTimeout((()=>n(u())),e)}))]);const r=new AbortController;return Promise.race([fetch(t,{...n,signal:r.signal}),new Promise(((t,n)=>{setTimeout((()=>{n(u()),r.abort()}),e)}))])},u=()=>new i.ClientError(i.ClientErrorCode.serverRequestTimedOut,"The request took too long. Check your Internet connection and try again.")},31918:function(e,t,n){n.d(t,{$F:function(){return p},A8:function(){return k},Al:function(){return g},BH:function(){return h},PG:function(){return b},SA:function(){return P},VD:function(){return d},VQ:function(){return S},aX:function(){return U},fJ:function(){return y},iu:function(){return E},ks:function(){return v},nq:function(){return R},p3:function(){return m},pr:function(){return I},ts:function(){return O},wP:function(){return f},wd:function(){return C},xH:function(){return w}});var r=n(69243),i=n(98798),s=n(95743),o=n(87794),a=n(73820),u=n(15555),c=n(47250);const l=(0,a.F)("web-api/api/signup.ts"),d=r.readonly(r.partial({promoCode:r.string},"partial"),"UpdateSignupRequest"),y=r.readonly(r.type({isEnabled:r.boolean,isRequired:r.boolean}),"SignupFeatureCreditCardForm"),p=r.readonly(r.type({isRequired:r.boolean,challenge:c.a0}),"SignupFeatureUnlockWithPasskey"),m=r.readonly(r.partial({creditCardForm:y,passkey:p}),"SignupFeatures"),f=r.readonly(r.type({accountUuid:r.string,accountName:r.string,domain:r.string,avatar:r.string,type:r.string,userAvatar:r.string,accountKeyFormat:r.string,accountKeyUuid:r.string,lastAuthAt:r.string,createdAt:r.string}),"AccountInfo"),g=r.readonly(r.intersection([r.type({uuid:r.string,domain:r.string,state:r.string,createdAt:r.string,completedAt:r.string,expiresAt:r.string,name:r.string,type:r.string,source:r.string,email:r.string,language:r.string,availablePlans:r.array(o.Plan),tierName:r.string,trialEndsAt:r.string,features:m,setupIntentCode:r.string},"SignupRequired"),r.partial({stepUuid:r.string,promoCode:r.string,flowServiceUuid:r.string,setupIntentCode:r.string,defaultBillingFrequency:o.FrequencyCodec,duplicateAccounts:r.array(f),accountCreationDisabled:r.boolean},"SignupPartial")],"Signup")),h=r.readonly(r.type({type:r.literal("O"),payload:r.type({code:r.string,state:r.string})}),"SsoOidcIdentity");var v;!function(e){e.CtoCiso="CTO/CISO",e.Devops="DevOps",e.Engineering="Engineering",e.Executive="Executive",e.Finance="Finance",e.Hr="HR",e.It="IT",e.Legal="Legal",e.Marketing="Marketing",e.Operations="Operations",e.Sales="Sales",e.Security="Security",e.Other="Other"}(v||(v={}));const C=r.readonly(r.type({companyRole:i.fromStringEnum(v,"CompanyRole")}),"UserMeta"),A=r.readonly(r.type({emailResendToken:r.string}),"AccountSignUp"),w=l((e=>({name:"legacySignUpAccount",method:"POST",url:"/api/v1/signup",body:e,responseType:s.ID,encrypted:!1}))),S=l((e=>({name:"signUpAccount",method:"POST",url:"/api/v2/signup",body:e,responseType:A,encrypted:!1}))),T=r.intersection([r.readonly(r.type({userUuid:r.string},"readonlyUserUuid")),r.readonly(r.partial({sessionUuid:r.string,signInTokenDetails:u.bm},"readonlyAuthDetails"))],"UserRegistrationResponse"),P=l((e=>({name:"signUpUser",method:"POST",url:"/api/v2/user",body:e,responseType:T,encrypted:!1}))),b=l((e=>({name:"getSignupDetails",method:"GET",url:`/api/v2/signup/${e}`,responseType:g,encrypted:!1}))),R=l(((e,t)=>({name:"updateSignup",method:"PATCH",url:`/api/v3/signup/${e}`,body:t,responseType:g}))),E=l(((e,t)=>({name:"updateSignupAccountType",method:"PATCH",url:`/api/v2/signup/${e}`,body:t,responseType:g}))),I=l(((e,t,n)=>({name:"signUpAndGetInfo",method:"GET",url:`/api/v2/signup/${e}?email=${encodeURIComponent(t)}&account-type=${n}`,responseType:g,encrypted:!1}))),U=r.readonly(r.type({accountUuid:r.string,userUuid:r.string,signInTokenDetails:i.withDefaultUndefined(u.bm)}),"AccountRegistrationResponse"),O=l((e=>({name:"postAccount",method:"POST",url:"/api/v1/account",body:e,responseType:U,encrypted:!1}))),k=l((e=>({name:"resendVerificationEmail",method:"POST",url:`/api/v1/signup/resend/${e}`,responseType:s.ID})))},78072:function(e,t,n){n.d(t,{Cj:function(){return R},GQ:function(){return l},JQ:function(){return c},MW:function(){return o},OH:function(){return p},SO:function(){return g},W3:function(){return u},XK:function(){return T},cp:function(){return f},ej:function(){return E},ev:function(){return S},fA:function(){return v},g5:function(){return y},gy:function(){return b},iH:function(){return C},je:function(){return A},o4:function(){return h},pd:function(){return P},r7:function(){return a},rB:function(){return d},rv:function(){return w}});var r=n(69243),i=n(98798);const s=(0,n(73820).F)("web-api/api/sso_settings.ts");var o,a,u;!function(e){e.Okta="Okta",e.Azure="Azure",e.Google="Google",e.Duo="Duo",e.OneLogin="OneLogin",e.JumpCloud="JumpCloud",e.Ping="Ping",e.Unknown="Unknown",e.Generic="Generic",e.Auth0="Auth0"}(o||(o={})),function(e){e.None="N",e.Everyone="E",e.SelectedGroups="S",e.ExceptGuests="G",e.ExcludedGroups="X"}(a||(a={})),function(e){e.Active="A",e.Disabled="D"}(u||(u={}));const c=r.type({enabledAt:r.string,deadline:r.string},"SsoGroup"),l=r.readonly(r.partial({remainingUnlocks:r.number,deadlineDate:r.string}),"SsoMigrationGracePeriod"),d=r.type({clientId:r.string,identityProvider:r.string,wellKnownUrl:r.string},"SsoOidcWellKnownSettingsRequest"),y=r.readonly(r.type({authorizationEndpoint:r.string,issuer:r.string,tokenEndpoint:r.string,userInfoEndpoint:r.string}),"WellKnownUrlResponse"),p=r.readonly(r.type({url:r.string}),"WellKnownUrlRequest"),m=r.intersection([r.type({clientId:r.string,authEndpoint:r.string,identityProvider:(0,i.fromStringEnum)(o,"IdentityProviders"),issuer:r.string,tokenEndpoint:r.string,userInfoEndpoint:r.string,privateApp:r.boolean,displayName:(0,i.withDefaultUndefined)(r.string)},"type"),r.partial({wellKnownExpiresAt:r.string,wellKnownUrl:r.string,clientSecret:r.string},"partial")],"SsoOidcSettings"),f=r.readonly(r.type({oidcSettings:m}),"SsoFederationSettings"),g=r.readonly(r.intersection([r.type({authenticationPolicy:(0,i.fromStringEnum)(a,"SsoAuthenticationPolicy"),federationType:r.string,state:(0,i.fromStringEnum)(u,"SsoState"),federationSettings:f},"type"),r.partial({gracePeriodAuthCount:r.number,ssoGroups:r.array(r.string,"ssoGroups"),gracePeriodDuration:r.number,lastVerifiedAt:r.union([r.string,r.undefined],"lastVerifiedAt"),offlineAccessSessionDuration:r.number},"partial")]),"SsoSettings"),h=r.readonly(r.type({authRedirect:r.string}),"SsoValidateResponse"),v=r.readonly(r.type({deadline:r.string}),"FindSsoGroupDeadlineResponse"),C=r.readonly(r.type({totalRecoveryUsers:r.number,usersToRecover:r.array(r.string,"usersToRecover"),groupsSsoBreakdowns:r.array(r.type({groupUuid:r.string,userCount:r.number}),"groupsSsoBreakdowns")}),"AffectedUserCounts"),A=s((()=>({name:"getSsoSettings",method:"GET",url:"/api/v2/sso/settings",responseType:g}))),w=s((e=>({name:"createSsoSettings",method:"POST",url:"/api/v2/sso/settings",body:e,responseType:i.ignore}))),S=s((e=>({name:"updateSsoSettings",method:"PUT",url:"/api/v2/sso/settings",responseType:i.ignore,body:e}))),T=s((e=>({name:"ssoValidateStart",method:"POST",url:"/api/v2/sso/settings/oidc/validate/start",body:e,responseType:h}))),P=s((e=>({name:"ssoValidateEnd",method:"POST",url:"/api/v2/sso/settings/oidc/validate/verify",body:e,responseType:i.ignore}))),b=s(((e,t)=>({name:"getAffectedUserCounts",method:"POST",url:"/api/v2/sso/settings/recovery/breakdown",body:{ssoGroupsIncluded:e,ssoGroupsExcluded:t},responseType:C}))),R=s((e=>({name:"getGroupDeadline",method:"GET",url:`/api/v2/sso/group/${e}/deadline`,responseType:v}))),E=s((e=>({name:"postOidcWellKnownUrl",method:"POST",url:"/api/v2/sso/wellknown",body:e,responseType:y})))},84641:function(e,t,n){n.d(t,{Ak:function(){return p},Kc:function(){return c},OR:function(){return d},Xh:function(){return a},h:function(){return l},pc:function(){return u},sD:function(){return y},tU:function(){return o}});var r=n(69243),i=n(98798);const s=(0,n(73820).F)("web-api/api/support.ts"),o=r.readonly(r.type({provider:r.string,status:r.string}),"BillingSupportInfo"),a=r.readonly(r.type({name:r.string,uuid:r.string,domain:r.string,type:r.string,state:r.string,tierName:r.string,avatar:r.string,createdAt:r.string,canBeDeleted:r.boolean,billing:o}),"AccountSupportInfo"),u=r.readonly(r.type({avatar:r.string,accountKeyFormat:r.string,accountKeyUuid:r.string,lastAuthAt:r.string}),"UserSupportInfo"),c=r.readonly(r.type({account:a,user:u}),"SupportInfo"),l=r.readonly(r.type({accounts:r.array(c)}),"SupportGetAccounts"),d=s((e=>({name:"requestSupportEmail",method:"GET",url:`/api/v1/support/start/${encodeURIComponent(e)}`,responseType:i.ignore}))),y=s(((e,t)=>({name:"getSupportAccountsList",method:"GET",url:`/api/v1/support/getaccounts/${encodeURIComponent(e)}/token/${t}`,encrypted:!1,responseType:l}))),p=s(((e,t,n)=>({name:"requestAccountDeletion",method:"GET",url:`/api/v1/support/senddelete/account/${e}?email=${encodeURIComponent(t)}&token=${n}`,responseType:i.ignore})))},82283:function(e,t,n){n.d(t,{Cb:function(){return c},UF:function(){return u},Vt:function(){return l},XH:function(){return r},qC:function(){return a}});var r,i=n(62323),s=n(61320),o=n.n(s);!function(e){e[e.AllTime=0]="AllTime",e[e.LastWeek=7]="LastWeek",e[e.LastMonth=30]="LastMonth",e[e.Last2Months=60]="Last2Months",e[e.Last3Months=90]="Last3Months",e[e.Last6Months=180]="Last6Months",e[e.Last12Months=365]="Last12Months"}(r||(r={}));const a=e=>{if(e===r.AllTime)return new Date(0);const t=e<30?{days:e}:{months:e/30};return o()().subtract(t).toDate()},u=[r.LastWeek,r.LastMonth,r.Last2Months,r.Last3Months,r.Last6Months,r.Last12Months,r.AllTime],c=e=>t=>t===r.AllTime?0:o()(e).subtract(t,"days").valueOf(),l=e=>t=>(0,i.Z)(t,((e,t)=>o()(t.lastUsedAt).isSameOrBefore(e)?o()(t.lastUsedAt):e),o()(e)).valueOf()},15555:function(e,t,n){n.d(t,{A1:function(){return a},IR:function(){return u},bm:function(){return s},oV:function(){return o}});var r=n(69243),i=n(14502);const s=r.type({token:r.string,publicKey:r.string},"signInTokenDetails"),o=r.readonly(r.type({encCredentials:i.Jwe,v:r.literal(1)}),"EncryptedDeviceCredentials"),a=r.readonly(r.type({encCredentials:i.JweB,v:r.literal(2)}),"EncryptedCredentialBundle"),u=r.type({requestId:r.number,accountUuid:r.string,userUuid:r.string},"TrustedDeviceUpgradeEventRequest")},47729:function(e,t,n){n.d(t,{Gz:function(){return y},UO:function(){return l},kY:function(){return m},n5:function(){return p},w$:function(){return c},wH:function(){return d}});var r=n(69243),i=n(98798),s=n(73820),o=n(49756),a=n(85486);const u=(0,s.F)("web-api/api/user.ts"),c=u((e=>({name:"beginChangeEmail",method:"POST",url:"/api/v1/emailchange/begin",body:{email:e},responseType:i.ignore}))),l=u(((e,t)=>({name:"completeChangeEmail",method:"POST",url:"/api/v1/emailchange/complete",body:{auth:e,token:t},responseType:i.ignore}))),d=u((e=>({name:"cancelChangeEmail",method:"POST",url:"/api/v1/emailchange/cancel",body:{email:e},responseType:i.ignore}))),y=u((()=>({name:"promptConfirmChangeEmail",method:"POST",url:"/api/v1/emailchange/propose/verify",responseType:i.ignore}))),p=r.readonly(r.intersection([r.type({uuid:r.string,createdAt:r.string,lastAuthAt:r.string,email:r.string,firstName:r.string,lastName:r.string,name:r.string,attrVersion:r.number,keysetVersion:r.number,state:r.string,type:r.string,avatar:r.string,language:r.string,accountKeyFormat:r.string,accountKeyUuid:r.string,combinedPermissions:r.number,newsletterPrefs:r.number,preferences:r.number,keysets:r.union([r.readonlyArray(i.crypto.KeysetCiphertext),r.null]),vaultAccess:r.union([r.readonlyArray(a.cG),r.null]),hasMFAEnabled:r.boolean},"type"),r.partial({updatedAt:r.string,memberships:r.array(o.IQ.Type),externalGUID:r.string,csToken:r.string},"partial")]),"User"),m=r.readonly(r.intersection([r.type({uuid:r.string,firstName:r.string,lastName:r.string,name:r.string,email:r.string,avatar:r.string,state:r.string,type:r.string}),r.partial({combinedPermissions:r.number})]))},78359:function(e,t,n){n.d(t,{FA:function(){return g},KO:function(){return p},N6:function(){return m},Pj:function(){return l},u5:function(){return f}});var r=n(69243),i=n(91670),s=n(94146),o=n(27206),a=n(87347),u=n(61320),c=n.n(u);const l=e=>{const t=(0,i.Z)(e,(e=>d(e))),n=(0,s.Z)(t,(e=>e.length>0)),r=(0,o.Z)(n,((e,t)=>encodeURIComponent(t)+"="+e));return r.length>0?"?"+r.join("&"):""},d=e=>Array.isArray(e)?e.map((e=>encodeURIComponent(y(e)))).join(","):encodeURIComponent(y(e)),y=e=>null==e?"":"string"==typeof e?e:Array.isArray(e)?e.map((e=>y(e))).join(","):JSON.stringify(e),p=(e,t)=>t.slice(0,15).filter(((t,n)=>0!=(e&1<<n))),m=(e,t)=>{const n=t=>"string"==typeof t&&(0,a.Z)(e).includes(t);return new r.Type(t,n,((e,t)=>n(e)?r.success(e):r.failure(e,t)),r.identity)};var f;!function(e){e.Older="older",e.Newer="newer"}(f||(f={}));const g=(e,t)=>e===f.Newer?c().utc(t).startOf("day"):c().utc(t).endOf("day")},85486:function(e,t,n){n.d(t,{FA:function(){return u.FA},Fv:function(){return R},HN:function(){return E},Id:function(){return F},Jz:function(){return y},KE:function(){return x},Lf:function(){return I},ML:function(){return L},Oh:function(){return _},R1:function(){return w},Tt:function(){return h},Uh:function(){return H},XG:function(){return b},_w:function(){return g},aV:function(){return V},cG:function(){return p},hA:function(){return d},hg:function(){return j},jc:function(){return m},mz:function(){return A},nl:function(){return G},pD:function(){return B},pT:function(){return Z},qJ:function(){return C},qu:function(){return O},ro:function(){return T},sh:function(){return N},tJ:function(){return M},uf:function(){return v},uq:function(){return Y},vh:function(){return P},yX:function(){return D},zr:function(){return U}});var r=n(69243),i=n(98798),s=n(95743),o=n(73820),a=n(40508),u=n(78359),c=n(69935);const l=(0,o.F)("web-api/api/vault.ts"),d=r.readonly(r.type({uuid:r.string,avatar:r.string,type:r.string}),"PreviewGroup"),y=r.readonly(r.type({uuid:r.string,avatar:r.string,initials:r.string}),"PreviewUser"),p=r.readonly(r.type({vaultUuid:r.string,accessorType:r.keyof({group:!0,user:!0}),accessorUuid:r.string,vaultKeySN:r.number,encVaultKey:r.union([i.crypto.JweB,r.undefined]),encryptedBy:r.string,acl:r.number,leaseTimeout:r.number}),"VaultAccess"),m=r.readonly(r.intersection([r.type({uuid:r.string,type:r.string,attrVersion:r.number,contentVersion:r.number,encAttrs:i.crypto.JweB},"type"),r.partial({createdAt:r.string,updatedAt:r.string,access:r.readonlyArray(p),combinedAccess:p,activeItemCount:r.number,clientAccess:r.number,archivedKeys:r.readonlyArray(i.crypto.JweB),itemCategories:r.readonlyArray(c._t),previewGroups:r.readonlyArray(d),previewUsers:r.readonlyArray(y)},"partial")]),"Vault"),f=["accessors","archived-keys","categories","combined-access"],g=l((e=>{const t=[e.withAccessorPreviews?"accessor-previews":void 0,"combined-access"].filter((e=>void 0!==e)).join(",");return{name:"getVaults",method:"GET",url:`/api/v1/vaults${(0,u.Pj)({user:e.user,group:e.group,permission:e.permission,attrs:t||void 0,limit:e.limit})}`,responseType:r.array(m)}})),h=l((()=>({name:"getVaultsForAccountTransfer",method:"GET",url:"/api/v1/vaults/account-transfer",responseType:r.array(m)}))),v={getDateString:e=>(0,u.FA)(e,void 0).toISOString(),direction:u.u5.Older,limit:25},C=r.readonly(r.type({vaults:r.readonlyArray(m),hasMoreData:r.boolean}),"LimitedVaultsResponse"),A=l(((e,t,n)=>({name:"getVaultsByCreation",method:"GET",url:`/api/v1/vaults/timeline/${encodeURIComponent(e||v.getDateString(t))}/${t}${(0,u.Pj)({limit:n.limit||v.limit})}`,responseType:C}))),w=l(((e,t)=>{const n=(0,u.KO)(t,f);return{name:"getVault",method:"GET",url:`/api/v3/vault/${e}${n.length>0?"?attrs="+n.join(","):""}`,responseType:m}})),S=(0,s.Hj)(m),T=l((()=>({name:"getSystemVault",method:"GET",url:"/api/v1/vault/system",responseType:S}))),P=l((()=>({name:"getManagedVault",method:"GET",url:"/api/v1/vault/managed",responseType:S}))),b=l((()=>({name:"getPersonalVault",method:"GET",url:"/api/v1/vault/personal",responseType:S}))),R=l((()=>({name:"getEveryoneVault",method:"GET",url:"/api/v1/vault/everyone",responseType:S}))),E=l((()=>({name:"getGeneratedPasswordsVault",method:"GET",url:"/api/v1/vault/generatedpasswords",responseType:S}))),I=l((e=>({name:"updateVault",method:"PUT",url:`/api/v3/vault/${e.uuid}/attrs`,body:e,responseType:s.ID}))),U=l(((e,t)=>({name:"updateVaultClientAccess",method:"PUT",url:"/api/v1/vault/clientaccess",body:{uuid:e,clientAccess:t},responseType:s.ID}))),O=l(((e,t)=>({name:"addVaultAccess",method:"PATCH",url:`/api/v2/vault/${e}/vaultaccess`,body:{vaultaccess:t},responseType:s.ID}))),k=r.readonly(r.intersection([r.type({mandatoryGroupUuids:r.readonlyArray(r.string),adminGroupUuids:r.readonlyArray(r.string),enableAdminGroupsByDefault:r.boolean}),r.partial({iconSet:a.R})]),"CreateVaultPreflight"),D=l((e=>({name:"getCreateVaultPreflight",method:"GET",url:`/api/v1/vault/preflight/create?type=${e}`,responseType:k}))),M=l((()=>({name:"createAccountTransferVaultPreflight",method:"GET",url:"/api/v1/vault/preflight/account-transfer/create",responseType:k}))),F=l((e=>({name:"createVault",method:"POST",url:"/api/v2/vault",body:e,responseType:s.ID}))),_=l((e=>({name:"createVaultForAccountTransfer",method:"POST",url:"/api/v1/vault/account-transfer",body:e,responseType:s.ID}))),K=r.readonly(r.type({archivedItemCount:r.number}),"DeleteVaultPreflight"),N=l((e=>({name:"deleteVaultPreflight",method:"GET",url:`/api/v1/vault/preflight/delete/${e}`,responseType:K}))),V=l((e=>({name:"deleteVault",method:"DELETE",url:`/api/v4/vault/${e}`,responseType:s.ID}))),B=l(((e,t,n)=>({name:"deleteAccessorFromVault",method:"DELETE",url:`/api/v1/vault/${e}/${n?"group":"person"}/${t}`,responseType:s.ID}))),L=l(((e,t,n)=>({name:"updatePersonVaultAccessPermissions",method:"PATCH",url:`/api/v1/acl/person/${e}/${t}/${n}`,responseType:s.ID}))),x=l(((e,t,n)=>({name:"updateGroupVaultAccessPermissions",method:"PATCH",url:`/api/v1/acl/group/${e}/${t}/${n}`,responseType:s.ID}))),G=l((e=>({name:"updateBulkGroupVaultAccessPermissions",method:"PATCH",url:"/api/v2/acl/groups",body:e,responseType:s.ID}))),Z=l((e=>({name:"enableTravelSafe",method:"PUT",url:`/api/v1/vault/${e}/enabletravel`,responseType:s.ID}))),j=l((e=>({name:"disableTravelSafe",method:"PUT",url:`/api/v1/vault/${e}/disabletravel`,responseType:s.ID}))),Y=l((e=>({name:"enableServiceAccountAccess",method:"PUT",url:`/api/v1/vault/${e}/enableserviceaccountaccess`,responseType:s.ID}))),H=l((e=>({name:"enableServiceAccountAccess",method:"PUT",url:`/api/v1/vault/${e}/disableserviceaccountaccess`,responseType:s.ID})))},45765:function(e,t,n){n.d(t,{Dk:function(){return w},HA:function(){return d},L:function(){return l},Ng:function(){return c},PR:function(){return u},Pm:function(){return m},Tq:function(){return y},eZ:function(){return f},fb:function(){return S},hy:function(){return o},nc:function(){return a},ou:function(){return v},pw:function(){return p},rL:function(){return A},u0:function(){return T},u7:function(){return P},ys:function(){return h},zQ:function(){return g}});var r=n(69243),i=n(98798);const s=(0,n(73820).F)("web-api/api/vault_item.ts"),o=r.readonly(r.type({fileId:r.string,signature:r.string}),"FileReference"),a=r.intersection([r.type({uuid:r.string,templateUuid:r.string,itemVersion:r.number,encryptedBy:r.string,encOverview:i.crypto.JweB},"type"),r.partial({faveIndex:r.number,trashed:r.string,createdAt:r.string,updatedAt:r.string,changerUuid:r.string,packageUuid:r.string,encDetails:i.crypto.JweB,fileReferences:r.readonlyArray(o)},"partial")],"VaultItem"),u=r.intersection([r.type({contentVersion:r.number,batchComplete:r.boolean},"type"),r.partial({items:r.readonlyArray(a),deletedItemUuids:r.readonlyArray(r.string)},"partial")],"ItemsResponse"),c=s((e=>({name:"getVaultItemsOverviews",method:"GET",url:`/api/v1/vault/${e}/items/overviews`,responseType:u}))),l=s(((e,t)=>({name:"getVaultItems",method:"GET",url:`/api/v2/vault/${e}/${t}/items`,responseType:u}))),d=r.readonly(r.type({item:a}),"ItemDetailResponse"),y=s(((e,t)=>({name:"getVaultItemDetails",method:"GET",url:`/api/v1/vault/${e}/item/${t}`,responseType:d}))),p=s(((e,t)=>({name:"getVaultItemVersion",method:"GET",url:`/api/v1/vault/${e}/itemversion/${t}`,responseType:r.number}))),m=r.readonly(r.type({changerUUID:r.string,changerFullName:r.string,changerEmail:r.string,changerAvatar:r.string,updatedAt:r.string,itemVersion:r.number}),"ItemHistoryMetadata"),f=r.readonly(r.type({history:r.array(m)}),"ItemHistoryResponse"),g=s(((e,t)=>({name:"getVaultItemHistory",method:"GET",url:`/api/v1/vault/${e}/item/${t}/history`,responseType:f}))),h=s(((e,t,n)=>({name:"getPreviousVersionOfItem",method:"GET",url:`/api/v1/vault/${e}/item/${t}/history/${n}`,responseType:a}))),v=s((e=>({name:"getDeletedVaultItems",method:"GET",url:`/api/v1/vault/${e}/items/deleted`,responseType:r.array(a)}))),C=r.type({retentionDays:r.number,since:r.string,items:r.array(a)},"DeletedVaultItemsResponse"),A=s((e=>({name:"getDeletedVaultItems",method:"GET",url:`/api/v2/vault/${e}/items/deleted`,responseType:C}))),w=s(((e,t)=>({name:"postPurgeDeletedVaultItems",method:"POST",url:`/api/v2/vault/${e}/items/deleted/purge`,body:{itemUuids:t},responseType:i.ignore}))),S=s(((e,t)=>({name:"deleteVaultItemHistory",method:"DELETE",url:`/api/v1/vault/${e}/item/${t}/history/all`,responseType:i.ignore}))),T=r.type({contentVersion:r.number,updatedItems:(0,i.withDefault)(r.record(r.string,r.number),{}),failedItems:(0,i.withDefault)(r.record(r.string,r.number),{})},"PatchVaultItemsResponse"),P=s(((e,t,n)=>({name:"patchVaultItems",method:"PATCH",url:`/api/v3/vault/${e}/${t}/items`,body:n,responseType:T})))},69935:function(e,t,n){n.d(t,{NJ:function(){return d},Ow:function(){return c},_t:function(){return u},hc:function(){return o},lm:function(){return a},q3:function(){return l},rZ:function(){return y},sp:function(){return p}});var r=n(69243),i=n(98798);const s=(0,n(73820).F)("web-api/api/vault_item_template.ts"),o=r.readonly(r.partial({source:r.string,detail:r.string}),"VaultItemTemplateIcons"),a=r.partial({subtitle:r.string,hidden:r.string,availability:r.string,icons:o},"VaultItemTemplateAttrs"),u=r.intersection([r.type({uuid:r.string,singularName:r.string,pluralName:r.string,icon:r.string,sourceIcon:r.string,activeItemCount:(0,i.withDefault)(r.number,0),state:(0,i.withDefault)(r.string,""),version:(0,i.withDefault)(r.number,0),createdAt:i.OptionalIsoStringDate,updatedAt:i.OptionalIsoStringDate},"type"),r.partial({templateUuid:r.string,attrs:a},"partial")],"VaultItemTemplate"),c=r.readonly(r.type({version:r.number,templates:r.readonlyArray(u)}),"AccountTemplatesResponse"),l=s((e=>{let t="/api/v3/templates";return e&&(t+="/all"),{name:"getAccountTemplates",method:"GET",url:t,responseType:c}})),d=s((e=>({name:"getDefaultTemplate",method:"GET",url:`/api/v2/template/default/${e}`,responseType:u,encrypted:!1}))),y=s((e=>({name:"postTemplate",method:"POST",url:"/api/v1/template",body:u.encode(e),responseType:i.ignore}))),p=s(((e,t)=>({name:"changeTemplatesState",method:"PATCH",url:`/api/v1/template/${e.join(",")}/state/${t}`,responseType:i.ignore})))},67741:function(e,t,n){n.d(t,{FG:function(){return y},I4:function(){return f},K2:function(){return o},Ly:function(){return p},O$:function(){return a},S3:function(){return c},S6:function(){return l},sX:function(){return u},xI:function(){return m},yH:function(){return d}});var r=n(69243),i=n(98798);const s=(0,n(73820).F)("web-api/api/verified_domain.ts");var o;!function(e){e.Email="E",e.Dns="D"}(o||(o={}));const a=r.readonly(r.partial({txtRecord:r.string}),"BeginDomainVerificationResponse"),u=s(((e,t,n)=>({name:"beginDomainVerification",method:"POST",url:"/api/v1/verifieddomains/begin",body:{type:e,domain:t,emailMailbox:n},responseType:a}))),c=s(((e,t,n)=>({name:"completeDomainVerification",method:"POST",url:"/api/v1/verifieddomains/complete",body:{type:e,domain:t,token:n},responseType:i.ignore}))),l=r.readonly(r.intersection([r.type({domain:r.string},"type"),r.partial({aliasOf:r.string},"partial")]),"VerifiedDomain"),d=r.readonly(r.intersection([r.type({domain:r.string,type:r.string},"type"),r.partial({txtRecord:r.string},"partial")]),"PendingVerifiedDomain"),y=r.readonly(r.type({verified:r.readonlyArray(l),pending:r.readonlyArray(d)}),"GetVerifiedDomainsResponse"),p=s((()=>({name:"getVerifiedDomains",method:"GET",url:"/api/v1/verifieddomains",responseType:y}))),m=s((e=>({name:"updateVerifiedDomain",method:"PUT",url:"/api/v1/verifieddomains/update",body:e,responseType:i.ignore}))),f=s((e=>({name:"deleteVerifiedDomain",method:"DELETE",url:`/api/v1/verifieddomains/${e}`,responseType:i.ignore})))},47250:function(e,t,n){n.d(t,{$V:function(){return M},Ak:function(){return h},CS:function(){return W},Du:function(){return b},EC:function(){return z},Ev:function(){return N},Gk:function(){return j},Jd:function(){return q},M6:function(){return p},PY:function(){return k},RV:function(){return I},Rw:function(){return F},T6:function(){return A},Ty:function(){return J},VC:function(){return R},XK:function(){return O},Ye:function(){return E},Yg:function(){return Y},a0:function(){return _},a2:function(){return f},dy:function(){return D},er:function(){return d},fR:function(){return c},g0:function(){return T},gP:function(){return U},gq:function(){return m},jT:function(){return H},m_:function(){return B},n0:function(){return K},nT:function(){return w},pp:function(){return y},re:function(){return V},tC:function(){return g},uY:function(){return l},wk:function(){return P},x0:function(){return v},yV:function(){return $},zN:function(){return S}});var r=n(69243),i=n(98798),s=n(73820),o=n(13691),a=n(15555);const u=(0,s.F)("web-api/api/webauthn.ts"),c=r.literal("public-key"),l=r.literal("ble"),d=r.literal("hybrid"),y=r.literal("internal"),p=r.literal("nfc"),m=r.literal("usb"),f=r.literal("discouraged"),g=r.literal("preferred"),h=r.literal("required"),v=r.type({type:c,id:r.string,transports:i.withDefaultUndefined(r.array(r.union([l,d,y,p,m],"WebauthnCredentialDescriptorType")))},"WebauthnCredentialDescriptor"),C=r.type({appid:i.withDefaultUndefined(r.string),credProps:i.withDefaultUndefined(r.boolean),hmacSecret:i.withDefaultUndefined(r.boolean)},"WebauthnCredentialExtensionClientInputs"),A=r.type({challenge:r.string,timeout:i.withDefaultUndefined(r.number),rpId:i.withDefaultUndefined(r.string),allowCredentials:i.withDefaultUndefined(r.array(v)),userVerification:i.withDefaultUndefined(r.union([f,g,h])),extensions:i.withDefaultUndefined(C)},"WebauthnPublicKeyRequest"),w=r.readonly(r.type({publicKey:A},"WebauthnAssertion")),S=r.readonly(r.type({alg:r.number,type:c}),"PublicKeyCredentialParameters"),T=r.readonly(r.intersection([r.type({name:r.string}),r.partial({id:r.string})]),"PublicKeyCredentialRpEntity"),P=r.readonly(r.type({displayName:r.string,id:r.string,name:r.string}),"PublicKeyCredentialUserEntity"),b=r.keyof({direct:void 0,enterprise:void 0,indirect:void 0,none:void 0}),R=r.keyof({ble:void 0,hybrid:void 0,internal:void 0,nfc:void 0,usb:void 0}),E=r.keyof({"cross-platform":void 0,platform:void 0}),I=r.keyof({discouraged:void 0,preferred:void 0,required:void 0}),U=I,O=r.readonly(r.partial({authenticatorAttachment:E,requireResidentKey:r.boolean,residentKey:I,userVerification:U}),"AuthenticatorSelectionCriteria"),k=r.readonly(r.intersection([r.type({id:i.arrayBuffer,type:c}),r.partial({transports:r.array(R)})]),"PublicKeyCredentialDescriptor"),D=r.readonly(r.partial({appId:r.string,credProps:r.boolean,hmacCreateSecret:r.boolean}),"AuthenticationExtensionsClientInputs"),M=r.readonly(r.intersection([r.type({challenge:r.string,pubKeyCredParams:r.array(S),rp:T,user:P}),r.partial({attestation:b,authenticatorSelection:O,excludeCredentials:r.array(k),extensions:D,timeout:r.number})]),"PublicKeyCredentialCreationOptions"),F=r.readonly(r.type({aborted:r.boolean,onabort:r.Function,reason:r.any,throwIfAborted:r.Function,addEventListener:r.Function,removeEventListener:r.Function}),"AbortSignal"),_=r.readonly(r.partial({publicKey:M,signal:F}),"CredentialCreationOptions"),K=r.exact(r.type({clientDataJSON:r.string,attestationObject:i.withDefaultUndefined(r.string),transports:i.withDefaultUndefined(r.array(r.string))})),N=r.exact(r.type({id:r.string,type:r.string,rawId:r.string,response:K}),"CredentialCreationResponse"),V=r.exact(r.type({clientDataJSON:r.string,authenticatorData:i.withDefaultUndefined(r.string),signature:i.withDefaultUndefined(r.string),userHandle:i.withDefaultUndefined(r.string)})),B=r.exact(r.type({id:r.string,type:r.string,rawId:r.string,response:V}),"CredentialAssertionResponse"),L=r.readonly(r.type({accountUuid:r.string,userUuid:r.string,email:r.string,sessionUuid:r.string}),"VerifyPasskeyResponseUserData"),x=r.union([r.literal("found"),r.literal("must_enroll_initial_device"),r.literal("device_not_enrolled")],"VerifyPasskeyResponseType"),G=r.type({type:x,user:L,auth:i.withDefaultUndefined(o.Wy),signInTokenDetails:a.bm},"VerifyPasskeyResponse"),Z=r.type({challenge:_},"RegisterWebauthnCredentialResponse"),j=r.readonly(r.type({name:r.string,createdAt:r.string,updatedAt:r.string,credentialId:r.string})),Y=u(((e,t,n,r)=>({name:"verifyPasskey",method:"POST",url:"/api/v3/auth/passkey/verify",options:{headers:{"X-AgileBits-Client":i.config.clientDescriptor}},encrypted:!1,body:{userUuid:e,device:t,assertion:n,keyId:r},responseType:G}))),H=u((()=>({name:"registerWebauthnCredential",method:"POST",url:"/api/v2/auth/webauthn/register",encrypted:!0,responseType:Z}))),W=u(((e,t)=>({name:"verifyWebauthnCredentialAttestation",method:"POST",url:"/api/v2/auth/webauthn/register/challenge",encrypted:!0,body:{name:e,attestation:t},responseType:j}))),$=r.readonly(r.type({credentials:r.array(j,"credentials")})),J=u((e=>({name:"getUserCredentials",method:"GET",url:`/api/v2/users/${e}/credentials`,responseType:$}))),q=u(((e,t)=>({name:"deleteUserCredential",method:"DELETE",url:`/api/v2/users/${e}/credentials/${t}`,responseType:i.ignore}))),z=u(((e,t)=>({name:"updateUserCredentials",method:"PATCH",url:`/api/v2/users/credential/${e}`,encrypted:!0,body:{name:t},responseType:j})))},76515:function(e,t,n){n.r(t),n.d(t,{Auk:function(){return U},ClientItemSnapshotPayloadVersion:function(){return Ot},CredentialBundle:function(){return ce},CryptoVersion:function(){return Be},DEFAULT_SRP_METHOD:function(){return Y},DeviceKey:function(){return ve},EncryptedVaultItemSnapshot:function(){return kt},Envelope:function(){return $t},EnvelopeC:function(){return tn},InputRecoveryKey:function(){return He},JwkX25519PriKey:function(){return Yt},JwkX25519PubKey:function(){return jt},KeyDerivationInfo:function(){return I},ManagedAccountKey:function(){return de},PAPER_KEY_PREFIX:function(){return Le},RECOVERY_CODE_LENGTH:function(){return xe},RecoveryKey:function(){return Je},SecretKey:function(){return Ie},SecretKeyFormat:function(){return be},ServiceAccountThrottleKeypair:function(){return Te},SnapshotWatchtowerReport:function(){return It},SrpMethod:function(){return L},SrpMethodPrefix:function(){return N},SrpStarter:function(){return W},SrpV:function(){return oe},SrpX:function(){return ae},TagRouteKey:function(){return et},UrlAutofillParentKey:function(){return Me},UrlAutofillSessionKey:function(){return Fe},VaultItemSnapshot:function(){return Ut},VaultItemSnapshotEnvelope:function(){return an},VaultItemSnapshotWithClientData:function(){return Dt},VaultItemSnapshotWithServerData:function(){return Mt},VaultReportingPrivateKey:function(){return Et},VaultReportingPublicKey:function(){return bt},VaultSnapshotAdditionalData:function(){return on},exactPartial:function(){return Wt},exactType:function(){return Ht},password_key_derivation_consts:function(){return cn},unsafePrimitives:function(){return un}});var r=n(69243),i=n(98798),s=n(14502);const o=()=>{throw new Error("JSON.stringify has been disabled for this type. Seralization for this type is either disallowed, or must be invoked explicitly.")};var a;const u="mp",c="A256GCM",l="AES-GCM",d={name:l,length:256};class y{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_Aes256EncryptionResult",this.data=e,this.iv=t}}y.new=e=>new y(e.data,e.iv);class p{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_Aes256EncryptionKey",this.toJSON=o,this.encryptRaw=async(e,t)=>{const n=await m(),r={name:l,iv:n,tagLength:128};void 0!==t&&(r.additionalData=t);const i=await s.subtle.encrypt(r,this.encryptionKey,e),o=new Uint8Array(i);return y.new({data:o,iv:n})},this.decryptRaw=async(e,t)=>{const n={name:l,iv:e.iv,tagLength:128};void 0!==t&&(n.additionalData=t);const r=await s.subtle.decrypt(n,this.encryptionKey,e.data);return new Uint8Array(r)},this.exportJwk=async()=>{const e=await s.subtle.exportKey("jwk",this.encryptionKey);return(0,i.decode)({...e,kid:this.kid},s.JwkSymKey).unwrap()},this.exportCryptoKey=async()=>this.encryptionKey,this.encryptionKey=e,this.kid=t}}a=p,p.generate=async()=>a.fromRawBytes((0,s.getRandomBytes)(32),(0,i.generateUUID)()),p.fromRawBytes=async(e,t)=>{if(32!==e.length)throw new Error("Bad key len");const n=await s.subtle.importKey("raw",e,d,!0,["encrypt","decrypt"]);return new a(n,t)},p.inspectJwk=async e=>{if(e.alg!==c)throw new Error(`Unexpected alg: ${e.alg}`);if(!0!==e.ext)throw new Error("Unexpected ext");if(2!==e.key_ops.length||!e.key_ops.includes("encrypt")||!e.key_ops.includes("decrypt"))throw new Error(`Invalid key_ops: ${JSON.stringify(e.key_ops)}`);if("oct"!==e.kty)throw new Error(`Unexpected kty: ${e.kty}`)},p.fromJwk=async e=>{await a.inspectJwk(e);const t=(0,i.base64urlToBytes)(e.k);return a.fromRawBytes(t,e.kid)};const m=async()=>(0,s.getRandomBytes)(12);var f;const g="b5+jwk+json";class h{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_GENERALIZED_KEYS_JwebAes256EncryptionKey",this.toJSON=o,this.encryptRaw=async(e,t)=>this.encryptionKey.encryptRaw(e,t),this.decryptRaw=async(e,t)=>this.encryptionKey.decryptRaw(e,t),this.processJweB=(e,t=!1)=>{if(e.kid!==this.kid)throw new Error("Invalid JweB: bad KID");if(e.enc!==c)throw new Error("Invalid JweB: bad enc");if(e.cty!==g)throw new Error("Invalid JweB: bad cty");if(void 0===e.iv||e.iv.length<12)throw new Error("Invalid JweB: bad iv length");if(e.data.length<32)throw new Error("Invalid JweB: bad data length");const n=(0,i.base64urlToBytes)(e.data),r=(0,i.base64urlToBytes)(e.iv),s=y.new({data:n,iv:r});if(t){if(this.kid!==u)throw new Error("Cannot extract derivation info if not MP");return void 0===e.alg||void 0===e.p2c||void 0===e.p2s?{encrypted:s,kdfInfo:void 0}:{encrypted:s,kdfInfo:{alg:e.alg,enc:e.enc,iterations:e.p2c,salt:e.p2s}}}if(void 0!==e.alg||void 0!==e.p2c||void 0!==e.p2s)throw new Error("Unexpected derivation info");return{encrypted:s,kdfInfo:void 0}},this.encryptJweB=async(e,t)=>{const{data:n,iv:r}=await this.encryptRaw(e,t);return{kid:this.kid,enc:c,cty:g,iv:(0,i.bytesToBase64url)(r),data:(0,i.bytesToBase64url)(n)}},this.decryptJweB=async(e,t)=>{const{encrypted:n,kdfInfo:r}=this.processJweB(e,!1);return this.decryptRaw(n,t)},this.encryptAndEncodeUnauthenticatedKdfInfo=async(e,t,n)=>{const r=await this.encryptJweB(e,n);return r.alg=t.alg,r.p2c=t.iterations,r.p2s=t.salt,r},this.decryptAndExtractUnauthenticatedKdfInfo=async(e,t)=>{const{encrypted:n,kdfInfo:r}=this.processJweB(e,!0);return{plaintext:await this.decryptRaw(n,t),unverifiedKdfInfo:r}},this.exportJwk=async()=>this.encryptionKey.exportJwk(),this.exportCryptoKey=async()=>this.encryptionKey.exportCryptoKey(),this.encryptionKey=e,this.kid=e.kid}}f=h,h.generate=async()=>new f(await p.generate()),h.fromRawBytes=async(e,t)=>f.fromAes256Key(await p.fromRawBytes(e,t)),h.fromAes256Key=async e=>new f(e),h.fromJwk=async e=>f.fromAes256Key(await p.fromJwk(e));const v=async(e,t,n,r,i)=>{const o=await s.subtle.importKey("raw",t,{name:"HKDF"},!1,["deriveBits"]),a={name:"HKDF",hash:e,info:n,salt:r},u=await s.subtle.deriveBits(a,o,8*i);return new Uint8Array(u)};var C;!function(e){e.Sha256="SHA-256",e.Sha384="SHA-384",e.Sha512="SHA-512"}(C||(C={}));const A=async(e,t=C.Sha256)=>{const n=await s.subtle.digest({name:t},e);return new Uint8Array(n)},w=65e4,S=async(e,t,n,r)=>{const o=R(e);return(async(e,t,n,r,o)=>{if(r<1e4)throw new Error(`PBKDF2 cannot operate with fewer than 10000 interations, ${r} was supplied.`);const a=(0,i.str2ab)(t),u=await s.subtle.importKey("raw",a,{name:"PBKDF2"},!1,["deriveBits"]),c={name:"PBKDF2",salt:n,iterations:r,hash:{name:e}},l=await s.subtle.deriveBits(c,u,8*o);return new Uint8Array(l)})(o.alg,t,n,r,o.length)},T="PBES2-HS256",P="PBES2g-HS256",b=P,R=e=>{switch(e){case T:case P:return{alg:C.Sha256,length:32};default:throw new Error(`Invalid PBKDF2 alg: ${e}`)}};var E;const I=r.readonly(r.exact(r.type({alg:r.string,iterations:r.number,salt:r.string,enc:r.string})),"KeyDerivationInfo");class U{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_Auk",this.toJSON=o,this.KID=()=>"mp",this.exportJwk=async()=>this.key.exportJwk(),this.exportJwkJSON=async()=>JSON.stringify(await this.key.exportJwk()),this.encrypt=async e=>{if(void 0===this.derivationInfo)throw new Error("Missing derivation info for AUK");return this.key.encryptAndEncodeUnauthenticatedKdfInfo(e,this.derivationInfo)},this.decrypt=async e=>{const{plaintext:t,unverifiedKdfInfo:n}=await this.key.decryptAndExtractUnauthenticatedKdfInfo(e);return void 0===this.derivationInfo&&(this.derivationInfo=n),t},this.key=e,this.derivationInfo=t}}E=U,U.fromRawBytes=async(e,t)=>{if(32!==e.length)throw new Error("Bad key len");return new E(await h.fromRawBytes(e,u),t)},U.generateForTrustedDevice=async()=>E.fromRawBytes((0,s.getRandomBytes)(32),O()),U.__testGenerate=async()=>E.fromRawBytes((0,s.getRandomBytes)(32),O()),U.fromJwk=async(e,t)=>{if(e.kid!==u)throw new Error("KeyID for Auk is incorrect");return new E(await h.fromJwk(e),t)},U.fromJwkWithRandomKdfInfoSsoOnly=async e=>{if(e.kid!==u)throw new Error("KeyID for Auk is incorrect");return new E(await h.fromJwk(e),O())},U.deriveKdfBytes=async(e,t)=>{const{email:n,password:r}=t,{alg:s,iterations:o,salt:a}=e,u=n.trim().toLowerCase(),c=D(r);if(s.startsWith("PBES2-")){const e=await k(r);return S(s,`${u}:${e}`,(0,i.base64urlToBytes)(a),o)}if(s.startsWith("PBES2g-")){const e=(0,i.str2ab)(u),t=(0,i.str2ab)(s),n=await v(C.Sha256,(0,i.base64urlToBytes)(a),t,e,32);return S(s,c,n,o)}throw new Error("Unknown derivation alg")},U.derive=async(e,t)=>{const{email:n,password:r,secretKey:i}=t,s=await E.deriveKdfBytes(e,{email:n,password:r}),o=await i.combineWithBytes(s);return E.fromRawBytes(o,e)},U.deriveDefaultKdf=async e=>E.derive(O(),e);const O=()=>({alg:b,iterations:w,enc:c,salt:(0,s.getSalt)(128)}),k=async e=>{if(0===e.length)return"";const t=await A((0,i.str2ab)(e),C.Sha256);return(0,i.bytesToBase64url)(t).replace(/=+$/,"")},D=e=>e?e.trim().normalize("NFKD"):"";var M,F,_,K,N,V=n(35567);class B{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SessionKey",this.toJSON=o,this.rawKey=e}}M=B,B.__crypto_internal={new:async e=>new M(e)},function(e){e.Group4096="4096",e.Group6144="6144",e.Group8192="8192"}(K||(K={})),function(e){e.Srp="SRP-",e.SrpG="SRPg-"}(N||(N={}));class L{constructor(e,t){this.toString=()=>this.prefix+this.srpGroupName,this.prefix=e,this.srpGroupName=t}get group(){return H[this.srpGroupName]}}L.fromParts=(e,t)=>new L(e,t),L.fromString=e=>{const t=G[e];if(!t)throw new Error("Unknown SRP method");return t};const x=[L.fromParts(N.Srp,K.Group4096),L.fromParts(N.Srp,K.Group6144),L.fromParts(N.Srp,K.Group8192),L.fromParts(N.SrpG,K.Group4096),L.fromParts(N.SrpG,K.Group6144),L.fromParts(N.SrpG,K.Group8192)],G=Object.fromEntries(x.map((e=>[e.toString(),e]))),Z=K.Group4096,j=N.SrpG,Y=L.fromParts(j,Z),H={[K.Group4096]:{N:new V.BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",16),g:new V.BigInteger("5")},[K.Group6144]:{N:new V.BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DCC4024FFFFFFFFFFFFFFFF",16),g:new V.BigInteger("5")},[K.Group8192]:{N:new V.BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD922222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC8862F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A66D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC50846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E7160C980DD98EDD3DFFFFFFFFFFFFFFFFF",16),g:new V.BigInteger("19")}};class W{constructor(e,t,n,r,s,a){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpStarter",this.toJSON=o,this.recieveBigBhex=async e=>{const{g:t,N:n}=this.group,r=new V.BigInteger(e,16);if(r.mod(n).equals(V.BigInteger.ZERO)||r.mod(n).equals(V.BigInteger.ONE))throw new Error("Invalid SRP B value");const[s,o]=await Promise.all([z(this.group),Q(this.group,this.bigA,r)]),a=this.littleA.add(o.multiply(this.x)),u=r.subtract(t.modPow(this.x,n).multiply(s)),c=(0,i.str2ab)($(u.modPow(a,n))),l=await A(c,C.Sha256);return ee.__crypto_internal.new(l,this.group,this.bigA,r,this.salt,this.identity)},this.littleA=e,this.bigA=t,this.group=n,this.x=r,this.salt=s,this.identity=a}get bigAhex(){return $(this.bigA)}}F=W,W.__crypto_internal={new:async(e,t,n,r)=>{const i=J((0,s.getRandomBytes)(32)),{g:o,N:a}=t,u=o.modPow(i,a);return new F(i,u,t,e,n,r)},__testNew:async(e,t,n,r,i,s)=>new F(i,s,t,e,n,r)};const $=e=>e.toString(16).replace(/^(0x)?0*/,""),J=e=>new V.BigInteger((0,i.bytesToHex)(e),16),q=e=>(0,i.hexToBytes)(e.toString(16)),z=async e=>{const{g:t,N:n}=e,r=X(t,n),s=await A((0,i.concatUint8Arrays)([q(n),r]),C.Sha256);return J(s)},X=(e,t)=>{const n=(0,i.hexToBytes)(t.toString(16)).byteLength,r=(0,i.hexToBytes)(e.mod(t).toString(16)),s=n-r.byteLength;if(0===s)return r;if(s<0)return r.slice(-2);const o=new Uint8Array(n);return o.set(r,s),o},Q=async(e,t,n)=>{const{g:r,N:s}=e,o=X(t,s),a=X(n,s),u=await A((0,i.concatUint8Arrays)([o,a]),C.Sha256),c=J(u);if(c.mod(s).equals(V.BigInteger.ZERO))throw new Error("Invalid SRP u value (u mod N = 0)");return c};class ee{constructor(e,t,n){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UnconfirmedSrpSessionKey",this.toJSON=o,this.recieveServerHash=async e=>{const t=await A((0,i.concatUint8Arrays)([q(this.bigA),this.m,this.rawKey]),C.Sha256);if(e!==(0,i.bytesToBase64url)(t))throw new Error("Invalid server hash");return B.__crypto_internal.new(this.rawKey)},this.__crypto_internal={rawKey:()=>this.rawKey},this.rawKey=e,this.m=t,this.bigA=n}get clientHash(){return(0,i.bytesToBase64url)(this.m)}}_=ee,ee.__crypto_internal={new:async(e,t,n,r,i,s)=>{const o=await te(t,s,i,n,r,e);return new _(e,o,n)}};const te=async(e,t,n,r,s,o)=>{const{g:a,N:u}=e,[c,l]=await Promise.all([A(q(u),C.Sha256),A(q(a),C.Sha256)]),d=ne(c,l),y=await A((0,i.str2ab)(t),C.Sha256);return A((0,i.concatUint8Arrays)([d,y,n,q(r),q(s),o]),C.Sha256)},ne=(e,t)=>{if(e.length!==t.length)throw new Error("cannot xor with mismatched lengths");const n=new Uint8Array(e.length);for(const[r,i]of e.entries()){const e=t[r];if(void 0===e)throw new Error("xor: bByte undefined");n[r]=i^e}return n};var re,ie,se;class oe{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpV",this.toJSON=o,this.exportServerHex=async()=>$(this.v),this.group=e,this.v=t}}re=oe,oe.__crypto_internal={fromBigInt:async(e,t)=>new re(e,t)};class ae{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpX",this.toJSON=o,this.exportBytes=()=>{const e=(0,i.hexToBytes)(this.x.toString(16)),t=32-e.length;if(0===t)return e;if(t<0)throw new Error(`SrpX bytes exceeded expected length ${t}`);const n=new Uint8Array(32).fill(0);return n.set(e,t),n},this.exportHex=()=>(0,i.bytesToHex)(this.exportBytes()),this.exportBase64Url=()=>(0,i.bytesToBase64url)((0,i.hexToBytes)(this.exportHex())),this.verifier=async e=>{const{g:t,N:n}=e;return oe.__crypto_internal.fromBigInt(e,t.modPow(this.x,n))},this.beginAuth=async(e,t,n)=>W.__crypto_internal.new(this.x,e,t,n),this.x=e}}ie=ae,ae.fromRawBytes=async e=>{if(e.length>32)throw new Error("Bad key len");return new ie(new V.BigInteger((0,i.bytesToHex)(e),16))},ae.generateForTrustedDevice=async()=>ie.fromRawBytes((0,s.getRandomBytes)(32)),ae.fromHex=async e=>ie.fromRawBytes((0,i.hexToBytes)(e));const ue=r.readonly(r.exact(r.type({srpx:r.string,auk:s.JwkSymKey})),"SerializedCredentialBundle");class ce{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_CredentialBundle",this.toJSON=o,this.__crypto_internal={serialize:async()=>(0,i.json2ab)(ue.encode({srpx:(0,i.bytesToBase64url)(this.srpx.exportBytes()),auk:await this.auk.exportJwk()}))},this.srpx=e,this.auk=t}}var le;se=ce,ce.new=async e=>new se(e.srpx,e.auk),ce.generateForTrustedDevice=async()=>se.new({srpx:await ae.generateForTrustedDevice(),auk:await U.generateForTrustedDevice()}),ce.forActiveUser=async e=>{if(!e.user?.masterKey)throw new Error("No auk found");const t=e.user?.masterKey;if(!(t instanceof U))throw new TypeError("Master key is not a valid Auk");if(!e.session.auth?.srpX)throw new Error("No srpx found");const n=await ae.fromHex(e.session.auth.srpX);return se.new({srpx:n,auk:t})},ce.unsafeIfInputNotTrustworthyDeserialize=async e=>{const t=(0,i.decode)(e,i.jsonBytes.pipe(ue)).unwrap();return se.new({srpx:await ae.fromRawBytes((0,i.base64urlToBytes)(t.srpx)),auk:await U.fromJwkWithRandomKdfInfoSsoOnly(t.auk)})};class de{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountKey",this.toJSON=o,this.KID=()=>this.uuid,this.exportJwk=async()=>this.key.exportJwk(),this.encrypt=async e=>this.key.encryptJweB(e),this.decrypt=async e=>this.key.decryptJweB(e),this.key=e,this.uuid=t}}le=de,de.fromJwk=async e=>new le(await h.fromJwk(e),e.kid);var ye,pe,me=n(55737);class fe{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_GENERALIZED_KEYS_HkdfKey",this.toJSON=o,this.deriveExportableCryptoKey=async(e,t,n)=>s.subtle.deriveKey({name:"HKDF",...e},this.kdfKey,t,!0,n),this.deriveAes256Key=async(e,t)=>{const n=await this.deriveExportableCryptoKey(e,{name:"AES-GCM",length:256},["encrypt","decrypt"]),r=new Uint8Array(await s.subtle.exportKey("raw",n));return p.fromRawBytes(r,t)},this.deriveCryptoKey=async(e,t,n)=>s.subtle.deriveKey({name:"HKDF",...e},this.kdfKey,t,!1,n),this.hkdfOutput=async e=>this.hkdfOutputWithCustomSalt({hash:e.hash,info:e.info,salt:new Uint8Array,len:e.len}),this.hkdfOutputWithCustomSalt=async e=>{const t={name:"HKDF",hash:e.hash,info:e.info,salt:e.salt};return new Uint8Array(await s.subtle.deriveBits(t,this.kdfKey,8*e.len))},this.exportRawIkm=()=>this.rawIkm,this.rawIkm=e,this.kdfKey=t,this.length=e.length}}ye=fe,fe.generate=async()=>ye.fromRawBytes((0,s.getRandomBytes)(32)),fe.fromRawBytes=async e=>{if(e.length<32)throw new Error("Bad key len");const t=await s.subtle.importKey("raw",e,{name:"HKDF"},!1,["deriveKey","deriveBits"]);return new ye(e,t)};const ge=r.readonly(r.exact(r.type({kid:r.string,k:r.string,s:r.string})),"SerializedDeviceKey");class he{constructor(){this.KEY_DOMAIN_SEPARATOR="1P_SSO_CREDENTIAL_BUNDLE_KEY:LOCAL",this.AD_DOMAIN_SEPARATOR="1P_SSO_CREDENTIAL_BUNDLE:LOCAL2"}async serialize(e){return e.__crypto_internal.serialize()}async deserialize(e){return ce.unsafeIfInputNotTrustworthyDeserialize(e)}}class ve{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_DeviceKey",this.toJSON=o,this.computeContextSummary=async(e,t)=>{const n=await this.hkdfKey.deriveCryptoKey({hash:"SHA-384",info:(0,i.str2ab)("1P_DEVICE_KEY_CONTEXT_SUMMARY_KEY"),salt:(0,i.str2ab)(this.kid)},{name:"HMAC",hash:"SHA-384"},["sign"]),r=await s.subtle.sign({name:"HMAC"},n,(0,i.json2ab)({accountUuid:e,userUuid:t}));return(0,i.bytesToBase64url)(new Uint8Array(r))},this.serialize=async(e,t)=>{const n={kid:this.kid,k:(0,i.bytesToBase64url)(this.hkdfKey.exportRawIkm()),s:await this.computeContextSummary(e,t)};return JSON.stringify(n)},this.deriveAes256JwebKey=async e=>h.fromAes256Key(await this.hkdfKey.deriveAes256Key({hash:"SHA-384",info:(0,i.str2ab)(e.KEY_DOMAIN_SEPARATOR),salt:(0,i.str2ab)(this.kid)},this.kid)),this.encrypt=async(e,t)=>(await this.deriveAes256JwebKey(e)).encryptJweB(await e.serialize(t),(0,i.str2ab)(e.AD_DOMAIN_SEPARATOR)),this.decrypt=async(e,t)=>{const n=await this.deriveAes256JwebKey(e),r=await n.decryptJweB(t,(0,i.str2ab)(e.AD_DOMAIN_SEPARATOR));return e.deserialize(r)},this.encryptCredentialBundle=async e=>this.encrypt(new he,e),this.decryptCredentialBundle=async e=>this.decrypt(new he,e),this.exportObfuscated=async(e,t)=>{const n=await(0,me.obfuscate)(await this.serialize(e,t));return JSON.stringify(n)},this.kid=e,this.hkdfKey=t}}pe=ve,ve.generate=async()=>pe.fromRawBytes((0,s.getRandomBytes)(32),(0,i.generateUUID)()),ve.fromRawBytes=async(e,t)=>{if(32!==e.length)throw new Error("Bad key len");return new pe(t,await fe.fromRawBytes(e))},ve.fromSerialized=async(e,t,n)=>{const r=(0,i.decode)(e,i.json.pipe(ge)).unwrap(),s=await pe.fromRawBytes((0,i.base64urlToBytes)(r.k),r.kid);if(await s.computeContextSummary(t,n)!==r.s)throw new Error("Bad summary value");return s},ve.fromObfuscated=async(e,t,n)=>{const r=(0,i.decode)(e,i.json.pipe(s.JweB)).unwrap();return pe.fromSerialized(await(0,me.deobfuscate)(r),t,n)};var Ce,Ae,we=n(58248);const Se=Symbol();class Te{constructor(e,t){this[Ae]="B5_CRYPTO_KEYS_ServiceAccountThrottleKeypair",this.toJSON=o,this.exportSeed=()=>this.seed,this.getPublicKey=async()=>this.pub,this.getPublicKeyHex=async()=>(0,i.bytesToHex)(this.pub),this.seed=e,this.pub=t}}var Pe,be;Ce=Te,Ae=Se,Te.generate=async()=>{const e=(0,s.getRandomBytes)(32),t=we.sign.keyPair.fromSeed(e);return new Ce(e,t.publicKey)},function(e){e.A2="A2",e.A3="A3",e.TrustedDevice="TD"}(be||(be={}));class Re{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_SecretKey_UnknownFormat",this.format=e}toString(){return this.format}}const Ee="23456789ABCDEFGHJKLMNPQRSTVWXYZ";class Ie{constructor(e,t,n){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_SecretKey",this.toJSON=o,this.identifier=()=>`${this.format.toString()}-${this.id}`,this.maskedString=()=>this.identifier()+" •••••• ••••• ••••• ••••• •••••",this.unwrapFormatAsKnown=()=>{const e=this.format;switch(e){case be.A3:case be.A2:case be.TrustedDevice:return e;default:throw new Error("Unknown secret key format")}},this.formatKey=()=>{const e=this.rawKeyMaterial;let t;try{t=this.unwrapFormatAsKnown()}catch{throw new Error("Cannot display secret key with unknown format")}switch(t){case be.A3:return[e.slice(0,6),e.slice(6,11),e.slice(11,16),e.slice(16,21),e.slice(21,26)].join("-");case be.A2:return[e.slice(0,5),e.slice(5,10),e.slice(10,15),e.slice(15,20),e.slice(20,25)].join("-");case be.TrustedDevice:return new Array(6).join("*")}},this.exportSensitiveReadableString=()=>{const e=this.formatKey();return`${this.identifier()}-${e}`},this.combineWithBytes=async e=>{const t=(0,i.str2ab)(this.rawKeyMaterial),n=(0,i.str2ab)(this.format.toString()),r=(0,i.str2ab)(this.id),s=await v(C.Sha256,t,n,r,e.length),o=new Uint8Array(e.length);for(const[t,n]of e.entries()){const e=s[t];if(void 0===e)throw new Error("combineWithBytes: personalByte undefined");o[t]=n^e}return o},this.id=e,this.format=t,this.rawKeyMaterial=n}async exportObfuscated(){return(0,me.obfuscate)(this.exportSensitiveReadableString())}static async fromObfuscated(e){return Pe.fromInput(await(0,me.deobfuscate)(e))}isTrustedDeviceFormat(){return this.format===be.TrustedDevice}__testKeyStrLen(){return this.rawKeyMaterial.length}__testKeyMaterialEquals(e){return this.rawKeyMaterial===e.rawKeyMaterial}}Pe=Ie,Ie.validateExpectedFormat=(e,t)=>{const{id:n,rawKeyMaterial:r}=t;switch(e){case be.A2:if(6!==t.id.length)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${n.length}`);if(25!==t.rawKeyMaterial.length)throw new Error(`Invalid SecretKey key length; expected 25, got: ${r.length}`);break;case be.A3:if(6!==t.id.length)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${n.length}`);if(26!==t.rawKeyMaterial.length)throw new Error(`Invalid SecretKey key length; expected 26, got: ${r.length}`);break;case be.TrustedDevice:if(6!==n.length)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${n.length}`);if(0!==r.length)throw new Error(`Invalid SecretKey key length; expected 0, got: ${r.length}`);break;default:throw new Error("Unreachable")}},Ie.validateParams=e=>{const{id:t,format:n,rawKeyMaterial:r}=e;let i;switch(e.format){case be.A2:case be.A3:case be.TrustedDevice:i=e.format,Pe.validateExpectedFormat(i,{id:t,rawKeyMaterial:r});break;default:i=new Re(e.format),Pe.validateExpectedFormat(be.A3,{id:t,rawKeyMaterial:r})}return{id:t,format:i,rawKeyMaterial:r}},Ie.new=e=>{const{id:t,format:n,rawKeyMaterial:r}=Pe.validateParams(e);return new Pe(t,n,r)},Ie.generate=async()=>Pe.new({id:(0,i.generatePassword)(Ee,6)[0],format:be.A3,rawKeyMaterial:(0,i.generatePassword)(Ee,26)[0]}),Ie.generateForTrustedDevice=async()=>Pe.new({id:(0,i.generatePassword)(Ee,6)[0],format:be.TrustedDevice,rawKeyMaterial:""}),Ie.forTrustedDevice=async e=>Pe.new({id:e,format:be.TrustedDevice,rawKeyMaterial:""}),Ie.fromInput=e=>{const t=new RegExp(`[^${Ee}]`,"gmi"),n=(e=e.toUpperCase().replace(t,"")).slice(0,2),r=e.slice(2,8),i=e.slice(8);return Pe.new({id:r,format:n,rawKeyMaterial:i})};var Ue,Oe,ke=n(73262);const De="b5x_autofill_parent_key";class Me{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UrlAutofillParentKey",this.toJSON=o,this.deriveSessionKey=async e=>{const t=Math.floor(e/1e3),n=(0,ke.IU)(t-t%10,8),r=new Uint8Array(0),i=await v(C.Sha256,this.rawKey,n,r,32);return Fe.fromBytes(i)},this.rawKey=e,this.kid=De}}Ue=Me,Me.fromAuk=async e=>{const t=await e.exportJwk(),n=(0,ke.J5)(De),r=new Uint8Array(0),s=await v(C.Sha256,(0,i.base64urlToBytes)(t.k),n,r,32);return new Ue(s)};class Fe{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UrlAutofillSessionKey",this.toJSON=o,this.decrypt=async e=>{if(54!==e.length)throw new Error("Input bytes to decrypt() are incorrect length.");const t=e.slice(0,12),n=e.slice(12),r=y.new({data:n,iv:t}),i=await this.key.decryptRaw(r);return(0,ke._u)(i)},this.key=e}}var _e,Ke,Ne,Ve,Be;Oe=Fe,Fe.fromBytes=async e=>{const t=await p.fromRawBytes(e,"b5x_session_subkey");return new Oe(t)},function(e){e.V1="v1"}(Be||(Be={})),Be.V1;const Le="1PRK",xe=52+Le.length,Ge=(0,i.str2ab)("1P_RECOVERY_KEY_UUID"),Ze="1P_RECOVERY_KEY_ENC_",je=(0,i.str2ab)("1P_RECOVERY_KEY_ENC_RECOVERABLE_MATERIAL_v1"),Ye=(0,i.str2ab)("1P_ENC_KEY_RECOVERY_KEY_AD_v1");class He{constructor(e,t){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_InputRecoveryKey",this.toJSON=o,this.toRecoveryKey=async e=>Je.__crypto_internal.fromHkdfKey(e,this.rawKey),this.rawKey=t,this.kid=e}}_e=He,He.fromBytes=async e=>{if(32!==e.length)throw new Error(`Bad key length: ${e.length}`);const t=await fe.fromRawBytes(e),n=await We(t);return new _e(n,t)},He.fromPaperKey=async e=>{if(!e.startsWith(Le))throw new Error("Bad paper key: unknown prefix");const t=e.slice(Le.length).replace(new RegExp("[-]","g"),"").toUpperCase(),n=await $e(t);return _e.fromBytes(n)};const We=async e=>(0,i.bytesToBase32)(await e.hkdfOutput({hash:C.Sha256,info:Ge,len:16})).toLowerCase(),$e=async e=>{const t=(0,i.base32ToBytes)(e);if((0,i.bytesToBase32)(t)!==e)throw new Error("invalid base32 input");return t};class Je{constructor(e,t,n,r,s){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryKey",this.toJSON=o,this.__crypto_internal={authKey:()=>this.authKey,encKey:()=>this.encKey},this.rawKeyAsBase32=()=>(0,i.bytesToBase32)(this.rawKey.exportRawIkm()).toUpperCase(),this.rawKeyAsChunkedBase32=()=>{const e=this.rawKeyAsBase32();if(52!==e.length)throw new Error(`Malformed recovery key: bad serialised length: ${e.length}`);const t=[];for(let n=0;n<52;n+=4)t.push(e.slice(n,n+4));return t.join("-")},this.serialiseToSensitivePaperKey=async()=>Le+"-"+this.rawKeyAsChunkedBase32(),this.serialiseToObfuscatedPaperKey=async()=>{const e=this.rawKeyAsChunkedBase32(),t=e.slice(e.length-4);return Le+" •••••• "+t},this.encryptSelfAndKeyset=async e=>{if(this.version===Be.V1){const[t,n]=await Promise.all([this.encryptSelfWithKeysetV1(e),this.encKey.encryptKeyset(e)]);return{encRecoveryKey:t,encKeysetSymKey:n}}},this.decryptKeysetSymKey=async e=>this.encKey.decryptKeysetSymKey(e),this.beginAuth=async()=>this.authKey.beginAuth(this.kid),this.exportVerifier=async()=>this.authKey.exportVerifier().then((e=>({srpv:e}))),this.checkIntegrity=async(e,t,n,r)=>{if(void 0===e.symKey.jwk)throw new Error("missing user keyset symmetric key");const s=await A((0,i.json2ab)(t),C.Sha256);if((0,i.bytesToBase64url)(s)!==n)throw new Error("integrity check failed for recoverable material");if((await this.decryptKeysetSymKey(t)).k!==e.symKey.jwk.k)throw new Error("decrypted keyset does not match expected keyset");const o=await Ke.decryptFromKeyset(this.version,e,r);if((0,i.bytesToBase64url)(o.rawKey.exportRawIkm())!==(0,i.bytesToBase64url)(this.rawKey.exportRawIkm()))throw new Error("decrypted recovery key does not match recovery key")},this.encryptSelfWithKeysetV1=async e=>{if(void 0===e.symKey.jwk)throw new Error("Keyset symmetric key not exportable");return(await h.fromJwk(e.symKey.jwk)).encryptJweB(this.rawKey.exportRawIkm(),Ye)},this.version=e,this.rawKey=n,this.kid=t,this.authKey=r,this.encKey=s}}Ke=Je,Je.__crypto_internal={fromHkdfKey:async(e,t)=>{const n=await We(t),[r,i]=await Promise.all([Ke.deriveAuthKeyV1(t),Ke.deriveEncKeyV1(n,t)]);return new Ke(e,n,t,r,i)},fromBytes:async(e,t)=>{const n=await fe.fromRawBytes(t);return Ke.__crypto_internal.fromHkdfKey(e,n)}},Je.generate=async(e=Be.V1)=>Ke.__crypto_internal.fromBytes(e,(0,s.getRandomBytes)(32)),Je.decryptFromKeyset=async(e,t,n)=>{if(void 0===t.symKey.jwk)throw new Error("Keyset symmetric key not exportable");if(e===Be.V1)return Ke.decryptRecoveryKeyWithKeysetV1(t,n)},Je.deriveAuthKeyV1=async e=>qe.fromBytes(await e.hkdfOutput({hash:C.Sha256,info:(0,i.str2ab)("1P_RECOVERY_KEY_AUTH_"+Be.V1),len:32})),Je.deriveEncKeyV1=async(e,t)=>ze.fromBytes(await t.hkdfOutput({hash:C.Sha256,info:(0,i.str2ab)(Ze+Be.V1),len:32}),e+":"+Ze+Be.V1),Je.decryptRecoveryKeyWithKeysetV1=async(e,t)=>{if(void 0===e.symKey.jwk)throw new Error("Keyset symmetric key not exportable");const n=await h.fromJwk(e.symKey.jwk),r=await n.decryptJweB(t,Ye);return Ke.__crypto_internal.fromBytes(Be.V1,r)};class qe{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryAuthKeyV1",this.toJSON=o,this.beginAuth=async e=>this.srpx.beginAuth(H[K.Group4096],new Uint8Array(16).fill(0),e),this.exportVerifier=async()=>this.srpx.verifier(H[K.Group4096]).then((async e=>e.exportServerHex())),this.__crypto_internal={srpx:()=>this.srpx},this.srpx=e}}Ne=qe,qe.fromBytes=async e=>new Ne(await ae.fromRawBytes(e));class ze{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryEncKeyV1",this.toJSON=o,this.encryptKeyset=async e=>{if(void 0===e.symKey.jwk)throw new Error("Keyset symmetric key not exportable");return this.key.encryptJweB((0,i.json2ab)(s.JwkSymKey.encode(e.symKey.jwk)),je)},this.decryptKeysetSymKey=async e=>{const t=await this.key.decryptJweB(e,je);return(0,i.decode)(t,i.jsonBytes.pipe(s.JwkSymKey)).unwrap()},this.__crypto_internal={key:()=>this.key},this.key=e}}var Xe;Ve=ze,ze.fromBytes=async(e,t)=>new Ve(await h.fromRawBytes(e,t));const Qe="1P_WEB_TAG_ROUTE_HKDF_KEY";class et{constructor(e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_TagRouteKey",this.toJSON=o,this.hmacTag=e=>{const t=(0,i.hmacWithSecretAndData)(this.rawKey,e);return(0,i.bytesAsClientUuid)(t)},this.rawKey=e,this.kid=Qe}}Xe=et,et.fromActiveKeyset=async e=>{const t=e.symKey.jwk;if(!t)throw new Error("fromActiveKeyset could not find symmetric key");const n=(0,i.str2ab)(Qe),r=new Uint8Array(0),s=await v(C.Sha256,(0,i.base64urlToBytes)(t.k),n,r,32);return new Xe(s)};var tt=n(39722);const nt=e=>{const t=tt.codec.hex.fromBits(tt.codec.base64url.toBits(e));return new V.BigInteger(t,16)},rt=e=>{if(0===e.length)return e;if(0!==e[0])return e;let t=0;for(;t<e.length&&0===e[t];)t+=1;return e.subarray(t)};var it,st,ot,at;const ut="b5+jwk+json";var ct;!function(e){e.OAEP_256="RSA-OAEP-256",e.OAEP="RSA-OAEP"}(ct||(ct={}));const lt={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},dt={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},yt={[ct.OAEP]:dt,[ct.OAEP_256]:lt},pt=Symbol();class mt{constructor(e,t,n){this[st]=0,this.toJSON=o,this.encryptRaw=async e=>{if(e.length>256)throw new Error("Plaintext is too large.");return new Uint8Array(await s.subtle.encrypt(yt[this.alg],this.key,e))},this.encryptJweB=async e=>({kid:this.kid,enc:this.alg,cty:ut,data:(0,i.bytesToBase64url)(await this.encryptRaw(e))}),this.exportJwk=async()=>{const e=await s.subtle.exportKey("jwk",this.key);return(0,i.decode)({...e,kid:this.kid},s.JwkRsaPubKey).unwrap()},this.kid=e,this.key=t,this.alg=n}}it=mt,st=pt,mt.fromComponents=async(e,t,n)=>{const{e:r,n:o}=n,a={kid:e,ext:!0,key_ops:["encrypt"],kty:"RSA",alg:t,e:(0,i.bytesToBase64url)(rt(r)),n:(0,i.bytesToBase64url)(rt(o))},u=await s.subtle.importKey("jwk",a,yt[t],!0,["encrypt"]);return new it(e,u,t)},mt.fromJwk=async e=>{if(e.alg!==ct.OAEP&&e.alg!==ct.OAEP_256)throw new Error(`Unexpected algorithm "${e.alg}"`);return it.fromComponents(e.kid,e.alg,{e:(0,i.base64urlToBytes)(e.e),n:(0,i.base64urlToBytes)(e.n)})};const ft=Symbol();class gt{constructor(e,t,n){this[at]=0,this.toJSON=o,this.decryptRaw=async e=>s.subtle.decrypt(yt[this.alg],this.key,e).then((e=>new Uint8Array(e))),this.decryptJweB=async e=>{if(ut!==e.cty)throw new Error("Unexpected content type");if(e.kid!==this.kid)throw new Error("Content encrypted with wrong key");if(e.enc!==this.alg)throw new Error(`Unexpected algorithm "${e.enc}", expected: "${this.alg}"`);const t=(0,i.base64urlToBytes)(e.data);if(0===t.length)throw new Error("Invalid ciphertext, zero length");return this.decryptRaw(t)},this.exportJwk=async()=>{const e=await s.subtle.exportKey("jwk",this.key);return(0,i.decode)({...e,kid:this.kid},s.JwkRsaPriKey).unwrap()},this.publicKey=async()=>{const{e:e,n:t}=await this.exportJwk();return mt.fromComponents(this.kid,this.alg,{e:(0,i.base64urlToBytes)(e),n:(0,i.base64urlToBytes)(t)})},this.kid=e,this.key=t,this.alg=n}}ot=gt,at=ft,gt.fromComponents=async(e,t,n)=>{const{e:r,n:o,d:a,dp:u,dq:c,p:l,q:d,qi:y}=n;let p={kid:e,ext:!0,key_ops:["decrypt"],kty:"RSA",alg:t,e:(0,i.bytesToBase64url)(rt(r)),n:(0,i.bytesToBase64url)(rt(o)),d:(0,i.bytesToBase64url)(rt(a)),dp:(0,i.bytesToBase64url)(rt(u)),dq:(0,i.bytesToBase64url)(rt(c)),p:(0,i.bytesToBase64url)(rt(l)),q:(0,i.bytesToBase64url)(rt(d)),qi:(0,i.bytesToBase64url)(rt(y))};p=ht(p);const m=await s.subtle.importKey("jwk",p,yt[t],!0,["decrypt"]);return new ot(e,m,t)},gt.fromJwk=async e=>{if(e.alg!==ct.OAEP&&e.alg!==ct.OAEP_256)throw new Error("Unexpected algorithm");return ot.fromComponents(e.kid,e.alg,{e:(0,i.base64urlToBytes)(e.e),n:(0,i.base64urlToBytes)(e.n),d:(0,i.base64urlToBytes)(e.d),dp:(0,i.base64urlToBytes)(e.dp),dq:(0,i.base64urlToBytes)(e.dq),p:(0,i.base64urlToBytes)(e.p),q:(0,i.base64urlToBytes)(e.q),qi:(0,i.base64urlToBytes)(e.qi)})},gt.generate=async(e=ct.OAEP)=>{if(e!==ct.OAEP&&e!==ct.OAEP_256)throw new Error("Unexpected algorithm");const t=await s.subtle.generateKey(yt[e],!0,["encrypt","decrypt"]);return new ot((0,i.generateUUID)(),t.privateKey,e)};const ht=e=>(e=>nt(e.p).compareTo(nt(e.q))<0)(e)?vt(e):e,vt=e=>({...e,p:e.q,q:e.p,dp:e.dq,dq:e.dp,qi:Ct(e.q,e.p)}),Ct=(e,t)=>(e=>{const t=e.toString(16),n=t.length%2==1?"0"+t:t;return tt.codec.base64url.fromBits(tt.codec.hex.toBits(n))})(nt(t).modInverse(nt(e)));var At,wt,St,Tt;const Pt=Symbol();class bt{constructor(e){this[wt]=0,this.toJSON=o,this.exportJwk=async()=>this.publicKey.exportJwk(),this.encrypt=async e=>{const t=i.jsonBytes.pipe(Ut).encode(e.snapshot),n=await h.generate(),r=i.jsonBytes.pipe(s.JwkSymKey).encode(await n.exportJwk()),o=await this.publicKey.encryptJweB(r),a=await n.encryptJweB(t);return{uuid:"",vaultUuid:e.vaultUuid,vaultItemUuid:e.vaultItemUuid,timestamp:(0,i.dateToGolang)(new Date),payload:a,aesKey:o,itemVersion:e.itemVersion,payloadVersion:Ot,hasUrl:e.hasUrl,isBusinessRelated:e.isBusinessRelated}},this.publicKey=e}}At=bt,wt=Pt,bt.fromJwk=async e=>mt.fromJwk(e).then((e=>new At(e))),bt.__crypto_internal={fromRsaPublicKey:async e=>new At(e)};const Rt=Symbol();class Et{constructor(e){this[Tt]=0,this.toJSON=o,this.exportSensitiveJwk=async()=>this.privateKey.exportJwk(),this.publicKey=async()=>this.privateKey.publicKey().then((e=>bt.__crypto_internal.fromRsaPublicKey(e))),this.decrypt=async e=>{const t=await this.privateKey.decryptJweB(e.aesKey).then((e=>(0,i.decode)(e,i.jsonBytes.pipe(s.JwkSymKey)).unwrap())).then((e=>h.fromJwk(e))),n=await t.decryptJweB(e.payload).then((e=>(0,i.decode)(e,i.jsonBytes.pipe(Ut)).unwrap()));return{uuid:e.uuid,vaultUuid:e.vaultUuid,vaultItemUuid:e.vaultItemUuid,itemVersion:e.itemVersion,snapshot:n,hasUrl:e.hasUrl,isBusinessRelated:e.isBusinessRelated,clientCreatedAt:e.clientCreatedAt||"",trashed:e.trashed||"N",templateUuid:e.templateUuid||""}},this.uuid=e.kid,this.privateKey=e}}St=Et,Tt=Rt,Et.fromJwk=async e=>gt.fromJwk(e).then((e=>new St(e))),Et.generate=async()=>gt.generate().then((e=>new St(e)));const It=r.exact(r.partial({compromisedDomain:r.string,vulnerablePassword:r.boolean,passwordStrength:r.number,reusedPassword:r.boolean,unsecuredWebsite:r.boolean,inactiveTwoFactor:r.string,inactivePasskey:r.string,expiringSoon:r.boolean,expired:r.boolean,itemsInWrongAccount:r.boolean},"SnapshotWatchtowerReport")),Ut=r.intersection([r.exact(r.type({title:(0,i.withDefault)(r.string,"")},"required")),r.exact(r.partial({username:r.string,domains:r.array(r.string),watchtowerReport:It,vaultName:r.string},"optional"))],"VaultItemSnapshot"),Ot=3,kt=r.intersection([r.type({uuid:(0,i.withDefault)(r.string,""),vaultUuid:(0,i.withDefault)(r.string,""),vaultItemUuid:(0,i.withDefault)(r.string,""),timestamp:(0,i.withDefault)(r.string,""),payload:s.JweB,aesKey:s.JweB,itemVersion:(0,i.withDefault)(r.number,0),payloadVersion:(0,i.withDefault)(r.number,Ot),hasUrl:(0,i.withDefault)(r.boolean,!1),isBusinessRelated:(0,i.withDefault)(r.boolean,!1)}),r.partial({clientCreatedAt:r.string,trashed:r.string,templateUuid:r.string})],"EncryptedVaultItemSnapshot"),Dt=r.readonly(r.type({vaultUuid:r.string,vaultItemUuid:r.string,itemVersion:r.number,snapshot:Ut,hasUrl:r.boolean,isBusinessRelated:r.boolean})),Mt=r.readonly(r.type({uuid:r.string,vaultUuid:r.string,vaultItemUuid:r.string,itemVersion:r.number,snapshot:Ut,hasUrl:r.boolean,isBusinessRelated:r.boolean,clientCreatedAt:r.string,trashed:r.string,templateUuid:r.string}),"VaultItemSnapshotWithMetaData");var Ft,_t,Kt,Nt,Vt=n(22325);const Bt=(e=>{let t=!1;return async()=>{t||"function"!=typeof e||(t=!0,await e())}})(Vt.ZP),Lt=Symbol();class xt{constructor(e){this[_t]=0,this.toJSON=o,this.exportJwk=async e=>({kid:e,kty:"OKP",crv:"X25519",x:(0,i.bytesToBase64url)(this.publicKey)}),this.seal=async(e,t,n)=>{const r=(0,Vt.qu)(this.publicKey,e,t,n);return{ciphertext:r.ciphertext,encappedKey:r.encapped_key}},this.publicKey=e}}Ft=xt,_t=Lt,xt.fromJwk=async e=>{await Bt();const t=(0,i.base64urlToBytes)(e.x);return Ft.__crypto_internal.fromBytes(t)},xt.__crypto_internal={fromBytes:async e=>{if(32!==e.length)throw new Error(`invalid length: ${e.length}`);return new Ft(e)}};const Gt=Symbol();class Zt{constructor(e,t){this[Nt]=0,this.toJSON=o,this.exportSensitiveJwk=async e=>({kid:e,kty:"OKP",crv:"X25519",d:(0,i.bytesToBase64url)(this.privateKey),x:(0,i.bytesToBase64url)(this.rawPublicKey)}),this.publicKey=async()=>xt.__crypto_internal.fromBytes(this.rawPublicKey),this.open=async(e,t,n,r)=>(0,Vt.Xi)(this.privateKey,e,t,n,r),this.privateKey=e,this.rawPublicKey=t}}Kt=Zt,Nt=Gt,Zt.fromJwk=async e=>{await Bt();const t=(0,i.base64urlToBytes)(e.x),n=(0,i.base64urlToBytes)(e.d);if(32!==t.length)throw new Error(`invalid (pub) length: ${t.length}`);if(32!==n.length)throw new Error(`invalid (pri) length: ${n.length}`);return new Kt((0,i.base64urlToBytes)(e.d),(0,i.base64urlToBytes)(e.x))},Zt.generate=async()=>{await Bt();const e=new Vt.lw;return new Kt(e.private_key,e.public_key)};const jt=r.readonly(r.type({kid:r.string,kty:r.literal("OKP"),crv:r.literal("X25519"),x:r.string},"type"),"JwkX25519PubKey"),Yt=r.readonly(r.type({kid:r.string,kty:r.literal("OKP"),crv:r.literal("X25519"),d:r.string,x:r.string},"type"),"JwkX25519PriKey"),Ht=(e,t)=>r.exact(r.type(e),t),Wt=(e,t)=>r.exact(r.partial(e),t);class $t{constructor(e,t,n,r){this.toBytes=()=>{const e=new ArrayBuffer(3+this.kid.length+2+this.purpose.length+2+this.content.length),t=new DataView(e);let n=0;t.setUint8(n,1),n+=1;const r=(0,i.str2ab)(this.kid);n+=zt(t,n,r);const s=(0,i.str2ab)(this.purpose);if(n+=zt(t,n,s),n+=Jt(t,n,this.purposeVersion),n+=qt(t,n,this.content),n!==e.byteLength)throw new Error("written invalid byte length");return new Uint8Array(e)},this.toBase64Url=()=>(0,i.bytesToBase64url)(this.toBytes()),this.toJSON=this.toBase64Url,this.kid=e,this.purpose=t,this.purposeVersion=n,this.content=r}}$t.fromParts=e=>new $t(e.kid,e.purpose,e.purposeVersion,e.content),$t.fromBytes=e=>{const t=e.buffer,n=new DataView(t);let r=0;const s=n.getUint8(r);if(r+=1,1!==s)throw new Error(`unknown envelope format version ${s}`);const{bytes:o,len:a}=en(n,r);r+=a;const{bytes:u,len:c}=en(n,r);r+=c;const l=Xt(n,r);r+=2;const d=(0,i.ab2str)(o),y=(0,i.ab2str)(u),p=Qt(n,r,n.byteLength-r);return $t.fromParts({kid:d,purpose:y,purposeVersion:l,content:p})},$t.fromBase64Url=e=>$t.fromBytes((0,i.base64urlToBytes)(e));const Jt=(e,t,n)=>{if(n>65535||n<0)throw new Error("unsupported number");return e.setUint16(t,n,!0),2},qt=(e,t,n)=>{for(const[r,i]of n.entries())e.setUint8(t+r,i);return n.length},zt=(e,t,n)=>{const r=Jt(e,t,n.length);return 2+qt(e,t+r,n)},Xt=(e,t)=>e.getUint16(t,!0),Qt=(e,t,n)=>{const r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.getUint8(t+i);return r},en=(e,t)=>{const n=Xt(e,t);return{len:2+n,bytes:Qt(e,t+2,n)}},tn=new r.Type("Envelope",(e=>e instanceof $t),((e,t)=>{if("string"!=typeof e)return r.failure(e,t,"input is not a string");let n;try{n=$t.fromBase64Url(e)}catch{return r.failure(e,t,"failed to decode input")}return r.success(n)}),(e=>e.toBase64Url()));var nn;const rn="1P_ENVELOPE_VAULT_REPORTING_ITEM_SNAPSHOT",sn=Ht({encKey:r.string,data:r.string,additionalData:r.string},"VaultSnapshotContent"),on=Ht({clientCreatedAt:r.string,hasUrl:r.boolean,itemVersion:r.number,payloadVersion:r.number,templateUuid:r.string,timestamp:r.string,vaultItemUuid:r.string},"VaultSnapshotAdditionalData");class an{constructor(e,t,n,r){this.toEnvelope=()=>{const e={encKey:(0,i.bytesToBase64url)(this.encKey),data:(0,i.bytesToBase64url)(this.data),additionalData:(0,i.bytesToBase64url)(this.unauthenticatedRawAd)};return $t.fromParts({kid:this.kid,purpose:rn,purposeVersion:1,content:i.jsonBytes.pipe(sn).encode(e)})},this.kid=e,this.encKey=t,this.data=n,this.unauthenticatedRawAd=r,this.unauthenticatedDecoded=(0,i.decode)(r,i.jsonBytes.pipe(on)).unwrap()}}var un,cn;nn=an,an.fromEnvelope=async e=>{if(e.purpose!==rn)throw new Error("invalid purpose");if(1!==e.purposeVersion)throw new Error("invalid purpose version");const t=(0,i.decode)(e.content,i.jsonBytes.pipe(sn)).unwrap();return new nn(e.kid,(0,i.base64urlToBytes)(t.encKey),(0,i.base64urlToBytes)(t.data),(0,i.base64urlToBytes)(t.additionalData))},an.fromPieces=(e,t,n,r)=>new nn(e,t,n,r),function(e){e.rawHkdf=v,e.rawPbkdf2UsingPbes2Alg=S,e.Sha2Mode=C}(un||(un={})),function(e){e.PBES2_ALG_256=T,e.PBES2_ALG_256_G=P,e.DEFAULT_PBES2_ALG=b,e.DEFAULT_ITERATIONS=w,e.ITERATIONS_100_000=1e5}(cn||(cn={}))},77615:function(e,t,n){n.d(t,{D5:function(){return p},ZA:function(){return c.Group},Zb:function(){return m.Card},aD:function(){return o},c1:function(){return y},eL:function(){return u},hi:function(){return a},jc:function(){return c.Vault},mR:function(){return c.Account},mw:function(){return m.Invoice},n5:function(){return c.User},nc:function(){return c.VaultItem},o4:function(){return c},w0:function(){return m.Subscription}});var r=n(61320),i=n.n(r),s=n(39722),o=n(93640),a=n(14521),u=n(76515),c=n(79686),l=n(98233),d=n(92706),y=n(19669),p=n(98798),m=n(70479);"undefined"!=typeof window&&(window.b5={action:o,api:a,crypto:u,model:c,util:p,shared:y,parser:d},window.sjcl=s,window.moment=i()),l.run()},4953:function(e,t,n){n.d(t,{$1:function(){return s.$1},As:function(){return m},Be:function(){return s.Be},CQ:function(){return y},EO:function(){return s.EO},H6:function(){return s.H6},K6:function(){return s.K6},LW:function(){return o.LW},OK:function(){return s.OK},VB:function(){return s.VB},WL:function(){return p},XG:function(){return s.XG},YY:function(){return s.YY},hM:function(){return d},mR:function(){return f}});var r=n(65029),i=n(18346),s=n(35606),o=n(10771),a=n(98798),u=n(34269),c=n(70479);const l=(e,t)=>e?.subscription.status===t,d="my",y="start",p="pg8-;",m=e=>e===d||e===y;class f{static isValidType(e){return e===f.Type.Family||e===f.Type.Individual||e===f.Type.Business}constructor(e){this.uuid=e.uuid,this.type=e.type,this.avatar=e.avatar||"",this.domain=e.domain||"",this.inviteEmail=e.invite&&e.invite.inviteEmailDomains||"",this.inviteSecret=e.invite&&e.invite.inviteSecret||"",this.name=e.name||"",this.state=e.state,this.attrVersion=e.attrVersion,this.baseAvatarURL=e.baseAvatarURL,this.baseAttachmentURL=e.baseAttachmentURL,this.settings=e.settings?(0,r.Z)({},e.settings,f.defaultSettings):f.defaultSettings,this.features={},this.gatedFeatures={},this.gatedFeatureTrials=[],this.hasNativeClient=!!e.userFlags&&e.userFlags.hasNativeClient,this.hasNonSafariClient=!!e.userFlags&&e.userFlags.hasNonSafariClient,this.hasPackages=!!e.userFlags&&e.userFlags.hasPackages,this.mustMigrate=!!e.userFlags&&e.userFlags.mustMigrate,this.hasRecoveryMembers=!!e.accountFlags&&e.accountFlags.hasRecoveryMembers,this.isAccountManaged=!!e.accountFlags&&e.accountFlags.isAccountManaged,this.activities=[],this.promotions=[],this.meta={companySize:void 0},this.counts={groups:0,invitations:0,users:0,vaults:0,activeGuests:0,activeUsers:0,activeManagedAccounts:0},this.subscription=c.Subscription.create(),this.trialDays=e.billing?.trialDays||0,this._cache=new u.Ct}setAttrs(e){this.uuid=e.uuid,this.type=e.type,this.avatar=e.avatar||"",this.domain=e.domain||"",e.invite&&(this.inviteEmail=e.invite.inviteEmailDomains||"",this.inviteSecret=e.invite.inviteSecret||""),this.name=e.name||"",this.state=e.state,this.attrVersion=e.attrVersion,this.baseAvatarURL=e.baseAvatarURL,this.baseAttachmentURL=e.baseAttachmentURL,e.settings?this.settings=(0,r.Z)({},e.settings,f.defaultSettings):this.settings=(0,r.Z)({},this.settings,f.defaultSettings),e.userFlags&&(this.hasNativeClient=e.userFlags.hasNativeClient,this.hasNonSafariClient=e.userFlags.hasNonSafariClient,this.hasPackages=e.userFlags.hasPackages,this.mustMigrate=e.userFlags.mustMigrate),e.accountFlags&&(this.hasRecoveryMembers=e.accountFlags.hasRecoveryMembers,this.isAccountManaged=e.accountFlags.isAccountManaged),e.billing&&(this.trialDays=e.billing.trialDays)}get hasFeature(){return{...c.Subscription.hasFeature(this.subscription),...this.features}}get hasBackOfficeFeature(){return{...c.Subscription.hasFeature(this.subscription)}}get hasUnleashFeature(){return{...this.features}}get fspPhase(){return this.features["b5web-core-app-ui-v1-no-opt"]?"no-opt":this.features["b5web-core-app-ui-v1-opt-out"]?"opt-out":this.features["b5web-core-app-ui-v1-opt-in"]?"opt-in":void 0}get hasGatedFeature(){return c.Subscription.hasGatedFeature(this.subscription)}get isFamily(){return this.type===f.Type.Family}get isIndividual(){return this.type===f.Type.Individual}get isBusiness(){return this.type===f.Type.Business}get isBackoffice(){return"backoffice"===this.domain}urlHost(e){return(this.isIndividual?d:this.domain)+"."+e}urlOrigin(e){return"https://"+this.urlHost(e)}supportsBetaFeatures(){const e=this.hasFeature;return e.mfaDuo||e.customTemplates||e.itemSendingV1||e.reports}get administratorsGroup(){return this._cache.administratorsGroup}get ownersGroup(){return this._cache.ownersGroup}get recoveryGroup(){return this._cache.recoveryGroup}get teamMembersGroup(){return this._cache.teamMembersGroup}get securityGroup(){return this._cache.securityGroup}get mspTechniciansGroup(){return this._cache.mspTechniciansGroup}get groups(){return this._cache.getManagableGroups()}findGroup(e){return this._cache.getGroup(e)}setGroups(e){this._cache.setGroups(e)}pushGroup(e){this._cache.groupsByUuid[e.uuid]=e,e.isTypeSecurity&&(this._cache.securityGroup=e)}removeGroup(e){const t=a.getValidGroupUuid(e);delete this._cache.groupsByUuid[t]}}f.StateRegistered="R",f.StateActive="A",f.StateSuspended="S",f.StateDeleted="D",f.defaultMfaTypes=[i.Lo.Totp,i.Lo.WebAuthn],f.defaultSettings={slackURLs:{alerts:"",notifications:""},betaIsEnabled:!1,richIconsAreDisabled:!1,duo:{isEnabled:!1,rememberDays:30,integrationKey:"",secretKey:"",host:""},support:{url:""},provisioning:{isEnabled:!1,notificationEmails:"",monitoringEnabled:!1,monitoringDomain:"",deploymentOption:"",identityProvider:"",replyToEmail:{address:"",verified:!1}},masterPasswordPolicy:{type:s.EO.Minimum,customString:""},twoFactor:{enforced:!1},clientRestrictions:{requireModernApps:!1},teamMemberPolicies:{blockFileStorage:!1,blockPasskeyAuthenticator:!1,privateVaultsBusinessWatchtowerReportingEnabled:!0,allowedWatchtowerDomains:""},disableEmergencyKit:!1,sidebarNavigationPolicies:{hideDeveloperTools:!1,hideIntegrations:!1}},function(e){let t;!function(e){e.Individual="I",e.Family="F",e.Business="B"}(t=e.Type||(e.Type={})),e.isProvisioningEnabled=e=>!!e?.settings.provisioning?.isEnabled,e.isDuoEnabled=e=>!!e?.settings.duo?.isEnabled,e.isFrozen=e=>l(e,c.Subscription.Status.Frozen),e.isTrial=e=>l(e,c.Subscription.Status.Trial),e.isActive=e=>l(e,c.Subscription.Status.Active),e.isInExtendedPromotionalTrial=e=>e?.trialDays>=60,e.getAllowedWatchtowerDomains=e=>e?.settings?.teamMemberPolicies?.allowedWatchtowerDomains?e?.settings.teamMemberPolicies.allowedWatchtowerDomains.split(","):[]}(f||(f={}))},32210:function(e,t,n){n.d(t,{au:function(){return h},o1:function(){return v},n9:function(){return p},rN:function(){return m},OF:function(){return u},ff:function(){return c},Ae:function(){return C},vG:function(){return A},hx:function(){return S},q8:function(){return T},cZ:function(){return f},qv:function(){return d},_w:function(){return l}});var r=n(39722),i=n(98798),s=n(14502);const o=()=>(0,s.getRandomBytes)(12);var a=n(41767);const u=async(e,t)=>{const n=t||i.generateUUID(),r=await i.crypto.subtle.generateKey((0,a.pn)(e),!0,["encrypt","decrypt"]);return{type:"native",jwk:await i.crypto.exportKey(n,r,i.crypto.JwkSymKey),imported:r}},c=async(e,t)=>await T({uuid:t||i.generateUUID(),enc:e,rawKey:i.crypto.getRandomBytes(32)}),l=e=>({ciphertext:e.slice(0,-16),tag:e.slice(-16)}),d=async({enc:e,plaintext:t,additionalData:n})=>{const r=await(async e=>i.crypto.supports.nativeAesGcm?u(e,"cek"):c(e,"cek"))(e);return{...await y({key:r,plaintext:t,additionalData:n}),cek:(0,i.base64urlToBytes)(r.jwk.k)}},y=async({key:e,plaintext:t,additionalData:n})=>"native"===e.type?p({key:e.imported,plaintext:t,additionalData:n}):m({cipher:e.imported,plaintext:t,additionalData:n}),p=async({key:e,plaintext:t,additionalData:n})=>{const r=o(),s={name:e.algorithm.name,iv:r,...n?{additionalData:n}:{},tagLength:128},a=await i.crypto.subtle.encrypt(s,e,t),u=new Uint8Array(a);return{iv:r,...l(u)}},m=async({cipher:e,plaintext:t,additionalData:n})=>{const s=o(),a=r.mode.gcm.encrypt(e,i.bytesToBits(t),i.bytesToBits(s),n?i.bytesToBits(n):void 0,128),u=new Uint8Array(r.codec.bytes.fromBits(a));return{iv:s,...l(u)}},f=async({enc:e,cek:t,iv:n,ciphertext:r,additionalData:i,tag:s})=>{const o=await w({enc:e,rawKey:t,uuid:"cek"});return g({key:o,iv:n,ciphertext:r,additionalData:i,tag:s})},g=async({key:e,iv:t,ciphertext:n,additionalData:r,tag:i})=>"native"===e.type?h({key:e.imported,iv:t,ciphertext:n,additionalData:r,tag:i}):v({cipher:e.imported,iv:t,ciphertext:n,additionalData:r,tag:i}),h=async({key:e,ciphertext:t,tag:n,additionalData:r,iv:s})=>{const o={name:e.algorithm.name,iv:s,...r?{additionalData:r}:{},tagLength:8*n.byteLength},a=i.concatUint8Arrays([t,n]),u=await i.crypto.subtle.decrypt(o,e,a);return new Uint8Array(u)},v=async({cipher:e,ciphertext:t,tag:n,additionalData:s,iv:o})=>{const a=(0,i.concatUint8Arrays)([t,n]),u=r.mode.gcm.decrypt(e,i.bytesToBits(a),i.bytesToBits(o),s?i.bytesToBits(s):void 0,8*n.byteLength);return new Uint8Array(r.codec.bytes.fromBits(u))},C=async e=>{const t=(0,a.pn)(e.alg);return await i.crypto.subtle.importKey("jwk",e,t,!0,["encrypt","decrypt"])},A=async e=>{const t=i.base64urlToBytes(e.k);return new r.cipher.aes(i.bytesToBits(t))},w=async e=>i.crypto.supports.nativeAesGcm?S(e):T(e),S=async({uuid:e,enc:t,rawKey:n})=>{const r=(0,a.pn)(t);if(8*n.length!==r.length)throw new Error("Invalid raw key length");const s=await i.crypto.subtle.importKey("raw",n,r,!0,["encrypt","decrypt"]);return{type:"native",jwk:await i.crypto.exportKey(e,s,i.crypto.JwkSymKey),imported:s}},T=async({uuid:e,enc:t,rawKey:n})=>{const s=(0,a.pn)(t);if(8*n.length!==s.length)throw new Error("Invalid raw key length");const o=new r.cipher.aes(i.bytesToBits(n));return{type:"sjcl",jwk:{kid:e,alg:t,kty:"oct",key_ops:["encrypt","decrypt"],k:i.bytesToBase64url(n),ext:!0},imported:o}}},70479:function(e,t,n){var r,i,s;n.r(t),n.d(t,{BUSINESS_TIER:function(){return m},Card:function(){return r},CurrencyCodes:function(){return i},GiftCard:function(){return s},InAppPurchaseSelectedSubscriptionTier:function(){return v},Invoice:function(){return o},Subscription:function(){return h},getBlankTier:function(){return g}}),function(e){let t;!function(e){e.Visa="visa",e.Mastercard="mastercard",e.Amex="amex",e.Discover="discover",e.UsBankAccount="us_bank_account",e.AcssDebit="acss_debit",e.SepaDebit="sepa_debit",e.Unknown="unknown",e.AmericanExpress="american express"}(t=e.Brand||(e.Brand={}));const n=new Map([[t.Visa,"Visa"],[t.Mastercard,"MasterCard"],[t.Amex,"American Express"],[t.Discover,"Discover"],[t.UsBankAccount,"US Bank Account"],[t.AcssDebit,"ACSS Debit"],[t.SepaDebit,"SEPA Debit"],[t.Unknown,"Unknown"]]);e.getBrandText=e=>n.has(e)?n.get(e)||"Unknown":n.get(t.Unknown)||"Unknown",e.getValidBrand=e=>{switch(e=e?.toLocaleLowerCase(),e){case t.Visa:case t.Mastercard:case t.Discover:case t.AcssDebit:case t.SepaDebit:case t.UsBankAccount:return e;case t.AmericanExpress:case t.Amex:return t.Amex;default:return t.Unknown}}}(r||(r={})),function(e){e.None="none",e.USD="USD",e.CAD="CAD",e.EUR="EUR"}(i||(i={})),function(e){e.create=e=>Object.freeze({code:"",redeemedAt:"",amount:0,description:"",purchaserEmail:"",...e}),e.CodePrefix="GC"}(s||(s={}));var o,a=n(60604),u=n(62323);!function(e){e.getSubscriptionLineItems=e=>(0,a.Z)(e.lines,(e=>e.quantity>0)),e.getAdjustmentLineItems=e=>(0,a.Z)(e.lines,(e=>!e.quantity)),e.getDiscountAmount=e=>{if(e.discount&&e.discount.coupon){const t=(0,u.Z)(e.lines,((e,t)=>t.discountable?e+t.amount:e),0);return e.discount.coupon.amountOff||t*e.discount.coupon.percentOff/100}return 0}}(o||(o={}));var c=n(48583),l=n(92757),d=n(98798),y=n(68430),p=n(59165);const m="20180220_b_business",f=()=>({...p.U,accountSettings:!1,activityLog:!1,businessSupportPhone:!1,clientVaultAccess:!1,customGroups:!1,customTemplates:!1,enforced2FA:!1,fineACL:!1,customDefaultAcl:!1,groups:!1,groupPermissions:!1,guests:!1,itemSendingV1:!1,itemSharing:!1,members:!1,mfaDuo:!1,prioritySupport:!1,reports:!1,slack:!1,slackInvite:!1,teamInvite:!1,travelAdminMode:!1,familyChildAccounts:!1,firewallRules:!1,firewallRulesForGroups:!1,masterPasswordPolicy:!1,clientRestrictions:!1,signInAttemptsReport:!1,dontNotifyAdmins:!1,disableWebNotifMenu:!1,peoplePageServerSearch:!1,chronologicallySortedVaultPage:!1,customSupport:!1,dontShareWithOwners:!1,mpRequirementsCustom:!1,limitGroupVaultAccess:!1,vaultsReport:!1,email2fa:!1,replyToInviteEmail:!1,accountTransfer:!1,autoDeleteSuspendedUsers:!1,hibpDomainReport:!1,provisioning:!1,keepAdminWatchtowerReports:!1,viewAdminWatchtowerReports:!1,keepAdminWatchtowerPrivateVaultReports:!1,integrationHubProvisioning:!1,integrationHubDataStreaming:!1,itemUsageDataStreaming:!1,integrationHubMFA:!1,integrationHubAlerts:!1,integrationHubRequestAccessBusiness:!1,integrationHubRequestAccessTeams:!1,integrationHubRequestAccessFamilies:!1,insightsDashboard:!1,churnSurvey:!1,npsSurvey:!1,integrationHubEmailAlias:!1,shareService:!1,shareServiceAdminControl:!1,itemSharingDomainRecipients:!1,itemSharingFiles:!1,integrationHubJumpCloud:!1,integrationHubGoogleWorkspace:!1,keepItemUsageAction:!1,singleSignOn:!1,singleSignOnAuth0:!1,singleSignOnAzure:!1,singleSignOnGeneric:!1,singleSignOnGoogle:!1,integrationHubUserManagedServiceAccounts:!1,managedServiceAccountTierAQuota:!1,managedServiceAccountTierBQuota:!1,managedServiceAccountTierARateLimit:!1,integrationHubBrex:!1,integrationHubRamp:!1,phantomIntegration:!1,deferActiveUserSubscriptionDowngrade:!1,liveBusinessChat:!1,emergencyKitSetting:!1,billingInfoDataMigrated:!1,unlockWithPasskey:!1,detailPageLimits:!1,telemetry:!1,automatedQuest:!1,unredeemedFamilyAccountEmails:!1,itemsInWrongAccountPolicy:!1,eraseClientForSuspendedUsers:!1,eraseClientForUsersOutsideGracePeriod:!1,detailedVaultReporting:!1,managedServiceProvider:!1,developerAddon:!1,developerAddonLegacyServiceAccounts:!1,developerAddonLegacyConnect:!1,b2bXamDeviceTrust:!1,b2bXam:!1}),g=e=>({name:e||"",accountType:"",sortOrder:0,isPublic:!1,trialDays:0,backupDays:0,guestsIncluded:0,maxGuests:0,membersIncluded:0,maxMembers:0,minQuantity:0,storagePerAccount:0,storagePerUser:0,plans:[],marketingText:{name:"",localizedFeatures:[],defaultPriceDisplayFrequency:y.Di.Yearly,viewDetailsURL:""},hasFeature:f(),hasGatedFeature:f(),tierChangeMappings:[]});var h,v;!function(e){let t;e.create=()=>({freezesAt:"2100-01-01T00:00:00.000Z",guests:0,members:0,provider:"",status:"",storageUsed:0,tier:void 0,settings:{billingCompanyName:"",billingAddress:"",billingEmails:""},balance:0,cards:[],coupon:void 0,pendingCreditAmount:0,nextInvoice:void 0,hasInvoices:!1,plan:void 0,stripe:void 0,purchaseOrder:void 0,stripePurchaseOrder:void 0,customerAddress:{country:"",provinceOrState:"",zip:""},billingStats:void 0,availableTiers:[],pendingPaymentMethods:[]}),function(e){e.Trial="T",e.Active="A",e.Lapsed="L",e.CancelAtPeriodEnd="C",e.Frozen="F",e.Pending="P"}(t=e.Status||(e.Status={})),e.Provider={Undefined:"U",Stripe:"S",StripePurchaseOrder:"C",PurchaseOrder:"O",ThirdParty:"T",NotBilled:"N",ParentAccount:"R",AppleSubscription:"A",PayPal:"P",GooglePlayStore:"G",ManagedServiceProvider:"M"},e.canBillForAdditionalUsers=t=>!(0,c.Z)([e.Provider.AppleSubscription,e.Provider.GooglePlayStore],t.provider),e.isDirectlyBilled=t=>(0,c.Z)([e.Provider.Stripe,e.Provider.StripePurchaseOrder,e.Provider.Undefined],t.provider),e.isDirectlyBilledPurchaseOrder=t=>t.provider===e.Provider.StripePurchaseOrder,e.shouldShowBilling=t=>(0,c.Z)([e.Provider.Undefined,e.Provider.Stripe,e.Provider.StripePurchaseOrder,e.Provider.AppleSubscription,e.Provider.GooglePlayStore,e.Provider.ParentAccount,e.Provider.PurchaseOrder,e.Provider.ThirdParty,e.Provider.NotBilled,e.Provider.ManagedServiceProvider],t.provider),e.canChangeAccountType=t=>!(0,c.Z)([e.Provider.AppleSubscription,e.Provider.GooglePlayStore,e.Provider.PurchaseOrder,e.Provider.ThirdParty,e.Provider.NotBilled,e.Provider.ManagedServiceProvider],t.provider),e.hasFeature=e=>e.tier?e.tier.hasFeature:g().hasFeature,e.hasGatedFeature=e=>e.tier?e.tier.hasGatedFeature:g().hasGatedFeature,e.hasPendingCredit=e=>"number"==typeof e.pendingCreditAmount&&e.pendingCreditAmount>0,e.hasAvailableCredit=e=>-1*e.balance+e.pendingCreditAmount>0,e.hasCoupon=e=>void 0!==e.coupon&&""!==e.coupon.stripeCouponUID&&0!==(e.coupon.amountOff||e.coupon.percentOff),e.hasTrialTimeLeft=e=>{if(void 0===e.stripe)return!1;const t=(0,d.dateFromGolang)(e.stripe.trialEnd);return"trialing"===e.stripe.status&&!!t&&t.getTime()>Date.now()},e.getDefaultCardholderName=e=>{const t=(0,l.Z)(e.cards,(e=>e.isDefault));return t?t.name:void 0},e.getCurrency=e=>e.plan?e.plan.currency:e.availableTiers&&e.availableTiers[0]&&e.availableTiers[0].plans&&e.availableTiers[0].plans[0]?e.availableTiers[0].plans[0].currency:void 0}(h||(h={})),function(e){e.FamilyAnnual="family.annual",e.FamilyMonthly="family.monthly",e.IndividualAnnual="individual.annual",e.IndividualMonthly="individual.monthly"}(v||(v={}))},40313:function(e,t,n){n.d(t,{q:function(){return m}});var r=n(69243),i=n(35567),s=n(62323);const o=e=>new i.BigInteger(e.toString(10),10),a=e=>Number.parseInt(e.toString(10),10),u=(e,t)=>o(e).and(o(t)).equals(o(t)),c=(e,t)=>o(e).and(o(t)).compareTo(i.BigInteger.ZERO)>0,l=(e,t)=>a(o(e).or(o(t))),d=(e,t)=>a(o(e).xor(o(t))),y=(e,t)=>a(o(e).andNot(o(t))),p=e=>a((0,s.Z)(e,((e,t)=>e.or(o(t))),o(0)));var m;!function(e){e.codec=r.number,e.empty=()=>0,e.equals=(e,t)=>e===t,e.fromHex=e=>Number.parseInt(e,16),e.toHex=e=>e.toString(16),e.combine=p,e.disable=y,e.enable=l,e.includes=u,e.includesAny=c,e.toggle=d}(m||(m={}))},98233:function(e,t,n){n.r(t),n.d(t,{logCryptoSupport:function(){return d},run:function(){return u}});var r=n(98798),i=n(57275),s=n(40236),o=n(95154),a=n(41767);const u=async()=>{if(void 0!==r.crypto.waitForInit){await r.crypto.waitForInit;try{await l(),r.crypto.testsComplete()}catch(e){r.crypto.testsError(e)}}};let c;const l=async()=>{const e=performance.now(),[t,n,i,s]=await Promise.all([y(h),y(p),y(m),y(f)]),o=performance.now();c=Math.round(o-e).toString(10),r.crypto.setSupport({jwkImport:t,rsaOaep256:n,nativeAesGcm:i,nativeEcdsa:s})},d=()=>{const{jwkImport:e,rsaOaep256:t,nativeAesGcm:n,nativeEcdsa:i}=r.crypto.supports;((0,r.isDebugMode)()||Object.values(r.crypto.supports).includes(!1))&&console.log(`Crypto init and tests are complete in ${c}ms\njwkImport: ${e}\nrsaOaep256: ${t}\nnativeAesGcm: ${n}\nnativeEcdsa: ${i}`)},y=async e=>Promise.resolve().then(e).then((()=>!0),(()=>!1)),p=async()=>new s.HZ("").import({alg:"RSA-OAEP-256",e:"AQAB",ext:!0,key_ops:["encrypt"],kid:"pdmixa3yhjitikm7uv2fd7veme",kty:"RSA",n:"1HfpUoQjzFj9sXJc1-BsZ5oWYsBhDTZkjLYzPqam5DhezPAIDkoZfBw1B4jG43ez-_WifZf_kRc9zyHl3aoe0bUmVJnr58kGvStscTD0b1n5xkLHsuADf5YqjxYTmBZEkmrewV5xG7TdiYdx7ZboUpRVD6g7yg3xakfYvZuGuIkPlxHvxb4qx-wMe1M81sPZAAoSQl923uMCCIO6y236f2oMSsSDbm-6FynwMo4rWvRuN588pZCfHzhYzchembABVdt2HsHUwZC36fV9T_EuHEjTIiWaSYj1UyMUWvD8bVwehlDV4_NBiU-IuL3s8SDJCSQW4zHiTQG8qVEUpkPBew"}),m=async()=>{const e=new o.GI;await e.generate(a.kz,void 0),await e.encrypt(r.str2ab("A3-TEST"));const t=e.jwk?.k;if(!t)throw new Error("Missing key value");const n=r.base64urlToBytes(t),i=new o.GI;await i.importRawKey(a.kz,n)},f=async()=>r.crypto.subtle.generateKey(i.r.DEFAULT_KEY_ALG,!0,["sign","verify"]),g={alg:"RSA-OAEP",e:"AQAB",ext:!0,key_ops:["encrypt"],kty:"RSA",n:"lW5zhTLlU1ayN9uDy4_9uNT3I2bTX24565Gr5yuKnNRGpE3rT9rGzjgPDamcKPIi4fPCP0HFFpS35D6F1zlOsy2uPFwXC6HGZVRvXoHaAcTq3HRTkQ2HpWnxI9R0XwJMDaxCwDFalAYSEYkQC6k7CFT87PPTKzCgnfVqX3aHAU2LzfjlQL1KtVU1Qy8QwUv_LgI9tjbbFrn62sAWruJItG65pHbWH0Gyp_Kna4HCiL4zjiWVxMOqwLt1Qkj_vkJwJ8pA7ooJEuTXCpxkoikEyxxRCDWxSbICyaD90MVpyXt2iaFaZc8ntS_JiofeMmm0iZ0uNJ3B0oT-twe0Dn2Edw",kid:"tyy2gvlws7xxnpqvayhqeg5e5y"},h=async()=>r.crypto.subtle.importKey("jwk",g,s.HZ.WC_ALG_RSA_OAEP,!0,["encrypt"])},55737:function(e,t,n){n.r(t),n.d(t,{deobfuscate:function(){return d},obfuscate:function(){return l}});var r=n(39722),i=n(98798),s=n(41767),o=n(46559);const a="03h4kf8euth5ks9skel3lfis9s",u="3tnqywhecddkhvl375l6yu7qri",c=r.codec.hex.fromBits(r.hash.sha1.hash("Obfuscation Does Not Provide Security But It Doesn't Hurt")).slice(0,32),l=async e=>{const t=i.str2ab(c),n=(0,o.TF)(u);return await n.importRawKey(s.kz,t),n.encrypt(i.str2ab(e))},d=async e=>{if(!e)return"";let t="",n="";if(e.kid===a)t=i.config.device.uuid+"f737s0",n=a;else{if(e.kid!==u)throw new Error("Unrecognized key ID.");t=c,n=u}if(32!==t.length)throw new Error("Missing or invalid obfuscation key.");const r=(0,o.TF)(n);await r.importRawKey(s.kz,i.str2ab(t));const l=await r.decrypt(e);return i.ab2str(l)}},8302:function(e,t,n){n.d(t,{H:function(){return a},p:function(){return u}});var r=n(98798),i=n(32210),s=n(10327),o=n(41767);const a=async(e,t)=>{const n="jwk"in e?e.jwk:"encryptionKeyPair"in e?e.encryptionKeyPair.pubKey:e;if(void 0===n)throw new TypeError("Missing JWK");if("RSA"!==n.kty)throw new Error(`Unexpected key type: ${n.kty}`);return c(n,t)},u=async(e,t)=>{const n="jwk"in e?e.jwk:"encryptionKeyPair"in e?e.encryptionKeyPair.priKey:e;if(void 0===n)throw new TypeError("Missing JWK");if("RSA"!==n.kty)throw new Error(`Unexpected key type: ${n.kty}`);return l(n,t)},c=async(e,t)=>{const n={alg:e.alg,enc:o.kz,kid:e.kid,typ:"jose+json"},a=r.bytesToBase64url(r.json2ab(n)),{cek:u,ciphertext:c,tag:l,iv:d}=await i.qv({enc:n.enc,plaintext:t,additionalData:r.str2ab(a)}),y=await s.encrypt(e,u);return{protected:a,encrypted_key:r.bytesToBase64url(y),iv:r.bytesToBase64url(d),ciphertext:r.bytesToBase64url(c),tag:r.bytesToBase64url(l)}},l=async(e,t)=>{const n=r.decode(t.protected,r.jsonAsBase64Url.pipe(r.crypto.JweHeader)).unwrap();if(n.kid!==e.kid)throw new Error("Encrypted with incorrect key");if(n.alg!==e.alg)throw new Error("Key algorithm does not match encrypted data");const o=r.base64urlToBytes(t.encrypted_key),a=await s.decrypt(e,o);return{content:await i.cZ({enc:n.enc,cek:a,iv:r.base64urlToBytes(t.iv),ciphertext:r.base64urlToBytes(t.ciphertext),additionalData:r.str2ab(t.protected),tag:r.base64urlToBytes(t.tag)}),header:n}}},85943:function(e,t,n){n.r(t),n.d(t,{JwtStandardClaims:function(){return u.Vj},Keyset:function(){return c._},KeysetEncKeyData:function(){return c.P},createToken:function(){return u.V3},decrypt:function(){return r.p},encrypt:function(){return r.H},sign:function(){return o},verify:function(){return a}});var r=n(8302),i=n(98798),s=n(19261);const o=async(e,t)=>{const n=await s.importPriKey(e),r={alg:s.JWK_ALG_ES256,kid:e.kid,typ:"jose+json"},o=i.bytesToBase64url(i.json2ab(r)),a=i.bytesToBase64url(t),u=i.str2ab(o+"."+a),c=await s.sign({alg:r.alg,key:n,signingInput:u});return{protected:o,payload:a,signature:i.bytesToBase64url(c)}},a=async(e,t)=>{const n=await s.importPubKey(e),r=i.jsonAsBase64Url.pipe(i.crypto.JwsHeader),o=i.decode(t.protected,r).unwrap();if(o.alg!==s.JWK_ALG_ES256)throw new Error("Unexpected algorithm");if(o.kid!==e.kid)throw new Error("Incorrect signing key");const a=i.str2ab(t.protected+"."+t.payload),u=i.base64urlToBytes(t.signature);return{isValid:await s.verify({alg:o.alg,key:n,signingInput:a,signature:u}),header:o}};var u=n(95879),c=n(7772)},7772:function(e,t,n){n.d(t,{P:function(){return l},_:function(){return d}});var r=n(69243),i=n(98798),s=n(61670),o=n(14502),a=n(19261),u=n(10327),c=n(8302);const l=r.readonly(r.type({ePriKey:o.JwkRsaPriKey,sPriKey:o.JwkEcPriKey}),"KeysetEncKeyData");var d;!function(e){e.fromClassicKeyset=e=>{if(!e.ekeyPair.priKey.jwk||!e.ekeyPair.pubKey.jwk)throw new Error("Missing encryption key pair");if(!e.skeyPair?.priKey?.jwk||!e.skeyPair?.pubKey?.jwk)throw new Error("Missing signing key pair");return{uuid:e.uuid,sn:e.sn,spec:2,encryptionKeyPair:{priKey:e.ekeyPair.priKey.jwk,pubKey:e.ekeyPair.pubKey.jwk},signingKeyPair:{priKey:e.skeyPair.priKey.jwk,pubKey:e.skeyPair.pubKey.jwk}}},e.generate=async()=>{const e=(0,i.generateUUID)(),[t,n]=await Promise.all([(0,u.generateKeyPair)(e),(0,a.generateJwkPair)(e)]);return{uuid:e,sn:0,spec:2,encryptionKeyPair:t,signingKeyPair:n}},e.encryptKeyset=async(e,t)=>{const n={ePriKey:t.encryptionKeyPair.priKey,sPriKey:t.signingKeyPair.priKey},r=await(0,c.H)(e,s.s_.encode(n));return{uuid:t.uuid,sn:t.sn,spec:2,ePubKey:t.encryptionKeyPair.pubKey,sPubKey:t.signingKeyPair.pubKey,encKeyData:r}},e.decryptKeyset=async(e,t)=>{const{uuid:n,sn:r,spec:i,ePubKey:o,sPubKey:a,encKeyData:u}=t,d=await(0,c.p)(e,u),{ePriKey:y,sPriKey:p}=(0,s.Jx)(d.content,s.s_.pipe(l)).unwrap();return{uuid:n,sn:r,spec:i,encryptionKeyPair:{priKey:y,pubKey:o},signingKeyPair:{priKey:p,pubKey:a}}}}(d||(d={}))},95879:function(e,t,n){n.d(t,{V3:function(){return a},Vj:function(){return o}});var r=n(69243),i=n(98798),s=n(19261);const o=r.readonly(r.partial({iss:r.string,sub:r.string,aud:r.readonlyArray(r.string),exp:i.RfcNumericDate,nbf:i.RfcNumericDate,iat:i.RfcNumericDate,jti:r.string}),"JwtStandardClaims"),a=async(e,t,n)=>{const r={alg:s.JWK_ALG_ES256,kid:e.kid,typ:"JWT"},o=i.bytesToBase64url(i.json2ab(r)),a=i.bytesToBase64url(i.json2ab(n.encode(t))),u=i.str2ab(o+"."+a),c={...e,key_ops:["sign"]},l=await s.importPriKey(c),d=await s.sign({alg:r.alg,key:l,signingInput:u});return o+"."+a+"."+i.bytesToBase64url(d)}},19261:function(e,t,n){n.r(t),n.d(t,{DEFAULT_KEY_ALG:function(){return m},DEFAULT_SIGN_ALG:function(){return f},JWK_ALG_ES256:function(){return u},JWK_CRV_ES256:function(){return c},WC_IMPORT_ALG_ES256:function(){return l},WC_SIGN_ALG_ES256:function(){return d},_importPriKeyNative:function(){return T},_importPriKeySjcl:function(){return I},_importPubKeyNative:function(){return P},_importPubKeySjcl:function(){return U},_signNative:function(){return b},_signSjcl:function(){return O},_verifyNative:function(){return R},_verifySjcl:function(){return k},generateJwkPair:function(){return g},generateKeyPair:function(){return h},importPriKey:function(){return v},importPubKey:function(){return C},sign:function(){return A},verify:function(){return w}});var r=n(86866),i=n(62323),s=n(39722),o=n(98798),a=n(16586);const u="ES256",c="P-256",l={name:"ECDSA",namedCurve:"P-256"},d={name:"ECDSA",hash:{name:"SHA-256"}},y=e=>{if("EC"===e.kty||e.crv===c)return l;throw new Error("Unexpected EC kty/crv: "+e.kty+", "+e.crv+".")},p=e=>{if(e!==u)throw new Error("Unexpected algorithm identifier");return d},m=l,f=d,g=async e=>{const{priKey:t,pubKey:n}=await h(e);return{priKey:t.jwk,pubKey:n.jwk}},h=async e=>{const t=o.crypto.supports.nativeEcdsa?S:E,n=async()=>t(e).then(_),s=(0,r.Z)(4,(()=>n)),u=n();return(0,i.Z)(s,(async(e,t)=>e.catch((async()=>t()))),u).catch((e=>{throw new Error(`Failed to generate valid signing keys after 5 attempts. <${(0,a.getErrorMessage)(e)}>`)}))},v=async e=>"imported"in e?e:o.crypto.supports.nativeEcdsa?await T(e):await I(e),C=async e=>"imported"in e?e:o.crypto.supports.nativeEcdsa?await P(e):await U(e),A=async({alg:e,key:t,signingInput:n})=>"native"===t.type?b({alg:e,key:t.imported,signingInput:n}):O({alg:e,key:t.imported,signingInput:n}),w=async({alg:e,key:t,signingInput:n,signature:r})=>"native"===t.type?R({alg:e,key:t.imported,signingInput:n,signature:r}):k({alg:e,key:t.imported,signingInput:n,signature:r}),S=async e=>{const t=m,n=e||o.generateUUID(),{publicKey:r,privateKey:i}=await o.crypto.subtle.generateKey(t,!0,["sign","verify"]);if(!r||!i)throw new Error("Did not generate key pair properly");const[s,a]=await Promise.all([o.crypto.exportKey(n,r,o.crypto.JwkEcPubKey),o.crypto.exportKey(n,i,o.crypto.JwkEcPriKey)]);return{uuid:n,priKey:{type:"native",jwk:a,imported:i},pubKey:{type:"native",jwk:s,imported:r}}},T=async e=>{const t=y(e),n=o.crypto.correctJwkEcPriKey(e);return{type:"native",jwk:n,imported:await o.crypto.subtle.importKey("jwk",n,t,!0,["sign"]).catch((()=>{throw new o.errors.ClientError(o.errors.ClientErrorCode.invalidSigningKeyPair,"Invalid private key")}))}},P=async e=>{const t=y(e),n=o.crypto.correctJwkEcPubKey(e);return{type:"native",jwk:n,imported:await o.crypto.subtle.importKey("jwk",n,t,!0,["verify"]).catch((()=>{throw new o.errors.ClientError(o.errors.ClientErrorCode.invalidSigningKeyPair,"Invalid public key")}))}},b=async({alg:e,key:t,signingInput:n})=>{const r=await o.crypto.subtle.sign(p(e),t,n);return new Uint8Array(r)},R=async({alg:e,key:t,signingInput:n,signature:r})=>{const i=await o.crypto.subtle.verify(p(e),t,r,n);if("boolean"!=typeof i)throw new TypeError("Unknown verification value: "+i);return i},E=async e=>{const t=e||o.generateUUID(),{pub:n,sec:r}=s.ecc.ecdsa.generateKeys(256,1),i=await M(n,t);return{uuid:t,priKey:{type:"sjcl",jwk:await D(r,i),imported:r},pubKey:{type:"sjcl",jwk:i,imported:n}}},I=async e=>{const t=o.crypto.correctJwkEcPriKey(e),n=o.base64urlToBytes(t.d),r=s.bn.fromBits(o.bytesToBits(n));return{type:"sjcl",jwk:t,imported:new s.ecc.ecdsa.secretKey(s.ecc.curves.c256,r)}},U=async e=>{const t=o.crypto.correctJwkEcPubKey(e),n=o.base64urlToBytes(t.x),r=o.base64urlToBytes(t.y),i=o.bytesToHex(n)+o.bytesToHex(r);if(128!==i.length)throw new Error("Invalid length for ECDSA point: "+i.length);return{type:"sjcl",jwk:t,imported:new s.ecc.ecdsa.publicKey(s.ecc.curves.c256,s.codec.hex.toBits(i))}},O=async({alg:e,key:t,signingInput:n})=>{if(e!==u)throw new Error("Unsupported algorithm");const r=s.hash.sha256.hash(o.bytesToBits(n)),i=t.sign(r,1,!1);return new Uint8Array(s.codec.bytes.fromBits(i))},k=async({alg:e,key:t,signingInput:n,signature:r})=>{if(e!==u)throw new Error("Unsupported signature algorithm: "+e);const i=o.bytesToBits(r),a=s.hash.sha256.hash(o.bytesToBits(n));return t.verify(a,i,!1)},D=async(e,t)=>{const n=new Uint8Array(s.codec.bytes.fromBits(e.get()));return{...t,key_ops:["sign"],d:o.bytesToBase64url(n)}},M=async(e,t)=>{const{x:n,y:r}=e.get();return{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",kid:t,x:o.bytesToBase64url(new Uint8Array(s.codec.bytes.fromBits(n))),y:o.bytesToBase64url(new Uint8Array(s.codec.bytes.fromBits(r)))}},F=o.str2ab("I've got a golden ticket!"),_=async e=>{const t=await v(e.priKey.jwk),n=await A({alg:u,key:t,signingInput:F}),r=await C(e.pubKey.jwk);if(!await w({alg:u,key:r,signingInput:F,signature:n}))throw new Error("Signature failed verification");return e}},35067:function(e,t,n){n.d(t,{C:function(){return p}});var r=n(98798),i=n(61670),s=n(14502),o=n(38002),a=n(35914),u=n(23428),c=n(57275);const l=a.L`web-api/model/ecdsa_private_key.ts`,d=(0,o.P)(l.str),y=(0,u.$y)(l.str);class p{constructor(e,t,n){this.sign=async e=>Promise.resolve().then((async()=>{if(!this.key)throw new Error("Missing private key");const t=c.r.DEFAULT_SIGN_ALG;return r.crypto.subtle.sign(t,this.key,e).then((e=>({kid:this.uuid,alg:t.jwkAlgorithmIdentifier,s:r.bytesToBase64url(new Uint8Array(e))})))})).catch(d("sign")),this.import=async e=>y("import",(async()=>{if(e&&(this.jwk=e),!this.jwk)throw new Error("Missing JWK key");const t=this.jwk.kid;if(this.jwk=(0,s.correctJwkEcPriKey)(this.jwk),"EC"!==this.jwk.kty||"P-256"!==this.jwk.crv)throw new Error("Unexpected EC key/crv: "+this.jwk.kty+", "+this.jwk.crv+".");const n=c.r.KEY_ALG_ES256,i=await r.crypto.subtle.importKey("jwk",this.jwk,n,!0,["sign"]).catch((()=>{throw new r.errors.ClientError(r.errors.ClientErrorCode.invalidSigningKeyPair,"Invalid private key")}));return this.key=i,this.uuid=t,this})),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await(0,s.exportKey)(this.uuid,this.key,s.JwkEcPriKey),this.jwk},this.encryptWithKey=async e=>{if(!this.jwk)throw new Error("Missing JWK");if(!e)throw new Error("No key given");const t=r.json2ab(this.jwk);if(!t)throw new Error("Missing plaintext");return e.encrypt(t)},this.decryptWithKey=async(e,t)=>{const n=await e.decrypt(t),r=(0,i.Jx)(n,i.s_).unwrap(),o=(0,i.Jx)(r,s.JwkEcPriKey,{mode:"unsafe_report_only",file:l,func:a.L`decryptWithKey`}).unwrap();return this.import(o)},this.uuid=e||"",this.key=t,this.jwk=n}}},59736:function(e,t,n){n.d(t,{g:function(){return c}});var r=n(39722),i=n(98798),s=n(38002),o=n(35067),a=n(57275);const u=(0,s.P)("model/ecdsa_private_key_pf");class c extends o.C{constructor(e,t,n,s){super(e,void 0,s),this.sign=async e=>Promise.resolve().then((()=>{if(!this.sjclKey)throw new Error("Missing private key");const t=a.r.DEFAULT_SIGN_ALG,n=r.hash.sha256.hash(i.bytesToBits(e)),s=this.sjclKey.sign(n,1,!1);return{kid:this.uuid,alg:t.jwkAlgorithmIdentifier,s:i.bytesToBase64url(new Uint8Array(r.codec.bytes.fromBits(s)))}})).catch(u("sign")),this.import=async e=>Promise.resolve().then((()=>{if(e&&(this.jwk=e),!this.jwk)throw new Error("Missing JWK key");const t=i.base64urlToBytes(this.jwk.d),n=r.bn.fromBits(i.bytesToBits(t));return this.sjclKey=new r.ecc.ecdsa.secretKey(r.ecc.curves.c256,n),this})).catch(u("import")),this.exportKey=async()=>Promise.resolve().then((async()=>{if(!this.pubKey)throw new Error("Missing public key");if(!this.sjclKey)throw new Error("Missing private key");const e=this.sjclKey;return this.pubKey.exportKey().then((t=>{const n=r.codec.bytes.fromBits(e.get());return this.jwk={crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",kid:this.uuid,d:i.bytesToBase64url(new Uint8Array(n)),x:t.x,y:t.y},this.jwk}))})).catch(u("exportKey")),this.sjclKey=n,this.pubKey=t}}},57275:function(e,t,n){n.d(t,{r:function(){return l}});var r=n(98798),i=n(14502),s=n(38002),o=n(23428);const a="model/ecdsa_public_key",u=(0,s.P)(a),c=(0,o.$y)(a);class l{constructor(e,t,n){this.verify=async(e,t)=>Promise.resolve().then((async()=>{if("ES256"!==t.alg)throw new Error("Unknown jwk signature alg:"+t.alg);const n=l.DEFAULT_SIGN_ALG;if(t.kid!==this.uuid)throw new Error("Unexpected signature kid:"+t.kid+" != "+this.uuid);if(!this.key)throw new Error("Missing public key");return r.crypto.subtle.verify(n,this.key,r.base64urlToBytes(t.s),e).then((e=>!!e))})).catch(u("verify")),this.import=async e=>c("import",(async()=>{if(e&&(this.jwk=e),!this.jwk)throw new Error("Missing JWK key");const t=this.jwk.kid;if(this.jwk=(0,i.correctJwkEcPubKey)(this.jwk),"EC"!==this.jwk.kty||"P-256"!==this.jwk.crv)throw new Error("Unexpected EC key/crv: "+this.jwk.kty+", "+this.jwk.crv+".");const n=l.KEY_ALG_ES256,s=await r.crypto.subtle.importKey("jwk",this.jwk,n,!0,["verify"]).catch((()=>{throw new r.errors.ClientError(r.errors.ClientErrorCode.invalidSigningKeyPair,"Invalid public key")}));return this.uuid=t,this.key=s,this})),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await(0,i.exportKey)(this.uuid,this.key,i.JwkEcPubKey),this.jwk},this.uuid=e||"",this.key=t,this.jwk=n}}l.KEY_ALG_ES256={name:"ECDSA",namedCurve:"P-256"},l.SIGN_ALG_ES256={name:"ECDSA",hash:{name:"SHA-256"},jwkAlgorithmIdentifier:"ES256"},l.DEFAULT_KEY_ALG=l.KEY_ALG_ES256,l.DEFAULT_SIGN_ALG=l.SIGN_ALG_ES256},27257:function(e,t,n){n.d(t,{b:function(){return u}});var r=n(39722),i=n(98798),s=n(38002),o=n(57275);const a=(0,s.P)("model/ecdsa_public_key_pf");class u extends o.r{constructor(e,t,n){super(e,void 0,n),this.verify=async(e,t)=>Promise.resolve().then((()=>{const n=o.r.DEFAULT_SIGN_ALG;if(!this.sjclKey)throw new Error("Missing public key");if(t.kid!==this.uuid)throw new Error("Signing key mismatch, expected '"+this.uuid+"' got '"+t.kid+"'");if(t.alg!==n.jwkAlgorithmIdentifier)throw new Error("Unsupported signature algorithm: "+t.alg);const s=i.bytesToBits(i.base64urlToBytes(t.s)),a=r.hash.sha256.hash(i.bytesToBits(e));return this.sjclKey.verify(a,s,!1)})).catch(a("verify")),this.import=async e=>Promise.resolve().then((()=>{if(e&&(this.jwk=e),!this.jwk)throw new Error("Missing JWK key");const t=i.base64urlToBytes(this.jwk.x),n=i.base64urlToBytes(this.jwk.y),s=r.codec.hex.fromBits(i.bytesToBits(t))+r.codec.hex.fromBits(i.bytesToBits(n));return this.sjclKey=new r.ecc.ecdsa.publicKey(r.ecc.curves.c256,r.codec.hex.toBits(s)),this})).catch(a("import")),this.exportKey=async()=>Promise.resolve().then((()=>{if(!this.sjclKey)throw new Error("Missing public key");const e=this.sjclKey.get();return this.jwk={crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",kid:this.uuid,x:i.bytesToBase64url(new Uint8Array(r.codec.bytes.fromBits(e.x))),y:i.bytesToBase64url(new Uint8Array(r.codec.bytes.fromBits(e.y)))},this.jwk})).catch(a("exportKey")),this.sjclKey=t}}},67188:function(e,t,n){n.d(t,{T:function(){return g},n:function(){return h}});var r=n(69243),i=n(86866),s=n(62323),o=n(98798),a=n(61670),u=n(14502),c=n(16586),l=n(35914),d=n(37412),y=n(40236),p=n(41767),m=n(46559);const f=l.L`web-api/model/encryption_key_pair.ts`,g=r.readonly(r.type({pubKey:u.JwkRsaPubKey,priKey:u.JwkRsaPriKey}),"EncryptionKeyPairPlaintext");class h{constructor(e,t,n){this.uuid=e,this.pubKey=t,this.priKey=n,this.encryptWithKey=async e=>{const t=await this.priKey.encryptWithKey(e),n=this.pubKey.jwk;if(!n)throw new Error("Missing public key");return{pubKey:n,encPriKey:t}},this.encrypt=t.encrypt,this.decrypt=n.decrypt}}!function(e){e.generate=async e=>{const t=async()=>v(e).then(C),n=(0,i.Z)(31,(()=>t)),r=t();return(0,s.Z)(n,(async(e,t)=>e.catch((async()=>t()))),r).catch((e=>{throw new Error(`Failed to generate valid encryption keys after 32 attempts. <${(0,c.getErrorMessage)(e)}>`)}))},e.decryptWithKey=async(t,{pubKey:n,encPriKey:r})=>{const i={mode:"unsafe_report_only",file:f,func:l.L`decryptWithKey`};"string"==typeof n&&(0,a.AK)([l.L`Unexpected JSON string: pubKey`],f,l.L`decryptWithKey`),"string"==typeof r&&(0,a.AK)([l.L`Unexpected JSON string: encPriKey`],f,l.L`decryptWithKey`);const s=(0,a.Jx)("string"==typeof n?JSON.parse(n):n,u.JwkRsaPubKey,i).unwrap(),o=(0,a.Jx)("string"==typeof r?JSON.parse(r):r,u.JweB,i).unwrap(),c=s.kid,[p,m]=await Promise.all([new y.HZ(c).import(s),new d.I(c).decryptWithKey(t,o)]);if(p.uuid!==m.uuid)throw new Error("Public and private key IDs do not match");return new e(c,p,m)}}(h||(h={}));const v=async e=>{const t=y.HZ.DEFAULT_ALG,n=e||o.generateUUID(),{publicKey:r,privateKey:i}=await o.crypto.subtle.generateKey(t,!0,["encrypt","decrypt"]);if(!r||!i)throw new Error("Did not generate key pair properly");const s=new y.HZ(n,r),a=new d.I(n,i);return await Promise.all([s.exportKey(),a.exportKey()]),new h(n,s,a)},C=async e=>{const t={pubKey:e.pubKey.jwk,priKey:e.priKey.jwk};if(o.rsa.primesAreReversed(t.priKey))throw new Error("p < q");const n=(0,m.TF)(),r=n.generate(p.kz).then((async()=>e.encryptWithKey(n))).then((async e=>h.decryptWithKey(n,e))),i="I've got a golden ticket!",s=r.then((async e=>e.encrypt(o.str2ab(i))));return Promise.all([r,s]).then((async([e,t])=>e.decrypt(t))).then((async e=>o.ab2str(e)===i?Promise.resolve():Promise.reject(new Error("Decryption failed")))).then((()=>e))}},59165:function(e,t,n){n.d(t,{U:function(){return i},z:function(){return r}});const r={"test-feature-flag":!1,"b5web-auto-sign-in":!1,"b5web-mycelium-forward-sign-in":!1,"b5web-manitoba-rst-banner":!1,"b5web-saskatchewan-pst-banner":!1,"b5web-south-africa-vat-banner":!1,"b5web-new-zealand-vat-banner":!1,"b5web-dark-mode":!1},i={"b2b-individual-vault-reporting":!1,"b2b-complete-trust-application-insights":!1,"b2b-complete-trust-identity":!1,"b2b-xam-identity-device-trust-handoff":!1,"b2b-private-vault-reporting-in-business-watchtower":!1,"b5web-core-app-ui-v1-opt-in":!1,"b5web-core-app-ui-v1-opt-out":!1,"b5web-core-app-ui-v1-no-opt":!1,"b5web-msp-admin-console":!1,"b5web-msp-billing-page":!1,"msp-foundation":!1,"b5web-billing-signup-payment-form":!1,"b5web-extension-client-restriction":!1,"b5web-telemetry-data-collection":!1,"b5web-b2b-telemetry-data-collection":!1,"b5x-as-trusted-device":!1,"b5web-admin-vaults-overview-knox-table":!1,"b5web-admin-knox-groups-table":!1,"b5web-admin-new-invitations-page":!1,"hide-lastpass-importer-metadata-vault":!1,"b5web-admin-policies-ui":!1,"ct-minimum-client-version":!1,"b5web-admin-developer-report":!1,"b5web-service-accounts-for-all":!1,"b5-multiple-authentication-types":!1,"b5web-cc-app-insights-aggregation":!1,"b2b-b5web-sidebar-talk-to-sales":!1,"b5web-generate-recovery-code-individual":!1,"b5web-generate-recovery-code-family":!1,"b5-auto-lock-policy":!1,"b5-policies-framework":!1,"b5web-hosted-provisioning":!1,"b5web-admin-custom-emails":!1,"b5-policies-restrict-failed-login-attempts":!1,"b5-policies-auto-delete-suspended-users":!1,"b5web-restricted-domain-policy":!1,"b5-policies-auto-delete-suspended-users-dev-time-options":!1,"b5web-disable-family-to-business":!1,"b5-developer-addon":!1,"b5web-developer-tools-active-page-improvements":!1,"b2b-b5-excluded-groups":!1,"b5web-xam-guided-setup-device-trust-cta":!1,"b2b-extension-first-flow":!1,"b2b-device-trust-admin-nav":!1}},76284:function(e,t,n){var r,i,s,o;n.d(t,{JR:function(){return r},oX:function(){return o},rZ:function(){return s},uq:function(){return i}}),function(e){e.Country="country",e.Continent="continent",e.Ip="ip",e.Anonymous="anonymous",e.All="all"}(r||(r={})),function(e){e.Allow="allow",e.Report="report",e.Challenge="challenge",e.Deny="deny",e.Continue="continue"}(i||(i={})),function(e){e.Tor="T",e.Vpn="V",e.Proxy="P",e.CloudProvider="C"}(s||(s={})),function(e){e.Group="group",e.Global="global"}(o||(o={}))},6051:function(e,t,n){n.d(t,{Z:function(){return r}});var r,i=n(85516),s=n(18382);!function(e){e.getInitials=({name:e})=>(0,i.Z)((0,s.Z)(e)," ").filter((e=>!!e)).slice(0,2).reduce(((e,t)=>e+[...t][0]),"").toLocaleUpperCase()}(r||(r={}))},9049:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(91670),i=n(52384),s=n(1166),o=n(87347),a=n(86257),u=n(98798),c=n(23428),l=n(40313),d=n(45742),y=n(30257),p=n(40236),m=n(54868);const f=r.Z,g=(0,c.$y)("model/group");class h{constructor(e){this.accessorType="group",this.decryptRecoverableKeyset=async e=>g("decryptRecoverableKeyset",(async()=>this.recoverableKeyset?e.uuid!==this.recoverableKeyset.encryptedBy?Promise.reject(new Error("Cannot decrypt the group's keyset. It is not encrypted by the given keyset.")):y._X.decryptWithKeyset(e,this.recoverableKeyset):Promise.reject(new Error("Missing recoverable keyset.")))),this.createMembership=async(e,t,n)=>g("createMembership",(async()=>{if(!t.pubKey)throw new Error("Missing member's public key.");if(!e)throw new Error("Missing group's active keyset.");const r=await(0,p.Wx)(t.pubKey),i=await e.encryptWithKey(r);return d.p.create({keyset:i,groupUuid:this.uuid,memberUuid:t.uuid,...n})})),this.addMembership=async(e,t,n)=>g("addMembership",(async()=>this.createMembership(e,t,n).then((e=>(this._memberships[e.memberUuid]=e,e))))),this.setVaultAccessList=e=>{this._vaultACLs=void 0,this._vaultAccessMap=(0,i.Z)(e,(e=>e.vaultUuid))},this.enableKeysetRecovery=async(e,t)=>{if(!t.pubKey)throw new Error("Missing recovery group's public key");return this.recoverableKeyset=await e.encryptWithKey(t.pubKey),this},this.enableRecoverCapability=async e=>{if(!e)throw new Error("Missing recovery keyset.");if(!this.pubKey)throw new Error("Missing public key");const t=await e.encryptWithKey(this.pubKey);return this.recoveryKeyset=t,this},this.uuid=e.uuid?e.uuid:u.generateUUID(),this.name=e.name,this.type=e.type,this.desc=e.desc,this.activeKeysetUuid=e.activeKeysetUuid,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.attrVersion=e.attrVersion||0,this.avatar=e.avatar||"",this.permissions=e.permissions||l.q.empty(),this.userCount=e.userCount,this.archivedKeysets=[],this._memberships={},this._sso=e.sso,this._vaultAccessMap={},this._vaultACLs=void 0,this._attrMask=0}hasAttrMask(e){return(this._attrMask&e)===e}addAttrMask(e){this._attrMask|=e}get isTypeUserDefined(){return this.type===h.TypeUserDefined}get isTypeTeamMembers(){return this.type===h.TypeTeamMembers}get isTypeOwners(){return this.type===h.TypeOwners}get isTypeAdmins(){return this.type===h.TypeAdmins}get isTypeSecurity(){return this.type===h.TypeSecurity}get isTypeMSPTechnicians(){return this.type===h.TypeMSPTechnicians}get isTypeExternalAccountManagers(){return this.type===h.TypeExternalAccountManagers}setOverview(e){this.uuid=e.uuid?e.uuid:u.generateUUID(),this.name=e.name,this.type=e.type,this.desc=e.desc,this.activeKeysetUuid=e.activeKeysetUuid,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.attrVersion=e.attrVersion||0,this.avatar=e.avatar||"",this.permissions=e.permissions||l.q.empty(),this.userCount=e.userCount,this._sso=e.sso}_getLoadedVaultAccessMap(){if(!this.hasAttrMask(h.Attr.VaultAccess))throw new Error("Vault access list has not been loaded");return this._vaultAccessMap}getAccessorVaultUuids(){return this.getVaultUuids()}getVaultUuids(){return f(this._getLoadedVaultAccessMap(),(()=>!0))}getVaultAccessMap(){return this._getLoadedVaultAccessMap()}getVaultACLs(){return this._vaultACLs||(this._vaultACLs=f(this._getLoadedVaultAccessMap(),(e=>e.acl))),this._vaultACLs}hasVaultACL(e,t,n){return!(n&&m.includesFrozenACL(t)||((this.getVaultACLs()[e.uuid]||0)&t)!==t)}hasPermission(...e){return l.q.includes(this.permissions,l.q.combine(e))}getPeopleUuids(){return f(this._memberships,(()=>!0))}get pubKey(){return this._pubKey}set pubKey(e){e&&(this._pubKey=e,this.addAttrMask(h.Attr.PubKey))}getMembership(e){return this._memberships[e]}get memberships(){return(0,s.Z)((0,o.Z)(this._memberships))}set memberships(e){if(this._memberships={},e){for(const t of e)this._memberships[t.memberUuid]=t;this.addAttrMask(h.Attr.Memberships)}}get ssoConfig(){return this._sso}removeMember(e){this._memberships=(0,a.Z)(this._memberships,e.uuid)}get vaultAccessList(){return(0,s.Z)((0,o.Z)(this._getLoadedVaultAccessMap()))}getUnsafeVaultAccessList(){return(0,s.Z)((0,o.Z)(this._vaultAccessMap))}setVaultAccess(e){this._vaultACLs=void 0,this._vaultAccessMap={...this._vaultAccessMap,[e.vaultUuid]:e}}removeVaultAccess(e){this._vaultAccessMap=(0,a.Z)(this._vaultAccessMap,e.uuid)}clearCachedAccessInfo(){this._memberships={},this._vaultAccessMap={},this._vaultACLs=void 0,this.recoveryKeyset=void 0}compare(e){return v(this)-v(e)||u.compareStrings(this.name,e.name)}toString(){return"[object Group]"}}h.TypeOwners="O",h.TypeAdmins="A",h.TypeRecovery="R",h.TypeTeamMembers="M",h.TypeUserDefined="U",h.TypeMSPTechnicians="T",h.TypeExternalAccountManagers="E",h.TypeSecurity="S",h.TypeReplacement="P",h.TypeBackofficeUsers="X",h.TypeBackofficeBilling="Y",h.TypeBackofficeSecurity="W",h.TypeBackofficeDevelopers="V",h.TypeBackofficeFinance="F",h.TypeBackofficeContent="C",h.TypeBackofficeOwners="Z",h.TypeBackofficeAdvanced="D",h.Attr={None:0,PubKey:1,Memberships:2,VaultAccess:4,RecoverableKeyset:8,UserCounts:16,All:255};const v=e=>C[e.type]||0,C=[h.TypeOwners,h.TypeAdmins,h.TypeRecovery,h.TypeSecurity,h.TypeTeamMembers,h.TypeBackofficeOwners,h.TypeBackofficeSecurity,h.TypeBackofficeAdvanced,h.TypeBackofficeDevelopers,h.TypeBackofficeContent,h.TypeBackofficeBilling,h.TypeBackofficeUsers,h.TypeUserDefined].reduce(((e,t,n)=>({...e,[t]:n})),{})},45742:function(e,t,n){n.d(t,{p:function(){return r}});var r,i=n(49756);!function(e){e.create=e=>({...s,...e})}(r||(r={}));const s={role:i.IQ.Role.Member,state:i.IQ.State.Active,version:1}},79686:function(e,t,n){n.r(t),n.d(t,{Account:function(){return r.mR},AccountMeta:function(){return r.XG},AccountSettings:function(){return r.H6},Activity:function(){return a},AdminWatchtowerKeysetObjectDataValue:function(){return ie},AuditEventReportRequest:function(){return o},Auth:function(){return g},AuthCodec:function(){return f},AuthParams:function(){return m},BasicNewsletter:function(){return Ke},BitSet:function(){return R.q},CONTENT_TYPE:function(){return gt.zv},ChildAccountRelationship:function(){return b},ColorType:function(){return Et},DEFAULT_ISSUER:function(){return Qe},DataType:function(){return re.DataType},DetailedVaultReportingObjectDataValue:function(){return ce},DisplayPermission:function(){return Pe.Mg},DuoSettings:function(){return r.OK},ECDSAPrivateKey:function(){return U.C},ECDSAPrivateKeyPF:function(){return I.g},ECDSAPublicKey:function(){return k.r},ECDSAPublicKeyPF:function(){return O.b},EmailProviderDomains:function(){return B.xd},EmptyObjectDataValue:function(){return de},EncryptedVaultItemSnapshotBatch:function(){return bt},EncryptionKeyPair:function(){return D.n},EncryptionKeyPairPlaintext:function(){return D.T},EntityCounts:function(){return r.YY},Env:function(){return E},ExternalVaultItem:function(){return Le.eY},File:function(){return M},FirewallRuleAction:function(){return _.uq},FirewallRuleAnonymousType:function(){return _.rZ},FirewallRuleScopeType:function(){return _.oX},FirewallRuleType:function(){return _.JR},GENERATED_FAMILY_DOMAIN_PREFIX:function(){return r.WL},Group:function(){return V.Z},GroupMembershipWithKeyset:function(){return N.p},IntegrationTranslatableValues:function(){return F},Invitation:function(){return B.Rr},InviteVaultV2:function(){return B.vP},InviteVaultV2List:function(){return B.vp},JWK_ALG_A256GCM:function(){return Y.kz},KID_MASTER_PASSWORD:function(){return Y.qm},Keyset:function(){return L._X},KeysetCiphertext:function(){return L.Ie},LocalAuth:function(){return z},LocalAuthVerifier:function(){return ee},MY_DOMAIN:function(){return r.hM},MasterPasswordPolicySettings:function(){return r.K6},MasterPasswordPolicyType:function(){return r.EO},Named:function(){return K.Z},ObjectDataAccess:function(){return re.ObjectDataAccess},ObjectDataAccessAcl:function(){return re.ObjectDataAccessAcl},ObjectDataAccessScope:function(){return re.ObjectDataAccessScope},ObjectDataAccessorType:function(){return re.ObjectDataAccessorType},ObjectDataType:function(){return ye},ObjectType:function(){return re.ObjectType},OldUser:function(){return Ne},PASSWORD_ENTROPY:function(){return Le.mf},PASSWORD_STRENGTH:function(){return Le.eU},Package:function(){return xe},PackageV2:function(){return Ve},Permission:function(){return Pe.y3},Person:function(){return De},Preference:function(){return Re},Promotion:function(){return r.LW},ProvisionedGroupKeyset:function(){return Ze},ProvisionedKeys:function(){return je},ProvisionedVaultKey:function(){return Ge},ProvisioningSettings:function(){return r.VB},RSAPrivateKey:function(){return qe.I},RSAPublicKey:function(){return Be.HZ},RecoverableGroupKeyset:function(){return He},RecoverableKeys:function(){return $e},RecoverableKeysForPeople:function(){return Je},RecoverablePackageKey:function(){return We},RecoverableVaultKey:function(){return Ye},RecoveryKeysetPermissions:function(){return Pe.I2},START_DOMAIN:function(){return r.CQ},SerializableLocalAuthCredentials:function(){return J},ServiceAccountActions:function(){return lt},ServiceAccountConnectObjectDataValue:function(){return ue},ServiceAccountJwtClaims:function(){return rt},ServiceAccountJwtPrivateClaims:function(){return nt},ServiceAccountStreamingObjectDataValue:function(){return se},ServiceAccountTokenState:function(){return yt},ServiceAccountUser:function(){return ct},ServiceAccountUserManagedObjectDataValue:function(){return le},SigningKeyPair:function(){return mt.E},SlackApp:function(){return ft.z7},SlackAppState:function(){return ft.aA},SlackChannel:function(){return ft.dh},SlackGroup:function(){return ft.qq},SlackInvitationScope:function(){return ft.ZH},SlackNonce:function(){return ft.o0},SlackSettings:function(){return r.$1},SlackTeam:function(){return ft.Eh},SlackUser:function(){return ft.zu},SnapshotVaultTypes:function(){return Tt},SupportSettings:function(){return r.Be},SymmetricKey:function(){return gt.GI},SymmetricKeyPf:function(){return H.tz},TEMPLATE_TITLE_MAX_LENGTH:function(){return wt.p},TokenFeatures:function(){return et},User:function(){return Ee},UserCombinedObjectDataAccess:function(){return re.UserCombinedObjectDataAccess},UserCookie:function(){return ht},Vault:function(){return _e.j},VaultAccess:function(){return Ct},VaultAttrs:function(){return _e.Y},VaultClientAccess:function(){return At.p},VaultItem:function(){return Le.nc},VaultItemDetails:function(){return Le.r0},VaultItemOverview:function(){return Le.VI},VaultItemTemplate:function(){return wt._},VaultReportingVaultOverview:function(){return St.D},VaultSnapshotInsertScopeType:function(){return Pt},WC_ALG_A256GCM:function(){return Y.fw},WatchtowerDataStructureV1:function(){return c},WatchtowerDataStructureV2:function(){return l},WatchtowerStructureVersion:function(){return u},billing:function(){return It},compareSlackUsers:function(){return ft._Q},createEmptySlackApp:function(){return ft.PU},createServiceAccountJwt:function(){return it},createServiceAccountTokenInfo:function(){return tt},createSymmetricKey:function(){return H.TF},crypto1:function(){return Ot},crypto2:function(){return ze},cryptoTests:function(){return Ut},decryptSigningKeyPair:function(){return L.Fx},ecdsa:function(){return kt},extractDerivationInfo:function(){return gt.uE},getAcceptedInviteVaultsKeyedByUserUuid:function(){return B.pd},getImportedPubKey:function(){return Be.Wx},getNativeKeyAlg:function(){return Y.pn},getSlackUserInitials:function(){return ft.Fr},importMasterKey:function(){return H.Xm},importPubKey:function(){return Be.RN},isGenericDomain:function(){return r.As},isSlackGridApp:function(){return ft.Bs},isSymKeyAlg:function(){return Y.Ub},localAuthCredentialsToSerializable:function(){return q},newSnapshotForItem:function(){return Rt},rsa:function(){return Dt},slackAppHasScope:function(){return ft.zY},slackAppIsActive:function(){return ft.hM},tokenSignatureHash:function(){return at},validServiceAccountAcl:function(){return dt},vaultACL:function(){return Ue}});var r=n(4953),i=n(69243),s=n(98798);const o=i.readonly(i.intersection([i.type({objectType:i.string,action:i.string},"required"),i.partial({objectUUID:i.string,reportType:i.string},"optional")]),"AuditEventReportRequest");var a;!function(e){e.fromApi=e=>({actor:e.actor,eid:e.eid||0,uuid:e.uuid||"",time:(0,s.dateFromGolang)(e.time),ipAddress:e.ipAddress,action:e.action,objectType:e.objectType||"",objectUuid:e.objectUuid||"",auxInfo:e.auxInfo||"",auxUuid:e.auxUUID||"",actorType:e.actorType||""}),e.ObjectType={Account:"account",Billing:"billing",User:"user",Signup:"signup",Device:"device",Group:"group",Tier:"tier",Plan:"plan",GroupMembership:"gm",Vault:"vault",VaultItem:"item",VaultItems:"items",VaultItemHistory:"itemhist",VaultKey:"vaultkey",Template:"template",UserVaultAccess:"uva",GroupVaultAccess:"gva",Invite:"invite",EmailChange:"ec",ServiceAccount:"sa",StripeSubscription:"sub",StripeCard:"card",StripePaymentMethod:"pm",StripeEvent:"strpevnt",Report:"report",SlackApp:"slackapp",File:"file",FamilyChildAccount:"famchild",Promotion:"promo",PromotionOffer:"promoffr",CJPartner:"cjprtner",ServiceAccountToken:"satoken",MigratingUser:"miguser",ObjectDelegatedSession:"dlgdsess",SsoSettings:"sso",SignInToken:"ssotkn",RecoveryKey:"rkey",ManagedAccount:"mngdacc"},e.Action={Verify:"verify",Activate:"activate",Reactivate:"reactive",Suspend:"suspend",BeginRecovery:"beginr",CancelRecovery:"cancelr",CompleteRecovery:"completr",UpgradeGuestToMember:"upguest",Begin:"begin",Complete:"complete",Propose:"propose",Provision:"provsn",Join:"join",Create:"create",Update:"update",Delete:"delete",Purge:"purge",View:"view",Export:"export",ReAuth:"reauth",Convert:"convert",Cancel:"cancel",EnableMFA:"enblmfa",UpdateMFA:"updatmfa",DisableMFA:"disblmfa",EnableDuo:"enblduo",UpdateDuo:"updatduo",DisableDuo:"disblduo",Hide:"hide",Unhide:"unhide",Patch:"patch",Grant:"grant",Revoke:"revoke",TokenRename:"trename",TokenRevoke:"trevoke",TokenVerify:"tverify",Expire:"expire",GroupJoin:"join",GroupLeave:"leave",GroupRole:"role",Refund:"refund",ResetBilling:"resbill",AddPromotion:"addpromo",RemovePromotion:"rmpromo",RedeemPromotion:"rdmpromo",RevokePromotion:"rvkpromo",EnableThanksGivingPromo:"enbltgp",DisableThanksGivingPromo:"disbltgp",AddCoupon:"addcoupn",EmailDeletion:"emaildel",ResendEmail:"rsndmail",SendProvisionStartedEmail:"sendts",ResendProvisionStartedEmail:"resendts",ResendAllProvisionStartedEmail:"prsndall",EnableTravel:"trvlaway",DisableTravel:"trvlback",ChangeKeyset:"changeks",ChangeMasterPassword:"changemp",ChangeSecretKey:"changesk",ChangeName:"changenm",ChangeLanguage:"changela",UpdateAttributes:"updatea",AttachChild:"attchild",DetachChild:"detchild",RedeemChild:"rdmchild",UpdateFirewallRule:"updatfw",DeauthorizeOldDevices:"deolddev",DeauthorizeAllDevices:"dealldev",Send:"sendpkg",Share:"share",DeleteShare:"delshare",Unknown:"unknown",Reject:"reject",AddCredit:"addcred",SetCoupon:"setcoupn",RemoveCoupon:"rmcoupn",ChangeTier:"changetr",ResetTrial:"restrial",EndTrial:"endtrial",RecalculateAccountTrial:"recaltrl",AddPurchaseOrder:"addpo",AddStripePurchaseOrder:"addspo",RetryInvoice:"retryinv",Ignore:"ignore",Requeue:"requeue",ClearCache:"clrcache",ResetInviteRateLimit:"rsivrtlt",UpdatePurchaseOrder:"updatepo",UpdateStripePurchaseOrder:"udatespo",ClearFailedMFACount:"clrflmfa",AddTaxNumber:"addtxnum",RemoveTaxNumber:"rmtaxnum",RetryAppleReceipt:"rtaplrct",Replace:"replace",AutoDelete:"autodel",AddVerifiedDomain:"vrfydmn",UpdateVerifiedDomain:"uvrfydmn",DeleteVerifiedDomain:"dvrfydmn",UpdateItemShareAdminSettings:"uisas",ActionMigratingUserComplete:"musercom",ActionMigratingUserDeclined:"muserdec",ActionAddAccountTransfer:"addaxfr",ActionRemoveAccountTransfer:"remaxfr",ActionEnableSSO:"enblsso",ActionDisableSSO:"disblsso",ActionChangeSSOAuthenticationPolicy:"chngpsso",ActionChangeSSOGracePeriodAuthCount:"chngasso",ActionChangeSSOGracePeriodDuration:"chngdsso",ActionDeleteSSOGroup:"delgsso",ActionAddSSOGroup:"addgsso",ActionEnrollTrustedDevice:"tdvcsso",ActionSetupCredentialBundleAuth:"sdvcsso",ActionDelegateSession:"dlgsess",NewSignInToken:"ssotkn",RatchetSignInToken:"ssotknr",SignInWithSignInToken:"ssotknv",ActionEnableDVR:"enbldvr",ActionDisableDVR:"disbldvr",LaunchInto:"launchi",Unlink:"unlink"},e.ReportType={ReportBusinessWatchtower:"business-watchtower",ReportInsightsPasswordHealth:"insights-password-health",ReportDomainBreach:"domain-breach-report",ReportInsightsBreachChecks:"insights-breach-checks",ReportInsightsTeamUsage:"insights-team-usage",ReportSignInAttempts:"sign-in-attempts",ReportActivityLog:"activity-log",ReportUserItemUsages:"user-usage-report",ReportVaultItemUsages:"vault-usage-report",ReportItemUsages:"item-usage-report",ReportDevice:"device-report",ReportTeam:"team-report",ReportOverview:"overview-report",ReportDeveloper:"developer-report",ReportUnmanagedApps:"unmanaged-apps-report",ReportUnmanagedAppDetails:"unmanaged-app-details-report"}}(a||(a={}));const u=2,c=i.readonly(i.intersection([i.type({cw:i.number,rp:i.number,wp:i.number,i2fa:i.number,exp:i.number,tot:i.number}),i.partial({uw:i.number,vp:i.number})])),l=i.readonly(i.intersection([i.type({cw:i.number,rp:i.number,wp:i.number,i2fa:i.number,exp:i.number,tot:i.number}),i.partial({uw:i.number,vp:i.number,wa:i.number})]));var d=n(35567),y=n(39722),p=n(76515);const m=i.readonly(i.type({method:i.string,alg:i.string,iterations:i.number,salt:i.string}),"AuthParams"),f=i.readonly(i.type({params:m,srpX:i.string}),"Auth");var g;!function(e){e.generate=async t=>e.generateWithParams(t,h()),e.generateWithParams=async(e,t)=>({params:t,srpX:await v(e,t)}),e.createFromPreComputedX=(e,t)=>({srpX:s.bytesToHex(e),params:t||h()}),e.getForUpload=e=>({...e.params,v:w(e)})}(g||(g={}));const h=()=>({method:p.DEFAULT_SRP_METHOD.toString(),alg:p.password_key_derivation_consts.DEFAULT_PBES2_ALG,iterations:p.password_key_derivation_consts.DEFAULT_ITERATIONS,salt:s.crypto.getSalt(128)}),v=async(e,t)=>{switch(p.SrpMethod.fromString(t.method).prefix){case p.SrpMethodPrefix.SrpG:return C(e,t);case p.SrpMethodPrefix.Srp:return A(e,t)}},C=async(e,t)=>{const{email:n,secretKey:r,password:i}=S(e),o=s.base64urlToBytes(t.salt),a=s.str2ab(n),u=s.str2ab(t.method),c=await p.unsafePrimitives.rawHkdf(p.unsafePrimitives.Sha2Mode.Sha256,o,u,a,32),l=await p.unsafePrimitives.rawPbkdf2UsingPbes2Alg(t.alg,i,c,t.iterations),d=await r.combineWithBytes(l);return s.bytesToHex(d)},A=async(e,t)=>{const{email:n,secretKey:r,password:i}=S(e),o=s.base64urlToBytes(t.salt),a=await p.unsafePrimitives.rawPbkdf2UsingPbes2Alg(t.alg,s.prehash(i),o,t.iterations),u=await r.combineWithBytes(a),c=new y.hash.sha1;c.update(s.bytesToBits(o)),c.update(y.hash.sha1.hash(n+":"+s.bytesToHex(u)));const l=c.finalize();return y.codec.hex.fromBits(l)},w=e=>{const{g:t,N:n}=p.SrpMethod.fromString(e.params.method).group,r=T(e.srpX);return P(t.modPow(r,n))},S=({email:e,password:t,secretKey:n})=>({email:e.trim().toLowerCase(),password:s.normalizeUTF8(t),secretKey:n}),T=e=>new d.BigInteger(e,16),P=e=>e.toString(16).replace(/^(0x)?0*/,"");var b,R=n(40313);!function(e){let t;e.create=e=>Object.freeze({code:"",state:"",...e}),e.CodePrefix="CA",function(e){e.Active="A",e.Ready="R"}(t=e.State||(e.State={}))}(b||(b={}));var E,I=n(59736),U=n(35067),O=n(27257),k=n(57275),D=n(67188);!function(e){e.Prd="1password.com",e.Pca="1password.ca",e.Peu="1password.eu",e.Ent="ent.1password.com",e.Stg="b5staging.com",e.Dev="b5dev.com",e.Dca="b5dev.ca",e.Deu="b5dev.eu",e.Tst="b5test.com",e.Tca="b5test.ca",e.Teu="b5test.eu",e.Lcl="b5local.com:3000",e.LclHot="b5local.com:4000"}(E||(E={}));class M{constructor(e,t){if(!e){const e=new Error("Created new File without a file ID");console.warn(e)}if(!t){const t=new Error(`Created new File (${e}) without a signing key`);console.warn(t)}this.fileId=e,this.signingKey=t}signReference(e,t){const n=new y.misc.hmac(y.codec.base64url.toBits(this.signingKey.k),y.hash.sha256),r=this.signingKey.kid+this.fileId+e+t.toString();return y.codec.base64url.fromBits(n.encrypt(r))}}var F,_=n(76284),K=n(6051),N=n(45742),V=n(9049);!function(e){e.workspace="workspace"}(F||(F={}));var B=n(11792),L=n(30257),x=n(61670),G=n(14502),Z=n(35914),j=n(61279),Y=n(41767),H=n(46559);const W=Z.L`web-api/model/local_auth.ts`,$="fool me twice",J=i.readonly(i.type({email:i.string,srpX:i.string,muk:G.JwkSymKey,secretKey:(0,x.Hj)(i.string),signInAddress:i.string,userAuth:m,throttleSecret:(0,x.Hj)(i.readonly(i.type({seed:i.string,uuid:i.string}))),deviceUuid:(0,x.Hj)(i.string)}),"SerializableLocalAuthCredentials"),q=(e,t)=>{const n=e.throttleKeypair?(0,x.ci)(e.throttleKeypair.exportSeed()):void 0;return{signInAddress:e.signInAddress,userAuth:e.userAuth,email:e.email,srpX:e.srpX,muk:e.muk,secretKey:e.secretKey,throttleSecret:n&&t?{seed:n,uuid:t}:void 0,deviceUuid:e.deviceUuid}};var z;!function(e){e.generate=async t=>{const{bearerToken:n,...r}=await e.generateVerifierAndToken();try{const e=await ee.deriveKey(r,n),i=x.s_.encode(q(t));return{localAuth:{verifier:r,encCredentials:await e.encrypt(i)},credentials:t,bearerToken:n}}catch(e){throw new Error("new LocalAuth failed: "+e)}},e.decryptCredentials=async(e,t)=>{try{const n=await ee.deriveKey(e.verifier,t),r=await n.decrypt(e.encCredentials),i=(0,x.Jx)(r,x.s_).unwrap();return(0,x.Jx)(i,J,{mode:"unsafe_report_only",file:W,func:Z.L`decryptCredentials`}).unwrap()}catch(e){throw new Error("credentials failed: "+e)}},e.generateVerifierAndToken=async()=>{const e=X();return{...await Q(e),bearerToken:e}}}(z||(z={}));const X=()=>{const e=(0,G.getRandomBytes)(24);return(0,x.RV)(e)},Q=async e=>{const t=(()=>{const e=(0,G.getRandomBytes)(16);return(0,x.RV)(e)})(),n=await te(e,t),r=(0,j.D)(n,$);return{salt:t,localHash:(0,x.RV)(r)}};var ee;!function(e){e.deriveKey=async(e,t)=>{try{await(async(e,t)=>{try{const n=await te(t,e.salt),r=(0,j.D)(n,$),i=(0,x.RV)(r);if(e.localHash!==i)throw new Error("Authentication failed, invalid bearer token")}catch(e){throw new Error("validateBearerToken failed: "+e)}})(e,t);const n=await te(t,e.salt),r=(0,j.D)(n,"shame on you"),i=(0,H.TF)("localauthv2keykid");return await i.importRawKey(Y.kz,r),i}catch(e){throw new Error("deriveKey failed: "+e)}}}(ee||(ee={}));const te=async(e,t)=>{try{const n=(0,x.jL)(t);return p.unsafePrimitives.rawPbkdf2UsingPbes2Alg(p.password_key_derivation_consts.PBES2_ALG_256,e,n,p.password_key_derivation_consts.ITERATIONS_100_000)}catch(e){throw new Error("token PBKDF2 failed: "+e)}};var ne=n(8404),re=n(14521);const ie=n(7772).P,se=(i.readonly(i.type({email:i.string,hexMuk:i.string,srpComputedX:i.readonly(i.type({hexX:i.string,userAuth:m})),url:i.string,userUuid:i.string}),"Credentials"),i.readonly(i.type({signingKey:s.crypto.JwkEcPriKeyDeprecated}),"ServiceAccountStreamingODValue")),oe=i.readonly(i.strict({token:i.string,sPriKey:s.crypto.JwkEcPriKey})),ae=i.readonly(i.type({token:i.string,signingKey:s.crypto.JwkEcPriKeyDeprecated})),ue=new i.Type("ServiceAccountConnectObjectDataValue",oe.is,(e=>{const t=i.union([ae,oe]).decode(e);if((0,ne.tO)(t)){const e=t.right;return"signingKey"in e?(0,ne.F2)({token:e.token,sPriKey:{...e.signingKey,key_ops:["sign"]}}):(0,ne.F2)(e)}return t}),oe.encode),ce=i.readonly(i.exact(i.type({ePriKey:G.JwkRsaPriKey})),"DetailedVaultReportingObjectDataValue"),le=i.readonly(i.type({creatorUuid:i.string}),"ServiceAccountUserManagedObjectDataValue"),de=i.readonly(i.undefined,"EmptyObjectDataValue"),ye=i.union([ie,ce,ue,se,le,de],"ObjectDataType");var pe=n(87347),me=n(1453),fe=n(91670),ge=n(59191),he=n(94778),ve=n(92757),Ce=n(69396),Ae=n(79593),we=n(52408),Se=n(52384),Te=n(86257),Pe=n(43661);const be=R.q.fromHex,Re={TravelMode:be("000000001"),WelcomeMessageDismissed:be("000000002"),ReviewBannerDismissed:be("000000004"),TrashArchiveRenameAcknowledged:be("000000008"),EKitDownloaded:be("000000010"),TelemetryNotificationAcknowledged:be("000000020"),TelemetryOptIn:be("000000040")};var Ee,Ie=n(48583);!function(e){let t,n,r;!function(e){e.Registered="R",e.VerifiedIncomplete="V",e.PendingActivation="P",e.Active="A",e.Suspended="S",e.Deleted="D",e.RecoveryStarted="1",e.RecoveryAccepted="2",e.ProvisionPending="T",e.ProvisionStarted="3",e.ProvisionAccepted="4",e.ProvisionSuspended="5",e.Purging="X",e.Purged="Z"}(t=e.State||(e.State={})),e.AllStates=[e.State.Registered,e.State.VerifiedIncomplete,e.State.PendingActivation,e.State.Active,e.State.Suspended,e.State.Deleted,e.State.RecoveryStarted,e.State.RecoveryAccepted,e.State.ProvisionPending,e.State.ProvisionStarted,e.State.ProvisionAccepted,e.State.ProvisionSuspended,e.State.Purging,e.State.Purged],function(e){e.Regular="R",e.Guest="G",e.ServiceAccount="S",e.ExternalAccountManagement="E"}(n=e.Type||(e.Type={})),e.getInitials=K.Z.getInitials,e.compareByFullName=s.compare.strings((e=>e.name)),e.isOwner=e=>{if(void 0===e.combinedPermissions)throw new TypeError("missing combinedPermissions");return R.q.includes(e.combinedPermissions,Pe.y3.BelongsToOwnersGroup)},e.isSecurity=e=>{if(void 0===e.combinedPermissions)throw new TypeError("missing combinedPermissions");return R.q.includes(e.combinedPermissions,Pe.y3.BelongsToSecurityGroup)},e.isAdmin=e=>{if(void 0===e.combinedPermissions)throw new TypeError("missing combinedPermissions");return R.q.includes(e.combinedPermissions,Pe.y3.BelongsToAdminsGroup)},e.isProvisionManager=t=>{if(void 0===t.combinedPermissions)throw new TypeError("missing combinedPermissions");return R.q.includes(t.combinedPermissions,Pe.y3.ProvisionPeople)&&!e.isOwner(t)&&!e.isAdmin(t)},e.isGuest=e=>e.type===n.Guest,e.isMember=e=>e.type===n.Regular,e.isExternalAccountManagement=e=>e.type===n.ExternalAccountManagement,e.isServiceAccount=e=>e.type===n.ServiceAccount,e.isActive=e=>e.state===t.Active,e.isSuspended=e=>e.state===t.Suspended,e.isProvisionStarted=e=>e.state===t.ProvisionStarted,e.isProvisionSuspended=e=>e.state===t.ProvisionSuspended,e.isEnrolled=e=>(0,Ie.Z)([t.Active,t.ProvisionPending,t.ProvisionStarted,t.ProvisionSuspended,t.Suspended,t.RecoveryStarted,t.RecoveryAccepted],e.state),e.canBeRecovered=e=>e.state===t.Active&&(e.type===n.Regular||e.type===n.Guest),e.canBeDeleted=e=>{switch(e.state){case t.Suspended:case t.PendingActivation:case t.ProvisionPending:case t.ProvisionStarted:case t.ProvisionAccepted:case t.ProvisionSuspended:return!0;case t.Active:return e.type===n.ServiceAccount;default:return!1}},e.canHaveNameChanged=e=>(0,Ie.Z)([t.Active,t.PendingActivation,t.RecoveryStarted,t.RecoveryAccepted,t.ProvisionPending,t.ProvisionStarted,t.ProvisionAccepted,t.ProvisionSuspended],e.state),e.canUseTravelMode=e=>!(e.state!==t.Active&&e.state!==t.RecoveryStarted&&e.state!==t.RecoveryAccepted||e.type!==n.Regular&&e.type!==n.Guest),e.managesSomeGroup=t=>!(!t||!t.groupMemberships||0===t.groupMemberships.length)&&(e.isOwner(t)||e.isAdmin(t)||t.hasPermission(Pe.y3.ManageGroups)||t.groupMemberships.some((e=>e.role===re.GroupMembership.Role.Manager))),e.canHaveGroupsManaged=t=>!e.isGuest(t)&&e.isEnrolled(t),e.canHaveVaultsManaged=e.isEnrolled,e.canReceivePackage=t=>e.isMember(t)&&(0,Ie.Z)([e.State.PendingActivation,e.State.Active,e.State.Suspended,e.State.RecoveryStarted,e.State.RecoveryAccepted,e.State.ProvisionAccepted],t.state),e.canCreateReportOn=e=>(0,Ie.Z)([t.Registered,t.Active,t.Suspended,t.Deleted,t.RecoveryStarted,t.RecoveryAccepted,t.ProvisionPending,t.ProvisionStarted,t.ProvisionAccepted,t.ProvisionSuspended],e.state),function(e){e.Recoverable="Recoverable",e.CanHaveGroupsManaged="CanHaveGroupsManaged",e.CanUseTravelMode="CanUseTravelMode",e.CanReceivePackage="CanReceivePackage",e.CanCreateReportOn="CanCreateReportOn"}(r=e.FilterTypes||(e.FilterTypes={})),e.Filters={[r.Recoverable]:{states:[e.State.Active],types:[e.Type.Regular,e.Type.Guest]},[r.CanHaveGroupsManaged]:{states:[e.State.Active,e.State.RecoveryAccepted,e.State.RecoveryStarted,e.State.Suspended],types:[e.Type.Regular]},[r.CanUseTravelMode]:{states:[t.Active,t.RecoveryStarted,t.RecoveryAccepted],types:[n.Regular,n.Guest]},[r.CanReceivePackage]:{states:[e.State.PendingActivation,e.State.Active,e.State.Suspended,e.State.RecoveryStarted,e.State.RecoveryAccepted,e.State.ProvisionAccepted],types:[n.Regular]},[r.CanCreateReportOn]:{states:[e.State.Registered,e.State.Active,e.State.Suspended,e.State.Deleted,e.State.RecoveryStarted,e.State.RecoveryAccepted,e.State.ProvisionPending,e.State.ProvisionStarted,e.State.ProvisionAccepted,e.State.ProvisionSuspended],types:[e.Type.Regular,e.Type.Guest]}}}(Ee||(Ee={}));var Ue=n(54868);const Oe=pe.Z,ke=me.Z;class De{constructor(e){this.accessorType="user",this.uuid=e.uuid||"",this.name=e.name||"",this.state=e.state||"",this.type=e.type||"",this.attrVersion=e.attrVersion||0,this.keysetVersion=e.keysetVersion||0,this.avatar=e.avatar||"",this.language=e.language||"en",this.combinedPermissions=e.combinedPermissions||R.q.empty(),this.newsletterPrefs=e.newsletterPrefs||0,this.preferences=e.preferences||R.q.empty(),this.externalGUID=e.externalGUID,this.hasMFAEnabled=e.hasMFAEnabled,this.proposedEmail=e.proposedEmail,this.email=e.email||"",this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.lastAuthAt=e.lastAuthAt,this.csToken=e.csToken,this.pubKey=void 0,this.activeKeyset=void 0,this.archivedKeysets=[],this._groupMemberships=[],this._directVaultAccessMap={},this._groupVaultAccessMap={},this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0,this._attrMask=0,this.devices=[],this.personalItemsCount=void 0}hasAttrMask(e){return(this._attrMask&e)===e}addAttrMask(e){this._attrMask|=e}isOwner(){return this.hasPermission(Pe.y3.BelongsToOwnersGroup)}setAttrs(e){return this.name=e.name||"",this.state=e.state||"",this.type=e.type||"",this.attrVersion=e.attrVersion||0,this.keysetVersion=e.keysetVersion||0,this.avatar=e.avatar||"",this.language=e.language||"en",this.combinedPermissions=e.combinedPermissions||R.q.empty(),this.newsletterPrefs=e.newsletterPrefs||0,this.preferences=e.preferences||R.q.empty(),this.externalGUID=e.externalGUID,this.hasMFAEnabled=e.hasMFAEnabled,this.proposedEmail=e.proposedEmail,this.email=e.email||"",this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.lastAuthAt=e.lastAuthAt,this.csToken=e.csToken,this}setActiveKeyset(e){e?(this.activeKeyset=e,this.pubKey=e.ekeyPair.pubKey):(this.activeKeyset=void 0,this.pubKey=void 0)}hasPermission(...e){return R.q.includes(this.combinedPermissions,R.q.combine(e))}hasPreference(...e){return!!this.preferences&&R.q.includes(this.preferences,R.q.combine(e))}async generateNewKeyset(){return Promise.reject(new Error("Not supported"))}get joined(){return this.createdAt}get initials(){return this._initials||(this._initials=K.Z.getInitials(this)),this._initials}clearCachedInitials(){this._initials=""}travelModeIsEnabled(){return void 0!==this.preferences&&R.q.includes(this.preferences,Re.TravelMode)}getAccessorVaultUuids(){return(0,fe.Z)(this._directVaultAccessMap,(()=>!0))}getVaultUuids(){const e=(0,ge.Z)((0,he.Z)(this._directVaultAccessMap),(0,he.Z)(this._groupVaultAccessMap)),t={};return e.forEach((e=>{t[e]=!0})),t}getVaultACLs(){if(!this._combinedVaultACLs){const e=(0,ge.Z)((0,he.Z)(this._directVaultAccessMap),(0,he.Z)(this._groupVaultAccessMap)),t={};e.forEach((e=>{const n=this._directVaultAccessMap[e],r=n?n.acl:0,i=Oe(this._groupVaultAccessMap[e]||{}).reduce(((e,t)=>e|t.acl),r);t[e]=i})),this._combinedVaultACLs=t}return this._combinedVaultACLs}hasVaultACL(e,t,n){return!(n&&Ue.includesFrozenACL(t)||((this.getVaultACLs()[e.uuid]||0)&t)!==t)}getGroupUuids(){const e={};for(const t of this._groupMemberships)e[t.groupUuid]=!0;return e}getGroupMembership(e){return(0,ve.Z)(this._groupMemberships,(t=>t.groupUuid===e.uuid))}setState(e){this.state=e}get isActive(){return this.state===Ee.State.Active}get isEnrolled(){switch(this.state){case Ee.State.Active:case Ee.State.RecoveryAccepted:case Ee.State.RecoveryStarted:case Ee.State.Suspended:return!0;default:return!1}}get isMember(){return this.type===Ee.Type.Regular}get isGuest(){return this.type===Ee.Type.Guest}get isExternalAccountManagement(){return this.type===Ee.Type.ExternalAccountManagement}vaultAccessForVault(e){const t=(0,Ce.Z)(this._directVaultAccessMap,e.uuid,void 0),n=Oe(this._groupVaultAccessMap[e.uuid]||{}),r=t?[t,...n]:n;if(!r||0===r.length)throw new Error("Vault access for this vault has not been loaded.");return r}getDirectVaultAccessMap(){return(0,Ae.Z)(this._directVaultAccessMap)}getGroupVaultAccessMap(){return(0,Ae.Z)(this._groupVaultAccessMap)}getUnsafeVaultAccessList(){if(!this._fullVaultAccessList){const e=Oe(this._directVaultAccessMap),t=ke(this._groupVaultAccessMap,(e=>Oe(e)));this._fullVaultAccessList=e.concat(t)}return this._fullVaultAccessList}get vaultAccessList(){if(!this.hasAttrMask(De.Attr.VaultAccess))throw new Error("Vault access list has not been loaded");return(0,Ae.Z)(this.getUnsafeVaultAccessList())}set vaultAccessList(e){const[t,n]=(0,we.Z)(e,(e=>"group"===e.accessorType));this._directVaultAccessMap=(0,Se.Z)(n,(e=>e.vaultUuid)),this._groupVaultAccessMap=Fe(t),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}setVaultAccess(e){"group"===e.accessorType?this._groupVaultAccessMap=Me(this._groupVaultAccessMap,e):this._directVaultAccessMap={...this._directVaultAccessMap,[e.vaultUuid]:e},this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}removeVaultAccess(e){this._directVaultAccessMap=(0,Te.Z)(this._directVaultAccessMap,e.uuid),this._groupVaultAccessMap=(0,Te.Z)(this._groupVaultAccessMap,e.uuid),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}get unsafeGroupMemberships(){return this._groupMemberships}get groupMemberships(){return(0,Ae.Z)(this._groupMemberships)}set groupMemberships(e){this._groupMemberships=e.slice(),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}pushGroupMembership(e){this._groupMemberships.push(e),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}markTraveling(e){this.preferences=e?R.q.enable(this.preferences,Re.TravelMode):R.q.disable(this.preferences,Re.TravelMode),this.updatedAt=new Date,this.attrVersion++}compare(e){return this.name.localeCompare(e.name)}toString(){return"[object Person]"}}De.UUIDNewlyCreatedProvisionUser="ANEWLYCREATEDTRANSFERUSER2",De.UUIDNewlyCreatedServiceAccount="NEWLYCREATEDSERVICEACCOUNT",De.Attr={None:0,PubKey:1,Keysets:2,Groups:4,VaultAccess:8,Devices:16,PersonalItemsCount:32,ProposedEmailChange:64,All:255};const Me=(e,t)=>{const n=t.vaultUuid,r=t.accessorUuid;return{...e,[n]:{...e[n],[r]:t}}},Fe=e=>{const t={};return e.forEach((e=>{const n=e.vaultUuid,r=e.accessorUuid,i=t[n]||{};t[n]=i,i[r]=e})),t};var _e=n(47200);const Ke=1;class Ne extends De{constructor(e){super(e),this.generateNewKeyset=async()=>{const e=await L._X.generateWithSigningKeys();if(this.activeKeyset){e.sn=this.activeKeyset.sn+1;const t=await this.activeKeyset.encryptWithKey(e.symKey);this.archivedKeysets=[t,...this.archivedKeysets]}else e.sn=1;return this.setActiveKeyset(e),this},this.encryptActiveKeysetWithMasterKey=async()=>{if(!this.activeKeyset)throw new Error("Missing activeKeyset");if(!this.masterKey)throw new Error("Missing masterKey");return this.activeKeyset.encryptWithKey(this.masterKey)},this.getCredentials=()=>{if(!this.email)throw new Error("Missing email");if(!this.password)throw new Error("Missing password");if(!this.secretKey)throw new Error("Missing Secret Key");return{email:this.email,password:this.password,secretKey:this.secretKey}},this.canManageVault=e=>!!e&&_e.j.activeUserHasAcl(e,Ue.Manage),this.password=e.password,this.secretKey=e.secretKey,this.meta=e.meta}}var Ve,Be=n(40236),Le=n(24531);class xe{constructor(e,t,n){this.encryptAndSign=async e=>{if(!this.item)throw new Error("Missing item.");if(!this.recipient.pubKey)throw new Error("Missing recipient's public key");this.key=(0,H.TF)();const[t]=await Promise.all([(0,Be.RN)(this.recipient.pubKey),this.key.generate(Y.kz)]);if(!this.key.jwk)throw new Error("Missing JWK.");this.encKey=await t.encrypt(s.json2ab(this.key.jwk));const[n,r]=await this.item.encryptWithKey(this.key);this.encOverview=n,this.encDetails=r;const i=s.concatUint8Arrays([s.str2ab(this.sender.uuid),s.str2ab(this.recipient.uuid),s.json2ab(this.encOverview),s.json2ab(this.encDetails)]);if(!this.sender.activeKeyset)throw new Error("Missing active keyset.");return this.signature=await this.sender.activeKeyset.sign(i),await this._enableKeyRecovery(e),this},this._enableKeyRecovery=async e=>{if(!e.pubKey)throw new Error("Missing group's public key");if(!this.key)throw new Error("Missing key");return this.recoverableEncKey=await this.key.encryptWithKey(e.pubKey),this},this.verifyAndDecrypt=async(e,t)=>{this.key=(0,H.TF)();const n=new Le.nc(e,void 0,this.uuid);if(!this.templateUuid)throw new Error("Missing template UUID");if(!this.itemUuid)throw new Error("Missing item UUID");if(!this.encOverview)throw new Error("Missing encrypted overview");if(!this.encKey)throw new Error("Missing encryption key");return await this.key.decryptWithKeyset(t,this.encKey),await n.decryptWithKey(this.key,this.encOverview,this.encDetails),n.templateUuid=this.templateUuid,n.packageUuid=this.uuid,n.uuid=this.itemUuid,n.itemVersion=1,n.state=Le.nc.ItemState.Active,n.createdAt=this.clientCreatedAt,n.updatedAt=this.clientUpdatedAt,this.item=n,this},this.sender=e,this.recipient=t,this.item=n,this.createdAt=new Date}}!function(e){e.encryptAndSign=async(e,t,n)=>{},e.verifyAndDecrypt=async e=>{}}(Ve||(Ve={}));class Ge{constructor(e,t){this.vaultUuid=e,this.vaultKey=t,this.encryptWithKey=async e=>{if(void 0===this.vaultKey.sn)throw new TypeError("Missing vault key SN");const t=await this.vaultKey.encryptWithKey(e);return{vaultUuid:this.vaultUuid,vaultKeySN:this.vaultKey.sn,encryptedBy:t.kid,encVaultKey:t}}}}class Ze{constructor(e,t){this.groupUuid=e,this.keyset=t,this.encryptWithKey=async e=>({groupUuid:this.groupUuid,keyset:await this.keyset.encryptWithKey(e)})}}class je{constructor(e,t){this.vaultKeys=e,this.groupKeysets=t,this.encryptForPerson=async e=>{const t=e.pubKey;if(!t)throw new Error("Missing user's public key");return this.encryptWithPubKey(t)},this.encryptWithPubKey=async e=>{const[t,n]=await Promise.all([Promise.all(this.vaultKeys.map((async t=>t.encryptWithKey(e)))),Promise.all(this.groupKeysets.map((async t=>t.encryptWithKey(e))))]);return{vaultKeys:t,groupKeysets:n}}}}class Ye{constructor(e,t){this.vaultUuid=e,this.vaultKey=t,this.encryptWithKey=async e=>{if(void 0===this.vaultKey.sn)throw new TypeError("Missing vault key SN");const t=await this.vaultKey.encryptWithKey(e);return{vaultUuid:this.vaultUuid,vaultKeySN:this.vaultKey.sn,encryptedBy:t.kid,encVaultKey:t}}}}class He{constructor(e,t){this.groupUuid=e,this.keyset=t,this.encryptWithKey=async e=>{const t=await this.keyset.encryptWithKey(e);return{groupUuid:this.groupUuid,keyset:t}}}}class We{constructor(e,t){this.packageUuid=e,this.key=t,this.encryptWithKey=async e=>{const t=await this.key.encryptWithKey(e);return{packageUuid:this.packageUuid,key:t}}}}class $e{constructor(e,t,n){this.vaultKeys=e,this.groupKeysets=t,this.packageKeys=n,this.encryptForPerson=async e=>{if(!e.pubKey)throw new Error("Missing user's public key");const t=await(0,Be.RN)(e.pubKey),[n,r,i]=await Promise.all([Promise.all(this.vaultKeys.map((async e=>e.encryptWithKey(t)))),Promise.all(this.groupKeysets.map((async e=>e.encryptWithKey(t)))),Promise.all(this.packageKeys.map((async e=>e.encryptWithKey(t))))]);return{vaultKeys:n,groupKeysets:r,packageKeys:i}}}}class Je{constructor(e){this.keys=e,this.encryptForPeople=async e=>{if(this.keys.length!==e.length)throw new Error("Number of keys and people do not match.");const t=this.keys.map((async(t,n)=>{const r=e[n];if(void 0===r)throw new Error("encryptForPeople: user not found.");return t.encryptForPerson(r)}));return{keys:await Promise.all(t)}}}}var qe=n(37412),ze=n(85943),Xe=n(95879);const Qe="com.1password.b5";var et;!function(e){e.AccessVaults="vaultaccess"}(et||(et={}));const tt=({audience:e,features:t,...n})=>{const r={audience:e,features:t,jti:(0,s.generateUUID)(),issuer:n.issuer||Qe,vaults:n.vaultAccess?ot(n.vaultAccess):void 0,expiry:n.expiry?n.expiry.toISOString():void 0};return st(r),r},nt=i.readonly(i.intersection([i.type({"1password.com/auuid":i.string,"1password.com/fts":i.readonlyArray(i.string)}),i.partial({"1password.com/token":i.string,"1password.com/vts":i.readonlyArray(re.VaultClaim)})]),"ServiceAccountJwtPrivateClaims"),rt=i.intersection([Xe.Vj,nt],"ServiceAccountJwtClaims"),it=async({signingKey:e,accountUuid:t,serviceAccountUuid:n,createTokenInfo:r,...i})=>{if(!n)throw new Error("SAJWT subject claim not provided.");st(r);const s={"1password.com/auuid":t,"1password.com/token":i.bearerToken,"1password.com/fts":r.features,"1password.com/vts":r.vaults,aud:[r.audience],sub:n,exp:r.expiry?new Date(r.expiry):void 0,iat:new Date,nbf:i.notValidBefore,iss:r.issuer||Qe,jti:r.jti};return await(0,ze.createToken)(e,s,rt)},st=e=>{if(!e.audience)throw new Error("Audience claim is required.");if(0===e.features.length)throw new Error("Token 'features' claim not provided");if(e.vaults?.length&&e.vaults?.length>0&&!e.features.includes(et.AccessVaults))throw new Error(`Feature ${et.AccessVaults} is required if including Vault claims.`)},ot=e=>e.map((({vaultUuid:e,acl:t})=>({u:e,a:t}))),at=async e=>{const t=e.split(".")[2];if(!t)throw new Error("corrupted token");const n=await s.crypto.sha256(s.str2ab(t));return s.bytesToHex(n)};var ut=n(78359);class ct{constructor(e){this.uuid=e.uuid||"",this.email=e.email||"",this.creatorUuid=e.creatorUuid,this.serviceAccountType=e.serviceAccountType,this.attrVersion=e.attrVersion||0,this.keysetVersion=e.keysetVersion||0,this.name=e.name||"",this.state=e.state||"",this.type=e.type||"",this.avatar=e.avatar||"",this.language=e.language||"en",this.permissions=e.permissions||0,this.combinedPermissions=e.combinedPermissions||R.q.empty(),this.newsletterPrefs=e.newsletterPrefs||0,this.preferences=e.preferences||R.q.empty(),this.externalGUID=e.externalGUID,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.lastAuthAt=e.lastAuthAt,this.billables=e.billables,this.rotatedAt=e.rotatedAt,this.expiresAt=e.expiresAt,this._tokenJtiMap={},this._attrMask=0,this._serviceAccountVaultAccess=e.serviceAccountVaultAccess}hasAttrMask(e){return(this._attrMask&e)===e}addAttrMask(e){this._attrMask|=e}static translateAttrMaskNames(e){const t=Object.keys(ct.Attr).filter((e=>!["None","All"].includes(e))).map((e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/^-+|-+$/g,"").toLowerCase()));return(0,ut.KO)(e,t)}get tokens(){if(!this.hasAttrMask(ct.Attr.Tokens))throw new TypeError("Service Account token list has not been loaded");return Object.values(this._tokenJtiMap)}set tokens(e){this._tokenJtiMap=(0,Se.Z)(e,(e=>e.tokenInfo.jti))}getToken(e){if(!this.hasAttrMask(ct.Attr.Tokens))throw new TypeError("Service Account token list has not been loaded");return this._tokenJtiMap[e]}get displayableVaultAccess(){if(!this.hasAttrMask(ct.Attr.VaultAccess)||!this._serviceAccountVaultAccess)throw new TypeError("Service Account Vault Access has not been loaded.");return this._serviceAccountVaultAccess.displayable}get totalAccessibleVaults(){if(!this.hasAttrMask(ct.Attr.VaultAccess)||!this._serviceAccountVaultAccess)throw new TypeError("Service Account Vault Access has not been loaded.");return this._serviceAccountVaultAccess.totalVaults}}ct.Attr={None:0,Tokens:1,VaultAccess:2,Billables:4,All:255};const lt={CreateToken:re.ObjectDataAccessAcl.ServiceAccountTokenCreate,RevokeToken:re.ObjectDataAccessAcl.ServiceAccountTokenRevoke,EditToken:re.ObjectDataAccessAcl.ServiceAccountTokenEdit,CreateServiceAccount:re.ObjectDataAccessAcl.ServiceAccountCreate,EditServiceAccount:re.ObjectDataAccessAcl.ServiceAccountEdit,DeleteServiceAccount:re.ObjectDataAccessAcl.ServiceAccountDelete,EditVaultAccess:re.ObjectDataAccessAcl.ServiceAccountConnectVaultAccessEdit},dt=Object.values(lt),yt={Active:"A",Revoked:"R"};var pt,mt=n(46747),ft=n(86580),gt=n(95154);class ht{constructor(e){this.setDomainBasedInfo=()=>{this.countryCode=s.getCountryCodeFromDomain(this.accountDomain),this.server=s.getServerDomainFromAccountDomain(this.accountDomain)},this.getSignInDomain=()=>this.usingMyDomain?r.hM+"."+this.server:this.accountDomain,this.update=e=>{let t=!1;return this.userUuid!==e.userUuid&&(this.userUuid=e.userUuid,t=!0),this.userEmail!==e.userEmail&&(this.userEmail=e.userEmail,t=!0),this.userName!==e.userName&&(this.userName=e.userName,t=!0),this.userAvatarURL!==e.userAvatarURL&&(this.userAvatarURL=e.userAvatarURL,t=!0),this.usingMyDomain!==e.usingMyDomain&&(this.usingMyDomain=e.usingMyDomain,t=!0),this.accountType!==e.accountType&&(this.accountType=e.accountType,t=!0),this.accountName!==e.accountName&&(this.accountName=e.accountName,t=!0),this.accountDomain!==e.accountDomain&&(this.accountDomain=e.accountDomain,this.setDomainBasedInfo(),t=!0),this.accountAvatarURL!==e.accountAvatarURL&&(this.accountAvatarURL=e.accountAvatarURL,t=!0),this.hasPrioritySupport!==e.hasPrioritySupport&&(this.hasPrioritySupport=e.hasPrioritySupport,t=!0),t},this.userUuid=e.userUuid,this.userEmail=e.userEmail,this.userName=e.userName,this.userAvatarURL=e.userAvatarURL,this.usingMyDomain=e.usingMyDomain,this.accountUuid=e.accountUuid,this.accountType=e.accountType,this.accountName=e.accountName,this.accountDomain=e.accountDomain,this.accountAvatarURL=e.accountAvatarURL,this.hasPrioritySupport=e.hasPrioritySupport,this.countryCode=s.getCountryCodeFromDomain(this.accountDomain),this.server=s.getServerDomainFromAccountDomain(this.accountDomain)}toString(){return"[object UserCookie]"}}const vt=(0,n(23428).$y)("model/vault_access");class Ct{constructor(e){if(this.canManageVault=e=>this.vaultUuid===e.uuid&&(this.acl&Ue.Manage)===Ue.Manage,this.encryptVaultKey=async e=>vt("encryptVaultKey",(async()=>{if(!this.vaultKey)throw new Error("Missing vault key");if(!e)throw new Error("Missing accessor");if(!e.pubKey)throw new Error("Missing accessor's pubKey");return this.vaultKey.encryptWithKey(e.pubKey).then((e=>(this.encVaultKey=e,e)))})),this.decryptVaultKey=async e=>{if(!this.encVaultKey)throw new Error("Missing encrypted vault key.");if(!e)throw new Error("Missing keyset");return this.vaultKey=await(0,H.TF)().decryptWithKeyset(e,this.encVaultKey),this.vaultKey},!(0,s.isValidVaultUuid)(e.vaultUuid))throw new Error("Invalid vault UUID");if(!(0,s.isValidAccessorUuid)(e.accessorType)(e.accessorUuid))throw new Error("Invalid accessor UUID");this.vaultUuid=e.vaultUuid,this.accessorType=e.accessorType,this.accessorUuid=e.accessorUuid,this.vaultKeySN=e.vaultKeySN,this.encVaultKey=e.encVaultKey&&"kid"in e.encVaultKey&&e.encVaultKey.kid?e.encVaultKey:void 0,this.encryptedBy=e.encryptedBy,this.acl=e.acl,this.leaseTimeout=e.leaseTimeout}static combineACLs(e){return e?e.reduce(((e,t)=>e|t.acl),0):0}toApi(){return{vaultUuid:this.vaultUuid,accessorType:this.accessorType,accessorUuid:this.accessorUuid,vaultKeySN:this.vaultKeySN,encVaultKey:this.encVaultKey,encryptedBy:this.encryptedBy,acl:this.acl,leaseTimeout:this.leaseTimeout}}}pt=Ct,Ct.generate=async(e,t,n)=>vt("generate",(async()=>{if(!e||!e.activeKey)throw new Error("Missing vault key");if(void 0===e.activeKey.sn)throw new TypeError("Missing active key SN");if(!t||!t.pubKey)throw new Error("Missing accessor's public key");const r=await(0,Be.Wx)(t.pubKey),i=await e.activeKey.encryptWithKey(r),s=new pt({accessorType:t.accessorType,accessorUuid:t.uuid,encryptedBy:r.uuid,encVaultKey:i,leaseTimeout:0,vaultKeySN:e.activeKey.sn,vaultUuid:e.uuid,...n});return s.vaultKey=e.activeKey,s}));var At=n(7291),wt=n(12826),St=n(28967);const Tt=[_e.j.TypePersonal,_e.j.TypeEveryone,_e.j.TypeUserCreated];var Pt;!function(e){e.Patch="patch",e.Full="full"}(Pt||(Pt={}));const bt=i.type({scope:i.string,contentVersion:i.number,isFinal:i.boolean,vaultUuid:i.string,snapshots:i.array(p.EncryptedVaultItemSnapshot)},"EncryptedVaultItemSnapshotBatch"),Rt=async(e,t,n)=>{const r={title:e.overview.title};if(e.templateUuid===wt._.LoginUuid&&void 0!==e.username&&(r.username=e.username.value),e.vault.type!==_e.j.TypePersonal&&(r.vaultName=e.vault.name),e.overview.URLs){const t=e.overview.URLs.map((e=>e.u));r.domains=(0,s.normalizeAndFilterUniqueUrls)(t)}n&&(r.watchtowerReport=n);const i=!!r.domains?.some((e=>!!e));return{vaultUuid:e.vault.uuid,vaultItemUuid:e.uuid,snapshot:r,itemVersion:e.itemVersion,hasUrl:i,isBusinessRelated:!!r.username&&(0,s.isBusinessRelated)(r.username,t)}};var Et;!function(e){e.Lavender="lavender",e.Algae="algae",e.LightBlue="light_blue",e.Sand="sand",e.Red="red",e.Peach="peach"}(Et||(Et={}));var It=n(70479),Ut=n(98233),Ot=n(55737),kt=n(19261),Dt=n(10327)},11792:function(e,t,n){n.d(t,{Rr:function(){return c},pd:function(){return y},vP:function(){return l},vp:function(){return d},xd:function(){return u}});var r=n(91670),i=n(46525),s=n(61320),o=n.n(s),a=n(93352);const u=["126.com","163.com","aim.com","airmail.com","aol.com","att.net","bellsouth.net","charter.net","comcast.net","cox.net","earthlink.net","facebook.com","fastmail.com","fastmail.fm","gmail.com","guerrillamail.com","hotmail.com","hushmail.com","icloud.com","inbox.ru","juno.com","live.com","mac.com","mail.ru","mailinator.com","me.com","msn.com","outlook.com","protonmail.com","qq.com","sbcglobal.net","snkmail.com","tempmail.us","thrma.com","trbvm.com","verizon.net","yahoo.com","yandex.com","yandex.ru","yp.ycare.de","zoho.com"];class c{constructor(e){this.uuid=e.uuid,this.email=e.email||"",this.accountName=e.accountName||"",this.accountType=e.accountType||"",this.language=e.language,this.state=e.state||"",this.type=e.type||"",this.sentAt=(0,a.N)(e.sentAt),this.timeout=e.timeout||0,this.revokedAt=(0,a.N)(e.revokedAt),this.acceptedAt=(0,a.N)(e.acceptedAt)}get expiresAt(){return o()(this.sentAt).add(this.timeout,"hours").toDate()}get isExpired(){return Date.now()-this.expiresAt.valueOf()>0}get joined(){}get lastAuthAt(){}travelModeIsEnabled(){return!1}}c.StatePending="P",c.StateAccepted="A",c.StateRevoked="R",c.TypeRegular="R",c.TypeGuest="G";class l{constructor(e){this.state=e.state,this.shouldConfirm=e.shouldConfirm,this.inviteUuid=e.inviteUuid,this.userUuid=e.userUuid,this.vaultUuid=e.vaultUuid,this.vaultAcl=e.vaultAcl}}l.StatePending="P",l.StateAccepted="A";class d{constructor(e){this.vaults=e}get shouldConfirm(){return this.vaults.every((e=>e.shouldConfirm))}}const y=e=>{const t=e.vaults.filter((e=>e.state===l.StateAccepted&&e.userUuid));return(0,r.Z)((0,i.Z)(t,(e=>e.userUuid)),(e=>new d(e)))}},30257:function(e,t,n){n.d(t,{Fx:function(){return d},Ie:function(){return i.KeysetCiphertext},_X:function(){return c}});var r=n(98798),i=n(14502),s=n(67188),o=n(46747),a=n(41767),u=n(46559);class c{constructor(e,t,n,r,i=0){this.uuid=e,this.symKey=t,this.ekeyPair=n,this.skeyPair=r,this.sn=i,this.generateSigningKeys=async()=>(this.skeyPair=new o.E(this.uuid),this.skeyPair.generate(this.uuid)),this.sign=async e=>{if(!this.skeyPair)throw new Error("Failed to sign, skeyPair missing");return this.skeyPair.sign(e)},this.verify=async(e,t)=>{if(!this.skeyPair)throw new Error("Failed to verify, skeyPair missing");return this.skeyPair.verify(e,t)},this.encrypt=async e=>this.ekeyPair.encrypt(e),this.decrypt=async e=>this.ekeyPair.decrypt(e),this.encryptWithKey=async e=>{const[t,n,r]=await Promise.all([this.symKey.encryptWithKey(e),this.ekeyPair.encryptWithKey(this.symKey),this.skeyPair&&this.skeyPair.priKey?this.skeyPair.encryptWithKey(this.symKey):Promise.resolve(void 0)]);return{uuid:this.uuid,sn:this.sn,encryptedBy:t.kid,encSymKey:t,pubKey:n.pubKey,encPriKey:n.encPriKey,spubKey:r?.pubKey,encSPriKey:r?.encPriKey}}}hasSigningKeys(){return!!this.skeyPair&&!!this.skeyPair.pubKey}}!function(e){e.generateWithSigningKeys=async()=>l(!0),e.generateWithoutSigningKeys=async()=>l(!1),e.decryptWithKeyset=async(t,n)=>{const r=n.encSymKey.enc,i=(0,a.Ub)(r)?t.symKey:t.ekeyPair;return e.decryptWithKey(i,n)},e.decryptWithKey=async(t,n)=>{const{sn:r,uuid:i,pubKey:o,encSymKey:a,encPriKey:c,spubKey:l,encSPriKey:y}=n,p=await(0,u.TF)().decryptWithKey(t,a),[m,f]=await Promise.all([s.n.decryptWithKey(p,{pubKey:o,encPriKey:c}),d(p,{pubKey:l,encPriKey:y})]);return new e(i,p,m,f,r)}}(c||(c={}));const l=async e=>{const t=r.generateUUID(),n=(0,u.TF)(),[,i,l]=await Promise.all([n.generate(a.kz,t),s.n.generate(t),e?new o.E(t).generate(t):Promise.resolve(void 0)]);return new c(t,n,i,l)},d=async(e,{pubKey:t,encPriKey:n})=>{if(t&&n)try{return await(new o.E).decryptWithKey(e,{pubKey:t,encPriKey:n})}catch(e){if(r.errors.isClientError(e,r.errors.ClientErrorCode.invalidSigningKeyPair))return;throw e}}},43661:function(e,t,n){n.d(t,{I2:function(){return a},Mg:function(){return o},y3:function(){return s}});var r=n(40313);const i=r.q.fromHex,s={BelongsToTeamMembersGroup:i("000000001"),BelongsToOwnersGroup:i("000000002"),BelongsToAdminsGroup:i("000000004"),BelongsToRecoveryGroup:i("000000008"),BelongsToUserDefinedGroup:i("000000010"),BelongsToSecurityGroup:i("000000020"),BelongsToExternalAccountManagersGroup:i("000000040"),Recover:i("000000100"),ViewAdminConsole:i("000000200"),ViewActivities:i("000000400"),ViewTemplates:i("000000800"),ViewPeople:i("000001000"),AddPerson:i("000002000"),ChangePersonName:i("000004000"),SuspendPerson:i("000008000"),DeletePerson:i("000010000"),ViewVaults:i("000020000"),UsePersonalVault:i("000040000"),CreateVault:i("000080000"),ManageTemplates:i("000100000"),ManageVaults:i("000200000"),ViewGroups:i("000400000"),ManageGroups:i("000800000"),ViewTeamSettings:i("001000000"),ChangeTeamSettings:i("002000000"),ChangeTeamAttrs:i("004000000"),ChangeTeamDomain:i("008000000"),SuspendTeam:i("010000000"),DeleteTeam:i("020000000"),ViewBilling:i("040000000"),ManageBilling:i("080000000"),ProvisionPeople:i("10000000000"),BeginRecovery:i("80000000000"),ViewSecurityReports:i("20000000000"),BackofficeView:i("0100000000000"),BackofficeViewAdvanced:i("0200000000000"),BackofficeUpdate:i("0400000000000"),BackofficeChangeDomain:i("0800000000000"),BackofficeSuspendTeam:i("1000000000000"),BackofficeDeleteTeam:i("2000000000000")},o={Recovery:s.Recover,ViewAdminConsole:r.q.combine([s.ViewAdminConsole,s.ViewActivities,s.ViewPeople,s.ViewVaults,s.ViewTemplates,s.ViewGroups,s.ViewTeamSettings]),ManagePeople1:r.q.combine([s.AddPerson,s.DeletePerson]),ManagePeople2:s.ChangePersonName,SuspendPerson:s.SuspendPerson,CreateVault:s.CreateVault,ManageAllVaults:s.ManageVaults,ManageAllGroups:s.ManageGroups,ManageTeamSettings:r.q.combine([s.ChangeTeamSettings,s.ChangeTeamAttrs,s.ChangeTeamDomain,s.ManageTemplates]),DeleteTeam:r.q.combine([s.SuspendTeam,s.DeleteTeam]),ManageBilling:r.q.combine([s.ViewBilling,s.ManageBilling]),ProvisionPeople:r.q.combine([s.ProvisionPeople,s.BeginRecovery]),ViewSecurityReports:s.ViewSecurityReports},a=r.q.combine([s.Recover,s.ManageGroups,s.ManageVaults])},88139:function(e,t,n){n.d(t,{PT:function(){return s},hR:function(){return a},uz:function(){return o}});var r=n(69243),i=n(81567);class s{constructor(e,t,n){this.uuid=e,this.recoveryKeyUuid=t,this.policy=n}}!function(e){let t,n,i,s;!function(e){e.V1="1"}(t=e.SpecVersion||(e.SpecVersion={})),function(e){e.PaperKey="PAPER_KEY"}(n=e.Feature||(e.Feature={})),function(e){e.Email="EMAIL",e.CustomerSupport="CUSTOMER_SUPPORT"}(i=e.UserVerification||(e.UserVerification={})),function(e){e.Self="SELF"}(s=e.Custody||(e.Custody={})),e.newForRecoveryCode=()=>({feature:n.PaperKey,specVersion:t.V1,custody:s.Self,configuration:{userVerification:[i.Email,i.CustomerSupport],delaySecs:0}}),e.Codec=r.exact(r.type({feature:r.string,specVersion:r.string,custody:r.string,configuration:r.exact(r.type({userVerification:r.array(r.string),delaySecs:r.number}))}))}(s||(s={})),r.exact(r.type({uuid:r.string,label:r.union([r.string,r.null]),state:r.string,enc:r.string,encryptedBy:r.string,cryptoVersion:r.string,verifierParam:r.string,createdAt:r.string,updatedAt:r.string}));class o{constructor(e,t){this.policy=e,this.keyDetails=t}}class a{constructor(e,t,n,r,i,s){this.uuid=e,this.policyUuid=t,this.state=n,this.createdAt=r,this.updatedAt=i,this.expiresAt=s}}a.fromParts=e=>new a(e.uuid,e.policyUuid,u(a.KnownState,e.state),e.createdAt,e.updatedAt,e.expiresAt),function(e){let t;!function(e){e.KeyVerifierAccepted="KEY_VERIFIER_ACCEPTED",e.Aborted="ABORTED",e.EmailVerificationPending="EMAIL_VERIFICATION_PENDING",e.MaterialReleased="MATERIAL_RELEASED"}(t=e.KnownState||(e.KnownState={}))}(a||(a={}));const u=(e,t)=>(e=>{const t=Object.values(e);return e=>t.includes(e)})(e)(t)?(0,i.ok)(t):(0,i.cn)(t)},10327:function(e,t,n){n.r(t),n.d(t,{DEFAULT_PARAMS:function(){return m},JWK_ALG_RSA_OAEP:function(){return y},JWK_ALG_RSA_OAEP_256:function(){return l},WC_KEY_GEN_RSA_OAEP:function(){return p},WC_KEY_GEN_RSA_OAEP_256:function(){return d},_decrypt:function(){return T},_encrypt:function(){return P},_importPriKey:function(){return w},_importPubKey:function(){return S},decrypt:function(){return A},decryptJweB:function(){return g},encrypt:function(){return C},encryptJweB:function(){return h},generateKeyPair:function(){return f}});var r=n(98798),i=n(14502),s=n(23428),o=n(67188),a=n(37412),u=n(40236);const c=(0,s.$y)("model/rsa"),l="RSA-OAEP-256",d={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},y="RSA-OAEP",p={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},m=p,f=async e=>c("generateKeyPair",(async()=>{const t=await o.n.generate(e),n=t.pubKey.jwk,r=t.priKey.jwk;if(!n||!r)throw new Error("Missing plain text key pair.");return{pubKey:n,priKey:r}})),g=async(e,t)=>c("decrypt",(async()=>(await new a.I(e.kid,void 0,e).import()).decrypt(t))),h=async(e,t)=>c("encrypt",(async()=>(await(0,u.RN)(e)).encrypt(t))),v=e=>{const{name:t,hash:n}=(e=>{switch(e){case l:if(!i.supports.rsaOaep256)throw new r.errors.ClientError(r.errors.ClientErrorCode.noRsaOaep256Support,"Browser does not support RSA-OAEP-256");return d;case y:return p}throw new Error("Unexpected alg: "+e)})(e);return{name:t,hash:n}},C=async(e,t)=>await P(await S(e),t),A=async(e,t)=>await T(await w(e),t),w=async e=>{const t=v(e.alg),n=(0,i.correctJwkRsaPriKeyIfNeeded)(e);return i.subtle.importKey("jwk",n,t,!0,["decrypt"])},S=async e=>{const t=v(e.alg),n=(0,i.correctJwkRsaPubKeyIfNeeded)(e);return i.subtle.importKey("jwk",n,t,!0,["encrypt"])},T=async(e,t)=>{const n=await i.subtle.decrypt(e.algorithm,e,t);return new Uint8Array(n)},P=async(e,t)=>{if(t.length>256)throw new Error("Plaintext is too large.");const n=await i.subtle.encrypt({name:e.algorithm.name},e,t);return new Uint8Array(n)}},37412:function(e,t,n){n.d(t,{I:function(){return d}});var r=n(98798),i=n(61670),s=n(14502),o=n(38002),a=n(35914),u=n(40236);const c=a.L`model/rsa_private_key`,l=(0,o.P)(c.str);class d{constructor(e,t,n){this.decrypt=async e=>Promise.resolve().then((async()=>{"string"==typeof e&&(0,i.AK)([a.L`Unexpected JSON string: json`],c,a.L`decrypt`);const t=(0,i.Jx)("string"==typeof e?JSON.parse(e):e,s.JweB,{mode:"unsafe_report_only",file:c,func:a.L`decrypt`}).unwrap();if(u.HZ.CONTENT_TYPE!==t.cty)throw new Error("Unexpected content type");if(t.kid!==this.uuid)throw new Error("Content encrypted with wrong key");if(!this.key)throw new Error("Missing decryption key");let n;if(t.enc===u.HZ.JWK_ALG_RSA_OAEP_256){if(!s.supports.rsaOaep256)throw new r.errors.ClientError(r.errors.ClientErrorCode.noRsaOaep256Support,"Browser does not support RSA-OAEP-256");n=u.HZ.WC_ALG_RSA_OAEP_256}else{if(t.enc!==u.HZ.JWK_ALG_RSA_OAEP)throw new Error("Unexpected algorithm");n=u.HZ.WC_ALG_RSA_OAEP}const o=r.base64urlToBytes(t.data);return r.crypto.subtle.decrypt(n,this.key,o).then((e=>new Uint8Array(e)))})).catch(l("decrypt")),this.import=async e=>Promise.resolve().then((async()=>{if(e&&(this.jwk=e),!this.jwk)throw new Error("Missing JWK");const t=this.jwk.kid;let n;if(this.jwk.alg===u.HZ.JWK_ALG_RSA_OAEP_256)n=u.HZ.WC_ALG_RSA_OAEP_256;else{if(this.jwk.alg!==u.HZ.JWK_ALG_RSA_OAEP)throw new Error("RSAPrivateKey failed to import, unexpected alg");n=u.HZ.WC_ALG_RSA_OAEP}return this.jwk=(0,s.correctJwkRsaPriKeyIfNeeded)(this.jwk),r.crypto.subtle.importKey("jwk",this.jwk,n,!0,["decrypt"]).then((e=>(this.key=e,this.uuid=t,this)))})).catch(l("import")),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await(0,s.exportUnvalidatedKey)(this.uuid,this.key),this.jwk},this.encryptWithKey=async e=>{if(!this.jwk)throw new Error("Missing JWK");return e.encrypt(r.json2ab(this.jwk))},this.decryptWithKey=async(e,t)=>{const n=await e.decrypt(t),r=(0,i.Jx)(n,i.s_).unwrap(),o=(0,i.Jx)(r,s.JwkRsaPriKey,{mode:"unsafe_report_only",file:c,func:a.L`decryptWithKey`}).unwrap();return this.import(o)},this.uuid=e,this.key=t,this.jwk=n}}},40236:function(e,t,n){n.d(t,{HZ:function(){return u},RN:function(){return a},Wx:function(){return o}});var r=n(98798),i=n(14502);const s=(0,n(38002).P)("model/rsa_public_key"),o=async e=>Promise.resolve().then((async()=>"jwk"in e?e:a(e))),a=async e=>new u(e.kid,void 0,e).import();class u{constructor(e,t,n){this.encrypt=async e=>Promise.resolve().then((async()=>{let t,n;if(e.length>256)throw new Error("Plaintext is too large.");if(!this.jwk)throw new Error("Missing JWK encryption key.");if(!this.key)throw new Error("Missing encryption key.");if(this.jwk.alg===u.JWK_ALG_RSA_OAEP)n=u.JWK_ALG_RSA_OAEP,t=u.WC_ALG_RSA_OAEP;else{if(this.jwk.alg!==u.JWK_ALG_RSA_OAEP_256)throw new Error("Unsupported encryption alg");n=u.JWK_ALG_RSA_OAEP_256,t=u.WC_ALG_RSA_OAEP_256}return r.crypto.subtle.encrypt(t,this.key,e).then((e=>{const t=new Uint8Array(e),i=r.bytesToBase64url(t);return{kid:this.uuid,enc:n,cty:u.CONTENT_TYPE,data:i}}))})).catch(s("encrypt")),this.import=async e=>{if(e&&(this.jwk=e),!this.jwk)throw new Error("Missing JWK");const t=this.jwk.kid;let n;if(this.jwk.alg===u.JWK_ALG_RSA_OAEP_256)n=u.WC_ALG_RSA_OAEP_256;else{if(this.jwk.alg!==u.JWK_ALG_RSA_OAEP)throw new Error("Unexpected algorithm");n=u.WC_ALG_RSA_OAEP}return this.jwk=(0,i.correctJwkRsaPubKeyIfNeeded)(this.jwk),this.key=await r.crypto.subtle.importKey("jwk",this.jwk,n,!0,["encrypt"]),this.uuid=t,this},this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await(0,i.exportUnvalidatedKey)(this.uuid,this.key),this.jwk},this.uuid=e,this.key=t,this.jwk=n}}u.CONTENT_TYPE="b5+jwk+json",u.JWK_ALG_RSA_OAEP_256="RSA-OAEP-256",u.WC_ALG_RSA_OAEP_256={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},u.JWK_ALG_RSA_OAEP="RSA-OAEP",u.WC_ALG_RSA_OAEP={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},u.DEFAULT_ALG=u.WC_ALG_RSA_OAEP},46747:function(e,t,n){n.d(t,{E:function(){return A}});var r=n(86866),i=n(62323),s=n(39722),o=n(98798),a=n(61670),u=n(14502),c=n(38002),l=n(16586),d=n(35914),y=n(23428),p=n(35067),m=n(59736),f=n(57275),g=n(27257);const h=d.L`web-api/model/signing_key_pair.ts`,v=(0,c.P)(h.str),C=(0,y.$y)(h.str);class A{constructor(e){this.generate=async e=>Promise.resolve().then((async()=>{const t=o.crypto.supports.nativeEcdsa?this._generateNative:this._generatePolyfill,n=async()=>t(e).then(R),s=(0,r.Z)(4,(()=>n)),a=n();return(0,i.Z)(s,(async(e,t)=>e.catch((async()=>t()))),a).catch((e=>{throw new Error(`Failed to generate valid signing keys after 5 attempts. <${(0,l.getErrorMessage)(e)}>`)}))})),this._generateNative=async e=>{const t=f.r.DEFAULT_KEY_ALG;this.uuid=e||o.generateUUID();const n=await o.crypto.subtle.generateKey(t,!0,["sign","verify"]);this.pubKey=new f.r(this.uuid,n.publicKey),this.priKey=new p.C(this.uuid,n.privateKey);const r=this.pubKey.exportKey(),i=this.priKey.exportKey();return await Promise.all([i,r]),this},this._generatePolyfill=async e=>{const t=f.r.DEFAULT_SIGN_ALG.jwkAlgorithmIdentifier;if("ES256"!==t)throw new Error("Unsupported ECDSA polyfill: "+t);e=e||o.generateUUID(),this.uuid=e;const n=s.ecc.ecdsa.generateKeys(256,1),r=new g.b(e,n.pub),i=new m.g(e,r,n.sec);this.pubKey=r,this.priKey=i;const a=this.pubKey.exportKey(),u=this.priKey.exportKey();return await Promise.all([u,a]),this},this.sign=async e=>Promise.resolve().then((async()=>{if(!this.priKey)throw new Error("Missing signing key");return this.priKey.sign(e)})).catch(v("sign")),this.verify=async(e,t)=>Promise.resolve().then((async()=>{if(!this.pubKey)throw new Error("Missing public key");return this.pubKey.verify(e,t)})).catch(v("verify")),this.export=async()=>Promise.resolve().then((async()=>{if(!this.pubKey)throw new Error("Missing public key");if(!this.priKey)throw new Error("Missing private key");return Promise.all([this.pubKey.exportKey(),this.priKey.exportKey()]).then((()=>this))})).catch(v("export")),this.import=async e=>C("import",(async()=>{if(e.pubKey.kid!==e.priKey.kid)throw new Error("invalid signing keypair");if(this.uuid=e.pubKey.kid,!this.pubKey||!this.priKey){const e=P(this.uuid);this.pubKey=e.pubKey,this.priKey=e.priKey}return await Promise.all([this.pubKey.import(e.pubKey),this.priKey.import(e.priKey)]),this})),this.encryptWithKey=async e=>{if(!this.priKey)throw new Error("Missing private key");if(!this.pubKey||!this.pubKey.jwk)throw new Error("Missing public key");const t=await this.priKey.encryptWithKey(e);return{pubKey:this.pubKey.jwk,encPriKey:t}},this.decryptWithKey=async(e,t)=>C("decryptWithKey",(async()=>{const{pubKey:n,encPriKey:r}=w(t);this.uuid=n.kid;const i=await T(e,r);if(i.kid!==n.kid)throw new Error("Public and private key IDs do not match.");return this.import({pubKey:n,priKey:i})})),this.uuid=e||""}plaintextJSON(){if(!this.pubKey)throw new Error("Missing public key");if(!this.priKey)throw new Error("Missing private key");return{pubKey:this.pubKey.jwk,priKey:this.priKey.jwk}}}const w=e=>{"string"==typeof e.pubKey&&(0,a.AK)([d.L`Unexpected JSON string: json.pubKey`],h,d.L`parseStringsIfNecessary`),"string"==typeof e.encPriKey&&(0,a.AK)([d.L`Unexpected JSON string: json.encPriKey`],h,d.L`parseStringsIfNecessary`);const t={mode:"unsafe_report_only",file:h,func:d.L`parseStringsIfNecessary`};return{pubKey:(0,a.Jx)(S(e.pubKey),u.JwkEcPubKey,t).unwrap(),encPriKey:(0,a.Jx)(S(e.encPriKey),u.JweB,t).unwrap()}},S=e=>"string"==typeof e?JSON.parse(e):e,T=async(e,t)=>{const n=(0,a.Jx)(await e.decrypt(t),a.s_).unwrap();return(0,a.Jx)(n,u.JwkEcPriKey,{mode:"unsafe_report_only",file:h,func:d.L`decryptJson`}).unwrap()},P=e=>{if(o.crypto.supports.nativeEcdsa)return{pubKey:new f.r(e),priKey:new p.C(e)};{const t=new g.b(e);return{pubKey:t,priKey:new m.g(e,t)}}},b=new Uint8Array([73,39,118,101,32,103,111,116,32,97,32,103,111,108,100,101,110,32,116,105,99,107,101,116,33]),R=async e=>Promise.resolve().then((async()=>{const t=e.plaintextJSON(),n=(new A).import(t),r=n.then((async e=>e.sign(b)));return Promise.all([n,r]).then((async([e,t])=>e.verify(b,t))).then((e=>{if(!e)throw new Error("Signature failed verification")})).then((()=>e))}))},86580:function(e,t,n){n.d(t,{Bs:function(){return d},Eh:function(){return i.SlackTeam},Fr:function(){return u},PU:function(){return y},ZH:function(){return r},_Q:function(){return a},aA:function(){return i.SlackAppState},dh:function(){return i.SlackChannel},hM:function(){return l},o0:function(){return i.SlackNonce},qq:function(){return i.SlackGroup},z7:function(){return i.SlackApp},zY:function(){return c},zu:function(){return i.SlackUser}});var r,i=n(14521),s=n(6051),o=n(98798);!function(e){e.UsersRead="users:read",e.EmailRead="users:read.email",e.GroupsRead="usergroups:read"}(r||(r={}));const a=()=>{o.combineComparators(((e,t)=>e.hasTeamUser&&!t.hasTeamUser?1:!e.hasTeamUser&&t.hasTeamUser?-1:0),((e,t)=>e.hasPendingInvite&&!t.hasPendingInvite?1:!e.hasPendingInvite&&t.hasPendingInvite?-1:0),o.compare.strings((e=>e.name)),o.compare.strings((e=>e.email)))},u=s.Z.getInitials,c=(e,t)=>!!e?.scope&&e.scope.split(",").some((e=>e===t)),l=e=>e===i.SlackAppState.Active,d=e=>!!e?.enterpriseUid&&!!e.isGranular,y=(e=i.SlackAppState.NotLoaded)=>({state:e,notifChannelUid:"",alertChannelUid:"",scope:"",teamName:"",alertNotifTeamUid:"",enterpriseUid:"",enterpriseName:"",enterpriseUrl:"",enterpriseTeams:[],isGranular:!1})},95154:function(e,t,n){n.d(t,{GI:function(){return l},uE:function(){return c},zv:function(){return u}});var r,i=n(98798),s=n(14502),o=n(32210),a=n(41767);const u="b5+jwk+json",c=e=>{if(e.kid!==a.qm)throw new Error("Data is not encrypted with master key");if(!e.alg||!e.p2c||!e.p2s)throw new Error("Missing derivation info");return{alg:e.alg,enc:e.enc,iterations:e.p2c,salt:e.p2s}};class l{constructor(e=""){this.generate=async(e,t)=>{if(this.uuid)throw new Error("SymmetricKey UUID already exists, will not regenerate.");const{imported:n,jwk:r}=await(0,o.OF)(e,t);return this.key=n,this.jwk=r,this.uuid=r.kid,this.jwk},this.importRawKey=async(e,t)=>{const{imported:n,jwk:r}=await(0,o.hx)({uuid:this.uuid,enc:e,rawKey:t});return this.key=n,this.jwk=r,this.uuid=r.kid,this.jwk},this.encrypt=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");if(this.uuid===a.qm&&!this.derivation)throw new Error("Missing derivation info for MUK");const{iv:t,ciphertext:n,tag:r}=await(0,o.n9)({key:this.key,plaintext:e}),s=i.concatUint8Arrays([n,r]);return{kid:this.uuid,enc:this.jwk.alg,cty:u,iv:i.bytesToBase64url(t),data:i.bytesToBase64url(s)}},this.decrypt=async e=>{if(u!==e.cty)throw new Error("Unexpected content type");if(e.kid!==this.uuid)throw new Error("Key IDs do not match");if(!e.iv)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");const{ciphertext:t,tag:n}=(0,o._w)(i.base64urlToBytes(e.data));return await(0,o.au)({key:this.key,ciphertext:t,tag:n,iv:i.base64urlToBytes(e.iv)})},this.encryptFile=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");const{iv:t,ciphertext:n,tag:r}=await(0,o.n9)({key:this.key,plaintext:e});return{data:i.concatUint8Arrays([n,r]),iv:i.bytesToBase64url(t)}},this.decryptFile=async e=>{const{data:t,iv:n}=e;if(!n)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");const{ciphertext:r,tag:s}=(0,o._w)(t);return await(0,o.au)({key:this.key,ciphertext:r,tag:s,iv:i.base64urlToBytes(n)})},this.decryptWithKeyset=async(e,t)=>(0,a.Ub)(t.enc)?this.decryptWithKey(e.symKey,t):this.decryptWithKey(e.ekeyPair,t),this.decryptWithKey=async(e,t)=>{const n=await e.decrypt(t);return this.jwk=i.decode(n,i.jsonBytes.pipe(s.JwkSymKey)).unwrap(),this.uuid=this.jwk.kid,this.key=await(0,o.Ae)(this.jwk),this},this.encryptWithKey=async e=>{if(!this.jwk)throw new Error("Missing JWK");return e.encrypt(i.json2ab(this.jwk))},this.uuid=e}}r=l,l.newFromJwkSymKey=async e=>{const t=new r(e.kid);return t.key=await(0,o.Ae)(e),t.jwk=e,t}},41767:function(e,t,n){n.d(t,{Ub:function(){return i},fw:function(){return o},kz:function(){return r},pn:function(){return a},qm:function(){return s}});const r="A256GCM",i=e=>e===r,s="mp",o={name:"AES-GCM",length:256},a=e=>{if(e===r)return o;throw new Error("Unexpected enc")}},46559:function(e,t,n){n.d(t,{TF:function(){return c},Xm:function(){return l},tz:function(){return d}});var r=n(98798),i=n(14502),s=n(32210),o=n(95154),a=n(41767);const u="b5+jwk+json",c=e=>i.supports.nativeAesGcm?new o.GI(e):new d(e),l=async(e,t)=>{const n=c(a.qm);return await n.importRawKey(e,t),n};class d extends o.GI{constructor(e){super(e),this.generate=async(e,t)=>{if(this.uuid)throw new Error("SymmetricKeyPf UUID already exists, will not regenerate");const{imported:n,jwk:r}=await(0,s.ff)(e,t);return this.jwk=r,this.uuid=r.kid,this.cipher=n,r},this.importRawKey=async(e,t)=>{const{imported:n,jwk:r}=await(0,s.q8)({uuid:this.uuid,enc:e,rawKey:t});return this.cipher=n,this.jwk=r,this.jwk},this.encrypt=async e=>{if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg.");if(!this.cipher)throw new Error("Missing cipher");if(this.uuid===a.qm&&!this.derivation)throw new Error("Missing derivation info for MUK");const{iv:t,ciphertext:n,tag:i}=await(0,s.rN)({cipher:this.cipher,plaintext:e}),o=r.concatUint8Arrays([n,i]);return{kid:this.uuid,enc:this.jwk.alg,cty:u,iv:r.bytesToBase64url(t),data:r.bytesToBase64url(o)}},this.decrypt=async e=>{if(u!==e.cty)throw new Error("Unexpected content type.");if(e.kid!==this.uuid)throw new Error("Key IDs do not match.");if(!e.iv)throw new Error("Missing initialization vector");if(!this.cipher)throw new Error("Missing cipher");const{ciphertext:t,tag:n}=(0,s._w)(r.base64urlToBytes(e.data));return await(0,s.o1)({cipher:this.cipher,ciphertext:t,tag:n,iv:r.base64urlToBytes(e.iv)})},this.encryptFile=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");if(!this.cipher)throw new Error("Missing cipher");const{iv:t,ciphertext:n,tag:i}=await(0,s.rN)({cipher:this.cipher,plaintext:e});return{data:r.concatUint8Arrays([n,i]),iv:r.bytesToBase64url(t)}},this.decryptFile=async e=>{const{data:t,iv:n}=e;if(!n)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");if(!this.cipher)throw new Error("Missing cipher");const{ciphertext:i,tag:o}=(0,s._w)(t);return await(0,s.o1)({cipher:this.cipher,ciphertext:i,tag:o,iv:r.base64urlToBytes(n)})},this.decryptWithKey=async(e,t)=>{const n=await e.decrypt(t),o=r.jsonBytes.pipe(i.JwkSymKey);return this.jwk=r.decode(n,o).unwrap(),this.uuid=this.jwk.kid,this.cipher=await(0,s.vG)(this.jwk),this}}}},47200:function(e,t,n){n.d(t,{Y:function(){return h},j:function(){return v}});var r=n(69243),i=n(60604),s=n(98798),o=n(61670),a=n(59212),u=n(38002),c=n(35914),l=n(40313),d=n(41767),y=n(46559),p=n(7291);const m=c.L`web-api/model/vault.ts`,f=(0,u.P)(m.str),g=(e,t=!1)=>n=>{if("string"==typeof n)return n;const r=typeof n,i=`Unexpected vault attr type. Expected ${e} to be string, received ${r}.`;return t||"number"!==r&&"boolean"!==r?((0,a.A)()&&console.warn(`${i} Setting ${e} to empty string.`),""):((0,a.A)()&&console.warn(`${i} Converting ${e} to string.`),String(n))},h=r.readonly(r.type({name:(0,o.Xh)(r.string,g("name")),type:(0,o.Xh)(r.string,g("type")),desc:(0,o.Xh)(r.string,g("desc")),uuid:(0,o.Xh)(r.string,g("uuid")),avatar:(0,o.Xh)(r.string,g("avatar",!0)),defaultAcl:(0,o.Xh)(r.union([l.q.codec,r.undefined]),(e=>{(0,a.A)()&&console.warn(`Unexpected vault attr type. Expected defaultAcl to be number, received ${typeof e}. Setting defaultAcl to undefined.`)}))},"VaultAttrs"));class v{constructor(e){this.generateNewKey=async()=>{this.uuid||(this.uuid=s.generateUUID());const e=this.activeKey,t=(0,y.TF)();return await t.generate(d.kz),t.sn=e?(e.sn||1)+1:1,this.activeKey=t,this.keys.unshift(t),await this.encryptAttrs(),this},this.revokeAccess=async e=>Promise.resolve().then((()=>{this.clearCachedAccessInfo(),this.accessList=(0,i.Z)(this.accessList,(t=>t.accessorUuid!==e.uuid)),"user"===e.accessorType?this.previewUsers=(0,i.Z)(this.previewUsers,(t=>t.uuid!==e.uuid)):this.previewGroups=(0,i.Z)(this.previewGroups,(t=>t.uuid!==e.uuid)),e.removeVaultAccess(this)})),this.getAttrs=()=>({uuid:this.uuid,name:this.name,type:this.type,desc:this.desc,avatar:this.avatar,defaultAcl:this.defaultAcl}),this.encryptAttrs=async()=>Promise.resolve().then((async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.uuid||(this.uuid=s.generateUUID()),this.activeKey.encrypt(s.json2ab(this.getAttrs())).then((e=>(this.encAttrs=e,this)))})).catch(f("encryptAttrs")),this.encrypt=async e=>Promise.resolve().then((async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.activeKey.encrypt(e)})).catch(f("encrypt")),this.decrypt=async e=>Promise.resolve().then((async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.activeKey.decrypt(e)})).catch(f("decrypt")),this.decryptAttrs=async e=>{let t=await(this.activeKey?.decrypt(e).then((e=>{const t=(0,o.Jx)(e,o.s_).unwrap();return(0,o.Jx)(t,h,{mode:"unsafe_report_only",file:m,func:c.L`decryptAttrs`}).unwrap()})).catch((()=>{})));return t?.uuid||(t={uuid:this.uuid,name:"Corrupted vault",type:"",desc:"Corrupted vault",avatar:"",defaultAcl:void 0}),this.uuid=t.uuid,this.name=t.name,this.type=t.type,this.desc=t.desc,this.avatar=t.avatar,this.defaultAcl=t.defaultAcl,this},this.uuid=e.uuid?e.uuid:s.generateUUID(),this.name="string"==typeof e.name?e.name:"",this.type=e.type,this.desc="string"==typeof e.desc?e.desc:"",this.defaultAcl=e.defaultAcl,this.avatar=e.avatar||"",this.leaseTimeout=0,this.clientAccess=p.p.All,this.createdAt=new Date,this.contentVersion=1,this.activeItemCount=0,this.keys=[],this.accessList=[],this.itemTemplates=[],this.previewGroups=[],this.previewUsers=[],this._attrMask=0,this.attrVersion=1}hasAttrMask(e){return l.q.equals(e,v.Attr.None)?l.q.equals(this._attrMask,v.Attr.None):l.q.includes(this._attrMask,e)}addAttrMask(e){this._attrMask=l.q.combine([this._attrMask,e])}get isPersonal(){return this.type===v.TypePersonal}get isSystem(){return this.type===v.TypeSystem}get isGeneratedPasswords(){return this.type===v.TypeGeneratedPasswords}get isManaged(){return this.type===v.TypeManagedApplications}hasClientAccess(...e){return!!this.clientAccess&&l.q.includes(this.clientAccess,l.q.combine(e))}getPeopleUuids(){if(!this._userUuidMap){const e={};for(const t of this.accessList)"group"!==t.accessorType&&(e[t.accessorUuid]=!0);this._userUuidMap=e}return this._userUuidMap}getGroupUuids(){if(!this._groupUuidMap){const e={};for(const t of this.accessList)"group"===t.accessorType&&(e[t.accessorUuid]=!0);this._groupUuidMap=e}return this._groupUuidMap}clearCachedAccessInfo(){this._userUuidMap=void 0,this._groupUuidMap=void 0}setCombinedAcl(e){this._combinedAcl=e,this.addAttrMask(v.Attr.CombinedAccess)}getCombinedAcl(){return this._combinedAcl}setAccessList(e){this.accessList=e,this.clearCachedAccessInfo();const t=[];for(const n of e)n.vaultKey&&(n.vaultKey.sn=n.vaultKeySN,t.push(n.vaultKey));if(0===t.length)return void console.warn("No vault keys in access list.");const n=t.sort(((e,t)=>void 0===e.sn?1:void 0===t.sn?-1:t.sn-e.sn));this.activeKey=n[0]}clearAccessList(){this.accessList=[],this.clearCachedAccessInfo()}toString(){return"[object Vault]"}}v.StateActive="A",v.StateDeleted="D",v.TypePersonal="P",v.TypeEveryone="E",v.TypeUserCreated="U",v.TypeProvision="T",v.TypeSystem="S",v.TypeGeneratedPasswords="G",v.TypeReplacement="R",v.TypeManagedApplications="M",v.TypeClientPlaceholder="-",v.DefaultDescMarker="GYkuBJsjEZmMUuiP",v.Attr={None:0,Accessors:1,ArchivedKeys:2,ItemCategories:4,CombinedAccess:8,All:255},function(e){e.compare=s.combineComparators(((t,n)=>t.type===e.TypePersonal?-1:n.type===e.TypePersonal||t.type===e.TypeEveryone?1:n.type===e.TypeEveryone?-1:0),s.compare.strings((e=>e.name)),s.compare.dates((e=>e.createdAt)),s.compare.strings((e=>e.uuid))),e.activeUserHasAcl=(e,t)=>{const n=e.getCombinedAcl();if(void 0===n)throw new TypeError("combinedPermissions not found on vault");return l.q.includes(n,t)}}(v||(v={}))},54868:function(e,t,n){n.r(t),n.d(t,{ALL:function(){return v},ALL_EXPORT:function(){return w},ALL_READ:function(){return C},ALL_WRITE:function(){return A},ArchiveItem:function(){return d},CreateItem:function(){return l},DEFAULT_VAULT_CREATION_ACL:function(){return I},DeleteItem:function(){return y},Export:function(){return g},Import:function(){return f},MANAGED_VAULT_ACL:function(){return R},Manage:function(){return o},NoAccess:function(){return i},Print:function(){return h},RWE:function(){return b},ReadItem:function(){return u},Recover:function(){return s},RevealPassword:function(){return a},SendItem:function(){return m},TOKEN_READ:function(){return S},TOKEN_WRITE:function(){return T},UMSA_TOKEN_WRITE:function(){return P},UpdateItem:function(){return c},ViewHistory:function(){return p},changeVaultAccessPermissions:function(){return O},includesFrozenACL:function(){return U},isEffectivelyZero:function(){return E},vaultAccessDependencies:function(){return k}});var r=n(40313);const i=0,s=1,o=2,a=16,u=32,c=64,l=128,d=256,y=512,p=1024,m=1048576,f=2097152,g=4194304,h=8388608,v=2147483646,C=r.q.combine([u,a,p]),A=r.q.combine([c,l,f,d,y]),w=r.q.combine([g,h,m]),S=r.q.combine([u,a]),T=r.q.combine([c,l,d]),P=r.q.combine([l,c,y,d]),b=r.q.combine([C,A,w]),R=r.q.combine([u,c,l,y,p]),E=e=>{const t=r.q.combine([b,o,s]);return!r.q.includesAny(e,t)},I=b,U=e=>(e&c)>0||(e&l)>0||(e&y)>0||(e&d)>0,O=(e,t)=>{let n=0,i=0;n=M(e,t)?r.q.enable(e,t):r.q.toggle(e,t);for(const t of k)i=r.q.toggle(e,n),n=D(n,i,t.parent,t.children);return n},k=[{parent:u,children:r.q.disable(b,u)},{parent:l,children:f},{parent:c,children:r.q.combine([d,y])},{parent:a,children:r.q.combine([w,p,c])},{parent:p,children:r.q.combine([g,h,m])}],D=(e,t,n,i)=>{const s=r.q.disable(n,e);return r.q.includesAny(t,s)?r.q.disable(e,i):r.q.includesAny(e,i)?r.q.enable(e,n):e},M=(e,t)=>{const n=r.q.includesAny(e,t),i=r.q.includes(e,t);return n&&!i}},7291:function(e,t,n){n.d(t,{p:function(){return i}});const r=n(40313).q.fromHex,i={Offline:r("000000001"),Web:r("000000002"),Mac:r("000000004"),Windows:r("000000008"),IOS:r("000000010"),Android:r("000000020"),CLI:r("000000040"),Extension:r("000000080"),SCIM:r("000000100"),CSExtension:r("000000200"),Linux:r("000000400"),Connect:r("000000800"),ServiceAccount:r("000001000"),All:r("0FFFFFFFF"),Travel:r("100000000")}},24531:function(e,t,n){n.d(t,{VI:function(){return T},eU:function(){return A},eY:function(){return b},mf:function(){return w},nc:function(){return S},r0:function(){return P}});var r=n(69243),i=n(1166),s=n(62540),o=n(92757),a=n(33485),u=n(99942),c=n(50439),l=n(57371),d=n(61320),y=n.n(d),p=n(98798),m=n(61670),f=n(38002),g=n(35914),h=n(12826);const v=g.L`model/vault_item`,C=(0,f.P)(v.str);var A,w;!function(e){e[e.FANTASTIC=100]="FANTASTIC",e[e.EXCELLENT=85]="EXCELLENT",e[e.VERY_GOOD=73]="VERY_GOOD",e[e.GOOD=60]="GOOD",e[e.FAIR=53]="FAIR",e[e.WEAK=44]="WEAK",e[e.TERRIBLE=26]="TERRIBLE"}(A||(A={})),function(e){e[e.FANTASTIC=75]="FANTASTIC",e[e.EXCELLENT=64]="EXCELLENT",e[e.VERY_GOOD=55]="VERY_GOOD",e[e.GOOD=45]="GOOD",e[e.FAIR=40]="FAIR",e[e.WEAK=33]="WEAK",e[e.TERRIBLE=20]="TERRIBLE"}(w||(w={}));class S{constructor(e,t,n){this.addToPasswordHistory=e=>{this.details.passwordHistory||(this.details.passwordHistory=[]);const t={time:Math.floor(Date.now()/1e3),value:e};this.details.passwordHistory.push(t)},this.getSortedPasswordHistory=()=>this.details&&this.details.passwordHistory?this.details.passwordHistory.slice().sort(((e,t)=>"number"==typeof e.time&&"number"==typeof t.time?t.time-e.time:"number"==typeof e.time?-1:"number"==typeof t.time?1:0)):[],this.parseTemplate=e=>{if(!e)return;if(this.templateUuid=e.uuid,!e.attrs||!e.attrs.contents)return;const t=e.attrs.contents,{localizedStrings:n}=e.attrs;for(const e of t){const t=e.fields,r=[];if(t)for(const e of t){let t="";e.type===S.FieldType.Address&&(t={street:"",city:"",country:"",zip:"",state:""}),e.type!==S.FieldType.MonthYear&&e.type!==S.FieldType.Date||(t=void 0),r.push({k:e.type,n:e.name,v:t,t:e.title||n[e.name]||"",a:e.attributes,inputTraits:e.inputTraits,m:e.menuitems})}this.details.sections.push({name:e.set,title:e.title||n["set."+e.set]||"",fields:r})}},this.decryptWithKey=async(e,t,n)=>{this.encOverview=t,this.encDetails=n;try{const r={mode:"unsafe_report_only",file:g.L`web-api/model/vault_item.ts`,func:g.L`decryptWithKey`,errorClass:g.L`VaultItemValidationError`,context:g.L`Error decoding decrypted bytes for vault/${(0,g.assertLogSafe)(this.vault.uuid)}/item/${(0,g.assertLogSafe)(this.uuid)}: `},s=e.decrypt(t).then((e=>{const t=(0,m.Jx)(e,m.s_).unwrap(),n=(0,m.Jx)(t,T,r);this.overview=n.unwrap()})),o=n&&e.decrypt(n).then((e=>{const t=(0,m.Jx)(e,m.s_).unwrap(),n=(0,m.Jx)(t,P,r);this.details=n.unwrap()}));await Promise.all((0,i.Z)([s,o]))}catch(e){console.error("Item is corrupt:",this.vault.uuid,this.uuid,e),this.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1}}return null!==this.details&&"object"==typeof this.details&&null!==this.overview&&"object"==typeof this.overview||(this.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1},this.details={sections:[]},console.error("Item is corrupt:",this.vault.uuid,this.uuid)),Array.isArray(this.details.sections)||(this.details.sections=[]),this},this.decrypt=async(e,t)=>{if(!this.vault.activeKey)throw new Error("Missing vault's active key");return this.decryptWithKey(this.vault.activeKey,e,t)},this.encryptWithKey=async e=>Promise.resolve().then((async()=>{if(!this.details)throw new Error("Missing item details");return Promise.all([e.encrypt(m.s_.pipe(T).encode(this.overview)),e.encrypt(m.s_.pipe(P).encode(this.details))])})).catch(C("encryptWithKey")),this.encrypt=async()=>{const e=this.vault.activeKey;if(!e)throw new Error("Missing vault's active key");const[t,n]=await this.encryptWithKey(e);return this.encryptedBy=e.uuid,this.encOverview=t,this.encDetails=n,this},this.clone=()=>{const e=(0,s.Z)(this),t=new S(this.vault);return t.overview=e.overview,t.details=e.details,t.faveIndex=e.faveIndex,t.state=e.state,t.templateUuid=e.templateUuid,t.createdAt=e.createdAt,t.updatedAt=e.updatedAt,t},this.exportToJson=()=>{const e={overview:this.overview,details:this.details,createdAt:this.createdAt,updatedAt:this.updatedAt,faveIndex:this.faveIndex||0,trashed:this.state,templateUuid:this.templateUuid,uuid:this.uuid};return m.AV.pipe(b).encode(e)},this.vault=e,this.uuid=n||p.generateUUID(),this.itemVersion=0,this.createdAt=new Date,this.updatedAt=this.createdAt,this.state=S.ItemState.Active,this.overview={title:"",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1,URLs:[]},this.details={sections:[],fields:[]},this.isNewItem=!1,this.isRestoredItem=!1,this.parseTemplate(t)}get title(){return this.overview.title||""}set title(e){this.overview.title=e}get subtitle(){return this.templateUuid===h._.SecureNoteUuid&&this.notes?this.notes.slice(0,80).split("\n")[0]||"":"string"!=typeof this.overview.ainfo?"":this.overview.ainfo||""}get notes(){return this.details&&this.details.notesPlain||""}set notes(e){this.details.notesPlain=e,this.templateUuid===h._.SecureNoteUuid&&(this.overview.ainfo=e.slice(0,80).split("\n")[0]||"")}get tags(){return this.overview.tags||[]}set tags(e){this.overview.tags=e.filter((e=>e.length>0))||[]}addTag(e){const t=this.tags||[];0===e.length||t.includes(e)||(this.tags=[...t,e])}removeTag(e){const t=this.tags||[];this.tags=t.filter((t=>t!==e))}get webFormFields(){return this.details&&this.details.fields||[]}set webFormFields(e){this.details.fields=e}get username(){if(this.details&&this.details.fields)return(0,o.Z)(this.details.fields,(e=>"username"===e.designation))}set username(e){e&&(this.details&&this.details.fields?this.details.fields.push(e):this.details.fields=[e])}get url(){return this.overview&&this.overview.url||""}set url(e){this.overview.url=e;const t={l:"",u:e};this.overview.URLs?this.overview.URLs=[...this.overview.URLs,t]:this.overview.URLs=[t]}setUsername(e){this.username?this.username.value=e:this.username={name:"username",value:e,type:"T",designation:"username"},this.overview.ainfo=e}getPassword(){if(this.details){if(this.templateUuid===h._.LoginUuid){const e=(0,o.Z)(this.details.fields,(e=>"password"===e.designation));return e?e.value:""}return this.templateUuid===h._.PasswordUuid?this.details.password:void 0}}setPassword(e,t=!1,n=0){if(!this.details)return;if(this.templateUuid!==h._.LoginUuid&&this.templateUuid!==h._.PasswordUuid)return;const r=this.getPassword();r&&r!==e&&this.addToPasswordHistory(r),this.templateUuid===h._.LoginUuid?this.details.fields=I((e=>"password"===e.designation),{name:"password",value:e,type:"P",designation:"password"},this.details.fields):this.templateUuid===h._.PasswordUuid&&(this.details.password=e),this.overview.pbe=t?(0,a.Z)(n,6):0,this.overview.pgrng=t;const i=t?S.getPasswordStrengthFromEntropy(n):p.calculatePasswordStrength(e,this.username?this.username.value:"");this.overview.ps=(0,a.Z)(i,6)}get passwordUpdatedAt(){const e=this.getSortedPasswordHistory()[0];return e?e.time:"string"==typeof this.getPassword()&&this.createdAt?Math.floor(this.createdAt.getTime()/1e3):0}toString(){return"[object VaultItem]"}}!function(e){e.SectionFieldAdditionalAttributes=r.partial({guarded:r.string,clipboardFilter:r.string,multiline:r.string,generate:r.string,placeholder:r.string,provider:r.type({type:r.literal("fastmail"),data:r.type({aliasId:r.string,accountId:r.string})},"EmailProvider"),sshKeyAttributes:r.type({fingerprint:r.string,keyType:r.intersection([r.type({t:r.string},"required"),r.partial({c:r.number},"partial")]),privateKey:r.string,publicKey:r.string})},"SectionFieldAdditionalAttributes"),e.SectionFieldInputTraits=r.partial({keyboard:r.string,autocorrection:r.string,autocapitalization:r.string},"SectionFieldInputTraits");const t=new r.Type("GeneratedString",(e=>r.string.is(e)&&e.length>0),((e,t)=>{const n=r.string.validate(e??"",t);return"Left"===n._tag?n:r.success(n.right||(0,p.generateUUID)())}),r.string.encode);let n;e.SectionField=r.intersection([r.type({k:(0,m.Wc)(r.string,"string"),n:t,v:r.unknown,t:(0,m.Wc)(r.string,"")},"required"),r.partial({a:e.SectionFieldAdditionalAttributes,inputTraits:(0,m.Hj)(e.SectionFieldInputTraits),m:r.readonlyArray(r.string)},"partial")],"SectionField"),e.Section=r.type({name:(0,m.Wc)(r.string,""),title:(0,m.Wc)(r.string,""),fields:(0,m.Hj)(r.array(e.SectionField))},"Section"),e.WebFormField=r.intersection([r.type({value:(0,m.Wc)(r.string,""),type:(0,m.Wc)(r.string,"T")},"required"),r.partial({designation:r.string,id:r.string,name:r.string},"partial")],"WebFormField"),e.PreviouslyUsedPassword=r.type({time:(0,m.Hj)(r.number),value:(0,m.Xh)(r.string,(()=>""))},"PreviouslyUsedPassword"),e.DocumentAttributes=r.intersection([r.type({fileName:r.string,documentId:(0,m.Wc)(r.string,""),unencryptedSize:r.number,encryptedSize:r.number,integrityHash:r.string,encryptionKey:p.crypto.JwkSymKeyOptionalKid,nonce:r.string},"required"),r.partial({signingKey:p.crypto.JwkSymKey},"partial")],"DocumentAttributes"),e.FileAttributes=r.intersection([r.type({fileId:(0,m.Wc)(r.string,""),encryptionKey:p.crypto.JwkSymKey,nonce:r.string},"required"),r.partial({signingKey:p.crypto.JwkSymKey},"partial")],"FileAttributes"),e.UrlField=r.intersection([r.type({l:(0,m.Wc)(r.string,""),u:(0,m.Wc)(r.string,"")},"required"),r.partial({m:(0,m.Wc)(r.string,"default")},"partial")]),e.PasskeyPrfOverview=r.type({numCreds:r.number},"PasskeyPrfOverview"),e.PasskeyOverview=r.type({credentialId:r.string,rpId:(0,m.Hj)(r.string),userHandle:(0,m.Hj)(r.string),prf:(0,m.Hj)(e.PasskeyPrfOverview)},"PasskeyOverview"),e.GeoLocation=r.type({lat:r.number,lon:r.number},"GeoLocation"),e.ItemLocation=r.type({k:r.string,n:r.string,v:r.union([e.GeoLocation,r.undefined,r.null])},"ItemLocation"),function(e){e.Amazon="amazon",e.Apple="apple",e.Discord="discord",e.Facebook="facebook",e.Github="github",e.Google="google",e.Microsoft="microsoft",e.Okta="okta",e.Slack="slack",e.Twitter="twitter"}(n=e.SsoLoginProvider||(e.SsoLoginProvider={})),e.SsoLoginItemReference=r.type({itemUuid:r.string,vaultUuid:r.string,accountUuid:r.string},"SsoLoginItemReference"),e.SsoLoginField=r.intersection([r.type({provider:r.string}),r.partial({item:e.SsoLoginItemReference})],"SsoFieldData"),e.ManagedApplicationField=r.type({applicationUuid:r.string,email:r.string,loginInitiationUrl:r.string}),e.Icons=r.type({detail:(0,m.Hj)(e.FileAttributes)},"Icons"),e.WatchtowerExclusions=r.type({compromised:r.boolean,vulnerable:r.boolean,reused:r.boolean,weak:r.boolean,unsecured:r.boolean,inactiveMfa:r.boolean,expiring:r.boolean},"WatchtowerExclusions"),e.PasskeyPrf=r.type({alg:r.literal("HMAC_SHA256"),credWithUv:r.string},"PasskeyPrf");const s=r.type({type:r.literal("webauthn"),createdAt:r.number,privateKey:r.string,userHandle:r.string,prf:(0,m.Hj)(e.PasskeyPrf)},"WebAuthnPasskey"),a=r.type({type:r.literal("passage"),createdAt:r.number,privateKey:r.string,userHandle:r.string,passageIdentifier:r.string},"PassagePasskey");let l,d;e.UnknownPasskey=r.intersection([r.type({type:r.string,createdAt:r.number},"UnknownPasskey"),r.UnknownRecord]),e.Passkey=r.union([s,a],"Passkey"),e.isKnownPasskey=e=>!!e&&("webauthn"===e.type||"passage"===e.type),function(e){e.String="string",e.Concealed="concealed",e.Date="date",e.Phone="phone",e.Address="address",e.Url="URL",e.Email="email",e.MonthYear="monthYear",e.Gender="gender",e.CreditCardType="cctype",e.Reference="reference",e.Menu="menu",e.Country="country",e.Month="month",e.OneTimePassword="totp",e.File="file",e.SshKey="sshKey",e.SsoLogin="ssoLogin",e.PasskeyType="passkeyType",e.ManagedApplication="managedApplication"}(l=e.FieldType||(e.FieldType={})),e.TOTP_PREFIX="TOTP_",e.isTotpField=t=>t.k===l.Concealed&&(0,u.Z)(t.n,e.TOTP_PREFIX),e.MaxOverviewSize=32768/1.5,e.MaxDetailSize=4194304/1.5,e.FieldName={CreditCard:{CreditCardNumber:"ccnum",Expiry:"expiry"},Identity:{FirstName:"firstname",LastName:"lastname"},Passport:{Expiry:"expiry_date"},DriverLicense:{Expiry:"expiry_date"},Membership:{Expiry:"expiry_date"},MedicalRecord:{Date:"date"}},function(e){e.Active="N",e.Archived="Y",e.Deleted="D"}(d=e.ItemState||(e.ItemState={})),e.getDateValueFromString=e=>{const t=y().utc(e.trim(),"YYYY-MM-DD",!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return(0,p.isValidNumber)(t)?t:void 0},e.getDateStringFromValue=t=>{if("number"!=typeof t)return"";const n="YYYY-MM-DD",r=y().utc(t,"X").format(n);return e.getDateValueFromString(r)===t?r:y()(t,"X").format(n)},e.findFieldWithName=(e,t)=>{if(t.details&&t.details.sections)for(const n of t.details.sections){const t=(0,o.Z)(n.fields,(t=>t.n===e));if(t)return t}},e.getHighlightedUrl=e=>{const t=(e=>{try{return new URL(p.addProtocolToUrlIfNeeded(e)).hostname}catch{return}})(e);if(!t)return[{type:"Plain",content:e}];const n=e.toLowerCase().indexOf(t);if(-1===n)return[{type:"Plain",content:e}];const r=n+t.length;return(0,i.Z)([0!==n&&{type:"Plain",content:e.slice(0,n)},{type:"Highlighted",content:e.slice(n,r)},r!==e.length&&{type:"Plain",content:e.slice(r)}])},e.getAddressValue=e=>{const{v:t}=e;if(R(t))return{street:"string"==typeof t.street?t.street:"",city:"string"==typeof t.city?t.city:"",state:"string"==typeof t.state?t.state:"",zip:"string"==typeof t.zip?t.zip:"",country:"string"==typeof t.country?t.country:""}},e.getManagedApplicationValues=t=>t.k===e.FieldType.ManagedApplication&&"v"in t&&e.ManagedApplicationField.is(t.v)?t.v:void 0,e.getSsoValue=t=>{if(t.k===e.FieldType.SsoLogin&&"v"in t&&"object"==typeof t.v)return t.v},e.getStringValue=e=>"value"in e&&"string"==typeof e.value?e.value:"v"in e&&"string"==typeof e.v?e.v:"",e.getNumberValue=e=>"v"in e&&"number"==typeof e.v&&!Number.isNaN(e.v)?e.v:void 0,e.getDocumentAttributesFromField=t=>{if(t.k===e.FieldType.File&&"v"in t&&"object"==typeof t.v)return t.v??void 0},e.getPasswordStrengthFromEntropy=e=>(0,c.Z)(e,0,w.FANTASTIC)/w.FANTASTIC*100,e.getPasswordStrength=(t,n,r,i)=>"boolean"==typeof r&&r&&"number"==typeof i?e.getPasswordStrengthFromEntropy(i):p.calculatePasswordStrength(t,n),e.getCreditCardSubtitle=e=>e.length>=8?e.slice(0,4)+" **** "+e.slice(-4):"",e.copyAsCorruptedItem=t=>{const n=new e(t.vault,void 0,t.uuid);return n.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1},n.details={sections:[]},n.createdAt=t.createdAt,n.updatedAt=t.updatedAt,n.faveIndex=t.faveIndex,n.state=t.state,n.templateUuid=t.templateUuid,n.itemVersion=t.itemVersion,n},e.importFromJson=(t,n,r)=>{const i=(0,m.Jx)(n,m.AV).unwrap(),s=(0,m.Jx)(i,b,{mode:"unsafe_report_only",file:v,func:g.L`importFromJson`}).unwrap(),o=r?.generateNewUuid||!p.isValidItemUuid(s.uuid)?void 0:s.uuid,a=new e(t,void 0,o);return a.overview=s.overview,a.details=s.details,a.createdAt=s.createdAt?new Date(s.createdAt):new Date,a.updatedAt=s.updatedAt?new Date(s.updatedAt):new Date,a.faveIndex=s.faveIndex,a.state=s.trashed,a.templateUuid=s.templateUuid,a},e.getRichIconUrl=({templateUuid:e,title:t,url:n},r=64)=>{if(h._.SoftwareUuid===e)return`https://c.1password.com/richicons/images/software/${r}/${C(t)}.png`;if(h._.LoginUuid===e){if(!n)return"";/^[\w-]+:\/\//.test(n)||(n="https://"+n);try{const e=new URL(n).hostname;return E(e)?`https://c.1password.com/richicons/images/login/${r}/${e}.png`:""}catch{return""}}return""};const f=[" serial number"," software license"," company license"," family license"," license"," app"," shareware"," lizenz"],C=e=>{let t=e.toLowerCase().replace(/[^\d a-z]/g," ").replace(/ {2,}/g," ").trim();t.startsWith("license for ")&&(t=t.slice(12));for(const e of f)if(t.endsWith(e)){t=t.slice(0,-e.length);break}return t.replace(/ /g,"")}}(S||(S={}));const T=r.intersection([r.type({title:(0,m.Wc)(r.string,""),ainfo:(0,m.Xh)((0,m.Wc)(r.string,""),(e=>{if("number"==typeof e)return e.toString(10);throw new Error("Unexpected ainfo type")}))},"required"),r.partial({url:r.string,ps:(0,m.Hj)(r.number),pbe:r.number,pgrng:r.boolean,passkey:(0,m.Hj)(S.PasskeyOverview),tags:(0,m.Hj)((0,m.hX)(r.string)),locations:(0,m.Hj)((0,m.hX)(S.ItemLocation)),URLs:r.array(S.UrlField),icons:S.Icons,watchtowerExclusions:S.WatchtowerExclusions,b5UserUUID:r.string,b5AccountUUID:r.string,integration:r.string},"partial")],"VaultItemOverview"),P=r.intersection([r.type({sections:(0,m.Wc)(r.array(S.Section),[])},"required"),r.partial({fields:(0,m.Hj)(r.array(S.WebFormField)),backupKeys:r.array(r.string),notesPlain:r.string,password:(0,m.Hj)(r.string),passwordHistory:r.array(S.PreviouslyUsedPassword),passkey:(0,m.Hj)(r.union([S.Passkey,S.UnknownPasskey])),documentAttributes:S.DocumentAttributes,customData:r.record(r.string,r.unknown)},"partial")],"VaultItemDetails"),b=r.type({uuid:r.string,templateUuid:(0,m.Hj)(r.string),faveIndex:(0,m.Hj)(r.number),createdAt:(0,m.Hj)(m.ze),updatedAt:(0,m.Hj)(m.ze),overview:T,details:P,trashed:r.string},"ExternalVaultItem"),R=e=>"object"==typeof e&&null!==e,E=e=>{const t=e.split(".");return t.length>=2&&t.every((e=>e.length>0))},I=(e,t,n)=>{if(void 0===n)return[t];const r=(0,l.Z)(n,e);return r>-1?n.map(((e,n)=>n===r?t:e)):[...n,t]}},12826:function(e,t,n){n.d(t,{_:function(){return i},p:function(){return r}});const r=30;var i;!function(e){e.LoginUuid="001",e.CreditCardUuid="002",e.SecureNoteUuid="003",e.IdentityUuid="004",e.PasswordUuid="005",e.DocumentUuid="006",e.SoftwareUuid="100",e.BankAccountUuid="101",e.DatabaseUuid="102",e.DriverLicenseUuid="103",e.OutdoorLicenseUuid="104",e.MembershipUuid="105",e.PassportUuid="106",e.RewardsUuid="107",e.SocialSecurityNumberUuid="108",e.RouterUuid="109",e.ServerUuid="110",e.EmailUuid="111",e.ApiCredentialUuid="112",e.MedicalRecordUuid="113",e.SshKeyUuid="114",e.CryptoWalletUuid="115",e.SnippetUuid="116",e.InboxKeysUuid="901",e.ManagedApplicationUuid="912",e.sort=t=>{const n={};n[e.LoginUuid]=1,n[e.SecureNoteUuid]=2,n[e.CreditCardUuid]=3,n[e.IdentityUuid]=4,n[e.PasswordUuid]=5,n[e.DocumentUuid]=6;const r=[],i=[];return t.forEach((e=>{n[e.uuid]?r.push(e):i.push(e)})),r.sort(((e,t)=>(n[e.uuid]||10)-(n[t.uuid]||10))),i.sort(((e,t)=>e.singularName.localeCompare(t.singularName))),r.concat(i)},e.StateActive="A",e.StateHidden="H",e.StateDeleted="D"}(i||(i={}))},28967:function(e,t,n){n.d(t,{D:function(){return i}});var r=n(69243);const i=r.readonly(r.intersection([r.type({uuid:r.string,type:r.string,state:r.string,activeItemCount:r.number}),r.partial({userUuid:r.string})]),"VaultReportingVaultOverview")},45823:function(e,t,n){n.d(t,{T:function(){return y},b:function(){return d}});var r=n(20622),i=n(79686),s=n(85943),o=n(61670),a=n(35914),u=n(23428);const c=a.L`parser/admin_watchtower`,l=(0,u.$y)(c.str),d=2,y=async(e,t,n,r)=>{const i=!!e.account?.hasFeature.itemsInWrongAccountPolicy;return(await l("parseAdminWatchtowerReports",(async()=>Promise.all(t.map((async t=>{try{return await p(e,t,n,i,r)}catch(e){if(console.log(e),void 0!==r)for(let e=0;e<d;e++)r();return}})))))).filter((e=>void 0!==e))},p=async(e,t,n,r,i)=>{if(!n.data)throw new Error("Admin Watchtower decryption key does not exist");const s=await m(n.data.ePriKey,t.encData,i),o=await f(e,t.vaultData,i),a=s.cw+s.rp+(s.vp??0)+s.wp+(s.uw??0)+s.i2fa+s.exp+(r&&s.wa||0);return{uuid:t.uuid,vaultUuid:t.vaultUuid,vaultType:t.vaultType,vaultName:t.vaultName,combinedAcl:t.vaultData?.combinedAcl,updatedAt:t.updatedAt,isOutdated:t.isOutdated,reportData:s,totalIssues:a,vaultAttrs:o}},m=async(e,t,n)=>{const r=await(0,s.decrypt)(e,t),a=(0,o.Jx)(r.content,o.s_.pipe(i.WatchtowerDataStructureV2)).unwrap();return n?.(),a},f=async(e,t,n)=>{if(void 0===t)return void n?.();const s=(0,r.Jt)(e,t.encVaultKey.kid);if(!s)throw new Error("No vault access keyset found");const u=i.createSymmetricKey(),l=await u.decryptWithKeyset(s,t.encVaultKey),d=await l.decrypt(t.encVaultAttrs),y=(0,o.Jx)(d,o.s_).unwrap(),p=(0,o.Jx)(y,i.VaultAttrs,{mode:"unsafe_report_only",file:c,func:a.L`parseAndDecryptVaultAttrs`}).unwrap();return n?.(),p}},70794:function(e,t,n){n.d(t,{l:function(){return s},y:function(){return i}});var r=n(93352);const i=r.N,s=r.Z},92706:function(e,t,n){n.r(t),n.d(t,{PARSE_WATCHTOWER_REPORT_STEPS:function(){return me.b},accountToAPI:function(){return I},billing:function(){return r},decryptDocument:function(){return U},decryptFile:function(){return F},encryptDocument:function(){return O},encryptFile:function(){return _},fileId:function(){return J.o8},groupToAPI:function(){return w},packageFromAPI:function(){return V},packageToAPI:function(){return B},packagesFromAPI:function(){return N},parseAccount:function(){return E},parseAdminWatchtowerReports:function(){return me.T},parseAndDecryptVaultAccessList:function(){return g.KY},parseFirewallRules:function(){return M},parseGroup:function(){return A},parseGroups:function(){return C},parsePerson:function(){return T},parseProvisionedGroupKeyset:function(){return Z},parseProvisionedKeys:function(){return j},parseProvisionedVaultKey:function(){return G},parseServiceAccount:function(){return ae},parseVault:function(){return g.vt},parseVaults:function(){return g._P},personToAPI:function(){return b},recoverableKeysForPeopleFromAPI:function(){return H},reportSectionItemUsageFromApi:function(){return J.Dt},serviceAccountToApi:function(){return ce},signupFromAPI:function(){return de},userCookiesFromAPI:function(){return ye},userReportFromAPI:function(){return ne},vaultAccessToAPI:function(){return h.D},vaultItemFromAPI:function(){return J.CL},vaultItemTemplateFromAPI:function(){return pe.F},vaultItemTemplatesFromAPI:function(){return pe.j},vaultItemToApi:function(){return J.$G},vaultItemsFromAPI:function(){return J.iA},vaultReportFromAPI:function(){return re},vaultToAPI:function(){return g.Z9},vaultsReportFromAPI:function(){return ie},vaultsToAPI:function(){return g.tw}});var r={};n.r(r),n.d(r,{parseAvailableTiersFromAPI:function(){return d},parseTiersFromAPI:function(){return y},subscriptionDetailAttrsFromAPI:function(){return a},tierFromAPI:function(){return p}});var i=n(79686),s=n(98798),o=n(23428);const a=e=>{const t=e.cards&&e.cards.length>0?e.cards.slice().sort(u):[];return{balance:e.balance||0,cards:t,pendingCreditAmount:e.pendingCreditAmount||0,plan:e.plan,coupon:e.coupon,nextInvoice:e.nextInvoice,hasInvoices:e.hasInvoices,stripe:e.subscription,purchaseOrder:e.purchaseOrder,stripePurchaseOrder:e.stripePurchaseOrder,customerAddress:e.customerAddress,pendingPaymentMethods:e.pendingPaymentMethods||[],billingStats:e.billingStats}},u=(e,t)=>e.expYear!==t.expYear?t.expYear-e.expYear:e.expMonth!==t.expMonth?t.expMonth-e.expMonth:e.name!==t.name?e.name.localeCompare(t.name):e.stripeCardUid.localeCompare(t.stripeCardUid);var c=n(15150),l=n(86257);const d=(e,t)=>{if(!e||0===e.length)return[];const n=[];for(const r of e){const e=p(r);t.tier&&t.tier.name===e.name&&(t.tier.plans=e.plans,e.sortOrder=-1),n.push(e)}return(0,c.Z)(n,"sortOrder")},y=e=>e.map((e=>p(e))),p=(e,t)=>{const n=e.features.reduce(((e,t)=>({...e,[t]:!0})),i.billing.getBlankTier().hasFeature),r=e.gatedFeatures.reduce(((e,t)=>({...e,[t]:!0})),i.billing.getBlankTier().hasGatedFeature);let s=[];e.plans&&(s=(0,c.Z)(e.plans,"sortOrder"));let o=[];e.tierChangeMappings.length>0&&(o=e.tierChangeMappings);const a={...(0,l.Z)(e,["features"]),...(0,l.Z)(e,["gatedFeatures"]),marketingText:{...e.marketingText,localizedFeatures:e.marketingText.localizedFeatures},hasFeature:n,hasGatedFeature:r,plans:s,tierChangeMappings:o};return 0===a.plans.length&&t&&t.plans&&t.plans.length>0&&t.name===a.name&&(a.plans=t.plans),a};var m=n(70794),f=n(20622),g=n(162),h=n(29734);const v=(0,o.$y)("parser/group"),C=async(e,t)=>v("parseGroups",(async()=>Promise.all(t.map((async t=>A(e,t)))))),A=async(e,t,n,r)=>v("parseGroup",(async()=>{const s={uuid:t.uuid,name:t.name,desc:t.desc,type:t.type,activeKeysetUuid:t.activeKeysetUuid,createdAt:(0,m.y)(t.createdAt),updatedAt:(0,m.y)(t.updatedAt),attrVersion:t.attrVersion,avatar:t.avatar,permissions:t.permissions,userCount:t.userCount,sso:t.sso},o=r||new i.Group(s);r&&o.setOverview(s),t.recoverableKeyset&&(o.recoverableKeyset=t.recoverableKeyset);let a,u=Promise.resolve();return t.pubKey&&(a=new i.RSAPublicKey(t.pubKey.kid,void 0,t.pubKey),u=a.import()),u.then((async()=>(o.clearCachedAccessInfo(),t.memberships&&(o.memberships=t.memberships),a&&(o.pubKey=a),n&&o.addAttrMask(n),t.vaultAccess&&t.vaultAccess.length>0?(0,g.KY)(e,t.vaultAccess).then((e=>{e&&o.setVaultAccessList(e)})).catch((e=>{throw console.error("Failed to parse accessList:",e),e})):Promise.resolve()))).then((async()=>t.recoveryKeyset?(o.recoveryKeyset=t.recoveryKeyset,(0,f.Jt)(e,t.activeKeysetUuid)&&o.type!==i.Group.TypeRecovery?(0,f.SX)(e,[o.recoveryKeyset]).catch((async()=>Promise.resolve())):Promise.resolve()):Promise.resolve())).then((async()=>Promise.resolve(o)))})),w=(e,t)=>{const n={uuid:e.uuid,name:e.name,type:e.type,desc:e.desc,activeKeysetUuid:e.activeKeysetUuid||"",attrVersion:e.attrVersion,recoverableKeyset:e.recoverableKeyset,recoveryKeyset:e.recoveryKeyset,avatar:e.avatar,permissions:e.permissions};if(e.archivedKeysets.length>0&&(n.archivedKeysets=e.archivedKeysets),0!=(t&i.Group.Attr.PubKey)&&e.pubKey&&(n.pubKey=e.pubKey.jwk),0!=(t&i.Group.Attr.Memberships)&&(n.memberships=e.memberships),0!=(t&i.Group.Attr.VaultAccess)){const t=e.getUnsafeVaultAccessList();t&&t.length>0&&(n.vaultAccess=t.map(h.D))}return n},S=(0,o.$y)("parser/person"),T=async(e,t,n=0,r)=>S("parsePerson",(async()=>{const s=P(t),o=r?r.setAttrs(s):new i.Person(s);o.addAttrMask(n);const a=t.personalItemsCount;a&&(o.personalItemsCount=a);const u=t.devices;u&&(o.devices=u);const c=t.proposedEmail;return c&&(o.proposedEmail=c),t.memberships&&t.memberships.length>0&&(o.groupMemberships=t.memberships),(async e=>S("_importPubKey",(async()=>e?new i.RSAPublicKey(e.kid,void 0,e).import():Promise.resolve(void 0))))(t.pubKey).then((async n=>(n&&(o.pubKey=n),(0,g.KY)(e,t.vaultAccess)))).then((e=>(e&&(o.vaultAccessList=e),o)))})),P=e=>{const t=e.csToken??void 0;return{uuid:e.uuid,name:e.name,state:e.state,type:e.type,attrVersion:e.attrVersion,keysetVersion:e.keysetVersion,language:e.language,avatar:e.avatar,combinedPermissions:e.combinedPermissions,newsletterPrefs:e.newsletterPrefs,preferences:e.preferences,externalGUID:e.externalGUID||"",hasMFAEnabled:e.hasMFAEnabled,email:e.email,createdAt:(0,m.y)(e.createdAt),updatedAt:(0,m.y)(e.updatedAt),lastAuthAt:(0,m.y)(e.lastAuthAt),csToken:t}},b=e=>({uuid:e.uuid,email:e.email,name:e.name,attrVersion:e.attrVersion,keysetVersion:e.keysetVersion,state:e.state,type:e.type,avatar:e.avatar,language:e.language,newsletterPrefs:e.newsletterPrefs,preferences:e.preferences,externalGUID:e.externalGUID,hasMFAEnabled:e.hasMFAEnabled,keysets:null,memberships:null,vaultAccess:null,devices:null,personalItemsCount:null}),R=(0,o.$y)("parser/account"),E=async(e,t)=>R("parseAccount",(async()=>{if(!t)return Promise.reject(new Error("Server JSON is empty"));e.account?e.account.setAttrs(t):e.account=new i.Account(t);const n=e.account;if(e.account.createdAt=(0,m.y)(t.createdAt),t.me&&e.setUserUUID(t.me.uuid),t.billing){e.account.trialStartedAt=(0,m.y)(t.billing.trialStartedAt),e.account.trialDays=t.billing.trialDays;const n=t.tier?p(t.tier,e.account.subscription.tier):e.account.subscription.tier,r={billingCompanyName:"",billingAddress:"",billingEmails:""};e.account.subscription={...e.account.subscription,freezesAt:t.billing.freezesAt,guests:t.billing.guests,members:t.billing.members,provider:t.billing.provider,status:t.billing.status,storageUsed:t.storageUsed||0,tier:n,settings:{...r,...t.billing.settings}}}t.meta&&(e.account.meta=t.meta),t.promotions&&(e.account.promotions=t.promotions),t.counts&&(e.account.counts=t.counts);let r,o=Promise.resolve();if(!e.user)return Promise.reject(new Error("Missing user"));if(t.gatedFeatureTrials&&(e.account.gatedFeatureTrials=t.gatedFeatureTrials),t.groups){const r=t.groups;o=o.then((async()=>C(e,r))).then((e=>{n.setGroups(e)}))}if(t.me){const n=t.me;o=o.then((async()=>{const t=i.Person.Attr.PubKey|i.Person.Attr.Groups|i.Person.Attr.VaultAccess;return T(e,n,t,e.user)})).then((async t=>(e.config.inWebView||(e.session.setLanguage(t.language),e.nc.emit(s.notification.LanguageRefreshed)),r=t,Promise.resolve([]))))}return o.then((async()=>e.account?Promise.resolve({account:e.account,activeUser:r}):Promise.reject(new Error("Missing account"))))})),I=e=>{if(!e.uuid)throw new Error("Account missing uuid");if(!e.type)throw new Error("Account missing type");return{uuid:e.uuid,type:e.type,attrVersion:e.attrVersion,avatar:e.avatar,createdAt:(0,m.l)(e.createdAt),domain:e.domain,invite:{inviteEmailDomains:e.inviteEmail,inviteSecret:e.inviteSecret},name:e.name,state:e.state,trialStartedAt:(0,m.l)(e.trialStartedAt),trialDays:e.trialDays,settings:e.settings,billingSettings:e.subscription.settings}},U=async(e,t)=>{const n=e.encryptionKey;if(!n.alg)throw new Error("Missing key algorithm");const r=n.alg,o=i.createSymmetricKey(n.kid),a=new Uint8Array(t);if(await k(a)!==s.base64ToBase64url(e.integrityHash))throw new Error("Integrity hash does not match.");return await o.importRawKey(r,s.base64urlToBytes(n.k)),o.decryptFile({data:a,iv:e.nonce})},O=async(e,t)=>{const n=i.createSymmetricKey(),r=await n.generate(i.JWK_ALG_A256GCM),s=new Uint8Array(e),{data:o,iv:a}=await n.encryptFile(s);if(!a)throw new Error("Missing nonce");return{data:o.buffer,attributes:{documentId:"",encryptedSize:o.byteLength||0,encryptionKey:r,fileName:t||"",integrityHash:await k(o),nonce:a,unencryptedSize:e.byteLength||0}}},k=async e=>{const t=await s.crypto.subtle.digest({name:"SHA-256"},e);return s.bytesToBase64url(new Uint8Array(t))},D=(0,o.$y)("parser/firewall_rules"),M=async e=>D("parseFirewallRules",(async()=>{const t=[],n=[],r=[];if(null===e.rules)return{globalRules:t,groupRules:n};for(const s of e.rules){if(void 0===s)continue;const e={type:s.type,scope:s.scope,value:s.value,action:s.action};if(s.scope&&s.scope.length>1)throw new Error("More firewall scopes than expected. Scope may only be either 'Global' or 'Group'");if(void 0!==s.scope&&s.scope[0]?.type!==i.FirewallRuleScopeType.Global){if(s.scope[0]?.type===i.FirewallRuleScopeType.Group){const t=r[0]?.scope&&r[0]?.scope[0]?.uuid?r[0].scope[0]?.uuid:"";if(0===r.length){r.push(e);continue}if(s.scope[0]?.uuid===t){r.push(e);continue}const i={rules:[...r],groupUuid:t};n.push(i),r.length=0,r.push(e)}}else t.push(e)}if(0!==r.length){const e={rules:[...r],groupUuid:r[0]?.scope&&r[0]?.scope[0]?.uuid?r[0].scope[0]?.uuid:""};n.push(e)}return{globalRules:t,groupRules:n}})),F=async(e,t)=>{const n=e.encryptionKey;if(!n.alg)throw new Error("Missing key algorithm");const r={kid:n.kid,enc:n.alg,cty:i.CONTENT_TYPE,iv:e.nonce,data:s.bytesToBase64url(new Uint8Array(t))},o=i.createSymmetricKey(n.kid);return await o.importRawKey(n.alg,s.base64urlToBytes(n.k)),o.decrypt(r)},_=async e=>{const t=i.createSymmetricKey();await t.generate(i.JWK_ALG_A256GCM);const n=await t.encrypt(new Uint8Array(e)),r=s.base64urlToBytes(n.data);if(!n.iv)throw new Error("Missing iv");if(!t.jwk)throw new Error("No encryption key.");return{data:r.buffer,attributes:{fileId:"",encryptionKey:t.jwk,nonce:n.iv}}},K=(0,o.$y)("parser/package"),N=async(e,t,n,r)=>K("packagesFromAPI",(async()=>n&&0!==n.length?Promise.all(n.map((async n=>V(e,t,n,r)))).catch((()=>[])):[])),V=async(e,t,n,r)=>K("packageFromAPI",(async()=>{const s=await r([n.senderUuid,n.recipientUuid]),o=s.find((e=>e.uuid===n.recipientUuid)),a=s.find((e=>e.uuid===n.senderUuid));if(!o||!a)throw new Error("Missing recipient or sender.");const u=await i.importPubKey(a.pubKey),c=new i.Person({uuid:a.uuid});c.pubKey=u;const l=new i.Package(c,o);if(l.uuid=n.uuid,l.createdAt=(0,m.y)(n.createdAt),l.updatedAt=(0,m.y)(n.updatedAt),l.itemUuid=n.itemUuid,l.itemVersion=n.itemVersion,l.templateUuid=n.templateUuid,l.clientCreatedAt=(0,m.y)(n.clientCreatedAt),l.clientUpdatedAt=(0,m.y)(n.clientUpdatedAt),l.encKey=n.encKey,l.recoverableEncKey=n.recoverableEncKey,l.encOverview=n.encOverview,l.encDetails=n.encDetails,l.signature=n.signature,!e.user)throw new Error("Missing user");const d=o.uuid===e.user.uuid&&e.user.activeKeyset;return d?l.verifyAndDecrypt(t,d):l})),B=e=>{if(!e.item)throw new Error("Missing item");if(!e.encKey)throw new Error("Missing encKey");if(!e.recoverableEncKey)throw new Error("Missing recoverableEncKey");if(!e.encOverview)throw new Error("Missing encOverview");if(!e.signature)throw new Error("Missing signature");if(!e.item.templateUuid)throw new Error("Missing template UUID");const t={uuid:e.uuid,senderUuid:e.sender.uuid,recipientUuid:e.recipient.uuid,sourceVaultUuid:e.item.vault.uuid,itemUuid:e.item.uuid,itemVersion:e.item.itemVersion,templateUuid:e.item.templateUuid,encKey:e.encKey,recoverableEncKey:e.recoverableEncKey,encOverview:e.encOverview,encDetails:e.encDetails,signature:e.signature};return e.createdAt&&(t.createdAt=(0,m.l)(e.createdAt)),e.updatedAt&&(t.updatedAt=(0,m.l)(e.updatedAt)),e.item.createdAt&&(t.clientCreatedAt=(0,m.l)(e.item.createdAt)),e.item.updatedAt&&(t.clientUpdatedAt=(0,m.l)(e.item.updatedAt)),t};var L=n(27206);const x=(0,o.$y)("parser/provisioned_keys"),G=async(e,t)=>x("parseProvisionedVaultKey",(async()=>i.createSymmetricKey().decryptWithKeyset(t,e.encVaultKey).then((t=>(t.sn=e.vaultKeySN,new i.ProvisionedVaultKey(e.vaultUuid,t)))))),Z=async(e,t)=>x("parseProvisionedGroupKeyset",(async()=>i.Keyset.decryptWithKeyset(t,e.keyset).then((t=>new i.ProvisionedGroupKeyset(e.groupUuid,t))))),j=async(e,t)=>x("parseProvisionedKeys",(async()=>{const n=(0,f.Jt)(e,t.keyset.encryptedBy);return n?i.Keyset.decryptWithKeyset(n,t.keyset).then((async e=>{const n=Promise.all((0,L.Z)(t.vaultKeys,(async t=>G(t,e)))),r=Promise.all((0,L.Z)(t.groupKeysets,(async t=>Z(t,e))));return Promise.all([n,r])})).then((([e,t])=>new i.ProvisionedKeys(e,t))):Promise.reject(new Error("Missing keyset for decrypting provisioned user keyset"))})),Y=(0,o.$y)("parser/recoverable_keys"),H=async(e,t)=>{const n=t.keys.map((async t=>(async(e,t)=>{const[n,r,s]=await Promise.all([Promise.all(t.vaultKeys.map((async t=>(async(e,t)=>Y("recoverableVaultKeyFromAPI",(async()=>{const n=(0,f.Jt)(e,t.encryptedBy);return n?i.createSymmetricKey().decryptWithKeyset(n,t.encVaultKey).then((e=>(e.sn=t.vaultKeySN,new i.RecoverableVaultKey(t.vaultUuid,e)))):Promise.reject(new Error("Could not find keyset"))})))(e,t)))),Promise.all(t.groupKeysets.map((async t=>(async(e,t)=>Y("recoverableGroupKeysetFromAPI",(async()=>{const n=(0,f.Jt)(e,t.keyset.encryptedBy);return n?i.Keyset.decryptWithKeyset(n,t.keyset).then((e=>new i.RecoverableGroupKeyset(t.groupUuid,e))):Promise.reject(new Error("Could not find keyset"))})))(e,t)))),Promise.all(t.packageKeys.map((async t=>(async(e,t)=>Y("recoverablePackageKeyFromAPI",(async()=>{const n=(0,f.Jt)(e,t.key.kid);return n?i.createSymmetricKey().decryptWithKeyset(n,t.key).then((e=>new i.RecoverablePackageKey(t.packageUuid,e))):Promise.reject(new Error("Could not find keyset"))})))(e,t))))]);return new i.RecoverableKeys(n,r,s)})(e,t))),r=await Promise.all(n);return new i.RecoverableKeysForPeople(r)};var W=n(52384),$=n(94605),J=n(81258);const q=(0,o.$y)("parser/report"),z=L.Z,X=async(e,t,n)=>q("parseUserOverview",(async()=>t?T(e,t.user,void 0,n).then((e=>({user:e,groupCount:t.groupCount,vaultCount:t.vaultCount,itemCount:t.itemCount}))):Promise.resolve(void 0))),Q=async(e,t)=>q("parseVaultOverview",(async()=>t?(0,g.vt)(e,t.vault).then((e=>({vault:e,userCount:t.userCount,groupCount:t.groupCount,currentUserUuids:t.currentUserUuids}))):Promise.resolve(void 0))),ee=async(e,t)=>q("parseUserItemUsage",(async()=>t?(0,g._P)(e,t.vaults).then((async e=>{const n=(0,W.Z)(e,"uuid"),r=z(t.vaultItemsByVault,(async(e,t)=>{const r=n[t];if(r&&e&&e.length>0)return(0,J.iA)(e,r)}));return s.compact(await Promise.all(r))})).then((e=>{const n=(0,$.Z)(e);return{itemUsages:se(n,t.itemUsages)}})):Promise.resolve(void 0))),te=async(e,t)=>q("parseVaultItemUsage",(async()=>t?(0,g.vt)(e,t.vault).then((async e=>e?(0,J.iA)(t.vaultItems,e):Promise.reject(new Error("Server vault is empty")))).then((e=>({itemUsages:se(e,t.itemUsages),usersByUserUuid:t.usersByUserUuid}))):Promise.resolve(void 0))),ne=async(e,t,n)=>q("userReportFromAPI",(async()=>{if(!t)return Promise.reject(new Error("Server JSON is empty"));const{overview:r,itemUsage:i}=t,[s,o]=await Promise.all([X(e,r,n),ee(e,i)]);return{overview:s,itemUsage:o}})),re=async(e,t)=>q("vaultReportFromAPI",(async()=>{if(!t)return Promise.reject(new Error("Server JSON is empty"));const{overview:n,itemUsage:r}=t,[i,s]=await Promise.all([Q(e,n),te(e,r)]);return{overview:i,itemUsage:s}})),ie=async(e,t)=>q("vaultsReportFromAPI",(async()=>{if(!t)return Promise.reject(new Error("Server JSON is empty"));const n=t.items.map((async t=>{const n=await(0,g.vt)(e,t.vault);return{...t,vault:n}}));return Promise.all(n)})),se=(e,t)=>{const n=(0,W.Z)(e,"uuid");return t.map((e=>{const t=n[e.itemUuid];if(void 0===t)throw new Error("itemUsagesFromApi: vaultItem not found");return{...e,vaultItem:t}}))},oe=(0,o.$y)("parser/serviceaccounts"),ae=async(e,t=0,n)=>oe("parseServiceAccount",(async()=>{const r=ue(e),s=n?new i.ServiceAccountUser({...n,...r}):new i.ServiceAccountUser(r);return s.addAttrMask(t),e.tokens&&e.tokens.length>0&&(s.tokens=[...e.tokens]),s})),ue=e=>({uuid:e.uuid,name:e.name,state:e.state,type:e.type,attrVersion:e.attrVersion,keysetVersion:e.keysetVersion,language:e.language,permissions:e.permissions,avatar:e.avatar,combinedPermissions:e.combinedPermissions,newsletterPrefs:e.newsletterPrefs,preferences:e.preferences,externalGUID:e.externalGUID||"",email:e.email,createdAt:(0,m.y)(e.createdAt),updatedAt:(0,m.y)(e.updatedAt),lastAuthAt:(0,m.y)(e.lastAuthAt),creatorUuid:e.creatorUuid,serviceAccountType:e.serviceAccountType,serviceAccountVaultAccess:e.serviceAccountVaultAccess?le(e.serviceAccountVaultAccess):void 0,billables:e.billables,rotatedAt:(0,m.y)(e.rotatedAt),expiresAt:(0,m.y)(e.expiresAt)}),ce=e=>({uuid:e.uuid,name:e.name,state:e.state,type:e.type,attrVersion:e.attrVersion,keysetVersion:e.keysetVersion,language:e.language,avatar:e.avatar,permissions:e.permissions,combinedPermissions:e.combinedPermissions,newsletterPrefs:e.newsletterPrefs,preferences:e.preferences,externalGUID:e.externalGUID||"",email:e.email,creatorUuid:e.creatorUuid,serviceAccountType:e.serviceAccountType}),le=({totalVaults:e,displayable:t})=>({totalVaults:e,displayable:t.map((e=>new i.VaultAccess(e)))}),de=e=>({availablePlans:e.availablePlans||[],completedAt:(0,m.y)(e.completedAt),createdAt:(0,m.y)(e.createdAt),domain:e.domain,email:e.email,expiresAt:(0,m.y)(e.expiresAt),language:e.language,name:e.name,source:e.source,state:e.state,promoCode:e.promoCode,tierName:e.tierName,defaultBillingFrequency:e.defaultBillingFrequency,trialEndsAt:(0,m.y)(e.trialEndsAt),type:e.type,uuid:e.uuid,stepUuid:e.stepUuid,features:e.features,duplicateAccounts:e.duplicateAccounts,flowServiceUuid:e.flowServiceUuid,setupIntentCode:e.setupIntentCode}),ye=e=>e.map((e=>new i.UserCookie({userUuid:e.userUuid,userEmail:e.userEmail,userName:e.userName,userAvatarURL:e.userAvatarURL,usingMyDomain:!!e.usingMyDomain,accountUuid:e.accountUuid,accountType:e.accountType,accountName:e.accountName,accountDomain:e.accountDomain,accountAvatarURL:e.accountAvatarURL,hasPrioritySupport:!!e.hasPrioritySupport})));var pe=n(54522),me=n(45823)},162:function(e,t,n){n.d(t,{KY:function(){return m},Z9:function(){return h},_P:function(){return y},tw:function(){return g},vt:function(){return f}});var r=n(27206),i=n(46525),s=n(20622),o=n(79686),a=n(23428),u=n(70794),c=n(29734),l=n(54522);const d=(0,a.$y)("parser/vault"),y=async(e,t)=>d("parseVaults",(async()=>t?Promise.all(t.map((async t=>f(e,t)))):[])),p=async(e,t,n)=>d("parseAndDecryptVaultAccessRecord",(async()=>{const r=new o.VaultAccess({...n,vaultUuid:t.uuid});if(!r.encVaultKey)return r;const i=(0,s.Jt)(e,r.encVaultKey.kid);return i?r.decryptVaultKey(i).then((e=>(t.activeKey||(t.activeKey=e),r))).catch((e=>(console.error("parser/vault#parseAndDecryptVaultAccessRecord",e),r))):r})),m=async(e,t)=>d("parseAndDecryptVaultAccessList",(async()=>{if(!t)return Promise.resolve(void 0);if(0===t.length)return Promise.resolve([]);const n=(0,r.Z)(t,(async t=>{return p(e,(n=t.vaultUuid,new o.Vault({uuid:n,name:"",type:o.Vault.TypeClientPlaceholder,desc:""})),t);var n}));return Promise.all(n)})),f=async(e,t,n,r)=>{const i=r||new o.Vault({uuid:t.uuid,name:"",type:t.type,desc:""});if(i.createdAt=(0,u.y)(t.createdAt),i.updatedAt=(0,u.y)(t.updatedAt),i.attrVersion=t.attrVersion,i.contentVersion=t.contentVersion,i.activeItemCount=t.activeItemCount||0,i.clientAccess=t.clientAccess||o.BitSet.empty(),t.previewUsers&&(i.previewUsers=t.previewUsers.slice()),t.previewGroups&&(i.previewGroups=t.previewGroups.slice()),t.itemCategories&&(i.itemTemplates=(0,l.j)(t.itemCategories.slice())),t.combinedAccess&&i.setCombinedAcl(t.combinedAccess.acl),!t.access)throw new Error(`Missing vault access information: ${t.uuid}`);const s=t.access.map((async t=>p(e,i,t))),a=await Promise.all(s);return i.setAccessList(a),await i.decryptAttrs(t.encAttrs),n&&i.addAttrMask(n),i},g=(e,t)=>{const n=t?(0,i.Z)(t,"vaultUuid"):{};return e.map((e=>h(e,n[e.uuid])))},h=(e,t)=>{if(!e.uuid)throw new Error("Vault missing uuid");if(!e.encAttrs)throw new Error("Vault missing EncAttrs");if(!e.type)throw new Error("Vault missing type");return{uuid:e.uuid,type:e.type,attrVersion:e.attrVersion,contentVersion:e.contentVersion,encAttrs:e.encAttrs,access:t&&t.length>0?t.map(c.D):void 0}}},29734:function(e,t,n){n.d(t,{D:function(){return i}});var r=n(79686);const i=e=>{if(!e.acl||r.vaultACL.isEffectivelyZero(e.acl))throw new Error("invalid vault acl");if(!e.encVaultKey)throw new Error("missing vault access key");return{vaultUuid:e.vaultUuid,accessorType:e.accessorType,accessorUuid:e.accessorUuid,acl:e.acl,leaseTimeout:e.leaseTimeout,vaultKeySN:e.vaultKeySN,encryptedBy:e.encVaultKey.kid,encVaultKey:e.encVaultKey}}},81258:function(e,t,n){n.d(t,{$G:function(){return h},CL:function(){return g},Dt:function(){return m},iA:function(){return f},o8:function(){return v}});var r=n(1166),i=n(87347),s=n(52384),o=n(27206),a=n(1453),u=n(79686),c=n(98798),l=n(23428),d=n(70794),y=n(162);const p=(0,l.$y)("parser/vault_item"),m=async(e,t)=>{if(0===t.itemUsages.length)return[];const n=(0,r.Z)((0,i.Z)(t.vaults)),a=(0,s.Z)(await Promise.all((0,o.Z)(n,(async t=>(0,y.vt)(e,t)))),"uuid"),u={};return(await Promise.all(t.itemUsages.map((async e=>{const n=t.vaultItems[e.itemUuid];if(!n)return;const r=a[e.vaultUuid];return r&&!u[e.itemUuid]?g(n,r):void 0})))).forEach((e=>{e&&(u[e.uuid]=e)})),(0,r.Z)(t.itemUsages.map((e=>{const t=u[e.itemUuid];if(void 0!==t)return{...e,vaultItem:t}})))},f=async(e,t)=>p("vaultItemsFromAPI",(async()=>Promise.all(e.map((async e=>g(e,t)))))),g=async(e,t)=>p("vaultItemFromAPI",(async()=>{const n=t instanceof u.Vault?new u.VaultItem(t,void 0,e.uuid):t;return n.templateUuid=e.templateUuid,n.faveIndex=e.faveIndex||0,n.state=e.trashed||"",n.createdAt=(0,d.y)(e.createdAt),n.updatedAt=(0,d.y)(e.updatedAt),n.changerUuid=e.changerUuid||"",n.itemVersion=e.itemVersion,n.encryptedBy=e.encryptedBy,n.decrypt(e.encOverview,e.encDetails)})),h=async e=>{const t=await e.encrypt();if(!t.templateUuid)throw new Error("Missing templateUuid");if(!t.encryptedBy)throw new Error("Missing encryptedBy");if(!t.encOverview)throw new Error("Missing encOverview");const n={uuid:t.uuid,templateUuid:t.templateUuid,packageUuid:t.packageUuid,itemVersion:t.itemVersion,encryptedBy:t.encryptedBy,encOverview:t.encOverview,encDetails:t.encDetails,trashed:t.state};t.updatedAt&&(n.updatedAt=(0,d.l)(t.updatedAt)),t.createdAt&&(n.createdAt=(0,d.l)(t.createdAt)),"number"==typeof t.faveIndex&&t.faveIndex>0&&(n.faveIndex=t.faveIndex);const i=(0,a.Z)(e.details.sections??[],(e=>(0,r.Z)((e.fields??[]).map((e=>u.VaultItem.getDocumentAttributesFromField(e))))));return n.fileReferences=c.compact([t.details.documentAttributes,t.overview?.icons?.detail,...i].map((e=>{if(!e)return;if(!e.signingKey)return void console.error(new Error("Cannot handle file with no signing key"));const n=new u.File(v(e),e.signingKey);return{fileId:n.fileId,signature:n.signReference(t.uuid,t.itemVersion)}}))),n},v=e=>e.documentId||e.fileId},54522:function(e,t,n){n.d(t,{F:function(){return s},j:function(){return i}});var r=n(7327);const i=e=>e.map(s).sort(r.qu.strings((e=>e.uuid))),s=e=>{const t=e.uuid||e.templateUuid||"",n={uuid:t,localizedStrings:{},contents:[],...e.attrs};return{...e,uuid:t,sidebarIcon:e.sourceIcon,attrs:n}}},19669:function(e,t,n){n.r(t),n.d(t,{AppBuild:function(){return o},AppRelease:function(){return a},AppReleases:function(){return u},Device:function(){return r}});var r,i=n(69243),s=n(98798);!function(e){e.Type=i.intersection([i.type({uuid:i.string,clientName:i.string,clientVersion:i.string}),i.partial({name:i.string,model:i.string,osName:i.string,osVersion:i.string,userAgent:i.string,lastAuthIP:i.string,avatar:i.string,locationCity:i.string,locationCountry:i.string,locationCountryCode:i.string,state:i.string,createdAt:i.string,updatedAt:i.string,lastAuthAt:i.string,fromDeviceInit:i.boolean})],"Device"),e.isInactive=e=>{const t=Date.now()-5184e6;return!!e.lastAuthAt&&(0,s.getTime)(e.lastAuthAt)<t},e.compareAuthDates=(e,t)=>(0,s.getTime)(t.lastAuthAt)-(0,s.getTime)(e.lastAuthAt)}(r||(r={}));const o=i.readonly(i.type({version:i.string,url:i.union([i.string,i.undefined]),buildnum:i.number,bbn:i.union([i.string,i.undefined])},"AppBuild")),a=i.readonly(i.type({release:i.union([o,i.undefined]),beta:i.union([o,i.undefined])},"AppRelease")),u=i.readonly(i.type({B:i.union([a,i.undefined]),CLI:i.union([a,i.undefined]),KNOX:i.union([a,i.undefined]),OPA4:i.union([a,i.undefined]),OPI4:i.union([a,i.undefined]),OPM4:i.union([a,i.undefined]),OPM7:i.union([a,i.undefined]),OPM8:i.union([a,i.undefined]),OPW4:i.union([a,i.undefined]),OPW8:i.union([a,i.undefined]),SCIM:i.union([a,i.undefined])},"AppReleases"))},74150:function(e,t,n){n.r(t),n.d(t,{Browser:function(){return r},OperatingSystem:function(){return i},getBrowserInfo:function(){return a},getHighEntropyBrowserInfo:function(){return l},getLimitedBrowserInfo:function(){return y},getWindowsVersionFromClientHint:function(){return d}});var r,i,s=n(92757),o=n(48583);!function(e){e.Brave="Brave",e.Chrome="Chrome",e.Firefox="Firefox",e.Safari="Safari",e.Edge="Microsoft Edge",e.Opera="Opera",e.IE="Internet Explorer",e.AndroidBrowser="Android Browser",e.WebKit="WebKit",e.Other="Browser"}(r||(r={})),function(e){e.macOS="MacOSX",e.iOS="iOS",e.Windows="Windows",e.Android="Android",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other=""}(i||(i={}));const a=async e=>{const t=await l(e);return void 0===t?y(e):t},u=new Map([["Brave",r.Brave],["Google Chrome",r.Chrome],["Microsoft Edge",r.Edge],["Opera",r.Opera],["Chromium",r.Chrome]]),c=new Map([["Android",i.Android],["Chrome OS",i.ChromeOS],["Fuchsia",i.Other],["iOS",i.iOS],["Linux",i.Linux],["macOS",i.macOS],["Windows",i.Windows],["Unknown",i.Other]]),l=async e=>{if(!navigator.userAgentData?.getHighEntropyValues)return;let t;try{t=await navigator.userAgentData.getHighEntropyValues(["fullVersionList","platformVersion"])}catch{return}if(!t.fullVersionList||!t.platform||!t.platformVersion)return;const{fullVersionList:n,platform:s,platformVersion:o}=t,a={name:r.Other,version:"0",osName:i.Other,osVersion:o};for(const[e,t]of u){if("0"!==a.version)break;for(const r of n)if(e===r.brand){a.name=t,a.version=r.version;break}}if(a.name===r.Opera){const t=p(e,/OPR\/([\d.]+)/);if(""===t)return;a.version=t}return"0"!==a.version?(a.osName=c.get(s)??i.Other,a.osName===i.Windows&&(a.osVersion=d(a.osVersion)),a):void 0},d=e=>{const t=e.split(".");if(!t[0])return e;const n=Number.parseInt(t[0],10);if(Number.isNaN(n)||n<0)return e;if(n>0&&n<13)return"10.0";if(n>=13)return"11.0";if(!t[1])return e;switch(Number.parseInt(t[1],10)){case 1:return"7.0";case 2:return"8.0";case 3:return"8.1";default:return e}},y=e=>{e=e.toLowerCase();const t=(0,s.Z)(m,(t=>(0,o.Z)(e,t.term)));let n=t?t.name:r.Other;n===r.Chrome&&"brave"in navigator&&(n=r.Brave);const a=t?p(e,t.versionRegex):"",u=(0,s.Z)(f,(t=>(0,o.Z)(e,t.term)));let c=u?u.name:i.Other,l=u?p(e,u.versionRegex):"";return c===i.macOS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(c=i.iOS,l=""),{name:n,version:a,osName:c,osVersion:l}},p=(e,t)=>{if(!t)return"";const n=t.exec(e)?.[1];return void 0!==n?n.replace(/_/g,"."):""},m=[{term:"msie",name:r.IE,versionRegex:/msie ([\d.]+)/},{term:"trident",name:r.IE,versionRegex:/rv:([\d.]+)/},{term:"edge",name:r.Edge,versionRegex:/edge\/([\d.]+)/},{term:"edg",name:r.Edge,versionRegex:/edg\/([\d.]+)/},{term:"opr",name:r.Opera,versionRegex:/opr\/([\d.]+)/},{term:"opera mobi",name:r.Opera,versionRegex:/version\/([\d.]+)/},{term:"opios",name:r.Opera,versionRegex:/opios\/([\d.]+)/},{term:"firefox",name:r.Firefox,versionRegex:/firefox\/([\d.]+)/},{term:"fxios",name:r.Firefox,versionRegex:/fxios\/([\d.]+)/},{term:"chrome",name:r.Chrome,versionRegex:/chrome\/([\d.]+)/},{term:"crios",name:r.Chrome,versionRegex:/crios\/([\d.]+)/},{term:"android",name:r.AndroidBrowser},{term:"safari",name:r.Safari,versionRegex:/version\/([\d.]+)/},{term:"applewebkit",name:r.WebKit,versionRegex:/applewebkit\/([\d.]+)/}],f=[{term:"iphone",name:i.iOS,versionRegex:/os ([\d._]+)/},{term:"ipad",name:i.iOS,versionRegex:/os ([\d._]+)/},{term:"ipod",name:i.iOS,versionRegex:/os ([\d._]+)/},{term:"mac os x",name:i.macOS,versionRegex:/os x ([\d._]+)/},{term:"android;",name:i.Android,versionRegex:/android; ([\d.]+)/},{term:"android",name:i.Android,versionRegex:/android ([\d.]+)/},{term:"linux",name:i.Linux},{term:"cros",name:i.ChromeOS},{term:"windows",name:i.Windows,versionRegex:/windows nt ([\d.]+)/}]},32991:function(e,t,n){n.d(t,{R:function(){return s},w:function(){return r}});var r,i=n(35914);!function(e){e.ContextError=i.L`ContextError`,e.RequestError=i.L`RequestError`,e.ValidationError=i.L`ValidationError`}(r||(r={}));class s extends Error{get loggableMessage(){return this._message}set loggableMessage(e){this._message=e}get loggableName(){return this._name}set loggableName(e){this._name=e}get message(){return this._message.str}set message(e){this._message=e}get name(){return this._name.str}set name(e){this._name=e}constructor(e){super(),this._message=i.L``,this._name=i.L`Error`,e.message&&(this.message=e.message),e.stackOverrideError instanceof Error&&(this.stack=e.stackOverrideError.stack),this.metaData=e.metaData,this.name=e.errorClass,this.severityLevel=e.severityLevel,this.tags=e.tags,this.userUuid=e.userUuid,this.sampleRate=e.sampleRate}}},34269:function(e,t,n){n.d(t,{Ct:function(){return o},PP:function(){return c},l8:function(){return u}});var r=n(48583),i=n(87347),s=n(9049);class o{constructor(){this.groupsByUuid={},this.clearAll()}clearAll(){this.setGroups([])}setGroups(e){this.groupsByUuid={},this.recoveryGroup=void 0;const t={};for(const n of e)n.type!==s.Z.TypeRecovery?(this.groupsByUuid[n.uuid]=n,(0,r.Z)([s.Z.TypeAdmins,s.Z.TypeOwners,s.Z.TypeTeamMembers,s.Z.TypeSecurity,s.Z.TypeMSPTechnicians],n.type)&&(t[n.type]=n)):this.recoveryGroup=n;this.administratorsGroup=t[s.Z.TypeAdmins],this.ownersGroup=t[s.Z.TypeOwners],this.teamMembersGroup=t[s.Z.TypeTeamMembers],this.securityGroup=t[s.Z.TypeSecurity],this.mspTechniciansGroup=t[s.Z.TypeMSPTechnicians]}getGroup(e){const t=this.groupsByUuid[e];return!t&&this.recoveryGroup&&this.recoveryGroup.uuid===e?this.recoveryGroup:t}getGroups(){return(this.recoveryGroup?[this.recoveryGroup]:[]).concat((0,i.Z)(this.groupsByUuid))}getManagableGroups(){return(0,i.Z)(this.groupsByUuid)}}const a={},u=(e,t)=>{const n={size:0,maxSize:t,entries:{}};a[e]=n;const r=e=>{const t=n.entries[e];void 0!==t&&(n.size-=t.size,delete n.entries[e])};return{get:e=>{const t=n.entries[e];if(void 0!==t)return t.lastUsedAt=Date.now(),t.data},set:(e,i)=>{let s;try{s=JSON.stringify(i).length}catch{return void console.error("Error serializing value for cache size calculation. Cyclical objects and other unserializable types are not supported.")}const o=n.entries[e];void 0!==o&&(n.size-=o.size),n.entries[e]={lastUsedAt:Date.now(),size:s,data:i},n.size+=s,n.size>n.maxSize&&(()=>{const e=Object.entries(n.entries).sort(((e,t)=>e[1].lastUsedAt-t[1].lastUsedAt));for(const[i,s]of e){if(n.size<.7*t)break;r(i)}})()},unset:r,empty:()=>{n.entries={},n.size=0}}},c=async({sourceFn:e,cache:t,keys:n})=>{const r=n.join("~"),i=t.get(r);if(void 0!==i)return i;const s=await e();return t.set(r,s),s}},9658:function(e,t,n){n.d(t,{AV:function(){return C},DR:function(){return R},Er:function(){return w},Hj:function(){return y},ID:function(){return h},KA:function(){return v},N6:function(){return f},Qg:function(){return m},Wc:function(){return d},Xh:function(){return p},h0:function(){return P},hX:function(){return g},nQ:function(){return S},sT:function(){return T},s_:function(){return A},ze:function(){return b}});var r=n(8404),i=n(69243),s=n(62540),o=n(87347),a=n(1931),u=n(93352),c=n(16586),l=n(73262);const d=(e,t)=>new i.Type(`withDefault(${e.name}, ${JSON.stringify(t)})`,e.is,((n,r)=>e.validate(n??(0,s.Z)(t),r)),e.encode),y=e=>{const t=i.union([e,i.undefined]);return new i.Type(`withDefaultUndefined(${e.name})`,t.is,((t,n)=>i.undefined.is(t??void 0)?i.success(void 0):e.validate(t,n)),t.encode)},p=(e,t)=>new i.Type(`withFallback(${e.name})`,e.is,((n,s)=>{const o=e.validate(n,s);try{return(0,r.nM)(o)?i.success(t(n)):o}catch(e){return i.failure(n,s,(0,c.getErrorMessage)(e))}}),e.encode),m=(e,t,n=t.name)=>new i.Type(n,t.is,t.validate,e),f=(e,t)=>{const n=t=>"string"==typeof t&&(0,o.Z)(e).includes(t);return new i.Type(t,n,((e,t)=>n(e)?i.success(e):i.failure(e,t)),i.identity)},g=e=>{const t=e=>null!=e,n=i.readonlyArray(i.union([e,i.null,i.undefined]));return new i.Type(`readonlyArrayOmitNullish(${e.name})`,(e=>n.is(e)&&e.every(t)),((e,r)=>{const s=n.validate(e,r);return"Left"===s._tag?s:i.success(s.right.filter(t))}),i.identity)},h=new i.Type("ignore",i.void.is,(()=>i.success(void 0)),i.void.encode),v=new i.Type("utf8",i.string.is,((e,t)=>{try{return i.success((0,l._u)(e))}catch(n){return i.failure(e,t,(0,c.getErrorMessage)(n))}}),l.J5),C=new i.Type("json",i.unknown.is,((e,t)=>{const n=i.string.validate(e,t);if((0,r.nM)(n))return n;try{const e=JSON.parse(n.right);return i.success(e)}catch(n){return i.failure(e,t,(0,c.getErrorMessage)(n))}}),JSON.stringify),A=v.pipe(C,"jsonBytes"),w=new i.Type("bytesAsBase64Url",(e=>e instanceof Uint8Array),((e,t)=>{const n=i.string.validate(e,t);if((0,r.nM)(n))return n;try{return i.success((0,l.jL)(n.right))}catch(n){return i.failure(e,t,(0,c.getErrorMessage)(n))}}),l.RV),S=w.pipe(A,"jsonAsBase64Url"),T=new i.Type("arrayBuffer",(e=>e instanceof ArrayBuffer),((e,t)=>e instanceof ArrayBuffer?i.success(e):i.failure(e,t)),i.identity),P=new i.Type("RfcNumericDate",(e=>(0,a.Z)(e)),((e,t)=>{const n=i.number.validate(e,t);if((0,r.nM)(n))return n;try{const e=new Date(1e3*n.right);if(Number.isNaN(e.getTime()))throw new TypeError("Invalid Date input");return i.success(e)}catch(n){return i.failure(e,t,(0,c.getErrorMessage)(n))}}),(e=>{const t=e.getTime();if(Number.isNaN(t))throw new TypeError("Invalid Date object");return Math.floor(t/1e3)})),b=new i.Type("IsoStringDate",(e=>(0,a.Z)(e)),((e,t)=>{const n=i.string.validate(e,t);if((0,r.nM)(n))return n;try{const e=(0,u.N)(n.right);if(!e)throw new TypeError("Invalid Date input");if(Number.isNaN(e.getTime()))throw new TypeError("Invalid Date input");return i.success(e)}catch(n){return i.failure(e,t,(0,c.getErrorMessage)(n))}}),(e=>{const t=e.getTime();if(Number.isNaN(t))throw new TypeError("Invalid Date object");return e.toISOString()})),R=new i.Type("OptionalIsoStringDate",(e=>void 0===e||(0,a.Z)(e)),((e,t)=>{if("string"!=typeof e||0===e.indexOf("0001"))return i.success(void 0);try{const t=new Date(e);if(Number.isNaN(t.getTime()))throw new TypeError("Invalid Date input");return i.success(t)}catch(n){return i.failure(e,t,(0,c.getErrorMessage)(n))}}),(e=>{const t=e?.getTime();if(Number.isNaN(t))throw new TypeError("Invalid Date object");return e?.toISOString()}))},61670:function(e,t,n){n.d(t,{ze:function(){return r.ze},DR:function(){return r.DR},h0:function(){return r.h0},_u:function(){return g._u},sT:function(){return r.sT},RD:function(){return g.RD},rq:function(){return g.rq},fW:function(){return g.fW},jL:function(){return g.jL},Er:function(){return r.Er},zP:function(){return g.zP},RV:function(){return g.RV},g4:function(){return g.g4},ci:function(){return g.ci},Jx:function(){return y},N6:function(){return r.N6},nr:function(){return g.nr},ID:function(){return r.ID},AV:function(){return r.AV},FA:function(){return g.FA},nQ:function(){return r.nQ},s_:function(){return r.s_},IU:function(){return g.IU},hX:function(){return r.hX},AK:function(){return f},J5:function(){return g.J5},hW:function(){return p},KA:function(){return r.KA},Wc:function(){return r.Wc},Hj:function(){return r.Hj},Qg:function(){return r.Qg},Xh:function(){return r.Xh}});var r=n(9658),i=n(8404),s=n(1166),o=n(32991),a=n(59212),u=n(35914),c=n(81567),l=n(72504),d=n(46203);const y=(e,t,n)=>{const r=n?.mode??"default",s=(0,c.Uo)((0,i.Vn)(l.SecurePathReporter.reportFailure)(t.decode(e)),m);return"err"!==s.type||(("unsafe_report_only"===r||n?.file||n?.func)&&f(s.value,n?.file||u.L`unknown`,n?.func||u.L`unknown`,n?.errorClass,n?.context),"unsafe_report_only"!==r||(0,a.A)())?s:(0,c.ok)(e)},p=e=>t=>y(t,e).unwrap(),m=e=>new c.iA((0,u.joinLogsafe)(e,u.L`\n`)),f=(e,t,n,r,i)=>{const a=e.map((e=>{const a=(0,u.joinLogsafe)((0,s.Z)([i,e]),u.L`: `);return console.error(`${t.str}#${n.str} failed to decode: ${a.str}`),new o.R({errorClass:r||o.w.ValidationError,message:a})}));(0,d.reportErrors)(a)};var g=n(73262)},73262:function(e,t,n){n.d(t,{FA:function(){return o},IU:function(){return a},J5:function(){return s},RD:function(){return d},RV:function(){return c},_u:function(){return i},ci:function(){return g},fW:function(){return f},g4:function(){return u},jL:function(){return p},nr:function(){return h},rq:function(){return m},zP:function(){return y}});var r=n(39722);const i=(()=>{if("undefined"==typeof TextDecoder)return e=>{if("object"!=typeof e||null===e||!("byteLength"in e))throw new TypeError("Failed to decode bytes: The provided value is not of type '(ArrayBuffer or ArrayBufferView)'.");return r.codec.utf8String.fromBits(r.codec.bytes.toBits(new Uint8Array(e)))};{const e=new TextDecoder;return e.decode.bind(e)}})(),s=(()=>{if("undefined"==typeof TextEncoder)return e=>new Uint8Array(r.codec.bytes.fromBits(r.codec.utf8String.toBits(e)));{const e=new TextEncoder;return e.encode.bind(e)}})(),o=e=>s(JSON.stringify(e)),a=(e,t)=>{if(!Number.isInteger(e)||!Number.isInteger(t)||Number.isNaN(e)||Number.isNaN(t))throw new TypeError("A parameter to numToUint8Array wasn't an integer.");if(e<0)throw new Error("numToUint8Array doesn't allow negative numbers.");if(e>Math.pow(2,8*t)-1)throw new Error("Number requires a byte array greater than specified output length.");const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e%256,e>>>=8;return n},u=r.codec.bytes.toBits.bind(r.codec.bytes),c=e=>{let t="";for(let n,r=e.length,i=0,s=0;s<r;s++)n=s%3,i|=e[s]<<(16>>>n&24),2!==n&&r-s!=1||(t+=String.fromCharCode(l(i>>>18&63),l(i>>>12&63),l(i>>>6&63),l(63&i)),i=0);const n=(3-e.length%3)%3;return 0===n?t:t.slice(0,-n)},l=e=>e<26?e+65:e<52?e+71:e<62?e-4:62===e?45:95,d=e=>new Uint8Array(r.codec.bytes.fromBits(r.codec.base32.toBits(e))),y=e=>r.codec.base32.fromBits(u(e),!0),p=e=>(e=m(e),new Uint8Array(r.codec.bytes.fromBits(r.codec.base64url.toBits(e)))),m=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),f=e=>{let t=e.length;return"="===e[t-1]&&(t-=1,"="===e[t-1]&&(t-=1)),Math.floor(3*t/4)},g=e=>r.codec.hex.fromBits(u(e)),h=e=>{const t=e.length%2==1?"0"+e:e;return new Uint8Array(r.codec.bytes.fromBits(r.codec.hex.toBits(t)))}},5119:function(e,t,n){n.r(t),n.d(t,{clientDescriptor:function(){return i},device:function(){return r},getDevice:function(){return l},getb5xDevice:function(){return d},initializeDevice:function(){return g},isEdge:function(){return h},setDevice:function(){return y},setDeviceUsesCredentialBundle:function(){return p},setIsEdge:function(){return v}});let r,i,s,o,a,u,c=!1;const l=()=>r,d=()=>a,y=(e,t)=>{const n=Number.parseInt(e.clientVersion,10)||0,r=e.clientName+"/"+n;t&&(c=!0),e.fromDeviceInit?(a=e,u=r,f()):(s=e,o=r,m())},p=()=>{c=!0,m()},m=()=>{r=s,i=o},f=()=>{c||(a&&u?(r=a,i=u):m())},g=y;let h=!1;const v=e=>h=e},2320:function(e,t,n){n.d(t,{j:function(){return i},k:function(){return s}});var r=n(70479);const i=(e,t)=>{switch(t){case r.Card.Brand.SepaDebit:case r.Card.Brand.AcssDebit:case r.Card.Brand.UsBankAccount:return`•••• •••• ${e.slice(-4)}`;default:return`${t===r.Card.Brand.Amex?"•••• •••••• •":"•••• •••• •••• "}${e.slice(-4)}`}},s=e=>e.startsWith("pm_")},14502:function(e,t,n){n.r(t),n.d(t,{Jwe:function(){return B},JweB:function(){return V},JweHeader:function(){return L},JwkEcPriKey:function(){return F},JwkEcPriKeyDeprecated:function(){return K},JwkEcPubKey:function(){return M},JwkRsaPriKey:function(){return k},JwkRsaPubKey:function(){return O},JwkSymKey:function(){return I},JwkSymKeyOptionalKid:function(){return U},Jws:function(){return x},JwsB:function(){return N},JwsHeader:function(){return G},JwtHeader:function(){return Z},KeysetCiphertext:function(){return j},KeysetCiphertextV2:function(){return Y},correctJwkEcPriKey:function(){return h},correctJwkEcPubKey:function(){return v},correctJwkNumber:function(){return y},correctJwkRsaPriKeyIfNeeded:function(){return f},correctJwkRsaPubKeyIfNeeded:function(){return m},exportKey:function(){return R},exportUnvalidatedKey:function(){return b},getRandomBytes:function(){return W},getRandomValues:function(){return H},getRsaKeySize:function(){return g},getSalt:function(){return T},init:function(){return ie},isUsingWebkitSubtle:function(){return q},keyOpsToBitMask:function(){return A},setSupport:function(){return oe},sha256:function(){return w},subtle:function(){return $},supports:function(){return se},testsComplete:function(){return te},testsError:function(){return ne},unsafeHashStringSha1UpperHex:function(){return S},waitForInit:function(){return Q},waitForTests:function(){return ee},webkitSubtle:function(){return J}});var r=n(69243),i=n(86257),s=n(41767),o=n(61670),a=n(5119),u=n(35914),c=n(61279),l=n(49825);const d=u.L`web-api/util/crypto.ts`,y=(e,t,n)=>{if(!e)return e;let r=(0,o.jL)(e);if(!r||0===r.length)return e;if(r.length>t)throw new Error("JWK number is longer than expected");if("pad"===n){if(r.length===t)return e;const n=new Uint8Array(t);n.set(r,t-r.length),r=n}else{if(0!==r[0])return e;let t=0;for(;t<r.length&&0===r[t];)t+=1;r=r.subarray(t)}return(0,o.RV)(r)},p=e=>(0,i.Z)(e,"use"),m=e=>{const t=a.isEdge?"pad":"trim",n={...e,e:y(e.e,3,t),n:y(e.n,g(e),t)};return p(n)},f=e=>{const t=a.isEdge?"pad":"trim",n=g(e),r=n/2,i={...e,d:y(e.d,n,t),dp:y(e.dp,r,t),dq:y(e.dq,r,t),e:y(e.e,3,t),n:y(e.n,n,t),p:y(e.p,r,t),q:y(e.q,r,t),qi:y(e.qi,r,t)};return(0,l.swapPrimesIfNeeded)(p(i))},g=e=>{const t=(0,o.fW)(e.n),n=[256,384,512].find((e=>e>=t));if(!n)throw new Error("RSA modulus is larger than 4096-bit");return n},h=e=>p({...e,x:y(e.x,32,"pad"),y:y(e.y,32,"pad"),d:y(e.d,32,"pad")}),v=e=>p({...e,x:y(e.x,32,"pad"),y:y(e.y,32,"pad")}),C={sign:1,verify:2,encrypt:4,decrypt:8,wrapKey:16,unwrapKey:32,deriveKey:64,deriveBits:128},A=e=>e.reduce(((e,t)=>e|C[t]),0),w=async e=>{const t=await $.digest({name:"SHA-256"},e);return new Uint8Array(t)},S=async e=>Promise.resolve().then((async()=>$.digest({name:"SHA-1"},(0,o.J5)(e)).then((e=>(0,o.ci)(new Uint8Array(e)).toUpperCase())))),T=e=>(0,o.RV)(W(e/8)),P=e=>"byteLength"in e&&"number"==typeof e.byteLength,b=async(e,t)=>{const n=await $.exportKey("jwk",t);return P(n)&&(0,o.AK)([u.L`Unexpected ArrayBuffer: data`],d,u.L`exportUnvalidatedKey`),{...P(n)?(0,o.Jx)(n,o.s_).unwrap():n,kid:e}},R=async(e,t,n)=>{const r=await $.exportKey("jwk",t);P(r)&&(0,o.AK)([u.L`Unexpected ArrayBuffer: data`],d,u.L`exportKey`);const i=P(r)?(0,o.Jx)(r,o.s_).unwrap():r;return(0,o.Jx)({...i,kid:e},n).unwrap()},E=r.union([r.tuple([r.literal("encrypt"),r.literal("decrypt")]),r.tuple([r.literal("decrypt"),r.literal("encrypt")])]),I=r.readonly(r.type({kid:r.string,ext:r.boolean,kty:r.literal("oct"),key_ops:E,alg:r.string,k:r.string}),"JwkSymKey"),U=r.readonly(r.type({kid:(0,o.Wc)(r.string,""),ext:r.boolean,kty:r.literal("oct"),key_ops:E,alg:r.string,k:r.string}),"JwkSymKeyOptionalKid"),O=r.readonly(r.intersection([r.type({kid:r.string,ext:r.boolean,key_ops:r.tuple([r.literal("encrypt")]),kty:r.literal("RSA"),alg:r.string,e:r.string,n:r.string},"type"),r.partial({use:r.literal("enc")},"partial")]),"JwkRsaPubKey"),k=r.readonly(r.intersection([r.type({kid:r.string,ext:r.boolean,key_ops:(0,o.Xh)(r.tuple([r.literal("decrypt")]),(()=>["decrypt"])),kty:r.literal("RSA"),alg:r.string,e:r.string,n:r.string,d:r.string,dp:r.string,dq:r.string,p:r.string,q:r.string,qi:r.string},"type"),r.partial({use:r.literal("enc")},"partial")]),"JwkRsaPriKey"),D=r.union([r.literal("P-256"),r.literal("P-384")]),M=r.readonly(r.intersection([r.type({kid:r.string,ext:r.boolean,kty:r.literal("EC"),key_ops:r.tuple([r.literal("verify")]),crv:D,x:r.string,y:r.string},"type"),r.partial({use:r.literal("sig")},"partial")]),"JwkEcPubKey"),F=r.readonly(r.intersection([r.type({kid:r.string,ext:r.boolean,kty:r.literal("EC"),key_ops:r.tuple([r.literal("sign")]),crv:D,x:r.string,y:r.string,d:r.string},"type"),r.partial({use:r.literal("sig")},"partial")]),"JwkEcPriKey"),_=r.union([r.tuple([r.literal("sign"),r.literal("verify")]),r.tuple([r.literal("verify"),r.literal("sign")]),r.tuple([r.literal("sign")])]),K=r.readonly(r.intersection([r.type({kid:r.string,ext:r.boolean,kty:r.literal("EC"),key_ops:_,crv:D,x:r.string,y:r.string,d:r.string},"type"),r.partial({use:r.literal("sig")},"partial")]),"JwkEcPriKeyDeprecated"),N=r.readonly(r.type({kid:r.string,alg:r.string,s:r.string}),"JwsB"),V=r.intersection([r.type({kid:r.string,enc:r.string,cty:r.string,data:r.string},"type"),r.partial({iv:(0,o.Hj)(r.string),alg:r.string,p2c:r.number,p2s:r.string},"partial")],"JweB"),B=r.readonly(r.type({protected:r.string,encrypted_key:r.string,iv:r.string,ciphertext:r.string,tag:r.string}),"Jwe"),L=r.readonly(r.type({typ:r.literal("jose+json"),alg:r.string,enc:r.literal(s.kz),kid:r.string}),"JweHeader"),x=r.readonly(r.type({protected:r.string,payload:r.string,signature:r.string}),"Jws"),G=r.readonly(r.type({typ:r.literal("jose+json"),alg:r.string,kid:r.string}),"JwsHeader"),Z=r.readonly(r.type({typ:r.literal("JWT"),kid:r.union([r.string,r.undefined]),alg:r.literal("ES256")}),"JwtHeader"),j=r.readonly(r.intersection([r.type({uuid:r.string,sn:r.number,encryptedBy:r.string,encSymKey:V,pubKey:O,encPriKey:V},"type"),r.partial({spubKey:M,encSPriKey:V},"partial")]),"KeysetCiphertext"),Y=r.readonly(r.type({uuid:r.string,sn:r.number,spec:r.literal(2),ePubKey:O,sPubKey:M,encKeyData:B}),"KeysetCiphertextV2");let H;const W=e=>H(new Uint8Array(e));let $,J,q=!1;const z=(0,c.GW)(),X=(0,c.GW)(),Q=z.promise,ee=X.promise,te=X.resolve,ne=X.reject,re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:void 0,ie=(e=re?.crypto)=>{try{if(void 0===e)throw new TypeError("Crypto is unavailable");H=e.getRandomValues.bind(e),$=e.subtle,J=e.webkitSubtle,!$&&J&&(console.log("Using crypto.webkitSubtle"),$=J,q=!0),z.resolve()}catch(e){z.reject(e)}};re?.crypto&&ie(re.crypto);let se={jwkImport:!0,rsaOaep256:!0,nativeAesGcm:!0,nativePbes2:!0,nativeEcdsa:!0};const oe=e=>{se={...se,...e}}},93352:function(e,t,n){n.d(t,{N:function(){return r},Z:function(){return i}});const r=e=>"string"!=typeof e||0===e.indexOf("0001")?void 0:new Date(e),i=e=>e?e.toISOString():""},59212:function(e,t,n){n.d(t,{A:function(){return s},y:function(){return i}});let r=!1;const i=e=>{r!==e&&(r=e,console.log("DEBUG mode is",e))},s=()=>r},38002:function(e,t,n){n.d(t,{P:function(){return r}});const r=(0,n(84117).Z)(((e,t,n)=>{throw console.error(`[${e}#${t}]`,n),n}))},16586:function(e,t,n){n.r(t),n.d(t,{ClientError:function(){return d},ClientErrorCode:function(){return a},HTTPStatusCode:function(){return s},ItemStatusCode:function(){return o},LegacyServerError:function(){return l},SecretKeyIdOrFormatMismatchedError:function(){return P},SecretKeyMissingError:function(){return S},ServerError:function(){return c},ServerErrorCode:function(){return i},ServerErrorReason:function(){return r},getError:function(){return y},getErrorMessage:function(){return f},getErrorString:function(){return m},isClientError:function(){return g},isErrorLike:function(){return p},isLegacyServerError:function(){return A},isNewServerError:function(){return v},isNewServerErrorWithStatus:function(){return C},isOldKeyError:function(){return w},isSecretKeyIdOrFormatMismatchedError:function(){return b},isSecretKeyMissingError:function(){return T},isSecretKeyPrefixInvalidError:function(){return R},isServerError:function(){return h}});var r,i,s,o,a,u=n(48583);!function(e){e.deprecated="deprecated",e.cannotHandleRequest="cannot_handle_request",e.firewallRule="firewall_rule",e.provisioningEnabled="provisioning_enabled",e.billingBadCardCVV="bad_cc_cvv",e.billingCardDeclined="cc_declined",e.billingCardProcessingError="cc_processing_error",e.billingBadCardNumber="bad_cc_number",e.billingBadCardExpiry="bad_cc_expiry",e.billingCardExpired="cc_expired",e.billingBadCardZIP="bad_cc_zip",e.billingCardMissing="cc_missing",e.billingRateLimiting="too_many_billing_requests",e.billingBadProvider="billing_provider_incorrect",e.billingInsufficientCredit="insufficient_credit",e.billingGiftCardAcceptedInsufficientCredit="gift_card_accepted_insufficient_credit",e.billingStripeDown="stripe_down",e.billingSubscriptionIncomplete="subscription_incomplete",e.billingFrozen="billing_is_frozen",e.slackUserLimitReached="slack_users_limit_reached",e.slackInvitesZeroSent="slack_invites_zero_sent",e.slackTimeout="slack_timeout",e.userSuspended="user_suspended",e.userDeleted="user_deleted",e.userIsGuest="user_is_guest",e.recoveryAccepted="recovery_accepted",e.transferAccepted="transfer_accepted",e.notEnrolled="not_enrolled",e.provisionSuspended="provision_suspended",e.dnsRecordNotFound="dns_record_not_found",e.maxAttemptExceeded="max_attempt_exceeded",e.accountTierMismatchOnSubscribe="account_tier_mismatch_subscribe",e.tooManyVaultAccessCreditsInUseToChangeAccountType="too_many_vault_access_credits_in_use_to_change_account_type",e.maxVaultAccessCredits="maximum_vault_access_credits",e.pendingProvisioningUsers="pending_provisioning_users",e.incorrectSetupIntentStatus="incorrect_setup_intent_status",e.membershipUpdateRequiresRecovery="membership_update_requires_recovery",e.provisioningNotManager="not_provision_manager",e.invalidSkPrefixFormat="invalid_sk_prefix_format",e.activeManagedAccountsExist="active_managed_accounts_exist",e.alreadyUsed="already_used",e.accountTypeMismatch="account_type_mismatch",e.partnershipAccountTypeMismatch="partnership_account_type_mismatch",e.partnershipAlreadyUsed="partnership_api_activation_code_already_used",e.emailAlreadyInUse="email_already_in_use",e.invitesLimitReached="invites_limit_reached",e.invitesRateLimitReached="invites_rate_limit_reached",e.invitesBatchLimitReached="invites_batch_limit_reached",e.invitesLimitReachedIAP="invites_limit_reached_iap",e.confirmationLimitReached="confirmation_limit_reached",e.accountMaxGuestsExceeded="account_max_guests_exceeded",e.accountMaxMembersExceeded="account_max_members_exceeded",e.passwordAuthNotAllowed="password_auth_not_allowed",e.oidcUserDoesNotMatch="oidc_user_does_not_match",e.oidcGenericDomainNotAllowed="oidc_generic_domain_not_allowed",e.ownersGroupCannotSso="owners_group_sso_not_allowed",e.idpConfigurationNotAllowed="identity_provider_config_permission_not_allowed",e.privateAppWithoutSecret="private_app_without_secret",e.publicAppWithSecret="public_app_with_secret",e.missingOidcClientSecret="missing_oidc_client_secret",e.oidcUserPendingProvision="oidc_user_pending_provision_started",e.accountAlreadyExists="account_already_exists",e.accountCreationForbidden="account_creation_forbidden",e.accountCreationForbiddenInvitePending="account_creation_forbidden_invite_pending",e.accountCreationForbiddenInviteExpired="account_creation_forbidden_invite_expired",e.addressIncomplete="address_incomplete",e.addressIncorrect="address_incorrect",e.avataxAPI="avatax_api",e.taxAdviceInvalidRequest="taxadvice_invalid_request",e.unsupported="unsupported",e.accountPolicy="account_policy",e.mustEnrollInitialTrustedDevice="must_enroll_initial_device",e.deviceNotEnrolled="device_not_enrolled",e.ssoMigrationDeadlinePassed="sso_migration_deadline_passed",e.maximumAttemptsReached="maximum_attempts_reached",e.incorrectValue="incorrect_value",e.expired="expired",e.recentRecoveryAborted="recent_recovery_aborted",e.recentLogin="recent_login",e.noOwnerExists="no_owner_exists",e.domainNotAvailable="domain_not_available"}(r||(r={}));class c extends Error{constructor(e,t){super(),this.code=e,this.reason=t,this.name="ServerError",this.message=this.code+(this.reason?` (${this.reason})`:"")}}!function(e){e[e.badRequest=100]="badRequest",e[e.operationNotPermitted=101]="operationNotPermitted",e[e.authenticationRequired=102]="authenticationRequired",e[e.internalServerError=103]="internalServerError",e[e.incorrectVersionValue=104]="incorrectVersionValue",e[e.unknownImageFormat=105]="unknownImageFormat",e[e.registrationFailed=106]="registrationFailed",e[e.suspendedLoginFailed=107]="suspendedLoginFailed",e[e.oneMustRemain=108]="oneMustRemain",e[e.deletedLoginFailed=109]="deletedLoginFailed",e[e.cannotHandleRequest=110]="cannotHandleRequest",e[e.domainNotAvailable=112]="domainNotAvailable",e[e.recoveryAcceptedLoginFailed=113]="recoveryAcceptedLoginFailed",e[e.resourceAlreadyUsed=115]="resourceAlreadyUsed",e[e.cannotRemoveYourselfFromGroup=116]="cannotRemoveYourselfFromGroup",e[e.resourceNotFound=117]="resourceNotFound",e[e.requestTooLarge=118]="requestTooLarge",e[e.resourceInvalid=119]="resourceInvalid",e[e.blockedEmailDomain=122]="blockedEmailDomain",e[e.deprecatedClient=125]="deprecatedClient",e[e.invalidPromotionCoupon=126]="invalidPromotionCoupon",e[e.incorrectAttrVersion=127]="incorrectAttrVersion",e[e.emailDomainIsRestricted=129]="emailDomainIsRestricted",e[e.cardBadCVV=200]="cardBadCVV",e[e.cardDeclined=201]="cardDeclined",e[e.cardProcessingError=202]="cardProcessingError",e[e.cardBadNum=203]="cardBadNum",e[e.cardBadExpiry=204]="cardBadExpiry",e[e.cardExpired=205]="cardExpired",e[e.cardBadZip=206]="cardBadZip",e[e.cardMissing=207]="cardMissing",e[e.stripeRateLimit=208]="stripeRateLimit",e[e.badProvider=481]="badProvider",e[e.insufficientCredit=482]="insufficientCredit",e[e.addressIncomplete=483]="addressIncomplete",e[e.resourceExpired=410]="resourceExpired",e[e.resourceLocked=423]="resourceLocked",e[e.memberConfirmationLimitReached=484]="memberConfirmationLimitReached",e[e.guestConfirmationLimitReached=485]="guestConfirmationLimitReached",e[e.memberReactivationLimitReached=486]="memberReactivationLimitReached",e[e.guestReactivationLimitReached=487]="guestReactivationLimitReached",e[e.unknownError=900]="unknownError"}(i||(i={})),function(e){e[e.badRequest=400]="badRequest",e[e.unauthorized=401]="unauthorized",e[e.forbidden=403]="forbidden",e[e.notFound=404]="notFound",e[e.conflict=409]="conflict",e[e.locked=423]="locked",e[e.tooManyRequests=429]="tooManyRequests",e[e.registrationFailed=432]="registrationFailed",e[e.userOrDeviceNotAllowed=433]="userOrDeviceNotAllowed",e[e.applicationError=434]="applicationError",e[e.suspendedUserError=435]="suspendedUserError",e[e.deletedUserError=436]="deletedUserError",e[e.resourceInvalid=441]="resourceInvalid",e[e.deprecatedClient=445]="deprecatedClient",e[e.internalServerError=500]="internalServerError"}(s||(s={})),function(e){e[e.ok=0]="ok",e[e.expired=1]="expired",e[e.validationError=100]="validationError",e[e.permissionError=101]="permissionError",e[e.serverError=103]="serverError",e[e.incorrectItemVersion=104]="incorrectItemVersion"}(o||(o={}));class l extends Error{constructor(e,t){super(),this.code=e,this.message=t?`${t} (${e})`:e.toString(),this.name="LegacyServerError"}}!function(e){e[e.incorrectMasterPassword=102]="incorrectMasterPassword",e[e.invalidEmailOrPassword=103]="invalidEmailOrPassword",e[e.mustVerifyEmail=104]="mustVerifyEmail",e[e.serverRequestTimedOut=105]="serverRequestTimedOut",e[e.deviceDeleted=106]="deviceDeleted",e[e.sequenceNumberTooLarge=107]="sequenceNumberTooLarge",e[e.invalidImage=108]="invalidImage",e[e.invalidMFA=110]="invalidMFA",e[e.noRsaOaep256Support=111]="noRsaOaep256Support",e[e.invalidSigningKeyPair=112]="invalidSigningKeyPair",e[e.invalidFileType=113]="invalidFileType",e[e.signatureVerificationFailed=114]="signatureVerificationFailed",e[e.restrictedCountry=115]="restrictedCountry",e[e.fileTooLarge=116]="fileTooLarge",e[e.unexpectedFetchError=117]="unexpectedFetchError",e[e.corruptedFile=118]="corruptedFile",e[e.unsupportedMFA=119]="unsupportedMFA",e[e.emailAlreadyInUseByGuest=120]="emailAlreadyInUseByGuest",e[e.emailAlreadyInUseByMember=121]="emailAlreadyInUseByMember",e[e.missingFileId=122]="missingFileId",e[e.popupFailed=123]="popupFailed",e[e.popupBlocked=124]="popupBlocked",e[e.unknownError=900]="unknownError"}(a||(a={}));class d extends Error{constructor(e,t){super(),this.code=e,this.message=t?`${t} (${e})`:e.toString(),this.name="ClientError"}}const y=(e,t)=>{const n=f(e),r=t?`${t} ${n}`:n;return g(e)?new d(e.code,r):A(e)?new l(e.code,r):v(e)?e:new Error(r)},p=e=>"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message,m=e=>{try{if("object"==typeof e){const t=e?.toString?.();if(t&&"[object Object]"!==t&&"[object Error]"!==t)return t}return(e=>"StringifiedError: "+JSON.stringify(e))(e)}catch(e){return m(e)}},f=e=>p(e)?e.message:"An unexpected error occurred",g=(e,t)=>p(e)&&"ClientError"===e.name&&(!t||t===e.code||Array.isArray(t)&&(0,u.Z)(t,e.code)),h=(e,t,n)=>v(e,t,n)||A(e,t),v=(e,t,n)=>{if(!p(e))return!1;const r=!t||t===e.reason||Array.isArray(t)&&(0,u.Z)(t,e.reason),i=void 0!==n&&n===e.code;return"ServerError"===e.name&&(r||i)},C=(e,t)=>p(e)&&"ServerError"===e.name&&t===e.code,A=(e,t)=>p(e)&&"LegacyServerError"===e.name&&(!t||t===e.code||Array.isArray(t)&&(0,u.Z)(t,e.code)),w=e=>p(e)&&"Unsupported JWK algorithm RSA-OAEP-256"===e.message;class S extends Error{constructor(e){super(),this.message="Secret Key ("+e+") not found",this.name=S.ERROR_NAME}}S.ERROR_NAME="SecretKeyMissingError";const T=e=>p(e)&&e.name===S.ERROR_NAME;class P extends Error{constructor(e,t,n,r){super(),this.message=`User's Secret Key ID (${t}) or format (${r}) doesn't match either response's Secret Key ID (${e}) or format (${n})`,this.name=P.ERROR_NAME}}P.ERROR_NAME="SecretKeyIdOrFormatIsWrong";const b=e=>p(e)&&e.name===P.ERROR_NAME,R=e=>v(e,r.invalidSkPrefixFormat)},98798:function(e,t,n){n.r(t),n.d(t,{ACCOUNT_NAME_MAX_LENGTH:function(){return R.Fq},BILLING_COUNTRIES_SORTED_BY_NAME:function(){return R.uv},COUNTRIES_SORTED_BY_NAME:function(){return R.vc},COUNTRY_ADDRESS_FORMATS:function(){return b.R},COUNTRY_EMOJIS:function(){return b.T},ClientInfo:function(){return O},ClientShortCode:function(){return P},ClientShortCodeCodec:function(){return U},CountryCode:function(){return R.Cv},DEBUG:function(){return R.eM},DEVICE_ENROLLMENT_CODE_LENGTH:function(){return ne},DOMAIN_INVALID_CHARS:function(){return R.jV},DOMAIN_MAX_LENGTH:function(){return R.O7},DOMAIN_MIN_LENGTH:function(){return R.mu},ExceptionType:function(){return o.w},IDENTITY_REDIRECT:function(){return m},IsoStringDate:function(){return a.ze},LoggableError:function(){return o.R},MULTIPLE_FORWARD_SLASH_REGEX:function(){return R.qG},MasterPasswordPolicyMinLength:function(){return F},NEVER:function(){return Q.C4},OpUserAgentConfig:function(){return k},OptionalIsoStringDate:function(){return a.DR},PASS_CHAR_SET:function(){return Z},PROMO_CODE_MAX_LENGTH:function(){return R.Jl},RfcNumericDate:function(){return a.h0},SERVICE_ACCOUNT_NAME_MAX_LENGTH:function(){return R.s7},SERVICE_ACCOUNT_TOKEN_NAME_MAX_LENGTH:function(){return R.Oo},SHORT_DOMAIN_MIN_LENGTH:function(){return R.WX},UNSANITARY_CHARACTERS_REGEX:function(){return R.Fr},URL_MAX_LENGTH:function(){return R.cH},UUID_LENGTH:function(){return R.tS},VAULT_AND_GROUP_DESC_MAX_LENGTH:function(){return R.NA},VAULT_AND_GROUP_NAME_MAX_LENGTH:function(){return R.pI},ab2str:function(){return a._u},addMinimumWait:function(){return R.HY},addProtocolToUrlIfNeeded:function(){return R.gT},arrayBuffer:function(){return a.sT},arrayEquals:function(){return c},asValidAccountName:function(){return R.vo},asValidDomain:function(){return R.lx},base32ToBytes:function(){return a.RD},base64ToBase64url:function(){return a.rq},base64byteLength:function(){return a.fW},base64urlToBytes:function(){return a.jL},batchChain:function(){return R.pB},batchPromiseAll:function(){return R._v},bitsAsClientUuid:function(){return R.up},blobToBase64DataURI:function(){return R.zC},browserInfo:function(){return Me},bytesAsBase64Url:function(){return a.Er},bytesAsClientUuid:function(){return R.tN},bytesToBase32:function(){return a.zP},bytesToBase64url:function(){return a.RV},bytesToBits:function(){return a.g4},bytesToHex:function(){return a.ci},calculatePasswordStrength:function(){return H},canUseTrustedDeviceAuth:function(){return te},chainPromises:function(){return R.El},clean:function(){return R.ru},combineComparators:function(){return Q.zE},commaSeparatedListToArray:function(){return R.kO},compact:function(){return R.oA},compactFilter:function(){return R.Pr},compare:function(){return Q.qu},compareDates:function(){return Q.aN},compareStrings:function(){return Q.A5},composeComparator:function(){return Q.C9},concatUint8Arrays:function(){return R.Hv},config:function(){return Fe},count:function(){return u},crypto:function(){return _e},dateFromGolang:function(){return d.N},dateToGolang:function(){return d.Z},decode:function(){return a.Jx},decryptSnapshots:function(){return Re},deriveHmacSha256:function(){return R.Kk},ep:function(){return R.ep},errors:function(){return Ke},events:function(){return r},exportComplianceExclusions:function(){return R.gq},filterCharacters:function(){return R.vE},flipCoin:function(){return N.Xe},formatCommaSeparatedList:function(){return R.Tg},fromStringEnum:function(){return a.N6},generateDeviceEnrollmentCode:function(){return re},generatePassphrase:function(){return Y},generatePassword:function(){return j},generateRandomID:function(){return N.D9},generateUUID:function(){return se},generateUUIDStyleHash:function(){return R.aw},getAddressConfigForCountryCode:function(){return R.S5},getAllCountryCodes:function(){return R.Hj},getCallbackPromise:function(){return R.GW},getCountryCodeFromDomain:function(){return R.Jm},getCountryNameForCode:function(){return R.WA},getFileExtension:function(){return R.mD},getHostnameFromUrl:function(){return ke},getIdentityStateAndRedirect:function(){return f},getModifierKey:function(){return R._5},getObfuscatedCardNumber:function(){return l.j},getOpUserAgentString:function(){return D},getOrderedComparator:function(){return Q.OJ},getRandomNumberWithByteLength:function(){return N.CZ},getRandomValueFromRange:function(){return N.v_},getSanitizedName:function(){return R.pZ},getServerDomainFromAccountDomain:function(){return R.jz},getTime:function(){return R.hK},getUuidModulo:function(){return he},getValidGroupUuid:function(){return Ae},getValidUserUuid:function(){return ve},getValidVaultUuid:function(){return Ce},hasCommonPasswordsList:function(){return G},hasDetailedVaultReportingFeature:function(){return Pe},hasExtensionInstalled:function(){return p},hexToBytes:function(){return a.nr},hmacSha256Hex:function(){return R.ef},hmacWithSecretAndData:function(){return R.D},ignore:function(){return a.ID},inBetween:function(){return R.kt},isBusinessRelated:function(){return Ee},isDebugMode:function(){return y.A},isItemInWrongAccount:function(){return De},isNonWebSignupSource:function(){return R.yT},isPaymentMethod:function(){return l.k},isValidAccessorUuid:function(){return fe},isValidAccountUuid:function(){return ue},isValidDomain:function(){return R.hS},isValidEmail:function(){return R.vV},isValidGroupUuid:function(){return pe},isValidIPAddressOrCIDR:function(){return T},isValidInvitationUuid:function(){return le},isValidInviteDomain:function(){return R.lX},isValidItemUuid:function(){return de},isValidNumber:function(){return R.qh},isValidPromoCodeFormat:function(){return R.YM},isValidPurchaseOrderTokenFormat:function(){return R.uJ},isValidServerToken:function(){return R.qv},isValidSignupSource:function(){return R.mL},isValidSignupVerificationCode:function(){return R.VY},isValidTemplateUuid:function(){return me},isValidUserUuid:function(){return ce},isValidVaultUuid:function(){return ye},joinPath:function(){return R.Vo},json:function(){return a.AV},json2ab:function(){return a.FA},jsonAsBase64Url:function(){return a.nQ},jsonBytes:function(){return a.s_},logsafe:function(){return Ve},mapObject:function(){return R.Xc},maskString:function(){return ee},moveArrayItem:function(){return R.aC},normalizeAndFilterUniqueUrls:function(){return Oe},normalizeToUrl:function(){return Ue},normalizeUTF8:function(){return R.SS},notification:function(){return i},numToUint8Array:function(){return a.IU},passwordIsInDictionary:function(){return J},prehash:function(){return R.vA},readFile:function(){return R.pJ},readonlyArrayOmitNullish:function(){return a.hX},reportError:function(){return X.reportError},reportErrors:function(){return X.reportErrors},reportInvalid:function(){return a.AK},rsa:function(){return it},secureDecodeReporter:function(){return st},selectRandomElement:function(){return N.GF},sentry:function(){return X},setCommonPasswordsList:function(){return x},setDebugMode:function(){return y.y},setIdentityStateAndRedirect:function(){return g},setPassphraseWordList:function(){return L},shouldReportForPrivateVaults:function(){return we},shouldReportWithSnapshots:function(){return be},str2ab:function(){return a.J5},stringify:function(){return R.Pz},totp:function(){return s},unsafeDecodeAs:function(){return a.hW},usTerritories:function(){return R.X3},utf8:function(){return a.KA},wait:function(){return R.Dc},withDefault:function(){return a.Wc},withDefaultUndefined:function(){return a.Hj},withEncoding:function(){return a.Qg},withFallback:function(){return a.Xh}});var r={};n.r(r),n.d(r,{EventEmitter:function(){return Ne}});var i={};n.r(i),n.d(i,{ClientStateChanged:function(){return Ge},LanguageRefreshed:function(){return He},RecoveryStarted:function(){return rt},ReloadForced:function(){return Xe},ServerChanged:function(){return Ze},ServerChangedFromSelf:function(){return $e},ServerChangedWithData:function(){return Ye},ServerConnected:function(){return je},SessionExpired:function(){return Qe},SessionInitError:function(){return qe},SessionInitialized:function(){return Je},SessionRequestIdChanged:function(){return ze},SignedIn:function(){return et},SignedOut:function(){return tt},SpecialNavChanged:function(){return Le},TimeoutWarning:function(){return nt},TopBarContentChanged:function(){return Be},UniverseReloaded:function(){return xe},UsersChanged:function(){return We}});var s={};n.r(s),n.d(s,{DEFAULT_DIGITS:function(){return ot},DEFAULT_PERIOD:function(){return at},generateSecret:function(){return ut}});var o=n(32991),a=n(61670);const u=(e,t)=>e.reduce(((e,n,r,i)=>t(n,r,i)?e+1:e),0),c=(e,t)=>e.length===t.length&&e.every((e=>t.includes(e)));var l=n(2320),d=n(93352),y=n(59212);const p=()=>{const e=!!document?.body?.dataset?.onepasswordExtensionVersion,t=!!document?.body?.dataset?.b5xBuildNumber;return e||t},m=["/idp/oidc/continue","/idp/saml/continue"],f=e=>{const t=sessionStorage.getItem(e);if(null!==t)return JSON.parse(t)},g=(e,t)=>{sessionStorage.setItem(e,JSON.stringify(t))},h="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v="[a-fA-F\\d]{1,4}",C=`\n(\n(?:${v}:){7}(?:${v}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${v}:){6}(?:${h}|:${v}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${v}:){5}(?::${h}|(:${v}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${v}:){4}(?:(:${v}){0,1}:${h}|(:${v}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${v}:){3}(?:(:${v}){0,2}:${h}|(:${v}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${v}:){2}(?:(:${v}){0,3}:${h}|(:${v}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${v}:){1}(?:(:${v}){0,4}:${h}|(:${v}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::((?::${v}){0,5}:${h}|(?::${v}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),A=`${h}\\/(3[0-2]|[12]?[0-9])`,w=`${C}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`;var S;!function(e){e[e.v4=1]="v4",e[e.v6=2]="v6",e[e.v4cidr=3]="v4cidr",e[e.v6cidr=4]="v6cidr"}(S||(S={}));const T=e=>!!(e=>new RegExp(`^${h}$`).test(e)?S.v4:new RegExp(`^${C}$`).test(e)?S.v6:new RegExp(`^${A}$`).test(e)?S.v4cidr:new RegExp(`^${w}$`).test(e)?S.v6cidr:void 0)(e);var P,b=n(2039),R=n(61279),E=n(69243),I=n(95743);!function(e){e.OnePasswordForAndroid="A",e.OnePasswordForWeb="B",e.OnePasswordCli="C",e.OnePasswordForIos="I",e.OnePasswordForLinux="L",e.OnePasswordForMac="M",e.OnePasswordForTeamsApi="P",e.OnePasswordScimBridge="S",e.OnePasswordExtension="X",e.OnePasswordForWindows="W",e.BackofficeCli="BOC",e.OnePasswordConnect="CON",e.CsExtension="CSX"}(P||(P={}));const U=(0,I.N6)(P,"ClientShortCode"),O=E.readonly(E.intersection([E.type({shortCode:U,buildNum:E.number},"type"),E.partial({channel:E.keyof({beta:!0,nightly:!0,dev:!0}),commitHash:E.string},"partial")]),"ClientInfo"),k=E.readonly(E.intersection([E.type({client:O,deviceUuid:E.string},"type"),E.partial({innerClient:O,browserName:E.string,browserVersion:E.string,osName:E.string,osVersion:E.string,architecture:E.string},"partial")]),"OpUserAgentInit"),D=(e,t)=>[1,e.client.shortCode,M(e.client),e.deviceUuid,e.innerClient?.shortCode||"",M(e.innerClient),e.browserName||t.name||"unknown",e.browserVersion||t.version||"unknown",e.osName||t.osName||"unknown",e.osVersion||t.osVersion||"unknown",e.architecture||""].join("|"),M=e=>e?e.channel&&e.commitHash?[e.buildNum,e.channel,e.commitHash].join("-"):e.channel?[e.buildNum,e.channel].join("-"):e.buildNum.toString(10):"";var F,_=n(53516),K=n(21575),N=n(79795);let V,B;!function(e){e[e.Minimum=10]="Minimum",e[e.Medium=12]="Medium",e[e.Strict=14]="Strict"}(F||(F={}));const L=e=>{V=e},x=e=>{B=e},G=()=>!!B,Z={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",LOWERCASE:"abcdefghijklmnopqrstuvwxyz",DIGITS:"0123456789",SYMBOLS:"#$%&()*+,.;<=>?@[]^{}"},j=(e,t)=>{let n="";for(let r=0;r<t;++r)n+=e[(0,N.v_)(0,e.length-1)];return[n,t*Math.log(e.length)/Math.log(2)]},Y=e=>{if(!V)throw new Error("Word list is not loaded");e=Math.max(1,Math.min(20,Math.ceil(e)));const t=[];for(let n=1;n<=e;n++){const e=V[(0,N.v_)(0,V.length-1)];void 0!==e&&t.push(e)}return[t,e*Math.log(V.length)/Math.log(2)]},H=(e,t)=>{if(!e)return 0;let n=[...e].length;"string"==typeof t&&t.length>0&&e.toLowerCase().includes(t.toLowerCase())&&(n-=[...t].length+1,n=Math.max(0,n));let r=$(n);if(r*=2,B&&B.includes(e.toLowerCase()))return 1;let i=e.toLowerCase();i=i.replace(/0/g,"o"),i=i.replace(/1/g,"l"),i=i.replace(/3/g,"e"),i=i.replace(/4/g,"a"),i=i.replace(/5/g,"s"),i=i.replace(/7/g,"t"),B&&B.includes(i)&&(r=4);const s=[Z.LOWERCASE,Z.UPPERCASE,Z.DIGITS," ",".?!,;:-\"'()","`~@#$%^&*[]{}+=_|\\/<>"];let o=0;for(const t of s)W(e,t)&&(o+=1);return r+=6*(o-1),Math.min(100,Math.round(r))},W=(e,t)=>{if(!e)return!1;const n=new Set(t);return[...e].some((e=>n.has(e)))},$=e=>{let t=0;return e>20&&(t+=e-20,e=20),e>10&&(t+=1.5*(e-10),e=10),t+=[0,4,6,8,10,12,14,16,18,20,21][e]??0,t},J=e=>{const t=e.toLowerCase(),n=q(t);return!!B&&(0,_.Z)(B,(e=>!(e.length<F.Minimum)&&(e===t||n.test(e))))},q=e=>{const t={0:"o",1:"[li]",2:"too?",3:"e",4:"(a|for)",5:"s",7:"t",8:"a(te?)?","@":"at?",$:"s",x:"(c?ks|x)",z:"[sz]"};let n="",r="";for(const i of[...e])t[i]?(n+=z(r)+t[i],r=""):r+=i;return n+=z(r),new RegExp(`^${n}$`)},z=e=>e?(0,K.Z)(e):"";var X=n(46203),Q=n(7327);const ee=(e,t)=>{const n=new Set(t);return[...e].filter((e=>n.has(e))).join("")},te=e=>!!e.account&&(e.account?.hasFeature.singleSignOn||e.account?.hasFeature.unlockWithPasskey),ne=8,re=()=>{const e=Z.UPPERCASE,[t,n]=j(e,ne);return t};var ie=n(39722);const se=()=>(0,N.D9)(16),oe=e=>/^[2-7A-Z]{26}$/.test(e),ae=e=>/^[\da-z]{26}$/.test(e),ue=oe,ce=oe,le=oe,de=ae,ye=ae,pe=ae,me=ae,fe=e=>"group"===e?pe:ce,ge=e=>t=>"string"==typeof t?e(t)?t:"":t&&t.uuid&&e(t.uuid)?t.uuid:"",he=(e,t)=>{const n=e.slice(0,8);try{const e=ie.codec.base32.toBits(n);return ie.bitArray.extract(e,0,ie.bitArray.bitLength(e))%t}catch{return 0}},ve=ge(ce),Ce=ge(ye),Ae=ge(pe),we=e=>e?.hasFeature["b2b-private-vault-reporting-in-business-watchtower"]&&e?.hasFeature.keepAdminWatchtowerPrivateVaultReports||!1;var Se=n(55130),Te=n(76515);const Pe=e=>e?.hasFeature.detailedVaultReporting&&e?.hasFeature["b2b-individual-vault-reporting"]||!1,be=e=>!(!e||!e.detailedVaultReporting)&&e.detailedVaultReporting.isEnabled&&Te.ClientItemSnapshotPayloadVersion===e.detailedVaultReporting.serverItemSnapshotPayloadVersion,Re=async(e,t,n)=>{const r=(0,Se.Z)(e,300),i=[],s="snapshotsDecrypt";console.time(s);for(let s=0,o=r.length;s<o;s++){const o=r[s];if(!o)break;const a=Promise.all(o.map((async e=>t.decrypt(e))));i.push(...await a),n?.(300*s/e.length)}return console.timeEnd(s),i},Ee=(e,t)=>{if(!(0,R.vV)(e))return!0;if(0===t.length)return!1;const n=e.split("@");return!n[1]||t.includes(n[1].trim().toLowerCase())};var Ie=n(7581);const Ue=e=>{let t=e;return 1===e.split("://").length&&(t="https://"+t),t.toLowerCase()},Oe=e=>{const t=e.flatMap((e=>{const t=Ue(e);try{return new URL(t).host}catch{return}})).filter((e=>void 0!==e));return(0,Ie.Z)(t)},ke=e=>{const t=e.replace(/^\w+:\/\//,"");if(!t)return"";try{return new URL(`https://${t}`).hostname.replace(/^www\./,"")}catch{return""}},De=(e,t)=>{if(0===t.length)return!1;const n=e.username?e.username.value:"";if(!n)return!1;const r=n.split("@");return!!r[1]&&!t.includes(r[1].trim().toLowerCase())};var Me=n(74150),Fe=n(5119),_e=n(14502),Ke=n(16586);class Ne{constructor(){this._events={}}emit(e,...t){const n=this._events["~"+e];return!!n&&(n.forEach((n=>{n.once&&this.off(e,n.fn,!0),n.fn(...t)})),!0)}on(e,t,n=!1){const r={fn:t,once:n},i="~"+e,s=this._events[i];return s?s.push(r):this._events[i]=[r],this}off(e,t,n=!1){const r="~"+e,i=this._events[r];if(!i)return this;const s=i.filter((e=>e.fn!==t||n&&!e.once));return s.length>0?this._events[r]=s:delete this._events[r],this}removeAllListeners(e){return e?delete this._events["~"+e]:this._events={},this}}var Ve=n(35914);const Be="TopBarContentChanged",Le="SpecialNavChanged",xe="UniverseReloaded",Ge="ClientStateChanged",Ze="ServerChanged",je="ServerConnected",Ye="ServerChangedWithData",He="LanguageRefreshed",We="UsersChanged",$e="ServerChangedFromSelf",Je="SessionInitialized",qe="SessionInitError",ze="SessionRequestIdChanged",Xe="ReloadForced",Qe="SessionExpired",et="SignedIn",tt="SignedOut",nt="TimeoutWarning",rt="RecoveryStarted";var it=n(49825),st=n(72504);const ot=6,at=30,ut=()=>ie.codec.base32.fromBits((0,a.g4)((0,_e.getRandomBytes)(10)))},2039:function(e,t,n){n.d(t,{R:function(){return i},T:function(){return r}});const r={ad:"🇦🇩",ae:"🇦🇪",af:"🇦🇫",ag:"🇦🇬",ai:"🇦🇮",al:"🇦🇱",am:"🇦🇲",ao:"🇦🇴",aq:"🇦🇶",ar:"🇦🇷",as:"🇦🇸",at:"🇦🇹",au:"🇦🇺",aw:"🇦🇼",ax:"🇦🇽",az:"🇦🇿",ba:"🇧🇦",bb:"🇧🇧",bd:"🇧🇩",be:"🇧🇪",bf:"🇧🇫",bg:"🇧🇬",bh:"🇧🇭",bi:"🇧🇮",bj:"🇧🇯",bl:"🇧🇱",bm:"🇧🇲",bn:"🇧🇳",bo:"🇧🇴",bq:"🇧🇶",br:"🇧🇷",bs:"🇧🇸",bt:"🇧🇹",bv:"🇧🇻",bw:"🇧🇼",by:"🇧🇾",bz:"🇧🇿",ca:"🇨🇦",cc:"🇨🇨",cd:"🇨🇩",cf:"🇨🇫",cg:"🇨🇬",ch:"🇨🇭",ci:"🇨🇮",ck:"🇨🇰",cl:"🇨🇱",cm:"🇨🇲",cn:"🇨🇳",co:"🇨🇴",cr:"🇨🇷",cu:"🇨🇺",cv:"🇨🇻",cw:"🇨🇼",cx:"🇨🇽",cy:"🇨🇾",cz:"🇨🇿",de:"🇩🇪",dj:"🇩🇯",dk:"🇩🇰",dm:"🇩🇲",do:"🇩🇴",dz:"🇩🇿",ec:"🇪🇨",ee:"🇪🇪",eg:"🇪🇬",eh:"🇪🇭",er:"🇪🇷",es:"🇪🇸",et:"🇪🇹",eu:"🇪🇺",fi:"🇫🇮",fj:"🇫🇯",fk:"🇫🇰",fm:"🇫🇲",fo:"🇫🇴",fr:"🇫🇷",ga:"🇬🇦",gb:"🇬🇧",gd:"🇬🇩",ge:"🇬🇪",gf:"🇬🇫",gg:"🇬🇬",gh:"🇬🇭",gi:"🇬🇮",gl:"🇬🇱",gm:"🇬🇲",gn:"🇬🇳",gp:"🇬🇵",gq:"🇬🇶",gr:"🇬🇷",gs:"🇬🇸",gt:"🇬🇹",gu:"🇬🇺",gw:"🇬🇼",gy:"🇬🇾",hk:"🇭🇰",hm:"🇭🇲",hn:"🇭🇳",hr:"🇭🇷",ht:"🇭🇹",hu:"🇭🇺",id:"🇮🇩",ie:"🇮🇪",il:"🇮🇱",im:"🇮🇲",in:"🇮🇳",io:"🇮🇴",iq:"🇮🇶",ir:"🇮🇷",is:"🇮🇸",it:"🇮🇹",je:"🇯🇪",jm:"🇯🇲",jo:"🇯🇴",jp:"🇯🇵",ke:"🇰🇪",kg:"🇰🇬",kh:"🇰🇭",ki:"🇰🇮",km:"🇰🇲",kn:"🇰🇳",kp:"🇰🇵",kr:"🇰🇷",kw:"🇰🇼",ky:"🇰🇾",kz:"🇰🇿",la:"🇱🇦",lb:"🇱🇧",lc:"🇱🇨",li:"🇱🇮",lk:"🇱🇰",lr:"🇱🇷",ls:"🇱🇸",lt:"🇱🇹",lu:"🇱🇺",lv:"🇱🇻",ly:"🇱🇾",ma:"🇲🇦",mc:"🇲🇨",md:"🇲🇩",me:"🇲🇪",mf:"🇲🇫",mg:"🇲🇬",mh:"🇲🇭",mk:"🇲🇰",ml:"🇲🇱",mm:"🇲🇲",mn:"🇲🇳",mo:"🇲🇴",mp:"🇲🇵",mq:"🇲🇶",mr:"🇲🇷",ms:"🇲🇸",mt:"🇲🇹",mu:"🇲🇺",mv:"🇲🇻",mw:"🇲🇼",mx:"🇲🇽",my:"🇲🇾",mz:"🇲🇿",na:"🇳🇦",nc:"🇳🇨",ne:"🇳🇪",nf:"🇳🇫",ng:"🇳🇬",ni:"🇳🇮",nl:"🇳🇱",no:"🇳🇴",np:"🇳🇵",nr:"🇳🇷",nu:"🇳🇺",nz:"🇳🇿",om:"🇴🇲",pa:"🇵🇦",pe:"🇵🇪",pf:"🇵🇫",pg:"🇵🇬",ph:"🇵🇭",pk:"🇵🇰",pl:"🇵🇱",pm:"🇵🇲",pn:"🇵🇳",pr:"🇵🇷",ps:"🇵🇸",pt:"🇵🇹",pw:"🇵🇼",py:"🇵🇾",qa:"🇶🇦",re:"🇷🇪",ro:"🇷🇴",rs:"🇷🇸",ru:"🇷🇺",rw:"🇷🇼",sa:"🇸🇦",sb:"🇸🇧",sc:"🇸🇨",sd:"🇸🇩",se:"🇸🇪",sg:"🇸🇬",sh:"🇸🇭",si:"🇸🇮",sj:"🇸🇯",sk:"🇸🇰",sl:"🇸🇱",sm:"🇸🇲",sn:"🇸🇳",so:"🇸🇴",sr:"🇸🇷",ss:"🇸🇸",st:"🇸🇹",sv:"🇸🇻",sx:"🇸🇽",sy:"🇸🇾",sz:"🇸🇿",tc:"🇹🇨",td:"🇹🇩",tf:"🇹🇫",tg:"🇹🇬",th:"🇹🇭",tj:"🇹🇯",tk:"🇹🇰",tl:"🇹🇱",tm:"🇹🇲",tn:"🇹🇳",to:"🇹🇴",tr:"🇹🇷",tt:"🇹🇹",tv:"🇹🇻",tw:"🇹🇼",tz:"🇹🇿",ua:"🇺🇦",ug:"🇺🇬",uk:"🇬🇧",um:"🇺🇲",us:"🇺🇸",uy:"🇺🇾",uz:"🇺🇿",va:"🇻🇦",vc:"🇻🇨",ve:"🇻🇪",vg:"🇻🇬",vi:"🇻🇮",vn:"🇻🇳",vu:"🇻🇺",wf:"🇼🇫",ws:"🇼🇸",xk:"🇽🇰",ye:"🇾🇪",yt:"🇾🇹",za:"🇿🇦",zm:"🇿🇲",zw:"🇿🇼"},i={Default:{City:"City/Town/Suburb",Country:"Country",COUNTRY:"Country",EDIT_FORMAT:"Street\nCity State\nZIP Country",EDIT_WEIGHTS:{City:"0.5",ZIP:"0.5"},FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{State:{caps:"All",fmt:"Alpha",suggest:"never"}},PHONETIC_COUNTRY:"Phonetic Country",State:"State/Province",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"ZIP/Postal Code"},ad:{City:"City",Country:"Country",COUNTRY:"Andorra",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Andorra",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ae:{City:"City",Country:"Country",COUNTRY:"United Arab Emirates",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic United Arab Emirates",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},af:{City:"City",Country:"Country",COUNTRY:"Afghanistan",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Afghanistan",Street:"Street",URL_FORMAT:"Street, City, Country"},ag:{City:"City",Country:"Country",COUNTRY:"Antigua and Barbuda",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Antigua and Barbuda",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ai:{City:"City",Country:"Country",COUNTRY:"Anguilla",EDIT_FORMAT:"Street\nCity\nZIP Country",FORMAT:"Street\nCity\nZIP Country",PHONETIC_COUNTRY:"Phonetic Anguilla",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},al:{City:"City",Country:"Country",COUNTRY:"Albania",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Albania",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},am:{City:"City",Country:"Country",COUNTRY:"Armenia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Armenia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ao:{City:"City",Country:"Country",COUNTRY:"Angola",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Angola",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ar:{City:"City",Country:"Country",COUNTRY:"Argentina",EDIT_FORMAT:"Street\nZIP City\nState\nCountry",FORMAT:"Street\nZIP City\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Argentina",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},as:{City:"City",Country:"Country",COUNTRY:"American Samoa",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic American Samoa",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},at:{City:"City",Country:"Country",COUNTRY:"Austria",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Austria",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},au:{City:"Suburb",Country:"Country",COUNTRY:"Australia",EDIT_FORMAT:"Street\nCity State\nZIP Country",FORMAT:"Street\nCity State ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Australia",State:"State",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},aw:{City:"City",Country:"Country",COUNTRY:"Aruba",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Aruba",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ax:{City:"City",Country:"Country",COUNTRY:"Åland Islands",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Åland Islands",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},az:{City:"City",Country:"Country",COUNTRY:"Azerbaijan",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Azerbaijan",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ba:{City:"City",Country:"Country",COUNTRY:"Bosnia and Herzegovina",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Bosnia and Herzegovina",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},bb:{City:"City",Country:"Country",COUNTRY:"Barbados",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Barbados",State:"Province",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},bd:{City:"City",Country:"Country",COUNTRY:"Bangladesh",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Bangladesh",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},be:{City:"City",Country:"Country",COUNTRY:"Belgium",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Belgium",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},bf:{City:"City",Country:"Country",COUNTRY:"Burkina Faso",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Burkina Faso",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},bg:{City:"City",Country:"Country",COUNTRY:"Bulgaria",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Bulgaria",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},bh:{City:"City",Country:"Country",COUNTRY:"Bahrain",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Bahrain",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},bi:{City:"City",Country:"Country",COUNTRY:"Burundi",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Burundi",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},bj:{City:"City",Country:"Country",COUNTRY:"Benin",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Benin",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},bl:{City:"City",Country:"Country",COUNTRY:"Saint Barthélemy",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Barthélemy",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},bm:{City:"City",Country:"Country",COUNTRY:"Bermuda",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Bermuda",State:"Province",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},bn:{City:"City",Country:"Country",COUNTRY:"Brunei Darussalam",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Brunei Darussalam",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},bo:{City:"City",Country:"Country",COUNTRY:"Bolivia",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Bolivia",State:"Province",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},br:{City:"City",Country:"Country",COUNTRY:"Brazil",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Brazil",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"ZIP"},bs:{City:"City",Country:"Country",COUNTRY:"The Bahamas",EDIT_FORMAT:"Street\nCity State\nCountry",FORMAT:"Street\nCity State\nCountry",PHONETIC_COUNTRY:"Phonetic The Bahamas",State:"Island Name",Street:"Street",URL_FORMAT:"Street, City, State, Country",ZIP:"PostalCode"},bt:{City:"City",Country:"Country",COUNTRY:"Bhutan",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Bhutan",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},bw:{City:"City",Country:"Country",COUNTRY:"Botswana",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Botswana",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},by:{City:"City",Country:"Country",COUNTRY:"Belarus",EDIT_FORMAT:"Street\nZIP City\nState\nCountry",FORMAT:"Street\nZIP City\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Belarus",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},bz:{City:"City",Country:"Country",COUNTRY:"Belize",EDIT_FORMAT:"Street\nCity\nState\nCountry",FORMAT:"Street\nCity\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Belize",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, Country",ZIP:"PostalCode"},ca:{City:"City",Country:"Country",COUNTRY:"Canada",EDIT_FORMAT:"Street\nCity State\nZIP Country",FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{ZIP:{caps:"All",fmt:"Alpha"}},PHONETIC_COUNTRY:"Phonetic Canada",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},cc:{City:"Suburb",Country:"Country",COUNTRY:"Cocos Islands",EDIT_FORMAT:"Street\nCity State\nZIP Country",FORMAT:"Street\nCity State ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Cocos Islands",State:"State",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},cd:{City:"City",Country:"Country",COUNTRY:"Democratic Republic of the Congo",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Democratic Republic of the Congo",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},cf:{City:"City",Country:"Country",COUNTRY:"Central African Republic",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Central African Republic",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},cg:{City:"City",Country:"Country",COUNTRY:"Republic of the Congo",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Republic of the Congo",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ch:{City:"City",Country:"Country",COUNTRY:"Switzerland",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Switzerland",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ci:{City:"City",Country:"Country",COUNTRY:"Côte d’Ivoire",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Côte d’Ivoire",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ck:{City:"City",Country:"Country",COUNTRY:"Cook Islands",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Cook Islands",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},cl:{City:"City",Country:"Country",COUNTRY:"Chile",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Chile",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},cm:{City:"City",Country:"Country",COUNTRY:"Cameroon",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Cameroon",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},cn:{City:"City",Country:"Country",COUNTRY:"China",EDIT_FORMAT:"Country\nState City\nStreet\nZIP",FORMAT:"Country\nState City\nStreet\nZIP",PHONETIC_COUNTRY:"Phonetic China",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, Country",ZIP:"PostalCode"},co:{City:"City",Country:"Country",COUNTRY:"Colombia",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Colombia",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},cr:{City:"City",Country:"Country",COUNTRY:"Costa Rica",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Costa Rica",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},cu:{City:"City",Country:"Country",COUNTRY:"Cuba",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Cuba",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},cv:{City:"City",Country:"Country",COUNTRY:"Cape Verde",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Cape Verde",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},cw:{City:"City",Country:"Country",COUNTRY:"Curaçao",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Curaçao",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},cx:{City:"Suburb",Country:"Country",COUNTRY:"Christmas Island",EDIT_FORMAT:"Street\nCity State\nZIP Country",FORMAT:"Street\nCity State ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Christmas Island",State:"State",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},cy:{City:"City",Country:"Country",COUNTRY:"Cyprus",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Cyprus",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},cz:{City:"City",Country:"Country",COUNTRY:"Czech Republic",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Czech Republic",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},de:{City:"City",Country:"Country",COUNTRY:"Germany",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Germany",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},dj:{City:"City",Country:"Country",COUNTRY:"Djibouti",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Djibouti",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},dk:{City:"City",Country:"Country",COUNTRY:"Denmark",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Denmark",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},dm:{City:"City",Country:"Country",COUNTRY:"Dominica",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Dominica",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},do:{City:"City",Country:"Country",COUNTRY:"Dominican Republic",EDIT_FORMAT:"Street\nState\nZIP City\nCountry",FORMAT:"Street\nState\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Dominican Republic",State:"PostalDistrict",Street:"Street",URL_FORMAT:"Street, State, ZIP, City, Country",ZIP:"PostalCode"},dz:{City:"City",Country:"Country",COUNTRY:"Algeria",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Algeria",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ec:{City:"City",Country:"Country",COUNTRY:"Ecuador",EDIT_FORMAT:"Street\nZIP\nCity\nCountry",FORMAT:"Street\nZIP\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Ecuador",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ee:{City:"City",Country:"Country",COUNTRY:"Estonia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Estonia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},eg:{City:"Governorate",Country:"Country",COUNTRY:"Egypt",EDIT_FORMAT:"Street\nState\nCity\nCountry",FORMAT:"Street\nState\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Egypt",State:"District",Street:"Street",URL_FORMAT:"Street, State, City, Country"},eh:{City:"City",Country:"Country",COUNTRY:"Western Sahara",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Western Sahara",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},er:{City:"City",Country:"Country",COUNTRY:"Eritrea",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Eritrea",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},es:{City:"City",Country:"Country",COUNTRY:"Spain",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Spain",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},et:{City:"City",Country:"Country",COUNTRY:"Ethiopia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Ethiopia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},fi:{City:"City",Country:"Country",COUNTRY:"Finland",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Finland",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},fj:{City:"City",Country:"Country",COUNTRY:"Fiji",EDIT_FORMAT:"Street\nState\nCity\nCountry",FORMAT:"Street\nState\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Fiji",State:"PostalDistrict",Street:"Street",URL_FORMAT:"Street, State, City, Country",ZIP:"PostalCode"},fk:{City:"City",Country:"Country",COUNTRY:"Falkland Islands",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Falkland Islands",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},fm:{City:"City",Country:"Country",COUNTRY:"Micronesia",EDIT_FORMAT:"Street\nCity State\nZIP Country",EDIT_WEIGHTS:{City:"0.5",ZIP:"0.5"},FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{State:{caps:"All",fmt:"Alpha",suggest:"never"}},PHONETIC_COUNTRY:"Phonetic Micronesia",State:"State",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"ZIP"},fo:{City:"City",Country:"Country",COUNTRY:"Faroe Islands",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Faroe Islands",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},fr:{City:"City",Country:"Country",COUNTRY:"France",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic France",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ga:{City:"City",Country:"Country",COUNTRY:"Gabon",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Gabon",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gb:{City:"City",Country:"Country",COUNTRY:"United Kingdom",EDIT_FORMAT:"Street\nCity\nState\nZIP\nCountry",FORMAT:"Street\nCity\nState\nZIP\nCountry",kbdSettings:{ZIP:{caps:"All",fmt:"Alpha"}},PHONETIC_COUNTRY:"Phonetic United Kingdom",State:"County",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"Postcode"},gd:{City:"City",Country:"Country",COUNTRY:"Grenada",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Grenada",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ge:{City:"City",Country:"Country",COUNTRY:"Georgia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Georgia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gf:{City:"City",Country:"Country",COUNTRY:"French Guiana",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic French Guiana",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gg:{City:"City",Country:"Country",COUNTRY:"Guernsey",EDIT_FORMAT:"Street\nCity\nState\nZIP\nCountry",FORMAT:"Street\nCity\nState\nZIP\nCountry",kbdSettings:{ZIP:{caps:"All",fmt:"Alpha"}},PHONETIC_COUNTRY:"Phonetic Guernsey",State:"County",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"Postcode"},gh:{City:"City",Country:"Country",COUNTRY:"Ghana",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Ghana",Street:"Street",URL_FORMAT:"Street, City, Country"},gi:{City:"City",Country:"Country",COUNTRY:"Gibraltar",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Gibraltar",Street:"Street",URL_FORMAT:"Street, City, Country"},gl:{City:"PostalDistrict",Country:"Country",COUNTRY:"Greenland",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Greenland",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gm:{City:"City",Country:"Country",COUNTRY:"The Gambia",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic The Gambia",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},gn:{City:"City",Country:"Country",COUNTRY:"Guinea",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Guinea",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gp:{City:"City",Country:"Country",COUNTRY:"Guadeloupe",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Guadeloupe",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gq:{City:"City",Country:"Country",COUNTRY:"Equatorial Guinea",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Equatorial Guinea",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},gr:{City:"City",Country:"Country",COUNTRY:"Greece",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Greece",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gs:{City:"City",Country:"Country",COUNTRY:"South Georgia and South Sandwich Islands",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic South Georgia and South Sandwich Islands",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},gt:{City:"City",Country:"Country",COUNTRY:"Guatemala",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Guatemala",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gu:{City:"City",Country:"Country",COUNTRY:"Guam",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Guam",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},gw:{City:"City",Country:"Country",COUNTRY:"Guinea-Bissau",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Guinea-Bissau",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},gy:{City:"City",Country:"Country",COUNTRY:"Guyana",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Guyana",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},hk:{City:"City",Country:"Country",COUNTRY:"Hong Kong",EDIT_FORMAT:"Country\nZIP City\nStreet",FORMAT:"Country\nZIP City\nStreet",PHONETIC_COUNTRY:"Phonetic Hong Kong",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"District"},hn:{City:"City",Country:"Country",COUNTRY:"Honduras",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Honduras",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},hr:{City:"City",Country:"Country",COUNTRY:"Croatia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Croatia",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ht:{City:"City",Country:"Country",COUNTRY:"Haiti",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Haiti",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},hu:{City:"City",Country:"Country",COUNTRY:"Hungary",EDIT_FORMAT:"ZIP City\nStreet\nCountry",FORMAT:"ZIP City\nStreet\nCountry",PHONETIC_COUNTRY:"Phonetic Hungary",Street:"Street",URL_FORMAT:"ZIP, City, Street, Country",ZIP:"PostalCode"},id:{City:"City",Country:"Country",COUNTRY:"Indonesia",EDIT_FORMAT:"Street\nCity\nState ZIP\nCountry",FORMAT:"Street\nCity\nState ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Indonesia",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},ie:{City:"City",Country:"Country",COUNTRY:"Ireland",EDIT_FORMAT:"Street\nCity State\nZIP Country",FORMAT:"Street\nCity State ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Ireland",State:"County",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},il:{City:"City",Country:"Country",COUNTRY:"Israel",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Israel",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},im:{City:"City",Country:"Country",COUNTRY:"Isle of Man",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Isle of Man",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},in:{City:"City",Country:"Country",COUNTRY:"India",EDIT_FORMAT:"Street\nState\nCity ZIP\nCountry",FORMAT:"Street\nState\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic India",State:"Province",Street:"Street",URL_FORMAT:"Street, State, City ZIP, Country",ZIP:"PINCode"},iq:{City:"City",Country:"Country",COUNTRY:"Iraq",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Iraq",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},ir:{City:"City",Country:"Country",COUNTRY:"Iran",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Iran",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},is:{City:"City",Country:"Country",COUNTRY:"Iceland",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Iceland",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},it:{City:"City",Country:"Country",COUNTRY:"Italy",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Italy",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},je:{City:"City",Country:"Country",COUNTRY:"Jersey",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Jersey",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},jm:{City:"City",Country:"Country",COUNTRY:"Jamaica",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Jamaica",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},jo:{City:"City",Country:"Country",COUNTRY:"Jordan",EDIT_FORMAT:"Region\nState\nStreet\nCity ZIP\nCountry",FORMAT:"Region\nState\nStreet\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Jordan",Region:"Region",State:"PostalDistrict",Street:"Street",URL_FORMAT:"Region, State, Street, City, ZIP, Country",ZIP:"PostalCode"},jp:{City:"County/City Japan",Country:"Country",COUNTRY:"Japan",EDIT_FORMAT:"ZIP\nState City\nStreet\nCountry",FORMAT:"ZIP\nState City\nStreet\nCountry",LABEL_FORMAT:"ZIP\nState City\nStreet\nCountry\nName Sama",PHONETIC_COUNTRY:"Phonetic Japan",Sama:"様",State:"Prefecture",Street:"Further Divisions",URL_FORMAT:"ZIP, State, City, Street, Country",ZIP:"PostalCode"},ke:{City:"City",Country:"Country",COUNTRY:"Kenya",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Kenya",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},kg:{City:"City",Country:"Country",COUNTRY:"Kyrgyzstan",EDIT_FORMAT:"ZIP City\nStreet\nCountry",FORMAT:"ZIP City\nStreet\nCountry",PHONETIC_COUNTRY:"Phonetic Kyrgyzstan",State:"State",Street:"Street",URL_FORMAT:"ZIP, City, Street, Country",ZIP:"PostalCode"},kh:{City:"City",Country:"Country",COUNTRY:"Cambodia",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Cambodia",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},ki:{City:"City",Country:"Country",COUNTRY:"Kiribati",EDIT_FORMAT:"Street\nCity\nState\nCountry",FORMAT:"Street\nCity\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Kiribati",State:"Island Name",Street:"Street",URL_FORMAT:"Street, City, State, Country",ZIP:"PostalCode"},km:{City:"City",Country:"Country",COUNTRY:"Comoros",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Comoros",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},kn:{City:"City",Country:"Country",COUNTRY:"Saint Kitts and Nevis",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Kitts and Nevis",State:"Island Name",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},kp:{City:"City",Country:"Country",COUNTRY:"North Korea",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic North Korea",State:"Province",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},kr:{City:"City",Country:"Country",COUNTRY:"South Korea",EDIT_FORMAT:"ZIP\nCountry\nState City\nStreet",FORMAT:"ZIP\nCountry\nState City\nStreet",PHONETIC_COUNTRY:"Phonetic South Korea",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},kw:{City:"City",Country:"Country",COUNTRY:"Kuwait",EDIT_FORMAT:"Street\nZIP City\nState\nCountry",FORMAT:"Street\nZIP City\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Kuwait",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},ky:{City:"City",Country:"Country",COUNTRY:"Cayman Islands",EDIT_FORMAT:"Street\nState\nCountry",FORMAT:"Street\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Cayman Islands",State:"Island Name",Street:"Street",URL_FORMAT:"Street, State, Country",ZIP:"PostalCode"},kz:{City:"City",Country:"Country",COUNTRY:"Kazakhstan",EDIT_FORMAT:"Street\nCity State\nRegion\nCountry\nZIP",FORMAT:"Street\nCity State\nRegion\nCountry\nZIP",PHONETIC_COUNTRY:"Phonetic Kazakhstan",Region:"Province",State:"PostalDistrict",Street:"Street",URL_FORMAT:"Street, City, State, Region, ZIP, Country",ZIP:"PostalCode"},la:{City:"City",Country:"Country",COUNTRY:"Laos",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Laos",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},lb:{City:"City",Country:"Country",COUNTRY:"Lebanon",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Lebanon",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},lc:{City:"City",Country:"Country",COUNTRY:"Saint Lucia",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Lucia",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},li:{City:"City",Country:"Country",COUNTRY:"Liechtenstein",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Liechtenstein",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},lk:{City:"City",Country:"Country",COUNTRY:"Sri Lanka",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Sri Lanka",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},lr:{City:"City",Country:"Country",COUNTRY:"Liberia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Liberia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ls:{City:"City",Country:"Country",COUNTRY:"Lesotho",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Lesotho",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},lt:{City:"City",Country:"Country",COUNTRY:"Lithuania",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Lithuania",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},lu:{City:"City",Country:"Country",COUNTRY:"Luxembourg",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Luxembourg",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},lv:{City:"City",Country:"Country",COUNTRY:"Latvia",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Latvia",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},ly:{City:"City",Country:"Country",COUNTRY:"Libya",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Libya",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ma:{City:"City",Country:"Country",COUNTRY:"Morocco",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Morocco",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mc:{City:"City",Country:"Country",COUNTRY:"Monaco",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Monaco",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},md:{City:"City",Country:"Country",COUNTRY:"Moldova",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Moldova",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},me:{City:"City",Country:"Country",COUNTRY:"Montenegro",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Montenegro",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mf:{City:"City",Country:"Country",COUNTRY:"Saint Martin",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Martin",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mg:{City:"City",Country:"Country",COUNTRY:"Madagascar",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Madagascar",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mh:{City:"City",Country:"Country",COUNTRY:"Marshall Islands",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Marshall Islands",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mk:{City:"City",Country:"Country",COUNTRY:"Macedonia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Macedonia",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ml:{City:"City",Country:"Country",COUNTRY:"Mali",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Mali",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},mm:{City:"City",Country:"Country",COUNTRY:"Myanmar",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Myanmar",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},mn:{City:"City",Country:"Country",COUNTRY:"Mongolia",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Mongolia",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},mo:{City:"City",Country:"Country",COUNTRY:"Macau",EDIT_FORMAT:"Country\nZIP City\nStreet",FORMAT:"Country\nZIP City\nStreet",PHONETIC_COUNTRY:"Phonetic Macau",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"District"},mp:{City:"City",Country:"Country",COUNTRY:"Northern Mariana Islands",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Northern Mariana Islands",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},mq:{City:"City",Country:"Country",COUNTRY:"Martinique",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Martinique",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mr:{City:"City",Country:"Country",COUNTRY:"Mauritania",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Mauritania",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ms:{City:"City",Country:"Country",COUNTRY:"Montserrat",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Montserrat",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},mt:{City:"City",Country:"Country",COUNTRY:"Malta",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Malta",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},mu:{City:"City",Country:"Country",COUNTRY:"Mauritius",EDIT_FORMAT:"Street\nZIP\nCity\nCountry",FORMAT:"Street\nZIP\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Mauritius",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},mv:{City:"City",Country:"Country",COUNTRY:"Maldives",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Maldives",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},mw:{City:"City",Country:"Country",COUNTRY:"Malawi",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Malawi",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},mx:{City:"City",Country:"Country",COUNTRY:"Mexico",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Mexico",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},my:{City:"City",Country:"Country",COUNTRY:"Malaysia",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Malaysia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},mz:{City:"City",Country:"Country",COUNTRY:"Mozambique",EDIT_FORMAT:"Street\nZIP City\nState\nCountry",FORMAT:"Street\nZIP City\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Mozambique",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},na:{City:"City",Country:"Country",COUNTRY:"Namibia",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Namibia",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},nc:{City:"City",Country:"Country",COUNTRY:"New Caledonia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic New Caledonia",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ne:{City:"City",Country:"Country",COUNTRY:"Niger",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Niger",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},nf:{City:"City",Country:"Country",COUNTRY:"Norfolk Island",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Norfolk Island",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},ng:{City:"City",Country:"Country",COUNTRY:"Nigeria",EDIT_FORMAT:"Street\nCity ZIP\nState\nCountry",FORMAT:"Street\nCity ZIP\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Nigeria",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, State, Country",ZIP:"PostalCode"},ni:{City:"City",Country:"Country",COUNTRY:"Nicaragua",EDIT_FORMAT:"Street\nZIP\nCity State\nCountry",FORMAT:"Street\nZIP\nCity State\nCountry",PHONETIC_COUNTRY:"Phonetic Nicaragua",State:"Department",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},nl:{City:"City",Country:"Country",COUNTRY:"Netherlands",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Netherlands",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},no:{City:"City",Country:"Country",COUNTRY:"Norway",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Norway",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},np:{City:"City",Country:"Country",COUNTRY:"Nepal",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Nepal",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},nr:{City:"City",Country:"Country",COUNTRY:"Nauru",EDIT_FORMAT:"Street\nCity State\nCountry",FORMAT:"Street\nCity State\nCountry",PHONETIC_COUNTRY:"Phonetic Nauru",State:"District",Street:"Street",URL_FORMAT:"Street, City, State, Country",ZIP:"PostalCode"},nu:{City:"City",Country:"Country",COUNTRY:"Niue",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Niue",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},nz:{City:"City",Country:"Country",COUNTRY:"New Zealand",EDIT_FORMAT:"Street\nState\nCity ZIP\nCountry",FORMAT:"Street\nState\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic New Zealand",State:"Suburb",Street:"Street",URL_FORMAT:"Street, State, City, ZIP, Country",ZIP:"PostalCode"},om:{City:"City",Country:"Country",COUNTRY:"Oman",EDIT_FORMAT:"Street\nZIP\nCity\nState\nCountry",FORMAT:"Street\nZIP\nCity\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Oman",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},pa:{City:"City",Country:"Country",COUNTRY:"Panama",EDIT_FORMAT:"Street\nZIP City\nState\nCountry",FORMAT:"Street\nZIP City\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Panama",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},pe:{City:"City",Country:"Country",COUNTRY:"Peru",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Peru",State:"Province",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},pf:{City:"City",Country:"Country",COUNTRY:"French Polynesia",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic French Polynesia",State:"Island Name",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},pg:{City:"City",Country:"Country",COUNTRY:"Papua New Guinea",EDIT_FORMAT:"Street\nCity ZIP\nState Country",FORMAT:"Street\nCity ZIP State\nCountry",PHONETIC_COUNTRY:"Phonetic Papua New Guinea",State:"Province",Street:"Street",URL_FORMAT:"Street, City, ZIP, State, Country",ZIP:"PostalCode"},ph:{City:"City",Country:"Country",COUNTRY:"Philippines",EDIT_FORMAT:"Street\nState ZIP\nCity Country",FORMAT:"Street State\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Philippines",State:"District/Subdivision",Street:"Street",URL_FORMAT:"Street, State, ZIP, City, Country",ZIP:"Postcode"},pk:{City:"City",Country:"Country",COUNTRY:"Pakistan",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Pakistan",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},pl:{City:"City",Country:"Country",COUNTRY:"Poland",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Poland",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},pm:{City:"City",Country:"Country",COUNTRY:"Saint Pierre and Miquelon",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Pierre and Miquelon",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},pn:{City:"City",Country:"Country",COUNTRY:"Pitcairn",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Pitcairn",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},pr:{City:"City",Country:"Country",COUNTRY:"Puerto Rico",EDIT_FORMAT:"Street\nCity State\nZIP Country",EDIT_WEIGHTS:{City:"0.5",ZIP:"0.5"},FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{State:{caps:"All",fmt:"Alpha",suggest:"never"}},PHONETIC_COUNTRY:"Phonetic Puerto Rico",State:"State",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"ZIP"},ps:{City:"City",Country:"Country",COUNTRY:"Palestinian Territories",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Palestinian Territories",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},pt:{City:"City",Country:"Country",COUNTRY:"Portugal",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Portugal",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},pw:{City:"City",Country:"Country",COUNTRY:"Palau",EDIT_FORMAT:"Street\nCity State\nZIP Country",EDIT_WEIGHTS:{City:"0.5",ZIP:"0.5"},FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{State:{caps:"All",fmt:"Alpha",suggest:"never"}},PHONETIC_COUNTRY:"Phonetic Palau",State:"State",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"ZIP"},py:{City:"City",Country:"Country",COUNTRY:"Paraguay",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Paraguay",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},qa:{City:"City",Country:"Country",COUNTRY:"Qatar",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Qatar",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},re:{City:"City",Country:"Country",COUNTRY:"Réunion",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Réunion",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ro:{City:"City",Country:"Country",COUNTRY:"Romania",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Romania",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},rs:{City:"City",Country:"Country",COUNTRY:"Serbia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Serbia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ru:{City:"City/Region",Country:"Country",COUNTRY:"Russia",EDIT_FORMAT:"Street\nCity\nState\nCountry\nZIP",FORMAT:"Street\nCity\nState\nCountry\nZIP",PHONETIC_COUNTRY:"Phonetic Russia",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, Country, ZIP",ZIP:"PostalCode"},rw:{City:"City",Country:"Country",COUNTRY:"Rwanda",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Rwanda",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},sa:{City:"City",Country:"Country",COUNTRY:"Saudi Arabia",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Saudi Arabia",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},sb:{City:"City",Country:"Country",COUNTRY:"Solomon Islands",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Solomon Islands",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},sc:{City:"City",Country:"Country",COUNTRY:"Seychelles",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Seychelles",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},sd:{City:"City",Country:"Country",COUNTRY:"Sudan",EDIT_FORMAT:"Street\nZIP\nCity\nCountry",FORMAT:"Street\nZIP\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Sudan",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},se:{City:"City",Country:"Country",COUNTRY:"Sweden",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Sweden",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},sg:{City:"City",Country:"Country",COUNTRY:"Singapore",EDIT_FORMAT:"Street\nCity ZIP\nCountry",FORMAT:"Street\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Singapore",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},sh:{City:"City",Country:"Country",COUNTRY:"Saint Helena",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Helena",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},si:{City:"City",Country:"Country",COUNTRY:"Slovenia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Slovenia",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},sj:{City:"City",Country:"Country",COUNTRY:"Svalbard and Jan Mayen",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Svalbard and Jan Mayen",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},sk:{City:"City",Country:"Country",COUNTRY:"Slovakia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Slovakia",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},sl:{City:"City",Country:"Country",COUNTRY:"Sierra Leone",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Sierra Leone",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},sm:{City:"City",Country:"Country",COUNTRY:"San Marino",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic San Marino",State:"Province",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},sn:{City:"City",Country:"Country",COUNTRY:"Senegal",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Senegal",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},so:{City:"City",Country:"Country",COUNTRY:"Somalia",EDIT_FORMAT:"Street\nCity State\nZIP Country",FORMAT:"Street\nCity State  ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Somalia",State:"Region",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},sr:{City:"City",Country:"Country",COUNTRY:"Suriname",EDIT_FORMAT:"Street\nCity\nState\nCountry",FORMAT:"Street\nCity\nState\nCountry",PHONETIC_COUNTRY:"Phonetic Suriname",State:"PostalDistrict",Street:"Street",URL_FORMAT:"Street, City, State, Country",ZIP:"PostalCode"},ss:{City:"City",Country:"Country",COUNTRY:"South Sudan",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic South Sudan",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},st:{City:"City",Country:"Country",COUNTRY:"Sao Tome and Principe",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Sao Tome and Principe",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},sv:{City:"City",Country:"Country",COUNTRY:"El Salvador",EDIT_FORMAT:"Street\nZIP City\nState\nCountry",FORMAT:"Street\nZIP City\nState\nCountry",PHONETIC_COUNTRY:"Phonetic El Salvador",State:"Department",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},sx:{City:"City",Country:"Country",COUNTRY:"Sint Maarten",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Sint Maarten",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},sy:{City:"City",Country:"Country",COUNTRY:"Syria",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Syria",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},sz:{City:"City",Country:"Country",COUNTRY:"Swaziland",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Swaziland",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},tc:{City:"City",Country:"Country",COUNTRY:"Turks and Caicos Islands",EDIT_FORMAT:"Street\nCity\nZIP\nCountry",FORMAT:"Street\nCity\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Turks and Caicos Islands",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},td:{City:"City",Country:"Country",COUNTRY:"Chad",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Chad",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},tg:{City:"City",Country:"Country",COUNTRY:"Togo",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Togo",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},th:{City:"Province",Country:"Country",COUNTRY:"Thailand",EDIT_FORMAT:"Street\nState\nCity ZIP\nCountry",FORMAT:"Street\nState\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Thailand",State:"District/Subdivision",Street:"Street",URL_FORMAT:"Street, State, City, ZIP, Country",ZIP:"PostalCode"},tj:{City:"City",Country:"Country",COUNTRY:"Tajikistan",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Tajikistan",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},tk:{City:"City",Country:"Country",COUNTRY:"Tokelau",EDIT_FORMAT:"Street\nState\nCity ZIP\nCountry",FORMAT:"Street\nState\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Tokelau",State:"Suburb",Street:"Street",URL_FORMAT:"Street, State, City, ZIP, Country",ZIP:"PostalCode"},tl:{City:"City",Country:"Country",COUNTRY:"Timor-Leste",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Timor-Leste",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},tm:{City:"City",Country:"Country",COUNTRY:"Turkmenistan",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Turkmenistan",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},tn:{City:"City",Country:"Country",COUNTRY:"Tunisia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Tunisia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},to:{City:"City",Country:"Country",COUNTRY:"Tonga",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Tonga",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},tr:{City:"City",Country:"Country",COUNTRY:"Turkey",EDIT_FORMAT:"Street\nZIP State\n City Country",FORMAT:"Street\nZIP State\n City Country",PHONETIC_COUNTRY:"Phonetic Turkey",State:"District",Street:"Street",URL_FORMAT:"Street, ZIP, State, City, Country",ZIP:"PostalCode"},tt:{City:"City",Country:"Country",COUNTRY:"Trinidad and Tobago",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Trinidad and Tobago",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},tv:{City:"City",Country:"Country",COUNTRY:"Tuvalu",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Tuvalu",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},tw:{City:"Township/District",Country:"Country",COUNTRY:"Taiwan",EDIT_FORMAT:"Country\nZIP\nState\nCity\nStreet",FORMAT:"Country\nZIP State City\nStreet",PHONETIC_COUNTRY:"Phonetic Taiwan",State:"County/City Taiwan",Street:"Street",URL_FORMAT:"Country,ZIP,State,City,Street",ZIP:"ZIP"},tz:{City:"City",Country:"Country",COUNTRY:"Tanzania",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Tanzania",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ua:{City:"City",Country:"Country",COUNTRY:"Ukraine",EDIT_FORMAT:"Street\nCity\nRegion State\nZIP\nCountry",EDIT_WEIGHTS:{Region:"0.4"},FORMAT:"Street\nCity Region State\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Ukraine",Region:"PostalDistrict",State:"Province",Street:"Street",URL_FORMAT:"Street, City, Region, State, ZIP, Country",ZIP:"PostalCode"},ug:{City:"City",Country:"Country",COUNTRY:"Uganda",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Uganda",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},uk:{City:"City",Country:"Country",COUNTRY:"United Kingdom",EDIT_FORMAT:"Street\nCity\nState\nZIP\nCountry",FORMAT:"Street\nCity\nState\nZIP\nCountry",kbdSettings:{ZIP:{caps:"All",fmt:"Alpha"}},PHONETIC_COUNTRY:"Phonetic United Kingdom",State:"County",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"Postcode"},us:{City:"City",Country:"Country",COUNTRY:"United States",EDIT_FORMAT:"Street\nCity State\nZIP Country",EDIT_WEIGHTS:{City:"0.5",ZIP:"0.5"},FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{State:{caps:"All",fmt:"Alpha",suggest:"never"}},PHONETIC_COUNTRY:"Phonetic United States",State:"State",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"ZIP"},uy:{City:"City",Country:"Country",COUNTRY:"Uruguay",EDIT_FORMAT:"Street\nZIP City\nState Country",FORMAT:"Street\nZIP City State\nCountry",PHONETIC_COUNTRY:"Phonetic Uruguay",State:"GeographicalDepartment",Street:"Street",URL_FORMAT:"Street, ZIP, City, State, Country",ZIP:"PostalCode"},uz:{City:"City",Country:"Country",COUNTRY:"Uzbekistan",EDIT_FORMAT:"Street\nCity\nCountry\nZIP",FORMAT:"Street\nCity\nCountry\nZIP",PHONETIC_COUNTRY:"Phonetic Uzbekistan",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, Country",ZIP:"PostalCode"},va:{City:"City",Country:"Country",COUNTRY:"Vatican",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Vatican",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},vc:{City:"City",Country:"Country",COUNTRY:"Saint Vincent and the Grenadines",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Saint Vincent and the Grenadines",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ve:{City:"City",Country:"Country",COUNTRY:"Venezuela",EDIT_FORMAT:"Street\nCity ZIP\nState Country",FORMAT:"Street\nCity ZIP State\nCountry",PHONETIC_COUNTRY:"Phonetic Venezuela",State:"State",Street:"Street",URL_FORMAT:"Street, City, ZIP, State, Country",ZIP:"PostalCode"},vg:{City:"City",Country:"Country",COUNTRY:"British Virgin Islands",EDIT_FORMAT:"Street\nCity ZIP\nState Country",FORMAT:"Street\nCity ZIP State\nCountry",PHONETIC_COUNTRY:"Phonetic British Virgin Islands",State:"Island Name",Street:"Street",URL_FORMAT:"Street, City, ZIP, State, Country",ZIP:"PostalCode"},vi:{City:"City",Country:"Country",COUNTRY:"U.S. Virgin Islands",EDIT_FORMAT:"Street\nCity State\nZIP Country",EDIT_WEIGHTS:{City:"0.5",ZIP:"0.5"},FORMAT:"Street\nCity State ZIP\nCountry",kbdSettings:{State:{caps:"All",fmt:"Alpha",suggest:"never"}},PHONETIC_COUNTRY:"Phonetic U.S. Virgin Islands",State:"State",Street:"Street",STREET_NUMBER_BEFORE_NAME:"YES",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"ZIP"},vn:{City:"City",Country:"Country",COUNTRY:"Vietnam",EDIT_FORMAT:"Street\nState\nCity ZIP\nCountry",FORMAT:"Street\nState\nCity ZIP\nCountry",PHONETIC_COUNTRY:"Phonetic Vietnam",State:"Province",Street:"Street",URL_FORMAT:"Street, State, City, ZIP, Country",ZIP:"PostalCode"},vu:{City:"City",Country:"Country",COUNTRY:"Vanuatu",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Vanuatu",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},wf:{City:"City",Country:"Country",COUNTRY:"Wallis and Futuna",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Wallis and Futuna",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},ws:{City:"City",Country:"Country",COUNTRY:"Samoa",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Samoa",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},xk:{City:"City",Country:"Country",COUNTRY:"Kosovo",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Kosovo",State:"District",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"},ye:{City:"City",Country:"Country",COUNTRY:"Yemen",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Yemen",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},yt:{City:"City",Country:"Country",COUNTRY:"Mayotte",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Mayotte",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},za:{City:"City",Country:"Country",COUNTRY:"South Africa",EDIT_FORMAT:"Street\nCity\nState\nZIP\nCountry",FORMAT:"Street\nCity\nState\nZIP\nCountry",PHONETIC_COUNTRY:"Phonetic South Africa",State:"Province",Street:"Street",URL_FORMAT:"Street, City, State, ZIP, Country",ZIP:"PostalCode"},zm:{City:"City",Country:"Country",COUNTRY:"Zambia",EDIT_FORMAT:"Street\nZIP City\nCountry",FORMAT:"Street\nZIP City\nCountry",PHONETIC_COUNTRY:"Phonetic Zambia",State:"State",Street:"Street",URL_FORMAT:"Street, ZIP, City, Country",ZIP:"PostalCode"},zw:{City:"City",Country:"Country",COUNTRY:"Zimbabwe",EDIT_FORMAT:"Street\nCity\nCountry",FORMAT:"Street\nCity\nCountry",PHONETIC_COUNTRY:"Phonetic Zimbabwe",State:"State",Street:"Street",URL_FORMAT:"Street, City, Country",ZIP:"PostalCode"}}},35914:function(e,t,n){n.r(t),n.d(t,{L:function(){return c},LoggableString:function(){return o},LoggableStringC:function(){return d},assertLogSafe:function(){return u},assertLogSafeNum:function(){return l},joinLogsafe:function(){return a}});var r,i=n(69243);const s=Symbol();class o{constructor(e){this[r]=0,this.toString=()=>this.str,this.toJSON=()=>this.str,this.loggableString=()=>this,this.replace=(e,t)=>u(this.str.replace(e,t.str)),this.concat=e=>u(this.str+e.str),this.str=e}}r=s,o.assertLogSafe=e=>new o(e);const a=(e,t)=>u(e.map((e=>e.str)).join(t?.str)),u=o.assertLogSafe,c=(e,...t)=>a(e.flatMap(((e,n)=>{const r=t[n];return void 0!==r?[u(e),r]:[u(e)]})),u("")),l=e=>u(e.toString(10)),d=new i.Type("LoggableString",(e=>e instanceof o),((e,t)=>e instanceof o?i.success(e):i.failure(e,t,"cannot decode unknown value to LoggableString")),(e=>e.str))},23428:function(e,t,n){n.d(t,{$y:function(){return i},Fb:function(){return c},HF:function(){return s}});var r=n(38002);const i=e=>async(t,n)=>Promise.resolve().then(n).catch((0,r.P)(e,t)),s=async(e,t,n=0)=>{const r=e.join("#"),i=a[r];if(i?.promise&&o(i,n))return i.promise;const s=Promise.resolve().then(t);return a[r]={promise:s,timeFinished:1/0},s.then((e=>(u(r),e)),(e=>{throw u(r),e}))},o=(e,t)=>Date.now()-e.timeFinished<t,a={},u=e=>{const t=a[e];t&&(t.timeFinished=Date.now())},c=(e,t=5e3,n,r)=>{let i;const s=new Promise(((e,s)=>{i=globalThis.setTimeout((()=>{console.warn("Promise timed out."+(n?` ${n}`:"")),s(r)}),t)}));return Promise.race([e,s]).finally((()=>clearTimeout(i)))}},21328:function(e,t,n){n.d(t,{E:function(){return r}});const r=e=>!!e&&encodeURIComponent(e).length>150},61279:function(e,t,n){n.d(t,{Cv:function(){return Fe},D:function(){return Z},Dc:function(){return oe},El:function(){return de},Fq:function(){return h},Fr:function(){return Pe},GW:function(){return ue},HY:function(){return ae},Hj:function(){return he},Hv:function(){return V},Jl:function(){return Q},Jm:function(){return Ke},Kk:function(){return G},NA:function(){return R},O7:function(){return w},Oo:function(){return C},Pr:function(){return k},Pz:function(){return U},S5:function(){return ge},SS:function(){return _},Tg:function(){return pe},VY:function(){return se},Vo:function(){return M},WA:function(){return ve},WX:function(){return T},X3:function(){return _e},Xc:function(){return D},YM:function(){return ee},_5:function(){return Se},_v:function(){return le},aC:function(){return F},aw:function(){return W},cH:function(){return A},eM:function(){return I},ef:function(){return x},ep:function(){return B},gT:function(){return De},gq:function(){return Ae},hK:function(){return fe},hS:function(){return q},jV:function(){return P},jz:function(){return Me},kO:function(){return ye},kt:function(){return Ne},lX:function(){return z},lx:function(){return Ie},mD:function(){return Te},mL:function(){return re},mu:function(){return S},oA:function(){return O},pB:function(){return ce},pI:function(){return b},pJ:function(){return Ee},pZ:function(){return Re},qG:function(){return be},qh:function(){return $},qv:function(){return X},ru:function(){return me},s7:function(){return v},tN:function(){return H},tS:function(){return E},uJ:function(){return te},up:function(){return Y},uv:function(){return we},vA:function(){return K},vE:function(){return Oe},vV:function(){return J},vc:function(){return Ce},vo:function(){return Ue},yT:function(){return ie},zC:function(){return N}});var r=n(79792),i=n(1166),s=n(62323),o=n(75869),a=n(99942),u=n(48583),c=n(55130),l=n(98064),d=n(61320),y=n.n(d),p=n(39722),m=n(81959),f=n(2039),g=n(7327);const h=60,v=64,C=64,A=100,w=32,S=5,T=3,P=/\W|_/g,b=60,R=255,E=26,I=!1,U=e=>JSON.stringify(e)||typeof e,O=i.Z,k=(e,t)=>e.filter((e=>!!e&&t(e))),D=(e,t,n)=>(0,s.Z)(n,((n,r,i)=>({...n,[e(r,i)]:t(r,i)})),{}),M=(...e)=>e.reduce(((e,t)=>"string"!=typeof t||0===t.length?e:0===e.length?t:(0,o.Z)(e,"/")&&(0,a.Z)(t,"/")?e+t.slice(1):(0,o.Z)(e,"/")||(0,a.Z)(t,"/")?e+t:e+"/"+t),""),F=(e,t,n)=>{if(t<0||t>=e.length)throw new Error("moveArrayItem: currentIndex out of bounds");if(n<0||n>=e.length)throw new Error("moveArrayItem: newIndex out of bounds");return t===n?e.slice():e.map(((r,i)=>i===n?e[t]:t<=i&&i<n?e[i+1]:n<i&&i<=t?e[i-1]:r))},_=e=>e?e.trim().normalize("NFKD"):"",K=e=>{if(0===e.length)return"";const t=p.hash.sha256.hash(e);return p.codec.base64url.fromBits(t).replace(/=+$/,"")},N=async e=>new Promise(((t,n)=>{const r=new FileReader;r.onloadend=()=>{const e=r.result;if("string"!=typeof e)return void n(new Error("Invalid FileReader result."));const i="data:attachment/file"+e.slice(e.search(/[,;]/));t(i)},r.readAsDataURL(e)})),V=e=>{const t=e.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(t);return e.reduce(((e,t)=>(n.set(t,e),e+t.byteLength)),0),n},B=(e,t)=>e.trim().toLowerCase()+":"+t,L=(e,t)=>new p.misc.hmac(e,p.hash.sha256).encrypt(t),x=(e,t)=>{const n=p.codec.hex.toBits(e),r=p.codec.hex.toBits(t),i=L(n,r);return p.codec.hex.fromBits(i)},G=(e,t)=>{const n=p.codec.base64url.toBits(e),r=p.codec.utf8String.toBits(t),i=L(n,r);return new p.misc.hmac(i,p.hash.sha256)},Z=(e,t)=>{if(32!==e.byteLength)throw new Error("Invalid secret length: "+e.byteLength);const n=p.codec.bytes.toBits(e),r=p.codec.utf8String.toBits(t),i=p.codec.bytes.fromBits(L(n,r));return new Uint8Array(i)},j=e=>p.codec.base32.fromBits(e,!0).slice(0,E),Y=e=>j(e).toLowerCase(),H=e=>Y(p.codec.bytes.toBits(e)),W=e=>j(p.hash.sha256.hash(e.toLowerCase())),$=e=>"number"==typeof e&&!Number.isNaN(e),J=e=>{if(!e)return!1;if(e.length<6)return!1;if(e.length>255)return!1;const t=e.trim().split("@"),n=t[1];return 2===t.length&&/^[\w'+-]([\w'+.-]*[\w'+-])?@\w([\w.-]*\w)?\.[A-Za-z]{2,20}$/.test(e)&&void 0!==n&&q(n)},q=e=>/^([\da-z]([\da-z-]*[\da-z])?\.)+[\da-z]{2,}$/i.test(e),z=e=>{const t=(0,a.Z)(e,"*.")?e.slice(2):e;return q(t)},X=e=>/^[2-7A-Z]{13}$/.test(e),Q=20,ee=e=>/^[\dA-Z]{1,11}(-[\dA-Z]{8})?$/.test(e),te=e=>/^[\dA-Z]{26}$/.test(e),ne=["B","I","A","W","M","C","P","T"],re=e=>(0,u.Z)(ne,e),ie=e=>e!==m.W.Web&&e!==m.W.MobileWeb&&e!==m.W.ThirdParty,se=e=>/^\d{6}$/.test(e),oe=async e=>new Promise((t=>{setTimeout(t,e)})),ae=async(e,t)=>(await oe(e),t),ue=()=>{let e,t,n=r.YP,i=r.YP;const s=()=>(0,r.pC)(n)?"Promise was already resolved":(0,r.pC)(i)?"Promise was already rejected":void 0,o=new Promise(((o,a)=>{e=e=>{const t=s();return t||(n=(0,r.G)(e),o(e)),t},t=e=>{const t=s();return t||(i=(0,r.G)(e),a(e)),t}}));if(!e||!t)throw new Error("CallbackPromise functions were not initialized");return{resolve:e,reject:t,promise:o}},ce=async(e,t,n)=>(0,c.Z)(n,t).reduce((async(t,n)=>t.then((async t=>[...t,...await e(n)]))),Promise.resolve([])),le=async(e,t,n)=>ce((async t=>Promise.all(t.map(e))),t,n),de=async(e,t)=>{const n=[];for(let r=0;r<t;r++)n.push(await e());return n},ye=e=>e?e.split(",").map((e=>e.trim())).filter((e=>""!==e)):[],pe=(e,t)=>{if(!e)return"";const n=t?", ":",";return ye(e).join(n)},me=e=>e.toLowerCase().replace(/\s/g,""),fe=e=>e instanceof Date?e.valueOf():"string"==typeof e?y()(e).valueOf():0,ge=e=>(e||(e="Default"),f.R[e.toLowerCase()]||f.R.Default),he=()=>Object.keys(f.R).slice(1),ve=e=>ge(e).COUNTRY,Ce=he().filter((e=>"uk"!==e)).map((e=>({code:e,name:ve(e).replace("The ","")}))).sort((({name:e},{name:t})=>(0,g.A5)(e,t))),Ae=["cu","ir","kp","sy","ru","xk","by"],we=Ce.filter((e=>!(0,u.Z)(Ae,e.code))),Se=()=>navigator.userAgent.includes("Mac OS X")?"⌘":"ctrl",Te=e=>e&&e.includes(".")?(0,l.Z)(e.split("."))?.toLowerCase()??"":"",Pe=/["%;<>[\\\]{}]/g,be=/\/{2,}/g,Re=e=>e?e.replace(Pe,"").replace(be,"/"):"",Ee=async e=>new Promise(((t,n)=>{const r=new FileReader;r.addEventListener("load",(()=>{r.result&&"object"==typeof r.result&&"byteLength"in r.result?(console.log("Read file (%d bytes)",r.result.byteLength),t(r.result)):n(new Error("Invalid FileReader result."))})),r.addEventListener("error",(()=>{n(r.error)})),r.readAsArrayBuffer(e)})),Ie=e=>{let t=e.trim().toLowerCase().replace(/^https:\/\//,"").replace(/\.1password\.com(.*)/,"").replace(/\s+/g,"-").replace(/[^\da-z-]/g,"").replace(/-+/g,"-");return t.length>w&&(t=t.slice(0,w)),t},Ue=e=>Re(e).slice(0,h),Oe=(e,t)=>{if(!e)return"";if(!t)return e;const n=new RegExp("[^"+t+"]","g");return e.replace(n,"")},ke=/[\d+.A-Za-z-]+/,De=e=>new RegExp("^"+ke.source+":").test(e)?e:"https://"+e,Me=e=>{if(!e)return"";const t=e.split(".");return!t||t.length<2?"":t.slice(1).join(".")};var Fe;!function(e){e.US="us",e.CA="ca",e.EU="eu",e.ES="es"}(Fe||(Fe={}));const _e=["as","gu","mh","mp","fm","pw","pr","vi"],Ke=e=>{if(!e)return Fe.US;const t=e.split(".");if(!t||t.length<2)return Fe.US;let n=t[t.length-1];if(void 0!==n&&(0,u.Z)(n,":")){const[e]=n.split(":");void 0!==e&&(n=e)}return"com"===n?Fe.US:n},Ne=(e,t,n)=>e>t&&e<=n},79795:function(e,t,n){n.d(t,{CZ:function(){return l},D9:function(){return o},GF:function(){return a},Xe:function(){return u},v_:function(){return c}});var r=n(62323),i=n(14502),s=n(61279);const o=e=>{const t=(0,i.getRandomBytes)(e||4);return(0,s.tN)(t)},a=e=>{if(0===e.length)throw new Error("selectRandomElement: Cannot select element of empty array");return e[c(0,e.length-1)]},u=(e=.5)=>l(2)/65536<e,c=(e,t)=>{if("number"!=typeof t||"number"!=typeof e)throw new TypeError("Boundaries must be defined");if(t<e)throw new Error("Upper boundary cannot be less than lower boundary");if(t===e)return e;const n=t-e+1,r=Math.ceil(Math.log(n)/Math.log(2)/8);if(r>6||t>9007199254740991||e<-9007199254740991)throw new Error("Boundaries are too large for JavaScript");const s=256**r,o=s-s%n,a=new Uint8Array(r);let u;do{u=d((0,i.getRandomValues)(a))}while(u>=o);const c=u%n+e;if(c<e||t<c)throw new Error("Somehow managed to generate a result out of range");return c},l=e=>{if(e>6||e<1)throw new Error("Byte length must be in [1, 6]");return d((0,i.getRandomBytes)(e))},d=e=>(0,r.Z)(e,((e,t,n)=>e+t*256**n),0)},81567:function(e,t,n){n.d(t,{Uo:function(){return s},cn:function(){return a},iA:function(){return i},ok:function(){return o}});var r=n(8404);class i{get message(){return this.msg.str}constructor(e){this.name="LoggableTypeError",this.toString=()=>this.name+": "+this.message,this.msg=e}}const s=(e,t)=>(0,r.nM)(e)?a(e.left,t):o(e.right),o=e=>({type:"ok",value:e,unwrap:()=>e}),a=(e,t)=>({type:"err",value:e,unwrap:()=>{throw t?t(e):e}})},49825:function(e,t,n){n.r(t),n.d(t,{primesAreReversed:function(){return s},swapPrimes:function(){return a},swapPrimesIfNeeded:function(){return o}});var r=n(35567),i=n(39722);const s=e=>u(e.p).compareTo(u(e.q))<0,o=e=>s(e)?a(e):e,a=e=>({...e,p:e.q,q:e.p,dp:e.dq,dq:e.dp,qi:c(e.q,e.p)}),u=e=>{const t=i.codec.hex.fromBits(i.codec.base64url.toBits(e));return new r.BigInteger(t,16)},c=(e,t)=>(e=>{const t=e.toString(16),n=t.length%2==1?"0"+t:t;return i.codec.base64url.fromBits(i.codec.hex.toBits(n))})(u(t).modInverse(u(e)))},72504:function(e,t,n){n.r(t),n.d(t,{SecurePathReporter:function(){return u},stringify:function(){return s}});var r=n(8404),i=n(35914);const s=e=>"function"==typeof e?e.displayName||e.name||`<function ${e.length}>`:"number"!=typeof e||Number.isFinite(e)?null===e?"null":void 0===e?"undefined":"object"==typeof e&&Array.isArray(e)?"(type: array)":`(type: ${typeof e})`:Number.isNaN(e)?"NaN":e>0?"Infinity":"-Infinity",o=e=>{return i.L`Invalid value ${(0,i.assertLogSafe)(s(e.value))} supplied to ${(0,i.assertLogSafe)((t=e.context,t.map((({key:e,type:t})=>e+": "+t.name)).join("/")))}`;var t},a=e=>e.map(o),u={report:(0,r.g_)(a,(()=>[i.L`No errors!`])),reportFailure:a}},46203:function(e,t,n){n.r(t),n.d(t,{ExceptionType:function(){return r},assertLogSafeAndNormalizeDevice:function(){return p},init:function(){return h},isInitialized:function(){return v},reportError:function(){return y},reportErrors:function(){return m}});var r,i=n(27942),s=n(82308),o=n(31644),a=n(26170),u=n(19559),c=n(5119),l=n(35914),d=n(79795);!function(e){e.ContextError=l.L`ContextError`,e.RequestError=l.L`RequestError`,e.ValidationError=l.L`ValidationError`}(r||(r={}));const y=e=>{if(!g)return;if(void 0!==e.sampleRate&&!(0,d.Xe)(e.sampleRate))return;const t=(0,c.getDevice)();i.$e((n=>{const r=(0,u.Z)({},t?p(t):{},e.metaData??{});for(const[e,t]of Object.entries(r))n.setContext(e,t);if(e.severityLevel&&n.setLevel(e.severityLevel),e.userUuid&&n.setUser({id:e.userUuid.str}),f&&n.setTag("source",f),e.tags)for(const[t,r]of Object.entries(e.tags))n.setTag(t,r.str);i.Tb(e)}))},p=e=>{const t="MacOSX"===e.osName?"macOS":e.osName;return{app:{device_app_hash:(0,l.assertLogSafe)(e.uuid??""),app_name:(0,l.assertLogSafe)(e.clientName??""),app_build:(0,l.assertLogSafe)(e.clientVersion??"")},browser:{name:(0,l.assertLogSafe)(e.name??""),version:(0,l.assertLogSafe)(e.model??"")},os:{name:(0,l.assertLogSafe)(t??""),version:(0,l.assertLogSafe)(e.osVersion??"")}}},m=e=>{for(const t of e)y(t)};let f,g=!1;const h=({appVersion:e,dsn:t,environment:n,sampleRate:r=1,source:i})=>{s.S1({defaultIntegrations:!1,sendDefaultPii:!1,autoSessionTracking:!1,dsn:t,environment:n,integrations:[o.RH(),a.C()],release:e,sampleRate:r}),f=i,g=!0},v=()=>g},7327:function(e,t,n){n.d(t,{A5:function(){return y},C4:function(){return p},C9:function(){return a},OJ:function(){return u},aN:function(){return m},qu:function(){return h},zE:function(){return o}});var r=n(98698),i=n(61320),s=n.n(i);const o=(...e)=>(0,r.Z)(e,((e,t)=>(n,r)=>t(n,r)||e(n,r)),((e,t)=>0)),a=e=>t=>(n,r)=>e(t(n),t(r)),u=(e,t=!0)=>t?e:c(e),c=e=>(t,n)=>e(n,t),l=(e=0,t=0)=>e-t,d=(e=!1,t=!1)=>e===t?0:e?1:-1,y=(e="",t="")=>e.localeCompare(t,void 0,{numeric:!0}),p="0001-01-01T00:00:00Z",m=(e=new Date(p),t=new Date(p))=>e.getTime()-t.getTime(),f=(e=p,t=p)=>g(e).diff(g(t)),g=(e=p)=>{const t=s()(e);return t.isValid()?t:s()(p)},h={booleans:a(d),dates:a(m),moments:a(f),numbers:a(l),strings:a(y),desc:{booleans:a(c(d)),dates:a(c(m)),moments:a(c(f)),numbers:a(c(l)),strings:a(c(y))}}},95743:function(e,t,n){n.d(t,{Hj:function(){return r.Hj},ID:function(){return r.ID},KN:function(){return i},N6:function(){return r.N6},Wc:function(){return r.Wc},hX:function(){return r.hX}});var r=n(9658);const i=(e,t)=>!!t&&"❗️ LastPass Imported Shared Folders Metadata"===e}}]);